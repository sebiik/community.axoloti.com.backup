<patch-1.0 appVersion="1.0.12">
   <comment type="patch/comment" x="1064" y="28" text="*******presets*********************************************************************"/>
   <comment type="patch/comment" x="868" y="42" text="ext clock start/stop"/>
   <patchobj type="patch/object" uuid="a5bf2867-0af9-4a43-ac6f-11d7b4744554" name="clock_rx_2" x="868" y="56">
      <params/>
      <attribs>
         <combo attributeName="device" selection="usb device port 1"/>
      </attribs>
      <object id="patch/object" uuid="a5bf2867-0af9-4a43-ac6f-11d7b4744554">
         <sDescription>MIDI clock receiver</sDescription>
         <author>Are Leistad</author>
         <license>BSD</license>
         <inlets/>
         <outlets>
            <bool32.pulse name="start" description="Pulse on start"/>
            <bool32.pulse name="stop" description="Pulse on stop"/>
         </outlets>
         <displays/>
         <params/>
         <attribs>
            <combo name="device">
               <MenuEntries>
                  <string>omni</string>
                  <string>din</string>
                  <string>usb host port 1</string>
                  <string>usb host port 2</string>
                  <string>usb host port 3</string>
                  <string>usb host port 4</string>
                  <string>internal port 1</string>
                  <string>internal port 2</string>
                  <string>usb device port 1</string>
               </MenuEntries>
               <CEntries>
                  <string>MIDI_DEVICE_OMNI, 0</string>
                  <string>MIDI_DEVICE_DIN, 1</string>
                  <string>MIDI_DEVICE_USB_HOST, 1</string>
                  <string>MIDI_DEVICE_USB_HOST, 2</string>
                  <string>MIDI_DEVICE_USB_HOST, 3</string>
                  <string>MIDI_DEVICE_USB_HOST, 4</string>
                  <string>MIDI_DEVICE_INTERNAL, 1</string>
                  <string>MIDI_DEVICE_INTERNAL, 2</string>
                  <string>MIDI_DEVICE_USB_DEVICE, 1</string>
               </CEntries>
            </combo>
         </attribs>
         <includes/>
         <code.declaration><![CDATA[uint32_t  pulse_start;
      uint32_t  pulse_stop;
      

      __attribute__ (( always_inline )) __STATIC_INLINE int midi_device_test( midi_device_t dev, uint8_t port, int selected_dev, uint8_t selected_port )
      {
        if(    (selected_dev == MIDI_DEVICE_OMNI)
            || (selected_dev == dev && selected_port == port)
            )
          return 1;
        return 0;
      }]]></code.declaration>
         <code.init><![CDATA[pulse_start     = 0;
      pulse_stop      = 0;]]></code.init>
         <code.krate><![CDATA[outlet_start    = pulse_start;
      outlet_stop     = pulse_stop;

      pulse_start     = 0;
      pulse_stop      = 0;]]></code.krate>
         <code.midihandler><![CDATA[if( midi_device_test( dev, port, attr_device ) == 1 )
        {
          if( status == MIDI_START )
            {
              pulse_start = 1;
            }
          else if( status == MIDI_STOP )
            {
              pulse_stop = 1;
            }
          
        }]]></code.midihandler>
      </object>
   </patchobj>
   <comment type="patch/comment" x="1190" y="56" text="select preset"/>
   <comment type="patch/comment" x="1078" y="70" text="load preset"/>
   <comment type="patch/comment" x="1190" y="70" text="0-100"/>
   <comment type="patch/comment" x="1274" y="70" text="save preset"/>
   <obj type="ctrl/button" uuid="ef3d13774349df85aa9bfecf30dbc91ab8488b3f" name="button_3" x="1078" y="84">
      <params>
         <bool32.mom name="b" value="0"/>
      </params>
      <attribs/>
   </obj>
   <obj type="ctrl/i" uuid="a3786816db6ea5bc6ac4193a5cccdb2c83b83496" name="i_11" x="1190" y="84">
      <params>
         <int32 name="value" value="0"/>
      </params>
      <attribs/>
   </obj>
   <obj type="ctrl/button" uuid="ef3d13774349df85aa9bfecf30dbc91ab8488b3f" name="button_5" x="1274" y="84">
      <params>
         <bool32.mom name="b" value="0"/>
      </params>
      <attribs/>
   </obj>
   <comment type="patch/comment" x="1358" y="84" text="loading presets doesn&apos;t update knobs!"/>
   <comment type="patch/comment" x="56" y="98" text="internal play"/>
   <comment type="patch/comment" x="140" y="98" text="internal clock - should automatically switch to midi clock when received on DIN  ********     (change device to whatever you are recieving clock from------&gt; )"/>
   <obj type="ctrl/button" uuid="ef3d13774349df85aa9bfecf30dbc91ab8488b3f" name="button_2" x="56" y="112">
      <params>
         <bool32.mom name="b" value="0"/>
      </params>
      <attribs/>
   </obj>
   <obj type="ctrl/dial b" uuid="862e7d7f29093cb1ce4aed72244d118ad4d46692" name="dial_5" x="140" y="112">
      <params>
         <frac32.s.map name="value" value="23.0"/>
      </params>
      <attribs/>
   </obj>
   <comment type="patch/comment" x="1358" y="126" text="store all presets to sdcard"/>
   <obj type="ctrl/button" uuid="ef3d13774349df85aa9bfecf30dbc91ab8488b3f" name="button_4" x="1358" y="140">
      <params>
         <bool32.mom name="b" value="0"/>
      </params>
      <attribs/>
   </obj>
   <comment type="patch/comment" x="1428" y="140" text="trigger this to make sure presets "/>
   <comment type="patch/comment" x="1428" y="154" text="are there after powercycle or unlive/live"/>
   <comment type="patch/comment" x="252" y="182" text="****mixer*************************************"/>
   <comment type="patch/comment" x="686" y="182" text="****** triggers ***********************************************************************************************"/>
   <comment type="patch/comment" x="252" y="210" text="dry  vol"/>
   <comment type="patch/comment" x="336" y="210" text="factotum vol"/>
   <comment type="patch/comment" x="434" y="210" text="duck dry when triggered"/>
   <comment type="patch/comment" x="812" y="210" text="set triggers for  repeats - set the factotum to trigger every X 16ths starting on Y 16th and ending on Z 16th"/>
   <obj type="ctrl/dial p" uuid="cc5d2846c3d50e425f450c4b9851371b54f4d674" name="dial_12" x="252" y="224">
      <params>
         <frac32.u.map name="value" value="64.0"/>
      </params>
      <attribs/>
   </obj>
   <obj type="ctrl/dial p" uuid="cc5d2846c3d50e425f450c4b9851371b54f4d674" name="dial_13" x="336" y="224">
      <params>
         <frac32.u.map name="value" value="20.5"/>
      </params>
      <attribs/>
   </obj>
   <comment type="patch/comment" x="812" y="224" text="so, if loop (X) = 16, trigger on (Y) = 8, and trigger off (Z) = 12, it should trigger every bar, starting on the eighth 16th if the bar and turning off on the twelth 16th of the bar."/>
   <comment type="patch/comment" x="434" y="238" text=" duck"/>
   <obj type="ctrl/toggle" uuid="42b8134fa729d54bfc8d62d6ef3fa99498c1de99" name="toggle_3" x="434" y="252">
      <params>
         <bool32.tgl name="b" value="1"/>
      </params>
      <attribs/>
   </obj>
   <comment type="patch/comment" x="812" y="252" text="...if you see what I mean"/>
   <comment type="patch/comment" x="686" y="280" text="manual trigger"/>
   <comment type="patch/comment" x="812" y="280" text="loop -trigger every X 16ths"/>
   <comment type="patch/comment" x="1050" y="280" text="trigger on y16th"/>
   <comment type="patch/comment" x="1162" y="280" text="trigger off z16th"/>
   <obj type="ctrl/button" uuid="ef3d13774349df85aa9bfecf30dbc91ab8488b3f" name="button_1" x="686" y="294">
      <params>
         <bool32.mom name="b" value="0"/>
      </params>
      <attribs/>
   </obj>
   <obj type="ctrl/i" uuid="a3786816db6ea5bc6ac4193a5cccdb2c83b83496" name="i_6" x="812" y="294">
      <params>
         <int32 name="value" value="16"/>
      </params>
      <attribs/>
   </obj>
   <obj type="ctrl/i" uuid="a3786816db6ea5bc6ac4193a5cccdb2c83b83496" name="i_1" x="1050" y="294">
      <params>
         <int32 name="value" value="4"/>
      </params>
      <attribs/>
   </obj>
   <obj type="ctrl/i" uuid="a3786816db6ea5bc6ac4193a5cccdb2c83b83496" name="i_2" x="1162" y="294">
      <params>
         <int32 name="value" value="8"/>
      </params>
      <attribs/>
   </obj>
   <comment type="patch/comment" x="1218" y="308" text="gets weird when Y and Z aren&apos;t within range of prev X loop  setting &lt;---"/>
   <comment type="patch/comment" x="140" y="322" text="************length**************"/>
   <comment type="patch/comment" x="140" y="336" text="length sets the length of the factotum recordings"/>
   <comment type="patch/comment" x="140" y="350" text="0-31 is unquantized ( good for grains)"/>
   <comment type="patch/comment" x="140" y="364" text="32-64 is quantized in 16ths. 32 = 1x16th, 64 = 16x16ths (1 bar)"/>
   <comment type="patch/comment" x="140" y="392" text=" length"/>
   <comment type="patch/comment" x="490" y="392" text="****** speed/pitch/stretch settings ********"/>
   <comment type="patch/comment" x="826" y="392" text="***** vca envelope *****"/>
   <comment type="patch/comment" x="1050" y="392" text="****** lo pass filter *****"/>
   <comment type="patch/comment" x="1300" y="396" text="hi pass "/>
   <obj type="ctrl/dial p" uuid="cc5d2846c3d50e425f450c4b9851371b54f4d674" name="dial_1" x="140" y="406">
      <params>
         <frac32.u.map name="value" value="32.0"/>
      </params>
      <attribs/>
   </obj>
   <comment type="patch/comment" x="490" y="420" text="rate"/>
   <comment type="patch/comment" x="616" y="420" text="pitch octave"/>
   <comment type="patch/comment" x="700" y="420" text="stretch"/>
   <comment type="patch/comment" x="826" y="420" text="fade in"/>
   <comment type="patch/comment" x="910" y="420" text="release"/>
   <comment type="patch/comment" x="1050" y="420" text="filter cutoff"/>
   <comment type="patch/comment" x="1134" y="420" text="filter resonance"/>
   <comment type="patch/comment" x="1302" y="420" text="cutoff"/>
   <comment type="patch/comment" x="1456" y="420" text="overwrite (overdub?)"/>
   <obj type="ctrl/dial b" uuid="862e7d7f29093cb1ce4aed72244d118ad4d46692" name="dial_7" x="490" y="434">
      <params>
         <frac32.s.map name="value" value="64.0"/>
      </params>
      <attribs/>
   </obj>
   <obj type="ctrl/dial p" uuid="cc5d2846c3d50e425f450c4b9851371b54f4d674" name="dial_3" x="616" y="434">
      <params>
         <frac32.u.map name="value" value="32.0"/>
      </params>
      <attribs/>
   </obj>
   <obj type="ctrl/dial p" uuid="cc5d2846c3d50e425f450c4b9851371b54f4d674" name="dial_4" x="700" y="434">
      <params>
         <frac32.u.map name="value" value="32.0"/>
      </params>
      <attribs/>
   </obj>
   <obj type="ctrl/dial p" uuid="cc5d2846c3d50e425f450c4b9851371b54f4d674" name="dial_6" x="826" y="434">
      <params>
         <frac32.u.map name="value" value="0.0"/>
      </params>
      <attribs/>
   </obj>
   <obj type="ctrl/dial p" uuid="cc5d2846c3d50e425f450c4b9851371b54f4d674" name="dial_2" x="910" y="434">
      <params>
         <frac32.u.map name="value" value="0.0"/>
      </params>
      <attribs/>
   </obj>
   <obj type="ctrl/dial p" uuid="cc5d2846c3d50e425f450c4b9851371b54f4d674" name="dial_10" x="1050" y="434">
      <params>
         <frac32.u.map name="value" value="62.0"/>
      </params>
      <attribs/>
   </obj>
   <obj type="ctrl/dial p" uuid="cc5d2846c3d50e425f450c4b9851371b54f4d674" name="dial_11" x="1134" y="434">
      <params>
         <frac32.u.map name="value" value="0.0"/>
      </params>
      <attribs/>
   </obj>
   <obj type="ctrl/dial p" uuid="cc5d2846c3d50e425f450c4b9851371b54f4d674" name="dial_21" x="1302" y="434">
      <params>
         <frac32.u.map name="value" value="0.0"/>
      </params>
      <attribs/>
   </obj>
   <obj type="ctrl/toggle" uuid="42b8134fa729d54bfc8d62d6ef3fa99498c1de99" name="toggle_2" x="1456" y="434">
      <params>
         <bool32.tgl name="b" value="0"/>
      </params>
      <attribs/>
   </obj>
   <comment type="patch/comment" x="574" y="518" text="0 = 2octaves down, 32 = 0, 64 = 2octaves up"/>
   <comment type="patch/comment" x="126" y="560" text="******* mod envelope ********"/>
   <comment type="patch/comment" x="714" y="560" text="********** polyphony ********"/>
   <comment type="patch/comment" x="126" y="588" text="env time"/>
   <comment type="patch/comment" x="238" y="588" text="pitch env dpth"/>
   <comment type="patch/comment" x="336" y="588" text="stretch env depth"/>
   <comment type="patch/comment" x="448" y="588" text=" filter env depth"/>
   <comment type="patch/comment" x="700" y="588" text="number of voices"/>
   <comment type="patch/comment" x="854" y="588" text="set the variation in "/>
   <comment type="patch/comment" x="1008" y="588" text="set the variation in "/>
   <obj type="ctrl/dial p" uuid="cc5d2846c3d50e425f450c4b9851371b54f4d674" name="dial_9" x="126" y="602">
      <params>
         <frac32.u.map name="value" value="48.0"/>
      </params>
      <attribs/>
   </obj>
   <obj type="ctrl/dial b" uuid="862e7d7f29093cb1ce4aed72244d118ad4d46692" name="dial_19" x="252" y="602">
      <params>
         <frac32.s.map name="value" value="0.0"/>
      </params>
      <attribs/>
   </obj>
   <obj type="ctrl/dial b" uuid="862e7d7f29093cb1ce4aed72244d118ad4d46692" name="dial_17" x="336" y="602">
      <params>
         <frac32.s.map name="value" value="0.0"/>
      </params>
      <attribs/>
   </obj>
   <obj type="ctrl/dial b" uuid="862e7d7f29093cb1ce4aed72244d118ad4d46692" name="dial_18" x="448" y="602">
      <params>
         <frac32.s.map name="value" value="0.0"/>
      </params>
      <attribs/>
   </obj>
   <comment type="patch/comment" x="700" y="602" text="up to 6"/>
   <comment type="patch/comment" x="854" y="602" text="pitch/stretch settings "/>
   <comment type="patch/comment" x="1008" y="602" text="filter cutoff"/>
   <comment type="patch/comment" x="854" y="616" text="for each voice"/>
   <comment type="patch/comment" x="1008" y="616" text="for each voice"/>
   <comment type="patch/comment" x="1190" y="616" text="use these to change the range of the previous knobs "/>
   <comment type="patch/comment" x="700" y="630" text="polyphony (0-5)"/>
   <obj type="ctrl/i" uuid="a3786816db6ea5bc6ac4193a5cccdb2c83b83496" name="i_7" x="700" y="644">
      <params>
         <int32 name="value" value="5"/>
      </params>
      <attribs/>
   </obj>
   <comment type="patch/comment" x="854" y="644" text="super poly spread!"/>
   <comment type="patch/comment" x="1008" y="644" text="filter poly spread"/>
   <comment type="patch/comment" x="1190" y="644" text="super poly spread range"/>
   <comment type="patch/comment" x="1330" y="644" text="filter poly spread range"/>
   <obj type="ctrl/dial p" uuid="cc5d2846c3d50e425f450c4b9851371b54f4d674" name="dial_14" x="868" y="658">
      <params>
         <frac32.u.map name="value" value="0.0"/>
      </params>
      <attribs/>
   </obj>
   <obj type="ctrl/dial p" uuid="cc5d2846c3d50e425f450c4b9851371b54f4d674" name="dial_20" x="1008" y="658">
      <params>
         <frac32.u.map name="value" value="0.0"/>
      </params>
      <attribs/>
   </obj>
   <obj type="ctrl/dial p" uuid="cc5d2846c3d50e425f450c4b9851371b54f4d674" name="dial_15" x="1190" y="658">
      <params>
         <frac32.u.map name="value" value="0.5"/>
      </params>
      <attribs/>
   </obj>
   <obj type="ctrl/dial p" uuid="cc5d2846c3d50e425f450c4b9851371b54f4d674" name="dial_16" x="1330" y="658">
      <params>
         <frac32.u.map name="value" value="59.0"/>
      </params>
      <attribs/>
   </obj>
   <obj type="timer/pulselength" uuid="ca68725237d8ba8407773340801660a9fd9b0dba" name="pulselength_1" x="1568" y="770">
      <params>
         <frac32.s.map name="delay" value="-7.0"/>
      </params>
      <attribs/>
   </obj>
   <comment type="patch/comment" x="196" y="812" text="*********** store controls to table for presets, then send to inputs **********************************"/>
   <comment type="patch/comment" x="1012" y="812" text="current settings *******************************"/>
   <comment type="patch/comment" x="1302" y="812" text="preset storage*****************"/>
   <obj type="const/i" uuid="e202f44b2df17ae0b3e663b98ea6b14c8ff00408" name="i_4" x="294" y="826">
      <params/>
      <attribs>
         <spinner attributeName="value" value="8"/>
      </attribs>
   </obj>
   <obj type="const/i" uuid="e202f44b2df17ae0b3e663b98ea6b14c8ff00408" name="i_9" x="434" y="826">
      <params/>
      <attribs>
         <spinner attributeName="value" value="16"/>
      </attribs>
   </obj>
   <obj type="const/i" uuid="e202f44b2df17ae0b3e663b98ea6b14c8ff00408" name="i_10" x="574" y="826">
      <params/>
      <attribs>
         <spinner attributeName="value" value="32"/>
      </attribs>
   </obj>
   <obj type="table/alloc 16b sdram load" uuid="e6b85dad3ab43565cda93ea4c43c73b668b1cd43" name="data" x="1008" y="826">
      <params/>
      <attribs>
         <combo attributeName="size" selection="64"/>
         <file attributeName="filename" file="/facts"/>
      </attribs>
   </obj>
   <obj type="table/alloc 16b sdram load" uuid="e6b85dad3ab43565cda93ea4c43c73b668b1cd43" name="presets" x="1302" y="826">
      <params/>
      <attribs>
         <combo attributeName="size" selection="4096"/>
         <file attributeName="filename" file="/facts"/>
      </attribs>
   </obj>
   <obj type="timer/delayedpulse" uuid="3f05ee534ca67755fb20c7437f9e4de3d4c2f73d" name="delayedpulse_1" x="1568" y="854">
      <params>
         <frac32.s.map name="delay" value="-64.0"/>
      </params>
      <attribs/>
   </obj>
   <comment type="patch/comment" x="84" y="868" text="leave on"/>
   <obj type="ctrl/toggle" uuid="42b8134fa729d54bfc8d62d6ef3fa99498c1de99" name="toggle_4" x="84" y="882">
      <params>
         <bool32.tgl name="b" value="1"/>
      </params>
      <attribs/>
   </obj>
   <obj type="rbrt/data/tablestore 8" uuid="736a5df0-09ec-472a-a4ba-fde5617e1001" name="tablestore_1" x="154" y="882">
      <params/>
      <attribs>
         <objref attributeName="table" obj="data"/>
      </attribs>
   </obj>
   <obj type="rbrt/data/tablestore 8" uuid="736a5df0-09ec-472a-a4ba-fde5617e1001" name="tablestore_2" x="294" y="882">
      <params/>
      <attribs>
         <objref attributeName="table" obj="data"/>
      </attribs>
   </obj>
   <obj type="rbrt/data/tablestore 8" uuid="736a5df0-09ec-472a-a4ba-fde5617e1001" name="tablestore_3" x="434" y="882">
      <params/>
      <attribs>
         <objref attributeName="table" obj="data"/>
      </attribs>
   </obj>
   <obj type="rbrt/data/tablestore 4" uuid="70882983-fca1-4f37-94d9-2a26de523773" name="tablestore_4" x="574" y="882">
      <params/>
      <attribs>
         <objref attributeName="table" obj="data"/>
      </attribs>
   </obj>
   <comment type="patch/comment" x="1078" y="910" text="presetsave/load "/>
   <obj type="string/c" uuid="4aa90a90c435a742ddfa152d232883fc5b2f1b3" name="c_1" x="1330" y="910">
      <params/>
      <attribs>
         <table attributeName="str" table="/facts"/>
      </attribs>
   </obj>
   <obj type="logic/or 2" uuid="3805d3c84d30032a44fbdbe42d9a2988a1790a3e" name="or_5" x="994" y="924">
      <params/>
      <attribs/>
   </obj>
   <patchobj type="patch/object" uuid="dcefc491-221f-4521-bad8-87185f5df137" name="tcopy_5" x="1078" y="924">
      <params>
         <int32 name="range" value="36"/>
      </params>
      <attribs>
         <objref attributeName="preset" obj="presets"/>
         <objref attributeName="play" obj="data"/>
      </attribs>
      <object id="patch/object" uuid="dcefc491-221f-4521-bad8-87185f5df137">
         <sDescription>copy the elements of a table from table &apos;src&apos; to table &apos;dst&apos;
the length of the area to copy is defined by &apos;range&apos;,
the read offset is defined by inlet&apos;src&apos; and the write offset by &apos;dst&apos;
&apos;speed&apos; sets the copying speed in terms of audio-rate (16 is really fast!)
if &apos;splat&apos; is enabled,tcopy will preserve the original contents of the destination table.
if &apos;clear&apos; is enabled,tcopy will clear the contents of the table.</sDescription>
         <author>Robert Schirmer</author>
         <license>BSD</license>
         <helpPatch>data.axh</helpPatch>
         <inlets>
            <bool32 name="save"/>
            <int32 name="snapshot"/>
            <bool32.rising name="trig" description="start copying"/>
         </inlets>
         <outlets/>
         <displays/>
         <params>
            <int32 name="range">
               <MinValue i="1"/>
               <MaxValue i="2097152"/>
            </int32>
         </params>
         <attribs>
            <objref name="preset" description="name of the source -table"/>
            <objref name="play" description="name of the destination - table"/>
         </attribs>
         <includes/>
         <code.declaration><![CDATA[uint32_t i;
uint32_t ii;
int ntrig;
int rtrig;

int speed;
uint32_t src;
uint32_t dst;
uint32_t range;
uint32_t block;]]></code.declaration>
         <code.krate><![CDATA[//load
if (!(inlet_save>0))
{
speed = 16 << 4;
src = (param_range+100+(inlet_snapshot*param_range));
dst = 0;
range = param_range;

block  = (range / speed) * speed;

if ((inlet_trig)&& (!ntrig)){ ntrig = 1;i = 0;rtrig = 0;}
if ((i == range) && (!inlet_trig)) {ntrig = 0;;i = 0;}

//copy n chunks of size 'speed'
if (ntrig && (i < block)){ 
	{ 
  for(ii=0;ii<speed;ii++)
  attr_play.array[(i + ii + dst)]= (( attr_preset.array[(i + ii + src)] + (attr_play.array[(i + ii + dst)] * 0)) * (1));
  }
  i += speed;	
}

//copy what's left
if (i == block) rtrig = 1; 

if ((ntrig && rtrig) && (i < (range))){ 
	attr_play.array[(i + dst)]= (( attr_preset.array[(i + src)] + (attr_play.array[(i + dst)] * 0)) * (1));
   i += 1;  
 }
}



//save
else if (inlet_save>0)
{
speed = 16 << 4;
src = 0;
dst = (param_range+100+(inlet_snapshot*param_range));;
range = param_range;

block  = (range / speed) * speed;

if ((inlet_trig)&& (!ntrig)){ ntrig = 1;i = 0;rtrig = 0;}
if ((i == range) && (!inlet_trig)) {ntrig = 0;i = 0;}

//copy n chunks of size 'speed'
if (ntrig && (i < block)){ 
	{ 
  for(ii=0;ii<speed;ii++)
  attr_preset.array[(i + ii + dst)]= (( attr_play.array[(i + ii + src)] + (attr_preset.array[(i + ii + dst)] * 0)) * (1));
  }
  i += speed;	
}

//copy what's left
if (i == block) rtrig = 1; 

if ((ntrig && rtrig) && (i < (range))){ 
	attr_preset.array[(i + dst)]= (( attr_play.array[(i + src)] + (attr_preset.array[(i + dst)] * 0)) * (1));
   i += 1;  
 }
}]]></code.krate>
      </object>
   </patchobj>
   <comment type="patch/comment" x="742" y="938" text="resync if sequenceloop X or preset changed"/>
   <obj type="logic/change" uuid="42071f8cb4cfe1f35956c0bd5a313a57e049bec4" name="change_2" x="742" y="952">
      <params/>
      <attribs/>
   </obj>
   <obj type="logic/or 2" uuid="3805d3c84d30032a44fbdbe42d9a2988a1790a3e" name="or_6" x="840" y="966">
      <params/>
      <attribs/>
   </obj>
   <obj type="table/save" uuid="3e4108b607d56d9e1cd10abb898b58eea11e53b2" name="save_1" x="1344" y="980">
      <params/>
      <attribs>
         <objref attributeName="table" obj="presets"/>
      </attribs>
   </obj>
   <obj type="logic/flipflop" uuid="f9b15363f5ee203152e062c08a8846f0074b0ea5" name="flipflop_4" x="854" y="1022">
      <params/>
      <attribs/>
   </obj>
   <comment type="patch/comment" x="922" y="1119" text="sync counter"/>
   <comment type="patch/comment" x="266" y="1120" text="internal clock"/>
   <comment type="patch/comment" x="574" y="1120" text="reset if stopped"/>
   <comment type="patch/comment" x="1246" y="1120" text="trigger loop count"/>
   <comment type="patch/comment" x="1386" y="1120" text="trigger on"/>
   <comment type="patch/comment" x="1456" y="1120" text="trigger off"/>
   <comment type="patch/comment" x="1750" y="1120" text="trigger"/>
   <obj type="logic/flipflop toggle" uuid="195e489e5fc3d275944b0de56c7a91c8641ea22a" name="flipflop_3" x="140" y="1134">
      <params/>
      <attribs/>
   </obj>
   <patchobj type="patch/object" uuid="e2e8431d-b242-4a32-9953-7be684c3f35d" name="clock_1" x="266" y="1134">
      <params/>
      <attribs/>
      <object id="patch/object" uuid="e2e8431d-b242-4a32-9953-7be684c3f35d">
         <sDescription>Midi clock master, als outputs Midi clock, start, stop, and continue messages. Sends to midi/in/* objects only.</sDescription>
         <author>Johannes Taelman</author>
         <license>BSD</license>
         <inlets>
            <bool32 name="run" description="Run"/>
            <bool32.rising name="rst" description="Reset"/>
            <frac32.bipolar name="bpm"/>
         </inlets>
         <outlets>
            <bool32 name="active" description="Song is playing"/>
            <int32 name="pos4ppq" description="Position in 4 counts per quarter"/>
            <int32 name="pos24ppq" description="Position in 24 counts per quarter"/>
         </outlets>
         <displays/>
         <params/>
         <attribs/>
         <includes/>
         <code.declaration><![CDATA[bool _active;
int32_t _posfrac;
int32_t _pos24ppq;
bool rstp;]]></code.declaration>
         <code.init><![CDATA[_active = 0;
_posfrac = 0;
_pos24ppq = 0;
rstp = 0;]]></code.init>
         <code.krate><![CDATA[if (inlet_rst & !rstp){
   rstp = 1;
   _posfrac = 0;
   _pos24ppq = 0;
} else if (!inlet_rst){
   rstp = 0;
}
if (inlet_run && !_active) {
  _active = 1;
  if (_pos24ppq)     PatchMidiInHandler(MIDI_DEVICE_INTERNAL, 0,MIDI_START,0,0);
  else     PatchMidiInHandler(MIDI_DEVICE_INTERNAL, 0,MIDI_CONTINUE,0,0);
} else if (!inlet_run && _active){
  _active = 0;
  PatchMidiInHandler(MIDI_DEVICE_INTERNAL, 0,MIDI_STOP,0,0);
}if (_active) {
  _posfrac += inlet_bpm;
  if (_posfrac & 1<<31) {
    _posfrac &= (1<<31)-1;
    _pos24ppq++;
    PatchMidiInHandler(MIDI_DEVICE_INTERNAL, 0,MIDI_TIMING_CLOCK,0,0);
  }
}
outlet_pos4ppq = _pos24ppq/6;
outlet_pos24ppq = _pos24ppq;]]></code.krate>
      </object>
   </patchobj>
   <obj type="midi/in/clock" uuid="f1aa3a79d6de9bd6d38dc64c9d4bb5c9de4f4198" name="clock_3" x="434" y="1134">
      <params/>
      <attribs/>
   </obj>
   <patchobj type="patch/object" uuid="a5bf2867-0af9-4a43-ac6f-11d7b4744554" name="clock_rx_3" x="574" y="1134">
      <params/>
      <attribs>
         <combo attributeName="device" selection="omni"/>
      </attribs>
      <object id="patch/object" uuid="a5bf2867-0af9-4a43-ac6f-11d7b4744554">
         <sDescription>MIDI clock receiver</sDescription>
         <author>Are Leistad</author>
         <license>BSD</license>
         <inlets/>
         <outlets>
            <bool32.pulse name="start" description="Pulse on start"/>
            <bool32.pulse name="stop" description="Pulse on stop"/>
         </outlets>
         <displays/>
         <params/>
         <attribs>
            <combo name="device">
               <MenuEntries>
                  <string>omni</string>
                  <string>din</string>
                  <string>usb host port 1</string>
                  <string>usb host port 2</string>
                  <string>usb host port 3</string>
                  <string>usb host port 4</string>
                  <string>internal port 1</string>
                  <string>internal port 2</string>
                  <string>usb device port 1</string>
               </MenuEntries>
               <CEntries>
                  <string>MIDI_DEVICE_OMNI, 0</string>
                  <string>MIDI_DEVICE_DIN, 1</string>
                  <string>MIDI_DEVICE_USB_HOST, 1</string>
                  <string>MIDI_DEVICE_USB_HOST, 2</string>
                  <string>MIDI_DEVICE_USB_HOST, 3</string>
                  <string>MIDI_DEVICE_USB_HOST, 4</string>
                  <string>MIDI_DEVICE_INTERNAL, 1</string>
                  <string>MIDI_DEVICE_INTERNAL, 2</string>
                  <string>MIDI_DEVICE_USB_DEVICE, 1</string>
               </CEntries>
            </combo>
         </attribs>
         <includes/>
         <code.declaration><![CDATA[uint32_t  pulse_start;
      uint32_t  pulse_stop;
      

      __attribute__ (( always_inline )) __STATIC_INLINE int midi_device_test( midi_device_t dev, uint8_t port, int selected_dev, uint8_t selected_port )
      {
        if(    (selected_dev == MIDI_DEVICE_OMNI)
            || (selected_dev == dev && selected_port == port)
            )
          return 1;
        return 0;
      }]]></code.declaration>
         <code.init><![CDATA[pulse_start     = 0;
      pulse_stop      = 0;]]></code.init>
         <code.krate><![CDATA[outlet_start    = pulse_start;
      outlet_stop     = pulse_stop;

      pulse_start     = 0;
      pulse_stop      = 0;]]></code.krate>
         <code.midihandler><![CDATA[if( midi_device_test( dev, port, attr_device ) == 1 )
        {
          if( status == MIDI_START )
            {
              pulse_start = 1;
            }
          else if( status == MIDI_STOP )
            {
              pulse_stop = 1;
            }
          
        }]]></code.midihandler>
      </object>
   </patchobj>
   <obj type="logic/or 2" uuid="3805d3c84d30032a44fbdbe42d9a2988a1790a3e" name="or_4" x="714" y="1134">
      <params/>
      <attribs/>
   </obj>
   <obj type="logic/change" uuid="96e39ae624c3f3c952cec4a95e1986ee0104f718" name="change_1" x="826" y="1134">
      <params/>
      <attribs/>
   </obj>
   <obj type="logic/counter" uuid="7a141ba82230e54e5f5cd12da5dbe5a74ba854a5" name="counter_3" x="924" y="1134">
      <params>
         <int32 name="maximum" value="16"/>
      </params>
      <attribs/>
   </obj>
   <obj type="logic/and 2" uuid="c67031682f552aa0a80b23377495c51ea28a8c9c" name="and_2" x="1022" y="1134">
      <params/>
      <attribs/>
   </obj>
   <obj type="phi/logic/or 4" uuid="5dc5a7c1fb7809522171638f755fead71cbe14ea" name="or_2" x="1120" y="1134">
      <params/>
      <attribs/>
   </obj>
   <patchobj type="patch/object" uuid="3c4a1df7-f396-46d0-a6c3-8d9ae6c5d0d5" name="counter_1" x="1246" y="1134">
      <params/>
      <attribs/>
      <object id="patch/object" uuid="3c4a1df7-f396-46d0-a6c3-8d9ae6c5d0d5">
         <sDescription>cyclic up counter</sDescription>
         <author>Johannes Taelman</author>
         <license>BSD</license>
         <helpPatch>counter.axh</helpPatch>
         <inlets>
            <int32 name="maximum"/>
            <bool32.rising name="trig" description="trigger"/>
            <bool32.rising name="r" description="reset"/>
         </inlets>
         <outlets>
            <int32 name="o" description="output"/>
            <bool32.pulse name="c" description="carry pulse"/>
         </outlets>
         <displays/>
         <params/>
         <attribs/>
         <includes/>
         <code.declaration><![CDATA[int ntrig;
   int rtrig;
   int count;]]></code.declaration>
         <code.init><![CDATA[count=0;
   ntrig = 0;
   rtrig = 0;]]></code.init>
         <code.krate><![CDATA[outlet_c=0;
if ((inlet_trig>0) && !ntrig) {
   count += 1; if (count>=inlet_maximum) {count = 0; outlet_c = 1;}
   ntrig=1;
}
else if (!(inlet_trig>0)) ntrig=0;
if ((inlet_r>0) && !rtrig) {count=0; rtrig = 1;}
else if (!(inlet_r>0)) rtrig=0;
outlet_o= count+1;]]></code.krate>
      </object>
   </patchobj>
   <obj type="math/==" uuid="deaf0d36642c57876c4101e86f8a0b6a06021ab2" name="==_1" x="1386" y="1134">
      <params/>
      <attribs/>
   </obj>
   <obj type="math/==" uuid="deaf0d36642c57876c4101e86f8a0b6a06021ab2" name="==_2" x="1456" y="1134">
      <params/>
      <attribs/>
   </obj>
   <obj type="phi/logic/or 4" uuid="5dc5a7c1fb7809522171638f755fead71cbe14ea" name="or_1" x="1554" y="1134">
      <params/>
      <attribs/>
   </obj>
   <patchobj type="patch/object" uuid="e11af09f-df69-4346-a870-e42818a8396e" name="b_4" x="1666" y="1134">
      <params/>
      <attribs/>
      <object id="patch/object" uuid="e11af09f-df69-4346-a870-e42818a8396e">
         <sDescription>Generates a single pulse after a rising edge on trigger input. A new trigger before the pulse finishes at the output, extends the pulse.</sDescription>
         <author>Johannes Taelman</author>
         <license>BSD</license>
         <helpPatch>pulselength.axh</helpPatch>
         <inlets>
            <bool32.rising name="trig" description="trigger"/>
         </inlets>
         <outlets>
            <bool32 name="pulse" description="pulse output"/>
         </outlets>
         <displays/>
         <params/>
         <attribs/>
         <includes/>
         <code.declaration><![CDATA[int ntrig;]]></code.declaration>
         <code.init><![CDATA[ntrig = 0;]]></code.init>
         <code.krate><![CDATA[if ((inlet_trig > 0) && !ntrig) {
  ntrig = 1;
  outlet_pulse = 1;
}
else outlet_pulse=0;
if (!(inlet_trig > 0))
{
    ntrig = 0;
  }]]></code.krate>
      </object>
   </patchobj>
   <obj type="logic/flipflop" uuid="f9b15363f5ee203152e062c08a8846f0074b0ea5" name="flipflop_2" x="1750" y="1134">
      <params/>
      <attribs/>
   </obj>
   <obj type="logic/xor 2" uuid="7902b0001a2672a9008b3882d3681ec3e33fec74" name="xor_2" x="1834" y="1134">
      <params/>
      <attribs/>
   </obj>
   <obj type="logic/or 2" uuid="3805d3c84d30032a44fbdbe42d9a2988a1790a3e" name="or_3" x="1918" y="1134">
      <params/>
      <attribs/>
   </obj>
   <obj type="disp/i" uuid="5e35fd0c62d81e70017289250cf28edd26e19e4a" name="i_13" x="910" y="1232">
      <params/>
      <attribs/>
   </obj>
   <obj type="disp/i" uuid="5e35fd0c62d81e70017289250cf28edd26e19e4a" name="i_14" x="1050" y="1232">
      <params/>
      <attribs/>
   </obj>
   <comment type="patch/comment" x="644" y="1288" text="trigger mechanism"/>
   <comment type="patch/comment" x="1568" y="1288" text="fact1 pitch scaling"/>
   <obj type="conv/unipolar2bipolar" uuid="efc8ee28c508740c5edf7995eaaa07a6d6818e5e" name="unipolar2bipolar_1" x="126" y="1302">
      <params/>
      <attribs/>
   </obj>
   <obj type="math/-c" uuid="bc70bed87e5405985ade03f4806b9450609a9093" name="-c_1" x="266" y="1302">
      <params>
         <frac32.u.map name="c" value="32.0"/>
      </params>
      <attribs/>
   </obj>
   <obj type="rbrt/math/&gt;&gt; i c" uuid="14229bad-f41f-40ed-b5dd-c74e31a347c1" name="&gt;&gt;_2" x="336" y="1302">
      <params>
         <int32 name="shift" value="1"/>
      </params>
      <attribs/>
   </obj>
   <obj type="math/+1" uuid="13c1a4574bb81783beb8839e81782b9a34e3fc17" name="+1_1" x="448" y="1302">
      <params/>
      <attribs/>
   </obj>
   <patchobj type="patch/object" uuid="b163b37f-c57d-476b-8bbf-46df81d9e6da" name="&gt;=_1" x="532" y="1302">
      <params/>
      <attribs/>
      <object id="patch/object" uuid="b163b37f-c57d-476b-8bbf-46df81d9e6da">
         <sDescription>greater than or equal</sDescription>
         <author>Phil Julian</author>
         <license>CC0</license>
         <inlets>
            <int32 name="in1" description="in1"/>
         </inlets>
         <outlets>
            <bool32 name="out" description="out"/>
         </outlets>
         <displays/>
         <params/>
         <attribs/>
         <includes/>
         <code.krate><![CDATA[outlet_out= inlet_in1>=32;]]></code.krate>
      </object>
   </patchobj>
   <obj type="timer/delayedpulsem" uuid="edae71bda6092aa94232876fd3f8a107bdb9ebcf" name="delayedpulsem_1" x="644" y="1302">
      <params>
         <frac32.s.map name="delay" value="8.0"/>
      </params>
      <attribs/>
   </obj>
   <obj type="logic/counter" uuid="7a141ba82230e54e5f5cd12da5dbe5a74ba854a5" name="counter_2" x="784" y="1302">
      <params>
         <int32 name="maximum" value="65536"/>
      </params>
      <attribs/>
   </obj>
   <patchobj type="patch/object" uuid="bcb13cf5-25b6-4e39-bd38-6fa9b4f11297" name="b_7" x="910" y="1302">
      <params/>
      <attribs/>
      <object id="patch/object" uuid="bcb13cf5-25b6-4e39-bd38-6fa9b4f11297">
         <sDescription>Generates a single pulse after a rising edge on trigger input. A new trigger before the pulse finishes at the output, extends the pulse.</sDescription>
         <author>Johannes Taelman</author>
         <license>BSD</license>
         <helpPatch>pulselength.axh</helpPatch>
         <inlets>
            <bool32.rising name="trig" description="trigger"/>
         </inlets>
         <outlets>
            <bool32 name="pulse" description="pulse output"/>
         </outlets>
         <displays/>
         <params/>
         <attribs/>
         <includes/>
         <code.declaration><![CDATA[int ntrig;]]></code.declaration>
         <code.init><![CDATA[ntrig = 0;]]></code.init>
         <code.krate><![CDATA[if ((inlet_trig > 0) && !ntrig) {
  ntrig = 1;
  outlet_pulse = 1;
}
else outlet_pulse=0;
if (!(inlet_trig > 0))
{
    ntrig = 0;
  }]]></code.krate>
      </object>
   </patchobj>
   <obj type="math/==" uuid="deaf0d36642c57876c4101e86f8a0b6a06021ab2" name="==_4" x="1008" y="1302">
      <params/>
      <attribs/>
   </obj>
   <patchobj type="patch/object" uuid="bcb13cf5-25b6-4e39-bd38-6fa9b4f11297" name="b_2" x="1092" y="1302">
      <params/>
      <attribs/>
      <object id="patch/object" uuid="bcb13cf5-25b6-4e39-bd38-6fa9b4f11297">
         <sDescription>Generates a single pulse after a rising edge on trigger input. A new trigger before the pulse finishes at the output, extends the pulse.</sDescription>
         <author>Johannes Taelman</author>
         <license>BSD</license>
         <helpPatch>pulselength.axh</helpPatch>
         <inlets>
            <bool32.rising name="trig" description="trigger"/>
         </inlets>
         <outlets>
            <bool32 name="pulse" description="pulse output"/>
         </outlets>
         <displays/>
         <params/>
         <attribs/>
         <includes/>
         <code.declaration><![CDATA[int ntrig;]]></code.declaration>
         <code.init><![CDATA[ntrig = 0;]]></code.init>
         <code.krate><![CDATA[if ((inlet_trig > 0) && !ntrig) {
  ntrig = 1;
  outlet_pulse = 1;
}
else outlet_pulse=0;
if (!(inlet_trig > 0))
{
    ntrig = 0;
  }]]></code.krate>
      </object>
   </patchobj>
   <obj type="mux/mux 2" uuid="e1c92bc92f4d191bfadf0efeae4503b458a4e440" name="mux_3" x="1176" y="1302">
      <params/>
      <attribs/>
   </obj>
   <patchobj type="patch/object" uuid="2409cd96-1ab2-4749-8784-7794aa0e4f2f" name="flipflop_1" x="1260" y="1302">
      <params/>
      <attribs/>
      <object id="patch/object" uuid="2409cd96-1ab2-4749-8784-7794aa0e4f2f">
         <sDescription>flipflop</sDescription>
         <author>Johannes Taelman</author>
         <license>BSD</license>
         <helpPatch>logic.axh</helpPatch>
         <inlets>
            <bool32.rising name="set" description="set"/>
            <bool32.rising name="reset" description="reset"/>
         </inlets>
         <outlets>
            <bool32 name="o" description="output"/>
            <bool32 name="trigdel"/>
         </outlets>
         <displays/>
         <params/>
         <attribs/>
         <includes/>
         <code.declaration><![CDATA[int p_set;
   int p_reset;
   int op;
   int i;
   int itrig;]]></code.declaration>
         <code.init><![CDATA[p_set = 0;
p_reset = 0;
op = 0;]]></code.init>
         <code.krate><![CDATA[outlet_trigdel=0;
if ((inlet_set>0) && !p_set) {op = 1; p_set=1;outlet_trigdel=1;}
if ((inlet_reset>0) && !p_reset) {op = 0; p_reset=1;}
if (!(inlet_set>0)) p_set=0;
if (!(inlet_reset>0)) p_reset=0;
outlet_o= (op<<27);]]></code.krate>
      </object>
   </patchobj>
   <obj type="logic/xor 2" uuid="7902b0001a2672a9008b3882d3681ec3e33fec74" name="xor_1" x="1386" y="1302">
      <params/>
      <attribs/>
   </obj>
   <patchobj type="patch/object" uuid="df0922f6-ac1e-4c37-b796-35254b0f1b41" name="scale_1" x="1568" y="1302">
      <params/>
      <attribs/>
      <object id="patch/object" uuid="df0922f6-ac1e-4c37-b796-35254b0f1b41">
         <sDescription>Maps 0..64 to a..b</sDescription>
         <author>Johannes Elliesen</author>
         <license>BSD</license>
         <inlets>
            <frac32.positive name="c" description="control"/>
         </inlets>
         <outlets>
            <frac32 name="o" description="output"/>
         </outlets>
         <displays/>
         <params/>
         <attribs/>
         <includes/>
         <code.krate><![CDATA[{
      int64_t a = (int64_t)0x04300000 * inlet_c;
      a += (int64_t)0x3ECCCCC * ((128<<20)-inlet_c);
      outlet_o= a>>27;
   }]]></code.krate>
      </object>
   </patchobj>
   <obj type="conv/unipolar2bipolar" uuid="efc8ee28c508740c5edf7995eaaa07a6d6818e5e" name="unipolar2bipolar_13" x="1638" y="1302">
      <params/>
      <attribs/>
   </obj>
   <patchobj type="patch/object" uuid="8527221d-6ba4-4b76-a00e-5ccee8989c21" name="i_5" x="1764" y="1302">
      <params/>
      <attribs/>
      <object id="patch/object" uuid="8527221d-6ba4-4b76-a00e-5ccee8989c21">
         <sDescription>positive integer control</sDescription>
         <author>Johannes Taelman</author>
         <license>BSD</license>
         <helpPatch>ctrl.axh</helpPatch>
         <inlets>
            <int32 name="in"/>
         </inlets>
         <outlets>
            <int32.positive name="out" description="output"/>
         </outlets>
         <displays/>
         <params/>
         <attribs/>
         <includes/>
         <code.krate><![CDATA[outlet_out= inlet_in*12;]]></code.krate>
      </object>
   </patchobj>
   <obj type="disp/i" uuid="5e35fd0c62d81e70017289250cf28edd26e19e4a" name="i_12" x="882" y="1386">
      <params/>
      <attribs/>
   </obj>
   <obj type="disp/bool" uuid="a0ee71d48208b71752cbb8c05e55145106ef3946" name="bool_1" x="952" y="1386">
      <params/>
      <attribs/>
   </obj>
   <comment type="patch/comment" x="1568" y="1400" text="fact1 stretch"/>
   <patchobj type="patch/object" uuid="df0922f6-ac1e-4c37-b796-35254b0f1b41" name="scale_3" x="1568" y="1414">
      <params/>
      <attribs/>
      <object id="patch/object" uuid="df0922f6-ac1e-4c37-b796-35254b0f1b41">
         <sDescription>Maps 0..64 to a..b</sDescription>
         <author>Johannes Elliesen</author>
         <license>BSD</license>
         <inlets>
            <frac32.positive name="c" description="control"/>
         </inlets>
         <outlets>
            <frac32 name="o" description="output"/>
         </outlets>
         <displays/>
         <params/>
         <attribs/>
         <includes/>
         <code.krate><![CDATA[{
      int64_t a = (int64_t)0x04300000 * inlet_c;
      a += (int64_t)0x3ECCCCC * ((128<<20)-inlet_c);
      outlet_o= a>>27;
   }]]></code.krate>
      </object>
   </patchobj>
   <obj type="conv/unipolar2bipolar" uuid="efc8ee28c508740c5edf7995eaaa07a6d6818e5e" name="unipolar2bipolar_14" x="1652" y="1414">
      <params/>
      <attribs/>
   </obj>
   <patchobj type="patch/object" uuid="8527221d-6ba4-4b76-a00e-5ccee8989c21" name="i_8" x="1792" y="1414">
      <params/>
      <attribs/>
      <object id="patch/object" uuid="8527221d-6ba4-4b76-a00e-5ccee8989c21">
         <sDescription>positive integer control</sDescription>
         <author>Johannes Taelman</author>
         <license>BSD</license>
         <helpPatch>ctrl.axh</helpPatch>
         <inlets>
            <int32 name="in"/>
         </inlets>
         <outlets>
            <int32.positive name="out" description="output"/>
         </outlets>
         <displays/>
         <params/>
         <attribs/>
         <includes/>
         <code.krate><![CDATA[outlet_out= inlet_in*12;]]></code.krate>
      </object>
   </patchobj>
   <obj type="math/+" uuid="b94a9b8e9adcb7d18868c0ee808a9b211b65578d" name="+_2" x="1876" y="1414">
      <params/>
      <attribs/>
   </obj>
   <obj type="conv/unipolar2bipolar" uuid="efc8ee28c508740c5edf7995eaaa07a6d6818e5e" name="unipolar2bipolar_23" x="1330" y="1428">
      <params/>
      <attribs/>
   </obj>
   <obj type="conv/unipolar2bipolar" uuid="efc8ee28c508740c5edf7995eaaa07a6d6818e5e" name="unipolar2bipolar_2" x="798" y="1442">
      <params/>
      <attribs/>
   </obj>
   <comment type="patch/comment" x="252" y="1470" text="1 mod env attack"/>
   <comment type="patch/comment" x="1064" y="1470" text="pitch"/>
   <comment type="patch/comment" x="1162" y="1470" text="stretch"/>
   <comment type="patch/comment" x="1470" y="1470" text="cutoff"/>
   <obj type="conv/unipolar2bipolar" uuid="efc8ee28c508740c5edf7995eaaa07a6d6818e5e" name="unipolar2bipolar_16" x="112" y="1484">
      <params/>
      <attribs/>
   </obj>
   <patchobj type="patch/object" uuid="62161b41-7575-41f1-ac22-b308e8b13662" name="d_1" x="252" y="1484">
      <params>
         <frac32.s.map name="d" value="0.0"/>
      </params>
      <attribs/>
      <object id="patch/object" uuid="62161b41-7575-41f1-ac22-b308e8b13662">
         <sDescription>decay envelope, linear ramp</sDescription>
         <author>Johannes Taelman</author>
         <license>BSD</license>
         <helpPatch>env.axh</helpPatch>
         <inlets>
            <bool32.rising name="trig" description="trigger"/>
            <frac32.bipolar name="d"/>
         </inlets>
         <outlets>
            <frac32.positive name="env" description="envelope output"/>
         </outlets>
         <displays/>
         <params>
            <frac32.s.map.klineartime.exp name="d" noLabel="true"/>
         </params>
         <attribs/>
         <includes/>
         <code.declaration><![CDATA[int32_t val;
int ntrig;]]></code.declaration>
         <code.init><![CDATA[val = 0;
ntrig = 0;]]></code.init>
         <code.krate><![CDATA[if ((inlet_trig > 0) && !ntrig) {
  val = 1 << 27;
  ntrig = 1;
}
else {
  if (!(inlet_trig > 0))
    ntrig = 0;
  int32_t t;
  MTOF(-param_d - inlet_d,t);
  val -= t>>6;
  if (val < 0)
    val = 0;
}
outlet_env = val;]]></code.krate>
      </object>
   </patchobj>
   <obj type="drj/math/inv_pos" uuid="ae23d42592d86ae7d7f2202cb1124490774d118a" name="inv_pos_2" x="364" y="1484">
      <params/>
      <attribs/>
   </obj>
   <patchobj type="patch/object" uuid="88a7c606-20b5-41f7-bffd-4a18f4ed4403" name="i_3" x="476" y="1484">
      <params/>
      <attribs/>
      <object id="patch/object" uuid="88a7c606-20b5-41f7-bffd-4a18f4ed4403">
         <sDescription>constant</sDescription>
         <author>Johannes Taelman</author>
         <license>BSD</license>
         <helpPatch>i.axh</helpPatch>
         <inlets/>
         <outlets>
            <int32 name="out" description="output"/>
         </outlets>
         <displays/>
         <params/>
         <attribs/>
         <includes/>
         <code.krate><![CDATA[outlet_out= 12;]]></code.krate>
      </object>
   </patchobj>
   <patchobj type="patch/object" uuid="3ed534b6-af21-4535-84d0-2a123971de90" name="*_11" x="574" y="1484">
      <params/>
      <attribs/>
      <object id="patch/object" uuid="3ed534b6-af21-4535-84d0-2a123971de90">
         <sDescription>multiply</sDescription>
         <author>Johannes Taelman</author>
         <license>BSD</license>
         <helpPatch>math.axh</helpPatch>
         <inlets>
            <frac32 name="a" description="input"/>
            <frac32 name="b" description="input"/>
         </inlets>
         <outlets>
            <frac32 name="result" description="output"/>
         </outlets>
         <displays/>
         <params/>
         <attribs/>
         <includes/>
         <code.krate><![CDATA[outlet_result= ___SMMUL(inlet_a<<3,inlet_b<<2);]]></code.krate>
      </object>
   </patchobj>
   <patchobj type="patch/object" uuid="dad70618-dab9-4d93-a907-3a0544bd916e" name="*_12" x="658" y="1484">
      <params/>
      <attribs/>
      <object id="patch/object" uuid="dad70618-dab9-4d93-a907-3a0544bd916e">
         <sDescription>multiply</sDescription>
         <author>Johannes Taelman</author>
         <license>BSD</license>
         <helpPatch>math.axh</helpPatch>
         <inlets>
            <frac32 name="a" description="input"/>
            <frac32 name="b" description="input"/>
         </inlets>
         <outlets>
            <frac32 name="result" description="output"/>
         </outlets>
         <displays/>
         <params/>
         <attribs/>
         <includes/>
         <code.krate><![CDATA[outlet_result= ___SMMUL(inlet_a<<3,inlet_b<<2);
]]></code.krate>
      </object>
   </patchobj>
   <obj type="math/*" uuid="922423f2db9f222aa3e5ba095778288c446da47a" name="*_16" x="742" y="1484">
      <params/>
      <attribs/>
   </obj>
   <obj type="math/*" uuid="922423f2db9f222aa3e5ba095778288c446da47a" name="*_17" x="854" y="1484">
      <params/>
      <attribs/>
   </obj>
   <obj type="math/+" uuid="44553fdc8628c67ab535845ed1be304ad6c9553b" name="+_9" x="966" y="1484">
      <params/>
      <attribs/>
   </obj>
   <obj type="TSG/math/limit" uuid="96549a9d-cf2a-4b5c-b9b1-58b08745c3fe" name="limit_1" x="1050" y="1484">
      <params/>
      <attribs>
         <spinner attributeName="max" value="64"/>
         <spinner attributeName="min" value="-64"/>
      </attribs>
   </obj>
   <obj type="drj/math/sum3" uuid="ed8693cb112449079be7d7f2274d118a23d46692" name="sum3_1" x="1162" y="1484">
      <params/>
      <attribs/>
   </obj>
   <obj type="drj/math/sum3" uuid="93cb11244907aed86ae7d7f2274d118a23d46692" name="sum3_2" x="1358" y="1484">
      <params/>
      <attribs/>
   </obj>
   <obj type="TSG/math/limit" uuid="96549a9d-cf2a-4b5c-b9b1-58b08745c3fe" name="limit_3" x="1456" y="1484">
      <params/>
      <attribs>
         <spinner attributeName="max" value="64"/>
         <spinner attributeName="min" value="-64"/>
      </attribs>
   </obj>
   <obj type="logic/and 2" uuid="c67031682f552aa0a80b23377495c51ea28a8c9c" name="and_1" x="826" y="1554">
      <params/>
      <attribs/>
   </obj>
   <obj type="logic/inv" uuid="2bd44b865d3b63ff9b80862242bf5be779e3ad5" name="inv_1" x="924" y="1554">
      <params/>
      <attribs/>
   </obj>
   <obj type="audio/in left" uuid="d40e60b7641fe75af4d7c91b45bb038aacafc52e" name="in_1" x="126" y="1610">
      <params/>
      <attribs/>
   </obj>
   <comment type="patch/comment" x="546" y="1610" text="where the magic happens (thanks SSS!)"/>
   <comment type="patch/comment" x="980" y="1610" text="ducking env"/>
   <comment type="patch/comment" x="772" y="1611" text="vca envelope"/>
   <obj type="env/ahd lin" uuid="4ed5fd29254747e71db6d1d4caa20a89a41740f0" name="ahd_1" x="266" y="1624">
      <params>
         <frac32.s.map name="a" value="-64.0"/>
         <frac32.s.map name="d" value="-64.0"/>
      </params>
      <attribs/>
   </obj>
   <obj type="gain/vca" uuid="a9f2dcd18043e2f47364e45cb8814f63c2a37c0d" name="vca_4" x="378" y="1624">
      <params/>
      <attribs/>
   </obj>
   <patcher type="patch/patcher" uuid="c1fa3aaa-9976-49a5-8dff-f283473814de" name="patcher_1" x="546" y="1624">
      <params/>
      <attribs>
         <combo attributeName="poly" selection="6"/>
      </attribs>
      <subpatch appVersion="1.0.12">
         <obj type="patch/inlet a" uuid="b577fe41e0a6bc7b5502ce33cb8a3129e2e28ee5" name="in " x="112" y="112">
            <params/>
            <attribs/>
         </obj>
         <obj type="patch/inlet b" uuid="3b0d3eacb5bb978cb05d1372aa2714d5a4790844" name="rec" x="196" y="112">
            <params/>
            <attribs/>
         </obj>
         <obj type="patch/inlet b" uuid="3b0d3eacb5bb978cb05d1372aa2714d5a4790844" name="sync" x="294" y="112">
            <params/>
            <attribs/>
         </obj>
         <obj type="patch/inlet b" uuid="3b0d3eacb5bb978cb05d1372aa2714d5a4790844" name="dir" x="392" y="112">
            <params/>
            <attribs/>
         </obj>
         <obj type="patch/inlet f" uuid="5c585d2dcd9c05631e345ac09626a22a639d7c13" name="pitch" x="490" y="112">
            <params/>
            <attribs/>
         </obj>
         <obj type="patch/inlet f" uuid="5c585d2dcd9c05631e345ac09626a22a639d7c13" name="stretch" x="574" y="112">
            <params/>
            <attribs/>
         </obj>
         <obj type="patch/inlet f" uuid="5c585d2dcd9c05631e345ac09626a22a639d7c13" name="rate" x="658" y="112">
            <params/>
            <attribs/>
         </obj>
         <obj type="patch/inlet b" uuid="3b0d3eacb5bb978cb05d1372aa2714d5a4790844" name="overwrite" x="742" y="112">
            <params/>
            <attribs/>
         </obj>
         <obj type="patch/inlet f" uuid="5c585d2dcd9c05631e345ac09626a22a639d7c13" name="filter cutoff" x="574" y="196">
            <params/>
            <attribs/>
         </obj>
         <obj type="patch/inlet f" uuid="5c585d2dcd9c05631e345ac09626a22a639d7c13" name="filter res" x="658" y="196">
            <params/>
            <attribs/>
         </obj>
         <obj type="patch/polyindex" uuid="edc730b5393c31d703572e0c0c88aaced643bd6" name="polyindex_2" x="826" y="238">
            <params/>
            <attribs/>
         </obj>
         <obj type="patch/inlet f" uuid="5c585d2dcd9c05631e345ac09626a22a639d7c13" name="poly spread range" x="952" y="238">
            <params/>
            <attribs/>
         </obj>
         <obj type="patch/inlet f" uuid="5c585d2dcd9c05631e345ac09626a22a639d7c13" name="poly spread" x="1078" y="238">
            <params/>
            <attribs/>
         </obj>
         <obj type="patch/inlet f" uuid="5c585d2dcd9c05631e345ac09626a22a639d7c13" name="filter spread range" x="1288" y="238">
            <params/>
            <attribs/>
         </obj>
         <obj type="patch/inlet f" uuid="5c585d2dcd9c05631e345ac09626a22a639d7c13" name="filter spread" x="1414" y="238">
            <params/>
            <attribs/>
         </obj>
         <obj type="ctrl/dial p" uuid="cc5d2846c3d50e425f450c4b9851371b54f4d674" name="dial_4" x="826" y="294">
            <params>
               <frac32.u.map name="value" value="2.4000000953674316"/>
            </params>
            <attribs/>
         </obj>
         <obj type="math/*" uuid="b3eac405185d2a86512723be5db59930f78c4b4c" name="*_3" x="910" y="294">
            <params/>
            <attribs/>
         </obj>
         <obj type="conv/to f" uuid="bdd08445689602ce174689ccb6be085f627d9892" name="to_1" x="980" y="294">
            <params/>
            <attribs/>
         </obj>
         <obj type="math/*" uuid="922423f2db9f222aa3e5ba095778288c446da47a" name="*_5" x="1050" y="294">
            <params/>
            <attribs/>
         </obj>
         <obj type="math/*" uuid="922423f2db9f222aa3e5ba095778288c446da47a" name="*_1" x="1120" y="294">
            <params/>
            <attribs/>
         </obj>
         <obj type="ctrl/dial p" uuid="cc5d2846c3d50e425f450c4b9851371b54f4d674" name="dial_5" x="1176" y="294">
            <params>
               <frac32.u.map name="value" value="12.0"/>
            </params>
            <attribs/>
         </obj>
         <obj type="math/*" uuid="b3eac405185d2a86512723be5db59930f78c4b4c" name="*_7" x="1260" y="294">
            <params/>
            <attribs/>
         </obj>
         <obj type="conv/to f" uuid="bdd08445689602ce174689ccb6be085f627d9892" name="to_2" x="1330" y="294">
            <params/>
            <attribs/>
         </obj>
         <obj type="math/*" uuid="922423f2db9f222aa3e5ba095778288c446da47a" name="*_6" x="1386" y="294">
            <params/>
            <attribs/>
         </obj>
         <obj type="math/*" uuid="922423f2db9f222aa3e5ba095778288c446da47a" name="*_4" x="1456" y="294">
            <params/>
            <attribs/>
         </obj>
         <obj type="math/+" uuid="44553fdc8628c67ab535845ed1be304ad6c9553b" name="+_3" x="1526" y="294">
            <params/>
            <attribs/>
         </obj>
         <obj type="patch/inlet i" uuid="f11927f00c59219df0c50f73056aa19f125540b7" name="polyphony" x="574" y="322">
            <params/>
            <attribs/>
         </obj>
         <obj type="pmj/math/&lt;=" uuid="77572708-eed5-413e-8a91-f157f99392d3" name="&lt;=_1" x="658" y="322">
            <params/>
            <attribs/>
         </obj>
         <obj type="math/+" uuid="44553fdc8628c67ab535845ed1be304ad6c9553b" name="+_2" x="1036" y="392">
            <params/>
            <attribs/>
         </obj>
         <obj type="TSG/math/limit" uuid="96549a9d-cf2a-4b5c-b9b1-58b08745c3fe" name="limit_3" x="1106" y="392">
            <params/>
            <attribs>
               <spinner attributeName="max" value="64"/>
               <spinner attributeName="min" value="-64"/>
            </attribs>
         </obj>
         <obj type="math/+" uuid="44553fdc8628c67ab535845ed1be304ad6c9553b" name="+_1" x="1232" y="392">
            <params/>
            <attribs/>
         </obj>
         <obj type="TSG/math/limit" uuid="96549a9d-cf2a-4b5c-b9b1-58b08745c3fe" name="limit_5" x="1316" y="392">
            <params/>
            <attribs>
               <spinner attributeName="max" value="64"/>
               <spinner attributeName="min" value="-64"/>
            </attribs>
         </obj>
         <obj type="TSG/math/limit" uuid="96549a9d-cf2a-4b5c-b9b1-58b08745c3fe" name="limit_4" x="1428" y="392">
            <params/>
            <attribs>
               <spinner attributeName="max" value="64"/>
               <spinner attributeName="min" value="-64"/>
            </attribs>
         </obj>
         <obj type="sss/delay/Factotum" uuid="978d597e-b90a-49b5-bff2-81589ba76968" name="Factotum_1" x="350" y="406">
            <params>
               <int32 name="fade" value="10"/>
               <frac32.u.map name="phase" value="0.0"/>
               <frac32.u.map name="length" value="64.0"/>
               <int32.hradio name="dir" value="2"/>
               <frac32.s.map name="playspeed" value="0.0"/>
               <frac32.s.map name="pitchshift" value="0.0"/>
               <frac32.s.map name="stretch" value="0.0"/>
               <frac32.s.map name="rate" value="0.0"/>
               <frac32.u.map name="window" value="64.0"/>
               <frac32.s.map name="shiftsize" value="0.0"/>
               <int32 name="ratedivisor" value="0"/>
               <int32 name="qnt" value="0"/>
               <int32 name="step1" value="1"/>
               <int32 name="step2" value="1"/>
               <bool32.tgl name="overwrite" value="0"/>
               <frac32.s.map name="feedback" value="64.0"/>
               <frac32.u.map name="dry" value="0.0"/>
               <frac32.u.map name="wet" value="64.0"/>
            </params>
            <attribs>
               <combo attributeName="size" selection="524288 (10.9s)"/>
            </attribs>
         </obj>
         <patchobj type="patch/object" uuid="80461091-a3ad-4837-8d09-64946f54cece" name="lp_3" x="476" y="406">
            <params/>
            <attribs/>
            <object id="patch/object" uuid="80461091-a3ad-4837-8d09-64946f54cece">
               <sDescription>Low pass filter, state-variable type</sDescription>
               <author>Johannes Taelman</author>
               <license>BSD</license>
               <helpPatch>filter.axh</helpPatch>
               <inlets>
                  <frac32buffer name="in" description="filter input"/>
                  <frac32.bipolar name="pitch"/>
                  <frac32.positive name="reso"/>
               </inlets>
               <outlets>
                  <frac32buffer name="out" description="filter output"/>
               </outlets>
               <displays/>
               <params/>
               <attribs/>
               <includes/>
               <code.declaration><![CDATA[int32_t low;
int32_t band;]]></code.declaration>
               <code.init><![CDATA[low = 0;
band = 0;]]></code.init>
               <code.krate><![CDATA[int32_t damp = (0x80<<24) - (inlet_reso<<4);
damp = ___SMMUL(damp,damp);
int32_t alpha;
int32_t freq;
MTOFEXTENDED(inlet_pitch,alpha);
SINE2TINTERP(alpha,freq);]]></code.krate>
               <code.srate><![CDATA[int32_t in1 = inlet_in;
int32_t notch = inlet_in - (___SMMUL(damp,band)<<1);
low = low + (___SMMUL(freq,band)<<1);
int32_t high  = notch - low;
band = (___SMMUL(freq,high)<<1) + band;// - drive*band*band*band;
int32_t out1 = low;
outlet_out = out1;]]></code.srate>
            </object>
         </patchobj>
         <obj type="math/*" uuid="3ac307b9f782049739ed62504081b96d580ea336" name="*_2" x="728" y="406">
            <params/>
            <attribs/>
         </obj>
         <obj type="patch/outlet a" uuid="abd8c5fd3b0524a6630f65cad6dc27f6c58e2a3e" name="outlet_1" x="826" y="406">
            <params/>
            <attribs/>
         </obj>
         <nets>
            <net>
               <source obj="Factotum_1" outlet="out"/>
               <dest obj="lp_3" inlet="in"/>
            </net>
            <net>
               <source obj="in " outlet="inlet"/>
               <dest obj="Factotum_1" inlet="in"/>
            </net>
            <net>
               <source obj="rec" outlet="inlet"/>
               <dest obj="Factotum_1" inlet="rec"/>
            </net>
            <net>
               <source obj="sync" outlet="inlet"/>
               <dest obj="Factotum_1" inlet="sync"/>
            </net>
            <net>
               <source obj="dir" outlet="inlet"/>
               <dest obj="Factotum_1" inlet="dir"/>
            </net>
            <net>
               <source obj="rate" outlet="inlet"/>
               <dest obj="Factotum_1" inlet="rate"/>
            </net>
            <net>
               <source obj="overwrite" outlet="inlet"/>
               <dest obj="Factotum_1" inlet="overwrite"/>
            </net>
            <net>
               <source obj="filter res" outlet="inlet"/>
               <dest obj="lp_3" inlet="reso"/>
            </net>
            <net>
               <source obj="*_1" outlet="result"/>
               <dest obj="+_1" inlet="in2"/>
               <dest obj="+_2" inlet="in2"/>
            </net>
            <net>
               <source obj="pitch" outlet="inlet"/>
               <dest obj="+_1" inlet="in1"/>
            </net>
            <net>
               <source obj="+_1" outlet="out"/>
               <dest obj="limit_5" inlet="i"/>
            </net>
            <net>
               <source obj="stretch" outlet="inlet"/>
               <dest obj="+_2" inlet="in1"/>
            </net>
            <net>
               <source obj="to_1" outlet="o"/>
               <dest obj="*_5" inlet="a"/>
            </net>
            <net>
               <source obj="*_3" outlet="result"/>
               <dest obj="to_1" inlet="i"/>
            </net>
            <net>
               <source obj="dial_4" outlet="out"/>
               <dest obj="*_3" inlet="b"/>
            </net>
            <net>
               <source obj="*_5" outlet="result"/>
               <dest obj="*_1" inlet="a"/>
            </net>
            <net>
               <source obj="poly spread" outlet="inlet"/>
               <dest obj="*_1" inlet="b"/>
            </net>
            <net>
               <source obj="polyindex_2" outlet="index"/>
               <dest obj="*_3" inlet="a"/>
               <dest obj="&lt;=_1" inlet="in1"/>
               <dest obj="*_7" inlet="a"/>
            </net>
            <net>
               <source obj="poly spread range" outlet="inlet"/>
               <dest obj="*_5" inlet="b"/>
            </net>
            <net>
               <source obj="lp_3" outlet="out"/>
               <dest obj="*_2" inlet="b"/>
            </net>
            <net>
               <source obj="*_2" outlet="result"/>
               <dest obj="outlet_1" inlet="outlet"/>
            </net>
            <net>
               <source obj="polyphony" outlet="inlet"/>
               <dest obj="&lt;=_1" inlet="in2"/>
            </net>
            <net>
               <source obj="&lt;=_1" outlet="out"/>
               <dest obj="*_2" inlet="a"/>
            </net>
            <net>
               <source obj="*_6" outlet="result"/>
               <dest obj="*_4" inlet="a"/>
            </net>
            <net>
               <source obj="filter spread" outlet="inlet"/>
               <dest obj="*_4" inlet="b"/>
            </net>
            <net>
               <source obj="filter spread range" outlet="inlet"/>
               <dest obj="*_6" inlet="b"/>
            </net>
            <net>
               <source obj="*_4" outlet="result"/>
               <dest obj="+_3" inlet="in2"/>
            </net>
            <net>
               <source obj="+_3" outlet="out"/>
               <dest obj="limit_4" inlet="i"/>
            </net>
            <net>
               <source obj="filter cutoff" outlet="inlet"/>
               <dest obj="+_3" inlet="in1"/>
            </net>
            <net>
               <source obj="*_7" outlet="result"/>
               <dest obj="to_2" inlet="i"/>
            </net>
            <net>
               <source obj="dial_5" outlet="out"/>
               <dest obj="*_7" inlet="b"/>
            </net>
            <net>
               <source obj="to_2" outlet="o"/>
               <dest obj="*_6" inlet="a"/>
            </net>
            <net>
               <source obj="+_2" outlet="out"/>
               <dest obj="limit_3" inlet="i"/>
            </net>
            <net>
               <source obj="limit_3" outlet="o"/>
               <dest obj="Factotum_1" inlet="stretch"/>
            </net>
            <net>
               <source obj="limit_5" outlet="o"/>
               <dest obj="Factotum_1" inlet="pitchshift"/>
            </net>
            <net>
               <source obj="limit_4" outlet="o"/>
               <dest obj="lp_3" inlet="pitch"/>
            </net>
         </nets>
         <settings>
            <subpatchmode>polyphonic</subpatchmode>
            <MidiChannel>1</MidiChannel>
            <NPresets>0</NPresets>
            <NPresetEntries>0</NPresetEntries>
            <NModulationSources>0</NModulationSources>
            <NModulationTargetsPerSource>0</NModulationTargetsPerSource>
         </settings>
         <notes><![CDATA[]]></notes>
         <windowPos>
            <x>-8</x>
            <y>-8</y>
            <width>1616</width>
            <height>876</height>
         </windowPos>
      </subpatch>
   </patcher>
   <obj type="env/ahd lin m" uuid="f9b46834ce96425064b4ed7f53ad8b91ea1ac0ef" name="ahd_5" x="770" y="1624">
      <params>
         <frac32.s.map name="a" value="0.0"/>
         <frac32.s.map name="d" value="0.0"/>
      </params>
      <attribs/>
   </obj>
   <obj type="env/ahd lin m" uuid="f9b46834ce96425064b4ed7f53ad8b91ea1ac0ef" name="ahd_6" x="980" y="1624">
      <params>
         <frac32.s.map name="a" value="-64.0"/>
         <frac32.s.map name="d" value="-64.0"/>
      </params>
      <attribs/>
   </obj>
   <obj type="math/*" uuid="922423f2db9f222aa3e5ba095778288c446da47a" name="*_1" x="1078" y="1624">
      <params/>
      <attribs/>
   </obj>
   <comment type="patch/comment" x="1232" y="1638" text="wet"/>
   <comment type="patch/comment" x="1302" y="1638" text="dry"/>
   <obj type="gain/vca" uuid="a9f2dcd18043e2f47364e45cb8814f63c2a37c0d" name="vca_13" x="882" y="1652">
      <params/>
      <attribs/>
   </obj>
   <obj type="filter/hp m" uuid="fdba806c3cfd2b7aca3256c733379a06e5811e66" name="hp_1" x="1134" y="1652">
      <params>
         <frac32.s.map name="pitch" value="0.0"/>
         <frac32.u.map name="reso" value="0.0"/>
      </params>
      <attribs/>
   </obj>
   <obj type="gain/vca" uuid="a9f2dcd18043e2f47364e45cb8814f63c2a37c0d" name="vca_14" x="1232" y="1652">
      <params/>
      <attribs/>
   </obj>
   <obj type="gain/vca" uuid="a9f2dcd18043e2f47364e45cb8814f63c2a37c0d" name="vca_1" x="1302" y="1652">
      <params/>
      <attribs/>
   </obj>
   <obj type="math/+" uuid="faedbea4612d9bd3644d6d3bf31946d848a70e19" name="+_1" x="1386" y="1652">
      <params/>
      <attribs/>
   </obj>
   <obj type="audio/out left" uuid="b11a3c09b2fdd575ea8212f2ce7743d5269253b1" name="out_1" x="1470" y="1652">
      <params/>
      <attribs/>
   </obj>
   <nets>
      <net>
         <source obj="flipflop_1" outlet="o"/>
         <dest obj="xor_1" inlet="i2"/>
         <dest obj="bool_1" inlet="in"/>
      </net>
      <net>
         <source obj="ahd_1" outlet="env"/>
         <dest obj="vca_4" inlet="v"/>
      </net>
      <net>
         <source obj="or_3" outlet="o"/>
         <dest obj="delayedpulsem_1" inlet="trig"/>
         <dest obj="counter_2" inlet="r"/>
         <dest obj="b_7" inlet="trig"/>
         <dest obj="d_1" inlet="trig"/>
         <dest obj="ahd_5" inlet="trig"/>
         <dest obj="and_1" inlet="i1"/>
      </net>
      <net>
         <source obj="sum3_1" outlet="out"/>
         <dest obj="patcher_1" inlet="stretch"/>
      </net>
      <net>
         <source obj="unipolar2bipolar_13" outlet="o"/>
         <dest obj="i_5" inlet="in"/>
      </net>
      <net>
         <source obj="inv_pos_2" outlet="out"/>
         <dest obj="*_16" inlet="b"/>
         <dest obj="*_12" inlet="b"/>
         <dest obj="*_17" inlet="b"/>
      </net>
      <net>
         <source obj="*_12" outlet="result"/>
         <dest obj="+_9" inlet="in1"/>
      </net>
      <net>
         <source obj="d_1" outlet="env"/>
         <dest obj="inv_pos_2" inlet="in"/>
      </net>
      <net>
         <source obj="+_9" outlet="out"/>
         <dest obj="limit_1" inlet="i"/>
      </net>
      <net>
         <source obj="*_11" outlet="result"/>
         <dest obj="*_12" inlet="a"/>
      </net>
      <net>
         <source obj="i_3" outlet="out"/>
         <dest obj="*_11" inlet="a"/>
      </net>
      <net>
         <source obj="unipolar2bipolar_16" outlet="o"/>
         <dest obj="d_1" inlet="d"/>
      </net>
      <net>
         <source obj="limit_1" outlet="o"/>
         <dest obj="sum3_2" inlet="in2"/>
         <dest obj="patcher_1" inlet="pitch"/>
      </net>
      <net>
         <source obj="limit_3" outlet="o"/>
         <dest obj="patcher_1" inlet="filter cutoff"/>
      </net>
      <net>
         <source obj="*_16" outlet="result"/>
         <dest obj="sum3_1" inlet="in3"/>
      </net>
      <net>
         <source obj="scale_1" outlet="o"/>
         <dest obj="unipolar2bipolar_13" inlet="i"/>
      </net>
      <net>
         <source obj="i_5" outlet="out"/>
         <dest obj="+_2" inlet="in2"/>
         <dest obj="+_9" inlet="in2"/>
         <dest obj="sum3_1" inlet="in1"/>
      </net>
      <net>
         <source obj="unipolar2bipolar_23" outlet="o"/>
         <dest obj="sum3_2" inlet="in1"/>
      </net>
      <net>
         <source obj="sum3_2" outlet="out"/>
         <dest obj="limit_3" inlet="i"/>
      </net>
      <net>
         <source obj="&gt;=_1" outlet="out"/>
         <dest obj="mux_3" inlet="s"/>
      </net>
      <net>
         <source obj="counter_2" outlet="o"/>
         <dest obj="==_4" inlet="in1"/>
         <dest obj="i_12" inlet="in"/>
      </net>
      <net>
         <source obj="tablestore_1" outlet="v7"/>
         <dest obj="-c_1" inlet="in"/>
         <dest obj="unipolar2bipolar_1" inlet="i"/>
         <dest obj="&gt;=_1" inlet="in1"/>
      </net>
      <net>
         <source obj="+1_1" outlet="result"/>
         <dest obj="==_4" inlet="in2"/>
      </net>
      <net>
         <source obj="-c_1" outlet="out"/>
         <dest obj="&gt;&gt;_2" inlet="in"/>
      </net>
      <net>
         <source obj="&gt;&gt;_2" outlet="out"/>
         <dest obj="+1_1" inlet="a"/>
      </net>
      <net>
         <source obj="delayedpulsem_1" outlet="pulse"/>
         <dest obj="mux_3" inlet="i1"/>
      </net>
      <net>
         <source obj="unipolar2bipolar_1" outlet="o"/>
         <dest obj="delayedpulsem_1" inlet="delay"/>
      </net>
      <net>
         <source obj="==_4" outlet="out"/>
         <dest obj="b_2" inlet="trig"/>
      </net>
      <net>
         <source obj="b_2" outlet="pulse"/>
         <dest obj="mux_3" inlet="i2"/>
      </net>
      <net>
         <source obj="+_2" outlet="out"/>
         <dest obj="sum3_1" inlet="in2"/>
      </net>
      <net>
         <source obj="scale_3" outlet="o"/>
         <dest obj="unipolar2bipolar_14" inlet="i"/>
      </net>
      <net>
         <source obj="unipolar2bipolar_14" outlet="o"/>
         <dest obj="i_8" inlet="in"/>
      </net>
      <net>
         <source obj="i_8" outlet="out"/>
         <dest obj="+_2" inlet="in1"/>
      </net>
      <net>
         <source obj="vca_4" outlet="o"/>
         <dest obj="patcher_1" inlet="in "/>
      </net>
      <net>
         <source obj="mux_3" outlet="o"/>
         <dest obj="flipflop_1" inlet="reset"/>
      </net>
      <net>
         <source obj="xor_1" outlet="o"/>
         <dest obj="ahd_1" inlet="trig"/>
         <dest obj="patcher_1" inlet="rec"/>
      </net>
      <net>
         <source obj="flipflop_1" outlet="trigdel"/>
         <dest obj="xor_1" inlet="i1"/>
         <dest obj="patcher_1" inlet="sync"/>
      </net>
      <net>
         <source obj="b_7" outlet="pulse"/>
         <dest obj="flipflop_1" inlet="set"/>
      </net>
      <net>
         <source obj="dial_3" outlet="out"/>
         <dest obj="tablestore_2" inlet="v1"/>
      </net>
      <net>
         <source obj="dial_4" outlet="out"/>
         <dest obj="tablestore_2" inlet="v2"/>
      </net>
      <net>
         <source obj="dial_9" outlet="out"/>
         <dest obj="tablestore_2" inlet="v7"/>
      </net>
      <net>
         <source obj="dial_10" outlet="out"/>
         <dest obj="tablestore_2" inlet="v5"/>
      </net>
      <net>
         <source obj="dial_11" outlet="out"/>
         <dest obj="tablestore_2" inlet="v6"/>
      </net>
      <net>
         <source obj="toggle_2" outlet="o"/>
         <dest obj="tablestore_4" inlet="v1"/>
      </net>
      <net>
         <source obj="ahd_5" outlet="env"/>
         <dest obj="vca_13" inlet="v"/>
      </net>
      <net>
         <source obj="in_1" outlet="wave"/>
         <dest obj="vca_4" inlet="a"/>
         <dest obj="vca_1" inlet="a"/>
      </net>
      <net>
         <source obj="+_1" outlet="out"/>
         <dest obj="out_1" inlet="wave"/>
      </net>
      <net>
         <source obj="vca_1" outlet="o"/>
         <dest obj="+_1" inlet="in2"/>
      </net>
      <net>
         <source obj="dial_12" outlet="out"/>
         <dest obj="tablestore_1" inlet="v1"/>
      </net>
      <net>
         <source obj="vca_14" outlet="o"/>
         <dest obj="+_1" inlet="in1"/>
      </net>
      <net>
         <source obj="dial_13" outlet="out"/>
         <dest obj="tablestore_1" inlet="v2"/>
      </net>
      <net>
         <source obj="change_1" outlet="trig"/>
         <dest obj="counter_2" inlet="trig"/>
         <dest obj="counter_1" inlet="trig"/>
         <dest obj="counter_3" inlet="trig"/>
      </net>
      <net>
         <source obj="counter_1" outlet="o"/>
         <dest obj="==_1" inlet="in1"/>
         <dest obj="==_2" inlet="in1"/>
         <dest obj="i_14" inlet="in"/>
      </net>
      <net>
         <source obj="i_1" outlet="out"/>
         <dest obj="tablestore_1" inlet="v5"/>
      </net>
      <net>
         <source obj="i_2" outlet="out"/>
         <dest obj="tablestore_1" inlet="v6"/>
      </net>
      <net>
         <source obj="==_1" outlet="out"/>
         <dest obj="flipflop_2" inlet="set"/>
         <dest obj="b_4" inlet="trig"/>
      </net>
      <net>
         <source obj="==_2" outlet="out"/>
         <dest obj="or_1" inlet="i1"/>
      </net>
      <net>
         <source obj="or_1" outlet="o"/>
         <dest obj="flipflop_2" inlet="reset"/>
      </net>
      <net>
         <source obj="i_6" outlet="out"/>
         <dest obj="tablestore_1" inlet="v4"/>
      </net>
      <net>
         <source obj="flipflop_2" outlet="o"/>
         <dest obj="xor_2" inlet="i1"/>
      </net>
      <net>
         <source obj="b_4" outlet="pulse"/>
         <dest obj="xor_2" inlet="i2"/>
      </net>
      <net>
         <source obj="patcher_1" outlet="outlet_1"/>
         <dest obj="vca_13" inlet="a"/>
      </net>
      <net>
         <source obj="clock_rx_2" outlet="start"/>
         <dest obj="flipflop_3" inlet="reset"/>
         <dest obj="or_2" inlet="i1"/>
      </net>
      <net>
         <source obj="clock_rx_2" outlet="stop"/>
         <dest obj="clock_1" inlet="rst"/>
      </net>
      <net>
         <source obj="flipflop_3" outlet="o"/>
         <dest obj="clock_1" inlet="run"/>
      </net>
      <net>
         <source obj="button_2" outlet="o"/>
         <dest obj="flipflop_3" inlet="trig"/>
         <dest obj="or_2" inlet="i2"/>
      </net>
      <net>
         <source obj="clock_3" outlet="pos4ppq"/>
         <dest obj="change_1" inlet="in"/>
      </net>
      <net>
         <source obj="clock_rx_3" outlet="stop"/>
         <dest obj="or_1" inlet="i2"/>
         <dest obj="or_4" inlet="i2"/>
         <dest obj="or_2" inlet="i4"/>
      </net>
      <net>
         <source obj="or_2" outlet="o"/>
         <dest obj="counter_1" inlet="r"/>
      </net>
      <net>
         <source obj="vca_13" outlet="o"/>
         <dest obj="hp_1" inlet="in"/>
      </net>
      <net>
         <source obj="dial_14" outlet="out"/>
         <dest obj="tablestore_3" inlet="v4"/>
      </net>
      <net>
         <source obj="dial_15" outlet="out"/>
         <dest obj="tablestore_3" inlet="v6"/>
      </net>
      <net>
         <source obj="i_7" outlet="out"/>
         <dest obj="tablestore_3" inlet="v3"/>
      </net>
      <net>
         <source obj="*_17" outlet="result"/>
         <dest obj="sum3_2" inlet="in3"/>
      </net>
      <net>
         <source obj="dial_19" outlet="out"/>
         <dest obj="tablestore_3" inlet="v0"/>
      </net>
      <net>
         <source obj="dial_17" outlet="out"/>
         <dest obj="tablestore_3" inlet="v1"/>
      </net>
      <net>
         <source obj="dial_18" outlet="out"/>
         <dest obj="tablestore_3" inlet="v2"/>
      </net>
      <net>
         <source obj="dial_7" outlet="out"/>
         <dest obj="tablestore_2" inlet="v0"/>
      </net>
      <net>
         <source obj="dial_6" outlet="out"/>
         <dest obj="tablestore_2" inlet="v3"/>
      </net>
      <net>
         <source obj="dial_2" outlet="out"/>
         <dest obj="tablestore_2" inlet="v4"/>
      </net>
      <net>
         <source obj="button_1" outlet="o"/>
         <dest obj="or_3" inlet="i2"/>
         <dest obj="or_1" inlet="i3"/>
      </net>
      <net>
         <source obj="xor_2" outlet="o"/>
         <dest obj="or_3" inlet="i1"/>
      </net>
      <net>
         <source obj="dial_16" outlet="out"/>
         <dest obj="tablestore_3" inlet="v7"/>
      </net>
      <net>
         <source obj="dial_20" outlet="out"/>
         <dest obj="tablestore_3" inlet="v5"/>
      </net>
      <net>
         <source obj="*_1" outlet="result"/>
         <dest obj="vca_1" inlet="v"/>
      </net>
      <net>
         <source obj="ahd_6" outlet="env"/>
         <dest obj="*_1" inlet="b"/>
      </net>
      <net>
         <source obj="toggle_3" outlet="o"/>
         <dest obj="tablestore_1" inlet="v3"/>
      </net>
      <net>
         <source obj="dial_5" outlet="out"/>
         <dest obj="tablestore_1" inlet="v0"/>
      </net>
      <net>
         <source obj="and_1" outlet="o"/>
         <dest obj="inv_1" inlet="i"/>
      </net>
      <net>
         <source obj="inv_1" outlet="o"/>
         <dest obj="ahd_6" inlet="trig"/>
      </net>
      <net>
         <source obj="tablestore_1" outlet="v0"/>
         <dest obj="clock_1" inlet="bpm"/>
      </net>
      <net>
         <source obj="tablestore_1" outlet="v1"/>
         <dest obj="*_1" inlet="a"/>
      </net>
      <net>
         <source obj="tablestore_1" outlet="v2"/>
         <dest obj="vca_14" inlet="v"/>
      </net>
      <net>
         <source obj="tablestore_1" outlet="v3"/>
         <dest obj="and_1" inlet="i2"/>
      </net>
      <net>
         <source obj="toggle_4" outlet="o"/>
         <dest obj="tablestore_1" inlet="write"/>
         <dest obj="tablestore_2" inlet="write"/>
         <dest obj="tablestore_3" inlet="write"/>
      </net>
      <net>
         <source obj="tablestore_1" outlet="v4"/>
         <dest obj="counter_1" inlet="maximum"/>
         <dest obj="change_2" inlet="in"/>
      </net>
      <net>
         <source obj="tablestore_1" outlet="v5"/>
         <dest obj="==_1" inlet="in2"/>
      </net>
      <net>
         <source obj="tablestore_1" outlet="v6"/>
         <dest obj="==_2" inlet="in2"/>
      </net>
      <net>
         <source obj="dial_1" outlet="out"/>
         <dest obj="tablestore_1" inlet="v7"/>
      </net>
      <net>
         <source obj="tablestore_2" outlet="v0"/>
         <dest obj="patcher_1" inlet="rate"/>
      </net>
      <net>
         <source obj="tablestore_2" outlet="v1"/>
         <dest obj="scale_1" inlet="c"/>
      </net>
      <net>
         <source obj="tablestore_2" outlet="v2"/>
         <dest obj="scale_3" inlet="c"/>
      </net>
      <net>
         <source obj="tablestore_2" outlet="v3"/>
         <dest obj="ahd_5" inlet="a"/>
      </net>
      <net>
         <source obj="tablestore_2" outlet="v4"/>
         <dest obj="ahd_5" inlet="d"/>
      </net>
      <net>
         <source obj="tablestore_2" outlet="v5"/>
         <dest obj="unipolar2bipolar_23" inlet="i"/>
      </net>
      <net>
         <source obj="tablestore_2" outlet="v6"/>
         <dest obj="patcher_1" inlet="filter res"/>
      </net>
      <net>
         <source obj="tablestore_2" outlet="v7"/>
         <dest obj="unipolar2bipolar_16" inlet="i"/>
      </net>
      <net>
         <source obj="tablestore_3" outlet="v0"/>
         <dest obj="*_11" inlet="b"/>
      </net>
      <net>
         <source obj="tablestore_3" outlet="v1"/>
         <dest obj="*_16" inlet="a"/>
      </net>
      <net>
         <source obj="tablestore_3" outlet="v2"/>
         <dest obj="*_17" inlet="a"/>
      </net>
      <net>
         <source obj="tablestore_3" outlet="v3"/>
         <dest obj="patcher_1" inlet="polyphony"/>
      </net>
      <net>
         <source obj="tablestore_3" outlet="v4"/>
         <dest obj="patcher_1" inlet="poly spread"/>
      </net>
      <net>
         <source obj="tablestore_3" outlet="v6"/>
         <dest obj="patcher_1" inlet="poly spread range"/>
      </net>
      <net>
         <source obj="tablestore_3" outlet="v7"/>
         <dest obj="patcher_1" inlet="filter spread range"/>
      </net>
      <net>
         <source obj="tablestore_4" outlet="v1"/>
         <dest obj="patcher_1" inlet="overwrite"/>
      </net>
      <net>
         <source obj="i_4" outlet="out"/>
         <dest obj="tablestore_2" inlet="offset"/>
      </net>
      <net>
         <source obj="i_9" outlet="out"/>
         <dest obj="tablestore_3" inlet="offset"/>
      </net>
      <net>
         <source obj="i_11" outlet="out"/>
         <dest obj="tcopy_5" inlet="snapshot"/>
      </net>
      <net>
         <source obj="button_3" outlet="o"/>
         <dest obj="or_5" inlet="i1"/>
         <dest obj="or_6" inlet="i2"/>
      </net>
      <net>
         <source obj="c_1" outlet="out"/>
         <dest obj="save_1" inlet="filename"/>
      </net>
      <net>
         <source obj="button_4" outlet="o"/>
         <dest obj="save_1" inlet="trig"/>
      </net>
      <net>
         <source obj="i_10" outlet="out"/>
         <dest obj="tablestore_4" inlet="offset"/>
      </net>
      <net>
         <source obj="change_2" outlet="trig"/>
         <dest obj="or_6" inlet="i1"/>
      </net>
      <net>
         <source obj="flipflop_4" outlet="o"/>
         <dest obj="and_2" inlet="i2"/>
      </net>
      <net>
         <source obj="and_2" outlet="o"/>
         <dest obj="flipflop_4" inlet="reset"/>
         <dest obj="or_2" inlet="i3"/>
      </net>
      <net>
         <source obj="counter_3" outlet="c"/>
         <dest obj="and_2" inlet="i1"/>
      </net>
      <net>
         <source obj="clock_rx_3" outlet="start"/>
         <dest obj="or_4" inlet="i1"/>
      </net>
      <net>
         <source obj="tablestore_3" outlet="v5"/>
         <dest obj="patcher_1" inlet="filter spread"/>
      </net>
      <net>
         <source obj="counter_3" outlet="o"/>
         <dest obj="i_13" inlet="in"/>
      </net>
      <net>
         <source obj="or_4" outlet="o"/>
         <dest obj="counter_3" inlet="r"/>
      </net>
      <net>
         <source obj="button_5" outlet="o"/>
         <dest obj="pulselength_1" inlet="trig"/>
         <dest obj="delayedpulse_1" inlet="trig"/>
      </net>
      <net>
         <source obj="pulselength_1" outlet="pulse"/>
         <dest obj="tcopy_5" inlet="save"/>
      </net>
      <net>
         <source obj="or_5" outlet="o"/>
         <dest obj="tcopy_5" inlet="trig"/>
      </net>
      <net>
         <source obj="delayedpulse_1" outlet="pulse"/>
         <dest obj="or_5" inlet="i2"/>
      </net>
      <net>
         <source obj="or_6" outlet="o"/>
         <dest obj="flipflop_4" inlet="set"/>
      </net>
      <net>
         <source obj="hp_1" outlet="out"/>
         <dest obj="vca_14" inlet="a"/>
      </net>
      <net>
         <source obj="dial_21" outlet="out"/>
         <dest obj="tablestore_4" inlet="v0"/>
      </net>
      <net>
         <source obj="tablestore_4" outlet="v0"/>
         <dest obj="unipolar2bipolar_2" inlet="i"/>
      </net>
      <net>
         <source obj="unipolar2bipolar_2" outlet="o"/>
         <dest obj="hp_1" inlet="pitch"/>
      </net>
   </nets>
   <settings>
      <subpatchmode>no</subpatchmode>
   </settings>
   <notes><![CDATA[]]></notes>
   <windowPos>
      <x>-8</x>
      <y>-8</y>
      <width>1616</width>
      <height>876</height>
   </windowPos>
</patch-1.0>