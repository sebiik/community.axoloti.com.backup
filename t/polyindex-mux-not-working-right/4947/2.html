<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from community.axoloti.com/t/polyindex-mux-not-working-right/4947/2 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 16 Jul 2023 17:34:32 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Polyindex -&gt; mux not working right - Patching - Axoloti Community</title>
    <meta name="description" content="Hey there I am trying to to get every first, every second, and every third note in my polyphonic subpatch.  I tried it with the modulo operator and with the following but it only works sometimes. does anyone know why? [i&amp;hellip;">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.9.0.beta3 - https://github.com/discourse/discourse version 13f3de4bf673802eb8ec595d36587b4524773209">
<link rel="icon" type="image/png" href="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="../4947.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"http://community.axoloti.com","potentialAction":{"@type":"SearchAction","target":"http://community.axoloti.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="Axoloti Community Search">

        <link href="../../../stylesheets/desktop_d93a33ca8617326fe353f80e6ab865188244d48c8e0b.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop"/>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Polyindex -&gt; mux not working right&#39;" href="../4947.rss" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://community.axoloti.com/user_avatar/community.axoloti.com/sebo/200/4466_1.png" />
<meta property="og:image" content="http://community.axoloti.com/user_avatar/community.axoloti.com/sebo/200/4466_1.png" />
<meta property="og:url" content="http://community.axoloti.com/t/polyindex-mux-not-working-right/4947/2" />
<meta name="twitter:url" content="http://community.axoloti.com/t/polyindex-mux-not-working-right/4947/2" />
<meta property="og:title" content="Polyindex -&gt; mux not working right" />
<meta name="twitter:title" content="Polyindex -&gt; mux not working right" />
<meta property="og:description" content="I had a similar question. Look at this post:" />
<meta name="twitter:description" content="I had a similar question. Look at this post:" />


  </head>
  <body class="crawler">
    
    <header>
      <a href="../../../index.html"><img src="http://community.axoloti.com/uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo" style="max-width: 150px;"></a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1>
  <a href="../4947.html">Polyindex -&gt; mux not working right</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../../c/patching.html" itemprop="url">
        <span itemprop="title">Patching</span>
      </a>
    </div>
</div>





<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/Flub.html'><b itemprop='author'>Flub</b></a>
           
           <time datetime='2018-09-06T17:35:28Z' itemprop='datePublished'>
             2018-09-06 17:35:28 UTC
           </time>
        </span>
        <span itemprop='position'>#1</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hey there I am trying to to get every first, every second, and every third note in my polyphonic subpatch. <br>I tried it with the modulo operator and with the following but it only works sometimes. does anyone know why?<br><img src="http://community.axoloti.com/uploads/default/original/2X/6/6f9bb4f6cfa784aa82d56ba4f8b06660c3ca1e47.png" width="441" height="333"><br>thanks in advance,<br>Flub</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Polyindex -&gt; mux not working right'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/Sebo.html'><b itemprop='author'>Sebo</b></a>
           
           <time datetime='2018-09-06T23:24:02Z' itemprop='datePublished'>
             2018-09-06 23:24:02 UTC
           </time>
        </span>
        <span itemprop='position'>#2</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I had a similar question. Look at this post:<br><aside class="quote" data-post="1" data-topic="3500">
  <div class="title">
    <div class="quote-controls"></div>
    <img alt="" width="20" height="20" src="http://community.axoloti.com/user_avatar/community.axoloti.com/sebo/40/4466_1.png" class="avatar">
    <a href="../../how-can-i-get-the-output-of-individual-voices-out-of-a-polyphonic-subpatch/35003bd2.html?u=sebo&amp;source_topic_id=4947" rel="nofollow noopener">How can I get the output of individual voices out of a polyphonic subpatch?</a> <a class="badge-wrapper  bullet" href="../../../c/patching.html"><span class="badge-category-bg" style="background-color: #AB9364;"></span><span style="color: #FFFFFF;" class="badge-category clear-badge" title="This category is for discussion about patching Axoloti, and sharing patches.">Patching</span></a>
  </div>
  <blockquote>
    Hi I made a polyphonic synth using a polyphonic sub-patch. Now I want to get individual voices out of the sub-patch (as outlets) so I can pan them individually. It is possible to do that? Or is there another method to pan individual voices? 

What I want is to mimic the behaviour of old polysynths that have a stereo out with voices panned left and right. Let´s say I want voices 1, 3 and 5 panned to the left, and voices 2, 4 and 6 panned to the right. 

Thank you.
  </blockquote>
</aside>
</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Polyindex -&gt; mux not working right'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/Flub.html'><b itemprop='author'>Flub</b></a>
           
           <time datetime='2018-09-07T08:00:18Z' itemprop='datePublished'>
             2018-09-07 08:00:18 UTC
           </time>
        </span>
        <span itemprop='position'>#3</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hey thanks for your reply . But it did not solve the problem . I only need seperate integers . I think sometimes the polyindex counting has jumps in it . But I am not sure if that’s the problem. I just want that if I press 3 keys one of them is voice 1 one is voice 2 and the other is voice 3 the fourth key should be voice 1 again...</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Polyindex -&gt; mux not working right'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/lokki.html'><b itemprop='author'>lokki</b></a>
           
           <time datetime='2018-09-07T08:01:21Z' itemprop='datePublished'>
             2018-09-07 08:01:21 UTC
           </time>
        </span>
        <span itemprop='position'>#4</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>hmm, then just set the polyphony to 3, no?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Polyindex -&gt; mux not working right'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/Flub.html'><b itemprop='author'>Flub</b></a>
           
           <time datetime='2018-09-07T08:12:30Z' itemprop='datePublished'>
             2018-09-07 08:12:30 UTC
           </time>
        </span>
        <span itemprop='position'>#5</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>But I don’t want to miss the polyphony of 8 or so i just want to seperate The 8 into 3 variations and I wondered why the patch above did not work always but sometimes</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Polyindex -&gt; mux not working right'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/lokki.html'><b itemprop='author'>lokki</b></a>
           
           <time datetime='2018-09-07T11:15:58Z' itemprop='datePublished'>
             2018-09-07 11:15:58 UTC
           </time>
        </span>
        <span itemprop='position'>#6</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>ok. how do the midi notes arrive?</p>

<p>do you play one after each other, or do you also play chords?</p>

<p>what sorting do you expect in case of chords? from low to high, high to low?</p>

<p>i am not sure the poly index simply counts through and starts over again. i imagine it is more some sort of notes pool, and the places that are empty can be filled. (so that voice stealing etc. works) but i am not sure about that.</p>

<p>so that might mean, you or somebody else has to write a dedicated object for that.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Polyindex -&gt; mux not working right'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/Flub.html'><b itemprop='author'>Flub</b></a>
           
           <time datetime='2018-09-07T13:55:17Z' itemprop='datePublished'>
             2018-09-07 13:55:17 UTC
           </time>
        </span>
        <span itemprop='position'>#7</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I connected a usb midi keyboard the usb input of the axoloti board.<br>I want to play chords or single notes. I was okay with the order not being fixed from low to high or from high to low.<br>but anyways what I dont understand is that the polyindex must in any case a number between 0 and number of voices-1<br>where every voice number exists only 1 time. In my case I play a Chord and sometimes two voices/keypresses get the same polyindex. I might be a timing issue that the mux gets set to late and still has the inputselect integer from a note before. But I dont know how to affect this...</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Polyindex -&gt; mux not working right'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/thetechnobear.html'><b itemprop='author'>thetechnobear</b></a>
           
           <time datetime='2018-09-07T20:38:30Z' itemprop='datePublished'>
             2018-09-07 20:38:30 UTC
           </time>
        </span>
        <span itemprop='position'>#8</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="7" data-topic="4947"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="http://community.axoloti.com/letter_avatar_proxy/v2/letter/f/4af34b/40.png" class="avatar">Flub:</div>
<blockquote><p>where every voice number exists only 1 time. In my case I play a Chord and sometimes two voices/keypresses get the same polyindex.</p></blockquote></aside>

<p>as <a class="mention" href="../../../u/lokki.html">@lokki</a> already said...if you using 8 voices, then you are going to have duplicates<br>as essentially your doing 8 % 3.</p>

<p>so there are  N (8 in this case) voices (set in your poly for the subpatch) , and voices are allocated based on the time that voice was used (i.e. oldest is used next), so once you've started playing a few notes, especially chords, the actual voice used will get tricky for you to track, as depends on exactly which order you released keys.</p>

<p>(so it is completely predictable, but easy to lose track of when your playing)</p>

<p>btw: what id recommend you do when your trying to debug these kind of things, is try to print something to the console log, e.g. my print object will help... this way you'll be able to see what polyindex is returning.<br>I think this would show you, you are not getting two voices with the same index <img src="http://community.axoloti.com/images/emoji/twitter/wink.png?v=5" title=":wink:" class="emoji" alt=":wink:"></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Polyindex -&gt; mux not working right'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/Flub.html'><b itemprop='author'>Flub</b></a>
           
           <time datetime='2018-09-08T06:48:30Z' itemprop='datePublished'>
             2018-09-08 06:48:30 UTC
           </time>
        </span>
        <span itemprop='position'>#9</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Ah thank you, this might be the key ! that the polyindex depends on the key release not on the key down. <br>I already looked if I can find a print object and I didnt find one. I take a further look and try to solve my problem with that.<br>Thanks. ill come back if I find a solution. If somebody understood my problem and knows the solution already. feel free to share it = )</p>

<p>EDIT: polyindex to tb/disp/print i does not work. it shows alle indexes once on startup in the console and then does not do anything further when i press keys.</p>

<p>Isnt there a way to access data stored in parent patch from subppatch then I could simply use a counter on the parent patch to cycle between 0 1 2  0 1 2 every time a key is pressed?</p>

<p>Or how can I get the number of keys Pressed inside a polyphonic subpatch?<br>SOLUTION:<br>I created a custom object from the paraphonic objekt<br>    </p>

<p></p><pre><code class="lang-auto">int channel = (status &amp; 0xf) + 1;
int cmd = (status &amp; 0x70) &gt;&gt; 4;
if ((channel!=attr_MIDIchannel &amp;&amp; attr_MIDIchannel&gt;0)) {
	return;	
}
// some midi devices send note on with velocity 0 instead of note off
if (cmd==1 &amp;&amp; data2==0) {
	cmd = 0;
}
if (cmd==1 ) {
	// check if there is a free channel
	for (chIndex=0; chIndex&lt;MAX_CHANNELS;chIndex++) {
		if(channels[chIndex] == 0) {
			channels[chIndex] = data1;
			break;	
		}
	}
	chIndex++;
	if (chIndex &gt;= MAX_CHANNELS) {
		chIndex = 0;
	}
}
else if (cmd==0) {
	// note off
	for (chIndex=0; chIndex&lt;MAX_CHANNELS;chIndex++) {
		if(channels[chIndex] == data1) {
			channels[chIndex] = 0;
			break;
		}
	}
}
if ((cmd == 3)&amp;&amp;(data1 == 123)) { // all notes off message
	for (int i=0;i&lt;MAX_CHANNELS;i++) {
		channels[chIndex] = 0;
	}
	chIndex = 0;
}</code></pre>

<p><a class="attachment" href="../../../uploads/default/original/2X/a/master4.axp">master4.axp</a> (76.4 KB)</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:2'>
      <meta itemprop='headline' content='Polyindex -&gt; mux not working right'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/thetechnobear.html'><b itemprop='author'>thetechnobear</b></a>
           
           <time datetime='2018-09-08T13:26:54Z' itemprop='datePublished'>
             2018-09-08 13:26:54 UTC
           </time>
        </span>
        <span itemprop='position'>#10</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="9" data-topic="4947"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="http://community.axoloti.com/letter_avatar_proxy/v2/letter/f/4af34b/40.png" class="avatar">Flub:</div>
<blockquote><p>EDIT: polyindex to tb/disp/print i does not work. it shows alle indexes once on startup in the console and then does not do anything further when i press keys.</p></blockquote></aside>

<p>I recommend you start to check how things work rather than just declaring them as 'not working', this way you'll be able to use things to help build your understanding, or adapt to your use-case.</p>

<p>print, will only print when a values change - this means you would need to do something like set it back to zero on note-off</p>

<p>(why does print work like this? well remember axoloti is continuously processing objects, so if it didn't it would constantly print sending output to the console)</p>

<aside class="quote" data-post="9" data-topic="4947"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="http://community.axoloti.com/letter_avatar_proxy/v2/letter/f/4af34b/40.png" class="avatar">Flub:</div>
<blockquote><p>Isnt there a way to access data stored in parent patch from subppatch</p></blockquote></aside>

<p>yes, the easiest way is to use a table object, even if its only got one entry.<br>(see table help for example on how to access parent tables)</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Polyindex -&gt; mux not working right'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/Flub.html'><b itemprop='author'>Flub</b></a>
           
           <time datetime='2018-09-08T20:38:27Z' itemprop='datePublished'>
             2018-09-08 20:38:27 UTC
           </time>
        </span>
        <span itemprop='position'>#11</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Thank you for helping me.  how can I find out how the object works ? Is there anything else than looking into the edit object dialogs? <br>Regards , Flub</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Polyindex -&gt; mux not working right'>
      <hr>
  </div>






    </div>
    <footer class="container">
      <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <a href='../../../index.html'>Home</a>
        <a href="../../../categories.html">Categories</a>
        <a href="../../../guidelines.html">FAQ/Guidelines</a>
        <a href="../../../tos.html">Terms of Service</a>
        <a href="../../../privacy.html">Privacy Policy</a>
      </nav>
      <p>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  

<!-- Mirrored from community.axoloti.com/t/polyindex-mux-not-working-right/4947/2 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 16 Jul 2023 17:34:36 GMT -->
</html>
