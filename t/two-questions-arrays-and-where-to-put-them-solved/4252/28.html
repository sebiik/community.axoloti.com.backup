<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from community.axoloti.com/t/two-questions-arrays-and-where-to-put-them-solved/4252/28 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 10 Jul 2023 17:22:51 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Two questions...(arrays and where to put them) [SOLVED] - AxoObject coding - Axoloti Community</title>
    <meta name="description" content="hi there, 

i have some large arrays like this: 

 uint8_t spKETTENFETT[715] = {0xe9,0x6f,0xae,0x93,0x3d,0x6a,0xae,0xbf,0xf9,0x4a,0xd3,0x68,0x78,0xfe,0x6e,0xdb,0x5d,0xa2,0xd6,0xfa,0xbb,0x69,0x73,0x89, 0x4a,0xe9,0xaf,0x36&amp;hellip;">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.9.0.beta3 - https://github.com/discourse/discourse version 13f3de4bf673802eb8ec595d36587b4524773209">
<link rel="icon" type="image/png" href="../../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="../../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="../42524658.html?page=2" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://sebiik.github.io/community.axoloti.com.backup","potentialAction":{"@type":"SearchAction","target":"https://sebiik.github.io/community.axoloti.com.backup/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="Axoloti Community Search">

        <link href="../../../stylesheets/desktop_d93a33ca8617326fe353f80e6ab865188244d48c8e0b.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop"/>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','../../../../www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Two questions...(arrays and where to put them) [SOLVED]&#39;" href="../4252.rss" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://sebiik.github.io/community.axoloti.com.backup/user_avatar/community.axoloti.com/thetechnobear/200/6_1.png" />
<meta property="og:image" content="https://sebiik.github.io/community.axoloti.com.backup/user_avatar/community.axoloti.com/thetechnobear/200/6_1.png" />
<meta property="og:url" content="https://sebiik.github.io/community.axoloti.com.backup/t/two-questions-arrays-and-where-to-put-them-solved/4252/28" />
<meta name="twitter:url" content="https://sebiik.github.io/community.axoloti.com.backup/t/two-questions-arrays-and-where-to-put-them-solved/4252/28" />
<meta property="og:title" content="Two questions...(arrays and where to put them) [SOLVED]" />
<meta name="twitter:title" content="Two questions...(arrays and where to put them) [SOLVED]" />
<meta property="og:description" content="Yeah the point of this is the user doesn’t know the data is held in a file, it’s automatic to them. (Like lmnts)   The only thing to becareful of is they have to use an sdcard, which theoretically is not a requirement , but in practice most users have.     Again, just to repeat (as important) this is designed for initializing /allocating data at startup , if you keep allocating/freeing you are likely to have issues.  Also remember a patch can only take a certain amount of time, otherwise initial..." />
<meta name="twitter:description" content="Yeah the point of this is the user doesn’t know the data is held in a file, it’s automatic to them. (Like lmnts)   The only thing to becareful of is they have to use an sdcard, which theoretically is not a requirement , but in practice most users have.     Again, just to repeat (as important) this is designed for initializing /allocating data at startup , if you keep allocating/freeing you are likely to have issues.  Also remember a patch can only take a certain amount of time, otherwise initial..." />


  </head>
  <body class="crawler">
    
    <header>
      <a href="../../../index.html"><img src="../../../uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo" style="max-width: 150px;"></a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1>
  <a href="../4252.html">Two questions...(arrays and where to put them) [SOLVED]</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../../c/axoobject-code.html" itemprop="url">
        <span itemprop="title">AxoObject coding</span>
      </a>
    </div>
</div>





<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/lokki.html'><b itemprop='author'>lokki</b></a>
           
           <time datetime='2018-02-22T20:23:16Z' itemprop='datePublished'>
             2018-02-22 20:23:16 UTC
           </time>
        </span>
        <span itemprop='position'>#17</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>ok, <a class="mention" href="../../../u/thetechnobear.html">@thetechnobear</a>, i have one other question, if you don't mind. as i wrote i was successful in mallocing some sdram space. my object works great with this. since i though about loading multiple instances that would use the same data, can i also do the <br><code>[parent -&gt; polyIndex][0] </code> trick with the array i allocated dynamically to access the data from more than one object? or do i have to initialise a pointer via <br><code>[attr_poly][LENGTH] <strong>attribute</strong> ((section (".sdram")))</code> and point that to the location of the array that i malloced in sdram? either way, i cannot get it to work <img src="../../../images/emoji/twitter/frowningae52.png?v=5" title=":frowning:" class="emoji" alt=":frowning:"> but maybe this is also not possible. i could not see from your code how/if you do that in the elements code. what happens if you open more then one instance of those?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Two questions...(arrays and where to put them) [SOLVED]'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/thetechnobear.html'><b itemprop='author'>thetechnobear</b></a>
           
           <time datetime='2018-02-22T20:59:03Z' itemprop='datePublished'>
             2018-02-22 20:59:03 UTC
           </time>
        </span>
        <span itemprop='position'>#18</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>ok, the thing to realise is these 'tricks' are only really necessary because each instance of an object is created as a separate class, and so access is restricted, because that class name is the instance name of the object... so you cant reference it easily.</p>

<p>so for complex objects, i think its much easier to just define a new class in a  header file, which you then include (object editor supports include)<br>that way you know what the class name is called, so you can easily implement a singleton pattern. (which is basically just a static pointer wrapped in a class)</p>

<p>it perhaps sounds complex, but in reality its a couple of lines of code... and also provides a perfect place to put 'common' code e.g. loading your data from the file.</p>

<p>(its a pity i didn't structure the Push object like this, not quite sure why i did it using C functions... was a long time ago <img src="../../../images/emoji/twitter/winkae52.png?v=5" title=":wink:" class="emoji" alt=":wink:"> ) </p>

<p>tip... what i do when looking at this kind of thing, is look at the xpatch.cpp (run it thru a pretty print), it then becomes fairly clear the C++ 'syntax issues' your seeing... I guess that's why I also don't think exclusively in terms of axo object, and more just in how it looks in C++.</p>

<p>lmnts, nah, it (stupidly) loads the data per instance... because i kind of knew you could only have one instance of it... partly due to cpu, and iirc, the MI code has some statics which cause issues with multiple instances.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Two questions...(arrays and where to put them) [SOLVED]'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/lokki.html'><b itemprop='author'>lokki</b></a>
           
           <time datetime='2018-02-22T21:39:12Z' itemprop='datePublished'>
             2018-02-22 21:39:12 UTC
           </time>
        </span>
        <span itemprop='position'>#19</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>thanks again. hmm again over my head for the moment. have to read up on that singleton pattern. yeah it sounds complex because i am not a programmer really <img src="../../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"> so i would put all my loading data code and other common stuff into the header file. and create a class where i put in all the static pointers i need and it would only be called once when i create multiple instances? sounds great. phuuh. </p>

<p>i looked at the patch.cpp and i can see all the classes there. so basically something like this should work for my header file? </p>

<p><code>;class lpc_common{<br>public:<br>static uint8_t *lpc_data;<br>static uint16_t *onset_data;<br>static uint32_t *word_idx;<br>static uint8_t wordcount = 0;</code></p>

<p> void dataInit () {<br>      FIL lpcfile, onsetfile;</p>

<p>uint32_t lpcfile_len, onsetfile_len;</p>

<p>FRESULT err;</p>

<p>UINT bytes_read;</p>

<p>err = f_open(&amp;lpcfile, "0:/lpcdata.sns", FA_READ | FA_OPEN_EXISTING);</p>

<p>if(err != FR_OK) {<br>	LogTextMessage("Unable to open lpcdata, is the file on the sdcard?");<br>	return;<br>}</p>

<p>lpcfile_len = f_size(&amp;lpcfile);</p>

<p>lpc_data = (uint8_t *)sdram_malloc(lpcfile_len);</p>

<p>// Load lpcdata into sdram<br>int remaining_bytes = lpcfile_len;<br>int offset = 0;</p>

<p>while (remaining_bytes &gt; 0) {<br>	if (remaining_bytes &gt; sizeof(fbuff)) {<br>		err = f_read(&amp;lpcfile, fbuff, sizeof(fbuff), &amp;bytes_read);<br>		if (bytes_read == 0)<br>			break;<br>		memcpy((char*)(&amp;lpc_data[0]) + offset,(char *)fbuff,bytes_read);<br>		remaining_bytes -= bytes_read;<br>		offset += bytes_read;<br>	} else {<br>		err = f_read(&amp;lpcfile, fbuff, remaining_bytes, &amp;bytes_read);<br>		memcpy((char*)(&amp;lpc_data[0]) + offset,(char *)fbuff,bytes_read);<br>		remaining_bytes = 0;<br>	}<br>}</p>

<p>if (err != FR_OK) {<br>	LogTextMessage("Failed reading lpcdata file, aborting...\n");<br>	return; <br>}</p>

<p>err = f_close(&amp;lpcfile);<br>if (err != FR_OK) {<br>	LogTextMessage("Failed closing lpcdata file, aborting...\n");<br>	return; <br>}</p>

<p>//load onsets into sdram</p>

<p>err = f_open(&amp;onsetfile, "0:/onsets.sns", FA_READ | FA_OPEN_EXISTING);</p>

<p>if(err != FR_OK) {<br>	LogTextMessage("Unable to open onsets, is the file on the sdcard?");<br>	return;<br>}</p>

<p>onsetfile_len = f_size(&amp;onsetfile);</p>

<p>//16bit only needs half the size because f_size reports 8bits(bytes) not 16bit<br>onset_data = (uint16_t *)sdram_malloc(onsetfile_len/2);</p>

<p>//16bit uses two slots, equals length reported by f_size, since we are writing one byte at a time<br>remaining_bytes = onsetfile_len;<br>offset = 0;</p>

<p>while (remaining_bytes &gt; 0) {<br>	if (remaining_bytes &gt; sizeof(fbuff)) {<br>		err = f_read(&amp;onsetfile, fbuff, sizeof(fbuff), &amp;bytes_read);<br>		if (bytes_read == 0)<br>			break;<br>		memcpy((char*)(&amp;onset_data[0]) + offset,(char *)fbuff,bytes_read);<br>		remaining_bytes -= bytes_read;<br>		offset += bytes_read;<br>	} else {<br>		err = f_read(&amp;onsetfile, fbuff, remaining_bytes, &amp;bytes_read);<br>		memcpy((char*)(&amp;onset_data[0]) + offset,(char *)fbuff,bytes_read);<br>		remaining_bytes = 0;<br>	}<br>}</p>

<p>if (err != FR_OK) {<br>	LogTextMessage("Failed reading onset file, aborting...\n");<br>	return; <br>}</p>

<p>err = f_close(&amp;onsetfile);<br>if (err != FR_OK) {<br>	LogTextMessage("Failed closing onset file, aborting...\n");<br>	return; <br>}<br>//calculate word indexes from wordlengths and put into sdram<br>word_idx = (uint32_t*)sdram_malloc(onsetfile_len/2);<br>int i;<br>for(i=0;i&lt;sizeof(word_idx);i++){<br>	if (i == 0) word_idx[0] = 0;<br>	else {<br>		word_idx[i] = onset_data[i-1] + word_idx[i - 1];<br>	}<br>}</p>

<p>wordcount = sizeof(word_idx);</p>

<pre><code>}</code></pre>

<p>} </p>

<p>and i can then access the pointers via <code>lpc_common.lpc_data and the file loading via lpc_comon.dataInit()</code> ? <br>probably not, but maybe something in that direction?</p>

<p>thanks for your time and support, really appreciated.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:3'>
      <meta itemprop='headline' content='Two questions...(arrays and where to put them) [SOLVED]'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/lokki.html'><b itemprop='author'>lokki</b></a>
           
           <time datetime='2018-02-22T21:40:36Z' itemprop='datePublished'>
             2018-02-22 21:40:36 UTC
           </time>
        </span>
        <span itemprop='position'>#20</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>funny how in the preview the code tags work, but in the posted example they don't really...</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Two questions...(arrays and where to put them) [SOLVED]'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/lokki.html'><b itemprop='author'>lokki</b></a>
           
           <time datetime='2018-02-22T23:00:14Z' itemprop='datePublished'>
             2018-02-22 23:00:14 UTC
           </time>
        </span>
        <span itemprop='position'>#21</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>ok not exactly. </p>

<p>more like:<br>lpc_common a;<br>a.lpc_data</p>

<p>etc...<br>and file loading</p>

<p>lpc_common:dataInit()</p>

<p>and, would the function definition not have to be in a .c file?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Two questions...(arrays and where to put them) [SOLVED]'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/lokki.html'><b itemprop='author'>lokki</b></a>
           
           <time datetime='2018-02-23T21:24:50Z' itemprop='datePublished'>
             2018-02-23 21:24:50 UTC
           </time>
        </span>
        <span itemprop='position'>#22</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>ok i had a go at this. i tried to make two really simple objects, one with a param dial, one with an outlet. i then tried to send the value from the param of one object to the outlet of the other object by passing the value to a variable defined in a class in a header file.</p>

<p>but, i get always this error: </p>

<pre><code>/Users/lokki/Documents/axoloti/build/xpatch.o: In function `PatchProcess(long*, long*)':
xpatch.cpp:(.text+0x110): undefined reference to `Fly::datafly'
collect2: error: ld returned 1 exit status</code></pre>

<p>the contents of my common.h file are only:</p>

<p><code><br>class Fly{<br>    public:<br>static uint32_t datafly; <br>};<br></code></p>

<p>i'll attach the two objects. if you <a class="mention" href="../../../u/thetechnobear.html">@thetechnobear</a> or someone else can point me in the right direction with this simple example, that would be great. i looked at: <a href="https://en.wikipedia.org/wiki/C++_classes" rel="nofollow noopener">https://en.wikipedia.org/wiki/C%2B%2B_classes</a> and thought i did it right...</p>

<p>thanks.<br><a class="attachment" href="../../../uploads/default/original/2X/d/classreceive.axo">classreceive.axo</a> (508 Bytes)<br><a class="attachment" href="../../../uploads/default/original/2X/c/classsend.axo">classsend.axo</a> (524 Bytes)</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Two questions...(arrays and where to put them) [SOLVED]'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/thetechnobear.html'><b itemprop='author'>thetechnobear</b></a>
           
           <time datetime='2018-02-23T23:41:18Z' itemprop='datePublished'>
             2018-02-23 23:41:18 UTC
           </time>
        </span>
        <span itemprop='position'>#23</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>your just declaring the static, you need to instantiate it as well</p>

<p>you header file should look like</p>

<p></p><pre><code class="lang-auto">#pragma once
class Fly{
public:
      static uint32_t datafly; 
};
uint32_t Fly::datafly=0;</code></pre>

<p>note: normally this would not be done in the header file, but in the compilable module (C file) ... but thats not used in axo.</p>

<p>however, what I do, is still break up my C code into headers and C files, and then just include the C file in the header file.<br>this means that when axoloti supports compilable modules, you can easily move your code into proper modules, as its already split correctly. <br>for 'trivial examples' though not necessary as you'd probably never want to go to the effort of having a separate module.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:2'>
      <meta itemprop='headline' content='Two questions...(arrays and where to put them) [SOLVED]'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/lokki.html'><b itemprop='author'>lokki</b></a>
           
           <time datetime='2018-02-24T06:38:52Z' itemprop='datePublished'>
             2018-02-24 06:38:52 UTC
           </time>
        </span>
        <span itemprop='position'>#24</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>thanks! works perfectly</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Two questions...(arrays and where to put them) [SOLVED]'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/lokki.html'><b itemprop='author'>lokki</b></a>
           
           <time datetime='2018-02-25T21:31:38Z' itemprop='datePublished'>
             2018-02-25 21:31:38 UTC
           </time>
        </span>
        <span itemprop='position'>#25</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>just as a follow up, i did it with all the data loading functions and stuff as well, all in a class now, and if you load multiple instances, the data will only be loaded the first time, but reused by the other modul-instances. this is nice, small memory footprint. thanks heaps <a class="mention" href="../../../u/thetechnobear.html">@thetechnobear</a>, i really really dig your way of helping me out here, i learn a lot and i am having fun!</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Two questions...(arrays and where to put them) [SOLVED]'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/toneburst.html'><b itemprop='author'>toneburst</b></a>
           
           <time datetime='2018-02-26T09:49:32Z' itemprop='datePublished'>
             2018-02-26 09:49:32 UTC
           </time>
        </span>
        <span itemprop='position'>#26</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hi All!</p>

<p>Coming late to this thread, but I'm just wondering if the above offers a solution to a problem I had when working on my LPC objects.</p>

<p>One of my objects requires a number of pre-defined multi-dimensional arrays. I'd like put them directly into SDRAM somehow, and ideally, also make them available to other objects. I don't want to load the data from a binary file on the SD card.</p>

<p>Is this possible using any of the methods outlined above? Sorry if this has been covered already. It's been a while since I worked on any Axoloti coding, so it's taking me a while to get back into the swing of things.</p>

<p>a|x</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Two questions...(arrays and where to put them) [SOLVED]'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/toneburst.html'><b itemprop='author'>toneburst</b></a>
           
           <time datetime='2018-02-26T11:00:54Z' itemprop='datePublished'>
             2018-02-26 11:00:54 UTC
           </time>
        </span>
        <span itemprop='position'>#27</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Thanks <a class="mention" href="../../../u/lokki.html">@lokki</a> for answering in a pvt. I can roll the data into a binary file in the object directory, and load that automatically into SDRAM at patch init.</p>

<p>a|x</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Two questions...(arrays and where to put them) [SOLVED]'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/thetechnobear.html'><b itemprop='author'>thetechnobear</b></a>
           
           <time datetime='2018-02-26T12:20:18Z' itemprop='datePublished'>
             2018-02-26 12:20:18 UTC
           </time>
        </span>
        <span itemprop='position'>#28</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Yeah the point of this is the user doesn’t know the data is held in a file, it’s automatic to them. (Like lmnts)</p>

<p>The only thing to becareful of is they have to use an sdcard, which theoretically is not a requirement , but in practice most users have.  </p>

<p>Again, just to repeat (as important) this is designed for initializing /allocating data at startup , if you keep allocating/freeing you are likely to have issues. <br>Also remember a patch can only take a certain amount of time, otherwise initialisation will timeout.<br>(Can’t remember off hand what that timeout is)</p>

<p>Also remember to check return value from the Malloc , the more object developers use this, the more likely users are to run out of sdram during initialisation... and if you don’t log the failure, they’ll just start complaining of boards ‘crashing’</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Two questions...(arrays and where to put them) [SOLVED]'>
      <hr>
            <a href="../../load-struct-from-binary-file-into-sdram-c/4291.html">Load Struct from binary file into SDRAM (C)</a>
            <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/toneburst.html'><b itemprop='author'>toneburst</b></a>
           
           <time datetime='2018-02-26T13:27:12Z' itemprop='datePublished'>
             2018-02-26 13:27:12 UTC
           </time>
        </span>
        <span itemprop='position'>#29</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>These are relatively small arrays, but I take your points.</p>

<p>a|x</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Two questions...(arrays and where to put them) [SOLVED]'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/toneburst.html'><b itemprop='author'>toneburst</b></a>
           
           <time datetime='2018-03-01T13:02:21Z' itemprop='datePublished'>
             2018-03-01 13:02:21 UTC
           </time>
        </span>
        <span itemprop='position'>#30</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="23" data-topic="4252"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../user_avatar/community.axoloti.com/thetechnobear/40/6_1.html" class="avatar">thetechnobear:</div>
<blockquote><p>note: normally this would not be done in the header file, but in the compilable module (C file) ... but thats not used in axo.</p></blockquote></aside>

<p>Hi <a class="mention" href="../../../u/thetechnobear.html">@thetechnobear</a> Are there any relatively simple examples of the use of C header files and C++ objects in external files in the factory library?</p>

<p>I've been avoiding C++, because I've always been a bit scared of OOP, but it's probably about time I gave it a try.</p>

<p>a|x</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Two questions...(arrays and where to put them) [SOLVED]'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/lokki.html'><b itemprop='author'>lokki</b></a>
           
           <time datetime='2018-03-01T13:18:30Z' itemprop='datePublished'>
             2018-03-01 13:18:30 UTC
           </time>
        </span>
        <span itemprop='position'>#31</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>the push object... or the really simple one i sent you. (to answer a question i was not asked) <img src="../../../images/emoji/twitter/winkae52.png?v=5" title=":wink:" class="emoji" alt=":wink:"></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Two questions...(arrays and where to put them) [SOLVED]'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/toneburst.html'><b itemprop='author'>toneburst</b></a>
           
           <time datetime='2018-03-01T13:38:54Z' itemprop='datePublished'>
             2018-03-01 13:38:54 UTC
           </time>
        </span>
        <span itemprop='position'>#32</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I’ll look at that <img src="../../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>

<p>a|x</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Two questions...(arrays and where to put them) [SOLVED]'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/toneburst.html'><b itemprop='author'>toneburst</b></a>
           
           <time datetime='2018-03-01T22:47:29Z' itemprop='datePublished'>
             2018-03-01 22:47:29 UTC
           </time>
        </span>
        <span itemprop='position'>#33</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I can't seem to work out how to hard-code the path for the binary file to be loaded from (same directory as the .axo itself), the destination path on the SD Card, and the reference to the file when loading it.</p>

<p>I've tried adding this block to the XML definition of the object:</p>

<pre><code>&lt;file-depends&gt;
     &lt;file-depend localFilename="lpc_tables.raw" targetPath="/shared/lpc/lpc_tables.raw"/&gt;
&lt;/file-depends&gt;</code></pre>

<p>Then I tried this line, to attempt to open the file:</p>

<p><code>file_error = f_open(&amp;bin_file, "/shared/lpc/lpc_tables.raw", FA_READ | FA_OPEN_EXISTING);</code></p>

<p>a|x</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Two questions...(arrays and where to put them) [SOLVED]'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/toneburst.html'><b itemprop='author'>toneburst</b></a>
           
           <time datetime='2018-03-01T23:23:42Z' itemprop='datePublished'>
             2018-03-01 23:23:42 UTC
           </time>
        </span>
        <span itemprop='position'>#34</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Solved that one (hadn't actually put the raw file at the specified location- d'oh!).</p>

<p>Is it OK for my object to save data into /shared, or is this reserved for factory objects like lmnts?</p>

<p>If not, how do I specify the file should be copied to a directory named after the patch?</p>

<p>a|x</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Two questions...(arrays and where to put them) [SOLVED]'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/lokki.html'><b itemprop='author'>lokki</b></a>
           
           <time datetime='2018-03-02T07:46:04Z' itemprop='datePublished'>
             2018-03-02 07:46:04 UTC
           </time>
        </span>
        <span itemprop='position'>#35</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>the question is, what happens when the directory is not on the sdcard? does it autocreate? or can we except every user to have shared on their sdcard? (did the lpc folder in shared get created automatically or did you have to create it first?) might consider to move my data to shared as well in that case. (at least the coefficients, not sure about the word file and the onsets)</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Two questions...(arrays and where to put them) [SOLVED]'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/toneburst.html'><b itemprop='author'>toneburst</b></a>
           
           <time datetime='2018-03-02T09:03:52Z' itemprop='datePublished'>
             2018-03-02 09:03:52 UTC
           </time>
        </span>
        <span itemprop='position'>#36</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>It automatically creates it. I don't know what happens if it's already there, but I presume it just adds the sub-directory and data file to the existing top-level directory.</p>

<p>a|x</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Two questions...(arrays and where to put them) [SOLVED]'>
      <hr>
  </div>






    </div>
    <footer class="container">
      <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <a href='../../../index.html'>Home</a>
        <a href="../../../categories.html">Categories</a>
        <a href="../../../guidelines.html">FAQ/Guidelines</a>
        <a href="../../../tos.html">Terms of Service</a>
        <a href="../../../privacy.html">Privacy Policy</a>
      </nav>
      <p>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  

<!-- Mirrored from community.axoloti.com/t/two-questions-arrays-and-where-to-put-them-solved/4252/28 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 10 Jul 2023 17:22:51 GMT -->
</html>
