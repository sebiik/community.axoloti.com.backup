<!DOCTYPE html>
<html lang="en" class="desktop-view not-mobile-device  anon">
  <head>
    <meta charset="utf-8">
    <title>Polyphonic voice assignment - Developer - Axoloti Community</title>
    <meta name="description" content="I&amp;#39;m not really sure if this should be in the 1.0.10 thread or separate, but it is not really directly related to 1.0.10, although commit 90adea74fbbc4dbf676832f2c28b408c607c89aa (GUI: polyphonic voice allocation -  keep &amp;hellip;">
    <meta name="discourse_theme_key" content="b5ce34aa-3ee1-4d3e-b190-0a2ab62c7408">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.9.0.beta3 - https://github.com/discourse/discourse version 13f3de4bf673802eb8ec595d36587b4524773209">
<link rel="icon" type="image/png" href="/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="http://community.axoloti.com/t/polyphonic-voice-assignment/1720" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"http://community.axoloti.com","potentialAction":{"@type":"SearchAction","target":"http://community.axoloti.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="http://community.axoloti.com/opensearch.xml" title="Axoloti Community Search">

    

      <meta name="fragment" content="!">


    <script>
      window.EmberENV = window.EmberENV || {};
      window.EmberENV['FORCE_JQUERY'] = true;
    </script>

    <link rel='preload' href='/assets/locales/en-5bbc8626277bd471a9fcd063411070c515cad1a78c86a38ad27792a513f11bd4.js' as='script'/>
<script src='/assets/locales/en-5bbc8626277bd471a9fcd063411070c515cad1a78c86a38ad27792a513f11bd4.js'></script>
    <link rel='preload' href='/assets/ember_jquery-a8dcbd325e04410f036f2a791d66d8316c48c5387acdd914de99a5dd6afb3cd3.js' as='script'/>
<script src='/assets/ember_jquery-a8dcbd325e04410f036f2a791d66d8316c48c5387acdd914de99a5dd6afb3cd3.js'></script>
    <link rel='preload' href='/assets/preload-store-ec90ffab9d7a6d9e507dda7cf7343e9d50b8bce624f7f44486ac8fd6b9814309.js' as='script'/>
<script src='/assets/preload-store-ec90ffab9d7a6d9e507dda7cf7343e9d50b8bce624f7f44486ac8fd6b9814309.js'></script>
    <link rel='preload' href='/assets/vendor-199fce5a9e9895329b51b04605f1f5061951acb488baa6b2ea2fc2ae36def529.js' as='script'/>
<script src='/assets/vendor-199fce5a9e9895329b51b04605f1f5061951acb488baa6b2ea2fc2ae36def529.js'></script>
    <link rel='preload' href='/assets/pretty-text-bundle-e888dd08c05658b05da2124dd56955aa8fe94225d532fb8bfa3264a3eb2aa581.js' as='script'/>
<script src='/assets/pretty-text-bundle-e888dd08c05658b05da2124dd56955aa8fe94225d532fb8bfa3264a3eb2aa581.js'></script>
    <link rel='preload' href='/assets/application-13a284a273d9247cd8b3d19ae7d053297aeb5b3eabaa9a901c9fd236fb7dfe60.js' as='script'/>
<script src='/assets/application-13a284a273d9247cd8b3d19ae7d053297aeb5b3eabaa9a901c9fd236fb7dfe60.js'></script>
    <link rel='preload' href='/assets/plugin-3a5d56cbe920ebb10de8abd59e839cf2d48d598ca07a267327f96e3fec534065.js' as='script'/>
<script src='/assets/plugin-3a5d56cbe920ebb10de8abd59e839cf2d48d598ca07a267327f96e3fec534065.js'></script>
    <link rel='preload' href='/assets/plugin-third-party-346f0166b34a16f0ac66ea388d925068ee8f76267dc167ac7173785ea046f465.js' as='script'/>
<script src='/assets/plugin-third-party-346f0166b34a16f0ac66ea388d925068ee8f76267dc167ac7173785ea046f465.js'></script>


      

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

    <link rel="manifest" href="/manifest.json">


      <link href="/stylesheets/desktop_d93a33ca8617326fe353f80e6ab865188244d48c.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop"/>


  <link href="/stylesheets/desktop_theme_1_6c5f8f7f5e6a154a9f0dfd7aedf04bae4b669f17.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop_theme"/>

    

<link rel="preload" href="/assets/fontawesome-webfont-2adefcbc041e7d18fcf2d417879dc5a09997aa64d675b7a3c4b6ce33da13f3fe.woff2?http://community.axoloti.com&2&v=4.7.0" as="font" type="font/woff2" crossorigin />
<style>
  @font-face {
    font-family: 'FontAwesome';
    src: url('/assets/fontawesome-webfont-2adefcbc041e7d18fcf2d417879dc5a09997aa64d675b7a3c4b6ce33da13f3fe.woff2?http://community.axoloti.com&2&v=4.7.0') format('woff2'),
         url('/assets/fontawesome-webfont-ba0c59deb5450f5cb41b3f93609ee2d0d995415877ddfa223e8a8a7533474f07.woff?http://community.axoloti.com&amp;2&v=4.7.0') format('woff');
  }
</style>


      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Polyphonic voice assignment&#39;" href="http://community.axoloti.com/t/polyphonic-voice-assignment/1720.rss" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:url" content="http://community.axoloti.com/t/polyphonic-voice-assignment/1720" />
<meta name="twitter:url" content="http://community.axoloti.com/t/polyphonic-voice-assignment/1720" />
<meta property="og:title" content="Polyphonic voice assignment" />
<meta name="twitter:title" content="Polyphonic voice assignment" />
<meta property="og:description" content="I&#39;m not really sure if this should be in the 1.0.10 thread or separate, but it is not really directly related to 1.0.10, although commit 90adea74fbbc4dbf676832f2c28b408c607c89aa (GUI: polyphonic voice allocation -  keep cycling when repeating one note) made me think of it.   What has struck me about polyphonic patches in Axoloti is that there is no control over the voice allocation. Many synths have a couple of assignment modes, often with slightly obscure names like Poly 1 and Poly 2. In practi..." />
<meta name="twitter:description" content="I&#39;m not really sure if this should be in the 1.0.10 thread or separate, but it is not really directly related to 1.0.10, although commit 90adea74fbbc4dbf676832f2c28b408c607c89aa (GUI: polyphonic voice allocation -  keep cycling when repeating one note) made me think of it.   What has struck me about polyphonic patches in Axoloti is that there is no control over the voice allocation. Many synths have a couple of assignment modes, often with slightly obscure names like Poly 1 and Poly 2. In practi..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="8 mins ðŸ•‘" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="2 â¤" />



    
  </head>

  <body class="">
    

    <div class='debug-eyeline'></div>

    <noscript data-path="/t/polyphonic-voice-assignment/1720">
      <header class="d-header">
  <div class="wrap">
    <div class="contents">
      <div class="row">
        <div class="title span13">
          <a href="/">
              <img src="/uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo">
          </a>
        </div>
            <div class='panel clearfix'>
              <a href="/login" class='btn btn-primary btn-small login-button'><i class="fa fa-user"></i> Log In</a>
            </div>
      </div>
    </div>
  </div>
</header>

      <div id="main-outlet" class="wrap">
        <!-- preload-content: -->
        <h1>
  <a href="/t/polyphonic-voice-assignment/1720">Polyphonic voice assignment</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="/c/developer" itemprop="url">
        <span itemprop="title">Developer</span>
      </a>
    </div>
</div>





<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/ricard'><b itemprop='author'>ricard</b></a>
           
           <time datetime='2016-05-19T04:45:24Z' itemprop='datePublished'>
             2016-05-19 04:45:24 UTC
           </time>
        </span>
        <span itemprop='position'>#1</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I'm not really sure if this should be in the 1.0.10 thread or separate, but it is not really directly related to 1.0.10, although commit 90adea74fbbc4dbf676832f2c28b408c607c89aa (GUI: polyphonic voice allocation -  keep cycling when repeating one note) made me think of it.</p>

<p>What has struck me about polyphonic patches in Axoloti is that there is no control over the voice allocation. Many synths have a couple of assignment modes, often with slightly obscure names like Poly 1 and Poly 2. In practice there are a number of things that could be configured, and in such a flexibile system as the Axoloti I think it should be possible.</p>

<p>Things such as:</p>

<ul>
<li>Should playing voices be robbed for new notes when the polyphony llimit is reached?</li>
<li>Should the same voice be played when playing the same note, or should a new voice be allocated?</li>
<li>If more notes than voices have been played, and notes are released, should the notes that were once silenced be played again (in essence, a polyphonic version of the monophonic behavior that when two notes are played, and the second one released, the first one is heard again).</li>
<li>etc</li>
</ul>

<p>Also, the sustain pedal behavior could be taken into account. A handy pedal mode is 'sostenuto', whereby the sustain pedal only holds notes that were playing at the time the pedal was pressed, newly played notes aren't sustained. This allows you to play a couple of notes as a drone and then play on top of that. (It mimics the middle pedal on certain grand pianos which have this feature).</p>

<p>I feel it's not possible to make the voice allocation choices once and for all, it depends on the patch what is suitable. For instance, if playing a repeated note, if the patch is a drum or piano sound, it more accurately mimics the corresponding acoustic instrument if the same voices is triggered - and that also avoids stealing voices that are already playing. On a pad sound, it can tend to cut off the release of the previous note, so having a cyclic assignment might be better. So, these choices should be up to the user.</p>

<p>It would also be nice to have a panel in the UI where the individual voices lit up as indicators so you could see which voices are in fact allocated.</p>

<p>What I'm thinking is an object with no actual connections, with a number of parameters in the form of switches which control the allocation modes. If no such object is present in the patch, a default allocation scheme is used. Such an 'allocation' object could also have a row of indicators for the actual voices playing.</p>

<p>I don't know if anything like that is planned. I don't mind looking into it in due course if there's any interest. I feel voice allocation is a fairly important thing to have control over.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Polyphonic voice assignment'>
      <hr>
            <a href="https://sebiik.github.io/community.axoloti.com.backup/t/sub-patching-topology-question/4972/4">Sub Patching Topology Question</a>
            <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/thetechnobear'><b itemprop='author'>thetechnobear</b></a>
           
           <time datetime='2016-05-19T08:10:58Z' itemprop='datePublished'>
             2016-05-19 08:10:58 UTC
           </time>
        </span>
        <span itemprop='position'>#2</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Yeah this has been raised a few times. </p>

<p>Main issue is this code is currently embedded in the Java app, and also linked closely to midi handling. <br>its not hard to do, just needs careful thought on how to 'represent' it</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Polyphonic voice assignment'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/thetechnobear'><b itemprop='author'>thetechnobear</b></a>
           
           <time datetime='2016-05-19T10:02:01Z' itemprop='datePublished'>
             2016-05-19 10:02:01 UTC
           </time>
        </span>
        <span itemprop='position'>#3</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>as I mentioned above, representation is tricky,</p>

<p>have you thought how you would represent this to the user?</p>

<p>heres my thought that I've had on this in the past, but not come to any real conclusion.</p>

<h3>Axoloti</h3>

<p>allocation strategy is held as a property of the patch (subpatch in reality), that then triggers different generated code, which can be found in patch.java<br>it would be fairly easy to add new ones, but obviously cannot be extended by the end user.<br>I think the other weakness is the link between midi and voice allocation, yes, this is most often useful but not always.<br>(also I don't like that some of the stealing/re-use logic is held in the midi/in objects, it should all be in one place) </p>

<p>one oddity in Axoloti, is generally, Axoloti is <strong>not</strong> event based, yet it handles midi as an event based, makes allocation 'easier' but not in line with other axoloti models.</p>

<p>note: midi handling is subject to change, currently it gets an immediate callback on receipt of midi messages, but this is 'wrong' and potentially problematic, we plan to move it to a queue that will be processed in the dsp execution (e.g. like a k-rate,s-rate handlers)</p>

<p>real strength is its trivial for end users to use...</p>

<p>alternatives, I know 2 reasonable well, Reaktor and Max/MSP.</p>

<h3>Reaktor</h3>

<p>I really like reaktors model, objects are marked as polyphonic, and wires becomes polyphonic. some built-in objects are polyphonic like midi in, so have a 'strategy' BUT there are objects to go from mono to poly to mono (toV, fromV iirc), to allow you do to as you please.<br>I love this model, but its quite a distance from how Axoloti has things.<br>advantage is, flexible, and you don't actually need to have voices in sub-patches.<br>I will point out, implementing voice strategies is not trivial...definitely and advanced use.<br>(Reaktor selects max voices on the ensemble level) </p>

<h3>Max/MSP</h3>

<p>polyphony is handled in Max using Poly~ and poly, the former creates voices, the later (optional) has a voice allocation scheme that makes it 'easy' to link midi to poly~. In some ways this is quite similar to Axoloti, in that sub patches are used to represent a voice.<br>(though, poly~ is pretty powerful as can be threaded, and have up/downsampling  ... might be an interesting way for axoloti to do oversampling for a group of objects) <br>I will say though, its not trivial for a beginner to use poly~ , Axolotl's approach is much easier to just say ... I want this synth to be polyphonic... and we can't take a step back in this regard.</p>

<p>there are of course, various reasons, why neither the Max nor Reaktor model would sit perfectly with Axoloti. (Max in particular is a bit too 'event based')</p>

<p>a couple of random notes:</p>

<ul>
<li><p>obviously also need to be 'backwards compatible' </p></li>
<li><p>Max/Reaktor bring voice allocation under 'patch control', it would be easier to do in Axoloti if we expect allocation schemes to be written as custom objects.</p></li>
<li><p>we don't have a way of allowing 'classes' to be specified e.g. you can't say I want N instances of subpatch type X to be created.  </p></li>
<li><p>due to above, it might be easier to allow a 'polyphonic custom' strategy, that simply creates the voices, but defers how midi messages (etc?) are routed</p></li>
<li><p>it would be simpler to change the midi routing to voice (see above) than to tackle the more generic voice allocation. </p></li>
<li><p>there are some 'generic' things you want/need for poly voice allocation in particular, e.g. knowing voice age... you probably would not want to replicate this in custom strategies.</p></li>
<li><p>I think its possible to write your own voice allocation system current, its just not very nice. there are a few things you can use like the internal midi bus, and the poly multichannel allocation, to allow an object to decide how to allocate voices. also you can use the polyindex with a patch to do things.<br>of course this is not ideal, and is a little complex (though writing voice allocation scheme, in any way, is never trivial) , but its not impossible either.</p></li>
</ul>

<p>anyway, thoughts.... how would you represent this?<br>goal is relatively simple, something that is as trivial to use as it currently is by default. (just mark as polyphonic), yet allows for more flexibility?</p>

<p>BTW: to get a feel for all of this, best to review patch.java to see whats currently being done, and also look at the generated xpatch.cpp code for the different strategies. you'll see its not that difficult. <br>In fact, I think the first think I ever added for Axoloti, as the "Polyphonic Expression" mode to handle MPE messages in Axoloti, it was a good 'learning' experience.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:2'>
      <meta itemprop='headline' content='Polyphonic voice assignment'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/SirPrimalform'><b itemprop='author'>SirPrimalform</b></a>
           
           <time datetime='2016-05-19T13:38:13Z' itemprop='datePublished'>
             2016-05-19 13:38:13 UTC
           </time>
        </span>
        <span itemprop='position'>#4</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Ah yes, this would be great. I've come across lots of voice allocation modes that are useful for different things so it'd be great to have them as options for something like the Axoloti where the entire point is versatility. Not sure what Axoloti uses at the moment, but useful ones that come to mind are:</p>

<p>Round-robin: Simplest. Where the voices are allocated cyclically without regard for whether any are currently in use is probably the most basic. Could be used for cool voice variation in conjunction with polyindex. Very Oberheim 4/8 voice-like.</p>

<p>Earliest available: If no voices are currently in use then voice 1 is used. If three notes are held, using voices 1-3 and then the note using the second voice is released, then the next note would use the second voice <em>if</em> that voice has finished its release phase. In a fixed architecture synth it's not too hard to see when a given voice has finished its release, but in the Axoloti how do you decide the voice has finished it's release? </p>

<p>A cool option is deliberate voice stealing where a note that is retriggered steals the voice that was still playing the release phase of the previous instance of that note. It helps avoid overlapping instances of the same note, which of course you wouldn't get on an instrument like the piano. Of course that could be considered desirable for other applications (it can sound great when there's a tiny amount of randomisation to the tuning of each voice so you don't get phase locks).</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Polyphonic voice assignment'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/johannes'><b itemprop='author'>johannes</b></a>
           
           <time datetime='2016-05-19T13:40:42Z' itemprop='datePublished'>
             2016-05-19 13:40:42 UTC
           </time>
        </span>
        <span itemprop='position'>#5</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>If we'd split up the general "patch/patcher" object into "patch/patcher mono", "patch/patcher poly", and "patch/patcher mpe" and add an xml field for the voice allocation code, that 'd open it up for more variations of allocators.<br>That 'd look fine for embedded subpatches. <br>But currently the mono/poly/mpe setting is part of the subpatch. This 'd break instancing an external poly subpatch. To create an external poly subpatch, you'd need to wrap it into an external subpatch with a "patch/patcher poly" object inside, and then the voice structure inside. Often a useful strategy, since a polysynth will likely have a polyphonic part anyway.</p>

<p>But preserving compatibility will be hard...</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Polyphonic voice assignment'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/thetechnobear'><b itemprop='author'>thetechnobear</b></a>
           
           <time datetime='2016-05-19T14:19:47Z' itemprop='datePublished'>
             2016-05-19 14:19:47 UTC
           </time>
        </span>
        <span itemprop='position'>#6</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>yeah, if you make everything embedded this helps, though I will say, we have code that is dependent on 'patch/patcher' (e.g. editor) , and without proper subclassing having derived forms is going to be problematic.</p>

<p>I think there are perhaps 2 parts to this problem...<br>a) voice management, is it poly or mono<br>b) voice allocation </p>

<p>(a) really simple, as we only have 'static' voices, i.e. its 1 or N... we don't allow more voices to be added.</p>

<p>(b) currently, is only really handled by midi (shouldn't be, but it is) ... and this is simply a midi handler.<br>so theoretically, we only need to substitute a midi handler... this could simply be a proxy object.<br>(i.e. its midi handler is called, and it is passed the proxied object, to call if it wants to allocate to that object)</p>

<p>another option, which we have discussed before, is perhaps we should have a 'midi event' type, this could then be handled in the parent class, and perhaps then pass the event on, to and instance of a voice. this could be relatively easy, as we could use 'channel' as a proxy for voice id.(this is similar to as i mentioned above about using the internal midi bus, but more direct) <br>this has the advantage midi message routing becomes explicit, rather than the current view where the patcher does not show the midi routing.  (also open up midi filtering, and all sorts of midi fx options)</p>

<p>thing I'm not keen on on this, is it propagates the 'midi' to voice , which i think should only be one way... e.g. when your doing sequencer, then midi is irrelevant, but you still might want to be polyphonic.<br>the only way currently, is to do it all yourself (I've done this, its not that bad), or go via midi.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Polyphonic voice assignment'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/ricard'><b itemprop='author'>ricard</b></a>
           
           <time datetime='2016-05-19T16:20:56Z' itemprop='datePublished'>
             2016-05-19 16:20:56 UTC
           </time>
        </span>
        <span itemprop='position'>#7</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="3" data-topic="1720" data-full="true"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//community.axoloti.com/user_avatar/community.axoloti.com/thetechnobear/40/6_1.png" class="avatar">thetechnobear:</div>
<blockquote>
<p>as I mentioned above, representation is tricky,</p>
<p>have you thought how you would represent this to the user?</p>
</blockquote></aside>

<p>Well, my spontaneous thought, without having looked at the code or anything, was to add it to the subpatch object. There is already a 'poly' spinner representing the number of voices in the subpatch, so it would be natural to add a 'voice allocation' combo box with various modes.</p>

<p>My initial thought was that the modes could be implemented in the firmware (or as the case seems to be, in xpatch.cpp), and the object would just select among a number of preset modes. On the other hand, looking at the discussion above, given the flexibility of the Axoloti, perhaps we could do better.</p>

<p>There are objects such as sample playback, which refer to a 'memory' object (using the objref type), so perhaps a subpatch object could refer to an 'allocation' object which would do the actual allocation. The idea being that an 'allocation' object would actually have the allocation in code, so that you could write your own allocation algorithm if you wanted to, of course there would be a number of factory objects with useful pre-set algorithms, or perhaps better a single one which was configurable using parameters. Thus the actual API between the subpatch object and the allocation object would be hidden and doesn't need to be restrained to the ordinary data types.</p>

<p>Otherwise it would be cool with some form of 'note' data type, which basically could be MIDI messages stuffed into an int, one int per message. Incoming note data, be it from MIDI, USB, or from an object scanning a string of switches laid out as a keyboard, could then be patched into an 'allocation' object which would accept that type of data at its input.  A hidden internal API would then be used to actually trigger the voices.</p>

<aside class="quote" data-post="4" data-topic="1720" data-full="true"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//community.axoloti.com/user_avatar/community.axoloti.com/sirprimalform/40/1370_1.png" class="avatar">SirPrimalform:</div>
<blockquote><p>Earliest available: If no voices are currently in use then voice 1 is used. If three notes are held, using voices 1-3 and then the note using the second voice is released, then the next note would use the second voice <em>if</em> that voice has finished its release phase. In a fixed architecture synth it's not too hard to see when a given voice has finished its release, but in the Axoloti how do you decide the voice has finished it's release? </p></blockquote></aside>

<p>Perhaps there could be an attribute in the envelope objects, indicating if their release phase should be considered when it comes to allocation. That way you can have both envelopes which do affect allocation, but at the same time you don't have to. On the other hand, it could get very confusing if set up incorrectly, with all voices seemingly never getting relased if you patch something strangely.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Polyphonic voice assignment'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/johannes'><b itemprop='author'>johannes</b></a>
           
           <time datetime='2016-05-19T20:39:41Z' itemprop='datePublished'>
             2016-05-19 20:39:41 UTC
           </time>
        </span>
        <span itemprop='position'>#8</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Another use case to consider: tonewheel/drawbar organs...</p>

<p>Tonewheel/drawbars would currently partition into</p>

<ul>
<li>one table/alloc object, containing the amplitude of each tonewheel.</li>
<li>one "drawbar" object manipulating the amplitudes, midi/in/script could serve this</li>
<li>one polyphonic subpatch of tonewheels accessing the amplitude table, without using any MIDI features in the subpatch.</li>
</ul>

<p>In case of more regular voice allocation one could expose tables containing the voice pitches, velocities and gates. Written by the voice allocator, read by the voices.</p>

<aside class="quote" data-post="7" data-topic="1720"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//community.axoloti.com/user_avatar/community.axoloti.com/ricard/40/163_1.png" class="avatar">ricard:</div>
<blockquote><p>Perhaps there could be an attribute in the envelope objects, indicating if their release phase should be considered when it comes to allocation.</p></blockquote></aside>

<p>Or more generic, another table that is written by the voice. Then it could be the output of any envelope or envelope follower that gets sorted by the voice allocator.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Polyphonic voice assignment'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/thetechnobear'><b itemprop='author'>thetechnobear</b></a>
           
           <time datetime='2016-05-20T12:06:34Z' itemprop='datePublished'>
             2016-05-20 12:06:34 UTC
           </time>
        </span>
        <span itemprop='position'>#9</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>hmm, I think I would 'avoid' have the voice management know anything about envelopes or even gates.<br>(voices are not necessarily always used for such things)</p>

<p>Ive another idea... which actually is based a little on the Max/Reaktor models,</p>

<h2>polyphonic inlets and outlets</h2>

<p>(this would not replace the current mechanism, at lease initially, it would sit alongside, and be used with patches marked as polyphonic) </p>

<h3>polyphonic inlets</h3>

<p>this would be similar to normal inlets, except the 'outside' can address individual voices.<br>this is like Reaktors toV object, you give it data and a voice, to target a specific voice.<br>inside the subpatch, these polyphonic inlets, are seen as monophonic.. so no change there.</p>

<p>(in someway this is getting a little like reactors model, the subpatch is marked as polyphonic, and some wires are conceptually polyphonic) </p>

<p>for backwards compatibly we keep existing midi polyphonic behaviour, and the default behaviour of a monophonic outlet to a polyphonic inlet is to copy the data to all voices.</p>

<h3>polyphonic outlets?</h3>

<p>well this is actually the reverse, currently what happens to outlets of polyphonic modules depends on type e.g. data is summed... but it would be nice have some control of this...<br>Im thinking here of an object like fromV<br>what this does is take a polyphonic outlet, and a voice index and has a monophonic output. <br>thus allowing the parent patch, to be able (with multiple fromV objects, or a selector) take apart the various outputs.<br>(the default behaviour of a polyphonic output into a monophonic input, is the current behaviour e.g. summing) </p>

<p>what does this mean?<br>well it means we don't actually needs allocators at all, instead like Reaktor/Max , we just provide a mechanism for patch writers to access voices directly i.e. write there own allocator.<br>because its 'separate' from voice allocation, they can live side by side (at least initially, we may review in time) - which means compatibility.<br>its very generic, no assumptions about what a voice is used for.... e.g. its not even assuming the voice is used for audio, it could be anything.<br>(it would also fit nicely if in the future we make midi data type, as that could then feed in/out using polyphonic inlets/outlets)<br>I also think its quite simple to implement <img src="/images/emoji/emoji_one/slight_smile.png?v=2" title=":slight_smile:" class="emoji" alt=":slight_smile:"> </p>

<p>(simple) example of use:<br>so a user whats a simple polyphonic patch, with note and date input via midi... but wants to take control of how the midi gets translated to a voice</p>

<p>a user creates a sub-patch with 2 polyphonic inlets, note and gate... they may also have mono inlets, eg. for filter cutoff control.<br>in the parent patch, they have an object with a midi handler , that looks at the midi data directly... selects a voice , and then puts the note and gate data on that specify voice inlet.</p>

<p>there is a question about if this can be done only as a custom object or also as patching.</p>

<p>a custom object is the most efficient, since its the only way to do conditional behaviour<br>BUT we can also have a patching objects.</p>

<p>this basically would required that the user would (potentially) need to a patching object (toV) for each voice they want to target , the toV object takes a voice id and a data value (so one for each data type), the voice id can either be fixed (using const/i) or derived. the output is a polyphonic output to connect to the polyphonic inlet of the subpatch. using a dynamic value for toV obviously means its only possible to set one value per 'k-rate cycle' or midi handling cycling.</p>

<p>(visually , we should differentiate poly inlets/outlets and wires from mono equivalents... perhaps like a 'double line', as its 'thicker' coz its got more data ?)</p>

<p>one other option object developers have, is to write polyphonic outlet objects... <br>e.g. one could write a polyphonic midi/in/keyb this could then directly be connected to polyphonic sub patches.<br>(this is exactly the approach Reaktor takes)</p>

<p>Thoughts?  </p>

<p>(sorry the above perhaps is not as clear as it could be, but if it has interest then we can dig into details, and I could make some drawings to clear up any confusion.<br>but to be clear, its not too dissimilar to Reacktor toV/FromV , an in alot of ways the way poly~ is used in Max when you give it a voice number... so reading those will probably make it reasonable clear)</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Polyphonic voice assignment'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/johannes'><b itemprop='author'>johannes</b></a>
           
           <time datetime='2016-05-23T13:16:00Z' itemprop='datePublished'>
             2016-05-23 13:16:00 UTC
           </time>
        </span>
        <span itemprop='position'>#10</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Can that simplify to array types for inlets/outlets, and a mechanism for poly subpatches to distribute an array inlet/outlet to each voice?<br>A voice allocator object could have pitch, gate and velocity array-outlets.<br>A poly subpatch outlet could expose as an array-outlet on the parent object, summing could be an implicit conversion when connecting to a non-array outlet.</p>

<p>This could also be a solution for oversampling/downsampling. Except in case where a polyphonic subpatch operates in oversampled domain and the downsampler needs to be shared for all voices, then we 'd need 2d arrays...</p>

<p>The hard part: which object will decide on the array size of a net, so that run-time bounds checks can be eliminated? If the source outlet decides, two sources could connect to one object that each have a different array size. If we just check for mismatches, still, both the voice allocator object and the poly voices object must be configures for the number of voices.</p>

<p>Sometimes a mismatch between allocator and poly voice object would be useful too, in case where one Axoloti Core handles voice allocation but multiple boards are used to generate the voices. Then the cv/gate arrays could be split and distributed at control rate. But then we need objects to expand/combine/subrange arrays. An array expander object, translating one array-inlet into one outlet per element requires more object dynamism than there currently is. Or it could also take the form of a one array-inlet into one outlet and an array-outlet of the remainder of the array, but also in that case the array-outlet size is only known after connecting the array-inlet. This needs further thoughts...</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Polyphonic voice assignment'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/thetechnobear'><b itemprop='author'>thetechnobear</b></a>
           
           <time datetime='2016-05-23T16:14:47Z' itemprop='datePublished'>
             2016-05-23 16:14:47 UTC
           </time>
        </span>
        <span itemprop='position'>#11</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>yeah I kind of envisaged this being implemented as arrays... in some ways.</p>

<p>i don't really see the need at all though for a 'voice allocator', a voice allocator just becomes an object that happens to 'output' polyphonic outlets.</p>

<p>e.g. <br>imagine a new polymidi/in/keyb it could output a polyphonic pitch,gate,velocity ... and yes by implication, the decision on how it decides what messages to put on which channels, means it is a voice allocator.  the cool thing is , don't like it? just implement a different one!<br>but its important its <strong>not</strong> just notes, e.g. polymidi/in/cc could also be implemented and again would decide how to allocate these messages to each voice.</p>

<p>with this, arrangement we could have implemented the 'polyphonic expression' modes without resorting to a new 'type of subpatch'</p>

<p>array size, yeah Id assumed this would be calculated from the subpatch voices.<br>this is easy for direct connect to the subpatch.</p>

<p>I think the question is do you need polyphonic wires upstream?</p>

<p>so... max doesn't do this at all, basically you can only communicate with poly~ as voices, in the rest of the patch, you have to use your own table structures.<br>in Reaktor, this is controlled at the 'instrument' level, basically you define the number of voices.<br>(hmm, could be ensemble, would have to double check <img src="/images/emoji/emoji_one/slight_smile.png?v=2" title=":slight_smile:" class="emoji" alt=":slight_smile:"> ) , this means any polyphonic wire has that number of voices. Id say for us we could say its at 'patch' level...<br>(this ensures within a patch a poly wire is a known size everywhere, but at the boundary to a subpatch it can change) </p>

<p>bounds checking etc, well I think the 'wire' has to know the number of voices, and we can decide what happens when the user 'access' a wire &gt; poly count. possible options are... ignore or wrap around (modulus)    ...its considered a 'patching bug' but we have to do something that doesn't crash <img src="/images/emoji/emoji_one/slight_smile.png?v=2" title=":slight_smile:" class="emoji" alt=":slight_smile:"> </p>

<p>oversampling/downsampling - yes, this is what max does with its poly~ object, its basically can oversample internally, and then downsample the outlets back to the parent patch SR.</p>

<p>ok, the above is all a little bit 'all over the place' , as yeah, it needs a lot of thought to get it right, but it seems a simple solution (at least conceptually) thats very flexible.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Polyphonic voice assignment'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/C0dexter'><b itemprop='author'>C0dexter</b></a>
           
           <time datetime='2016-05-24T11:37:40Z' itemprop='datePublished'>
             2016-05-24 11:37:40 UTC
           </time>
        </span>
        <span itemprop='position'>#12</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Excuse my ignorance if this already exists, but I'd like to send from the polyphonic input to individual voices. Having a separate sub-patch/voice with different sounds, regardless of assignment regime.. something like the Roland 100M 184 keyboard, or pizmidi midiChordSplit in VST terms.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Polyphonic voice assignment'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/thetechnobear'><b itemprop='author'>thetechnobear</b></a>
           
           <time datetime='2016-05-24T12:30:22Z' itemprop='datePublished'>
             2016-05-24 12:30:22 UTC
           </time>
        </span>
        <span itemprop='position'>#13</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="12" data-topic="1720" data-full="true"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//community.axoloti.com/user_avatar/community.axoloti.com/c0dexter/40/2202_1.png" class="avatar">C0dexter:</div>
<blockquote><p>Excuse my ignorance if this already exists, but I'd like to send from the polyphonic input to individual voices. Having a separate sub-patch/voice with different sounds, regardless of assignment regime.. something like the Roland 100M 184 keyboard, or pizmidi midiChordSplit in VST terms.</p></blockquote></aside>

<p>you could already do this with a custom object, as it can create a midi handler that can split out the voices, and send to different outputs.  the main issue you face, is that while the midi handler is event based, the k-rate handler is NOT, this means an individual k-rate port <strong>theoretically</strong> cannot work, since you might have 2 midi messages arrive within one k-rate cycle that specified two notes. I say theoretically, because its unlikely your going to get midi at 3000 msg/second (the k-rate)... in practice, i suspect a midi/in/keyb with objects patched to split out the messages to different sub-patches would likely work.</p>

<p>going forward a polyphonic outlets (and poly midi objects) would make this much easier!<br>simply use the polymidi/in/keyb   and then use an 'fromV' object to split into different outlets, to be then passed onto the voices.<br>(different polymidi/in/keyb variants could implement different allocation strategies e.g. RR, last, random etc)</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Polyphonic voice assignment'>
      <hr>
  </div>






        <!-- :preload-content -->
        <footer>
          <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
            <a href='/'>Home</a>
            <a href="/categories">Categories</a>
            <a href="/guidelines">FAQ/Guidelines</a>
            <a href="/tos">Terms of Service</a>
            <a href="/privacy">Privacy Policy</a>
          </nav>
        </footer>
      </div>

      <footer id='noscript-footer'>
        <p>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
      </footer>
    </noscript>

      

    <section id='main'>
    </section>

    <div id='offscreen-content'>
    </div>

      <form id='hidden-login-form' method="post" action="/login" style="display: none;">
        <input name="username" type="text"     id="signin_username">
        <input name="password" type="password" id="signin_password">
        <input name="redirect" type="hidden">
        <input type="submit" id="signin-button" value="Log In">
      </form>

      <script>
      (function() {
        var ps = require('preload-store').default;
          ps.store("site", {"default_archetype":"regular","notification_types":{"mentioned":1,"replied":2,"quoted":3,"edited":4,"liked":5,"private_message":6,"invited_to_private_message":7,"invitee_accepted":8,"posted":9,"moved_post":10,"linked":11,"granted_badge":12,"invited_to_topic":13,"custom":14,"group_mentioned":15,"group_message_summary":16,"watching_first_post":17,"topic_reminder":18},"post_types":{"regular":1,"moderator_action":2,"small_action":3,"whisper":4},"groups":[{"id":1,"name":"admins"},{"id":0,"name":"everyone"},{"id":2,"name":"moderators"},{"id":3,"name":"staff"},{"id":10,"name":"trust_level_0"},{"id":11,"name":"trust_level_1"},{"id":12,"name":"trust_level_2"},{"id":13,"name":"trust_level_3"},{"id":14,"name":"trust_level_4"}],"filters":["latest","unread","new","read","posted","bookmarks"],"periods":["all","yearly","quarterly","monthly","weekly","daily"],"top_menu_items":["latest","unread","new","read","posted","bookmarks","category","categories","top"],"anonymous_top_menu_items":["latest","top","categories","category","categories","top"],"uncategorized_category_id":1,"is_readonly":false,"disabled_plugins":[],"user_field_max_length":2048,"suppressed_from_homepage_category_ids":[],"post_action_types":[{"name_key":"bookmark","name":"Bookmark","description":"Bookmark this post","short_description":"Bookmark this post","long_form":"bookmarked this post","is_flag":false,"icon":null,"id":1,"is_custom_flag":false},{"name_key":"like","name":"Like","description":"Like this post","short_description":"Like this post","long_form":"liked this","is_flag":false,"icon":"heart","id":2,"is_custom_flag":false},{"name_key":"off_topic","name":"Off-Topic","description":"This post is not relevant to the current discussion as defined by the title and first post, and should probably be moved elsewhere.","short_description":"Not relevant to the discussion","long_form":"flagged this as off-topic","is_flag":true,"icon":null,"id":3,"is_custom_flag":false},{"name_key":"inappropriate","name":"Inappropriate","description":"This post contains content that a reasonable person would consider offensive, abusive, or a violation of \u003ca href=\"/guidelines\"\u003eour community guidelines\u003c/a\u003e.","short_description":"A violation of \u003ca href=\"/guidelines\"\u003eour community guidelines\u003c/a\u003e","long_form":"flagged this as inappropriate","is_flag":true,"icon":null,"id":4,"is_custom_flag":false},{"name_key":"vote","name":"Vote","description":"Vote for this post","short_description":"Vote for this post","long_form":"voted for this post","is_flag":false,"icon":null,"id":5,"is_custom_flag":false},{"name_key":"spam","name":"Spam","description":"This post is an advertisement, or vandalism. It is not useful or relevant to the current topic.","short_description":"This is an advertisement or vandalism","long_form":"flagged this as spam","is_flag":true,"icon":null,"id":8,"is_custom_flag":false},{"name_key":"notify_user","name":"Send @{{username}} a message","description":"I want to talk to this person directly and privately about their post.","short_description":"I want to talk to this person directly and privately about their post.","long_form":"messaged user","is_flag":true,"icon":null,"id":6,"is_custom_flag":true},{"name_key":"notify_moderators","name":"Something Else","description":"This post requires staff attention for another reason not listed above.","short_description":"Requires staff attention for another reason","long_form":"flagged this for staff attention","is_flag":true,"icon":null,"id":7,"is_custom_flag":true}],"topic_flag_types":[{"name_key":"inappropriate","name":"Inappropriate","description":"This topic contains content that a reasonable person would consider offensive, abusive, or a violation of \u003ca href=\"/guidelines\"\u003eour community guidelines\u003c/a\u003e.","short_description":"translation missing: en.topic_flag_types.inappropriate.short_description","long_form":"flagged this as inappropriate","is_flag":true,"icon":null,"id":4,"is_custom_flag":false},{"name_key":"spam","name":"Spam","description":"This topic is an advertisement. It is not useful or relevant to this site, but promotional in nature.","short_description":"translation missing: en.topic_flag_types.spam.short_description","long_form":"flagged this as spam","is_flag":true,"icon":null,"id":8,"is_custom_flag":false},{"name_key":"notify_moderators","name":"Something Else","description":"This topic requires general staff attention based on the \u003ca href=\"/guidelines\"\u003eguidelines\u003c/a\u003e, \u003ca href=\"/tos\"\u003eTOS\u003c/a\u003e, or for another reason not listed above.","short_description":"translation missing: en.topic_flag_types.notify_moderators.short_description","long_form":"flagged this for moderator attention","is_flag":true,"icon":null,"id":7,"is_custom_flag":true}],"can_create_tag":null,"can_tag_topics":null,"tags_filter_regexp":"[/\\?#\\[\\]@!\\$\u0026'\\(\\)\\*\\+,;=\\.%\\\\`^\\s|\\{\\}\"\u003c\u003e]+","top_tags":["midi","controllers","modular","linux","1.0.11","macos","windows","troubleshooting","usb","wavetable","challenge","library","14bit","tips","out","current"],"topic_featured_link_allowed_category_ids":[4,12,1,6,5,15,10,2,14,8,16,9,3,11,7,13],"user_themes":[{"theme_key":"b5ce34aa-3ee1-4d3e-b190-0a2ab62c7408","name":"Migrated from Site Text","default":true}],"categories":[{"id":1,"name":"Uncategorized","color":"AB9364","text_color":"FFFFFF","slug":"uncategorized","topic_count":-1,"post_count":1,"position":0,"description":"Topics that don't need a category, or don't fit into any other existing category.","description_text":"","topic_url":"/t/","read_restricted":false,"permission":null,"notification_level":1,"topic_template":null,"has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":10,"name":"User Guide","color":"3AB54A","text_color":"FFFFFF","slug":"user-guide","topic_count":24,"post_count":102,"position":1,"description":"This category contains posts to help users use Axoloti, a dynamic user guide.","description_text":"This category contains posts to help users use Axoloti, a dynamic user guide.","topic_url":"/t/about-the-user-guide-category/51","read_restricted":false,"permission":null,"notification_level":1,"topic_template":"","has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":8,"name":"Helpdesk","color":"9EB83B","text_color":"FFFFFF","slug":"helpdesk","topic_count":361,"post_count":2948,"position":2,"description":"This category is for reporting issues and bugs\u003cbr\u003ePlease use other categories for discussions on features or questions or \"how to?\"","description_text":"This category is for reporting issues and bugsPlease use other categories for discussions on features or questions or \"how to?\"","topic_url":"/t/about-the-helpdesk-category/23","read_restricted":false,"permission":null,"notification_level":1,"topic_template":"","has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":13,"name":"Community Library","color":"9EB83B","text_color":"FFFFFF","slug":"community-library","topic_count":54,"post_count":2857,"position":3,"description":"Category for the community library","description_text":"Category for the community library","topic_url":"/t/about-the-community-library-category/1005","read_restricted":false,"permission":null,"notification_level":1,"topic_template":"","has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":7,"name":"Patching","color":"AB9364","text_color":"FFFFFF","slug":"patching","topic_count":953,"post_count":7826,"position":4,"description":"This category is for discussion about patching Axoloti, and sharing patches.","description_text":"This category is for discussion about patching Axoloti, and sharing patches.","topic_url":"/t/about-the-patching-category/14","read_restricted":false,"permission":null,"notification_level":1,"topic_template":"","has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":5,"name":"Hardware","color":"AB9364","text_color":"FFFFFF","slug":"hardware","topic_count":629,"post_count":6937,"position":5,"description":"This category is intended for discussion about the Axoloti hardware and connecting to other hardware, including , connecting midi controllers and other hardware, related hardware projects. ","description_text":"This category is intended for discussion about the Axoloti hardware and connecting to other hardware, including , connecting midi controllers and other hardware, related hardware projects.","topic_url":"/t/about-the-hardware-category/12","read_restricted":false,"permission":null,"notification_level":1,"topic_template":null,"has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":6,"name":"Software","color":"AB9364","text_color":"FFFFFF","slug":"software","topic_count":322,"post_count":3286,"position":6,"description":"This category is for posts regarding the software of Axoloti, this includes the Axoloti patching GUI, Axoloti Objects (axo) and firmware. Please use the Patching category to discuss patching Axoloti. ","description_text":"This category is for posts regarding the software of Axoloti, this includes the Axoloti patching GUI, Axoloti Objects (axo) and firmware. Please use the Patching category to discuss patching Axoloti.","topic_url":"/t/about-the-software-category/13","read_restricted":false,"permission":null,"notification_level":1,"topic_template":null,"has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":16,"name":"AxoObject coding","color":"AB9364","text_color":"FFFFFF","slug":"axoobject-code","topic_count":259,"post_count":2123,"position":7,"description":"Category to discuss coding Axoloti Objects.","description_text":"Category to discuss coding Axoloti Objects.","topic_url":"/t/about-the-axoobject-coding-category/1519","read_restricted":false,"permission":null,"notification_level":1,"topic_template":null,"has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":14,"name":"News/Events","color":"283890","text_color":"FFFFFF","slug":"events","topic_count":30,"post_count":106,"position":8,"description":"Meetups, workshops, presentations, all sort of events.\u003cbr\u003eIt's perfectly fine for users to announce and discuss their own events, as long as it is related to Axoloti somehow.\u003cbr\u003eStart your topic title with the name of the area where your event will happen.","description_text":"Meetups, workshops, presentations, all sort of events.It's perfectly fine for users to announce and discuss their own events, as long as it is related to Axoloti somehow.Start your topic title with the name of the area where your event will happen.","topic_url":"/t/about-the-events-category/1142","read_restricted":false,"permission":null,"notification_level":1,"topic_template":"","has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":12,"name":"Challenges","color":"0E76BD","text_color":"FFFFFF","slug":"challenges","topic_count":19,"post_count":266,"position":9,"description":"This category is for challenges, competitions and discussions related to these.\u003cbr\u003eposters are reminded when entering challenges and competitions to not include any copyrighted material","description_text":"This category is for challenges, competitions and discussions related to these.posters are reminded when entering challenges and competitions to not include any copyrighted material","topic_url":"/t/about-the-challenges-category/838","read_restricted":false,"permission":null,"notification_level":1,"topic_template":"","has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":9,"name":"Your Music/Projects","color":"0E76BD","text_color":"FFFFFF","slug":"your-music-projects","topic_count":174,"post_count":1207,"position":10,"description":"Have some music that you have made with Axoloti? or an interesting project you would like to share the communities?\u003cbr\u003eTells us about it here.","description_text":"Have some music that you have made with Axoloti? or an interesting project you would like to share the communities?Tells us about it here.","topic_url":"/t/about-the-your-music-projects-category/25","read_restricted":false,"permission":null,"notification_level":1,"topic_template":"","has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":15,"name":"Lounge","color":"AB9364","text_color":"FFFFFF","slug":"lounge","topic_count":99,"post_count":1668,"position":11,"description":"This category is for discussions that are related to Axoloti generally but are not specifically about Axoloti.\u003cbr\u003e(please ensure it has some relevance to Axoloti, rather than general discussion) ","description_text":"This category is for discussions that are related to Axoloti generally but are not specifically about Axoloti.(please ensure it has some relevance to Axoloti, rather than general discussion)","topic_url":"/t/about-the-lounge-category/1277","read_restricted":false,"permission":null,"notification_level":1,"topic_template":null,"has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":11,"name":"Developer","color":"BF1E2E","text_color":"FFFFFF","slug":"developer","topic_count":64,"post_count":639,"position":12,"description":"This category is for discussion about the development of Axoloti at a low level, its intended only for developers/programmers.","description_text":"This category is for discussion about the development of Axoloti at a low level, its intended only for developers/programmers.","topic_url":"/t/about-the-developer-category/735","read_restricted":false,"permission":null,"notification_level":1,"topic_template":"This category is for low level discussion on the development of Axoloti, its is intended for developers/programmers only.","has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":3,"name":"Website and Forum","color":"808281","text_color":"FFFFFF","slug":"meta","topic_count":45,"post_count":410,"position":13,"description":"Discussion about this site, its organization, how it works, and how we can improve it.","description_text":"Discussion about this site, its organization, how it works, and how we can improve it.","topic_url":"/t/about-the-meta-category/2","read_restricted":false,"permission":null,"notification_level":1,"topic_template":"","has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null}],"trust_levels":[{"id":0,"name":"new user"},{"id":1,"name":"basic user"},{"id":2,"name":"member"},{"id":3,"name":"regular"},{"id":4,"name":"leader"}],"archetypes":[{"id":"regular","name":"Regular Topic","options":[]},{"id":"banner","name":"Banner Topic","options":[]}],"user_fields":[]});
          ps.store("siteSettings", {"title":"Axoloti Community","contact_email":"johannes.taelman@gmail.com","contact_url":"","logo_url":"/uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png","logo_small_url":"/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png","mobile_logo_url":"","favicon_url":"/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png","allow_user_locale":false,"suggested_topics":5,"track_external_right_clicks":false,"ga_universal_tracking_code":"UA-56017691-4","ga_universal_domain_name":"auto","ga_tracking_code":"","ga_domain_name":"","gtm_container_id":"","top_menu":"categories|latest|new|unread|top","post_menu":"like-count|like|share|flag|edit|bookmark|delete|admin|reply","post_menu_hidden_items":"flag|bookmark|edit|delete|admin","share_links":"twitter|facebook|email","desktop_category_page_style":"categories_and_latest_topics","category_colors":"BF1E2E|F1592A|F7941D|9EB83B|3AB54A|12A89D|25AAE2|0E76BD|652D90|92278F|ED207B|8C6238|231F20|808281|B3B5B4|283890","category_style":"bullet","enable_mobile_theme":true,"relative_date_duration":30,"fixed_category_positions":true,"fixed_category_positions_on_create":false,"enable_badges":true,"enable_badge_sql":false,"enable_whispers":false,"invite_only":false,"login_required":false,"must_approve_users":false,"enable_local_logins":true,"allow_new_registrations":true,"enable_signup_cta":true,"enable_google_oauth2_logins":false,"enable_yahoo_logins":false,"enable_twitter_logins":false,"enable_instagram_logins":false,"enable_facebook_logins":false,"enable_github_logins":false,"enable_sso":false,"sso_overrides_avatar":false,"min_username_length":3,"max_username_length":20,"min_password_length":10,"min_admin_password_length":15,"logout_redirect":"","full_name_required":false,"enable_names":true,"invites_per_page":40,"delete_user_max_post_age":60,"delete_all_posts_max":15,"show_email_on_profile":false,"prioritize_username_in_ux":true,"enable_user_directory":true,"allow_anonymous_posting":false,"anonymous_posting_min_trust_level":1,"hide_user_profiles_from_public":false,"enable_group_directory":true,"min_post_length":20,"min_first_post_length":20,"min_private_message_post_length":10,"max_post_length":32000,"topic_featured_link_enabled":true,"min_topic_title_length":15,"max_topic_title_length":255,"min_private_message_title_length":2,"allow_uncategorized_topics":false,"min_title_similar_length":10,"min_body_similar_length":15,"enable_private_messages":true,"edit_history_visible_to_public":false,"delete_removed_posts_after":24,"enable_experimental_markdown_it":false,"traditional_markdown_linebreaks":false,"enable_markdown_typographer":false,"allow_html_tables":false,"suppress_reply_directly_below":true,"suppress_reply_directly_above":true,"max_reply_history":1,"newuser_max_images":1,"newuser_max_attachments":2,"show_pinned_excerpt_mobile":true,"show_pinned_excerpt_desktop":true,"display_name_on_posts":false,"show_time_gap_days":7,"short_progress_text_threshold":10000,"default_code_lang":"auto","autohighlight_all_code":false,"highlighted_languages":"apache|bash|cs|cpp|css|coffeescript|diff|xml|http|ini|json|java|javascript|makefile|markdown|nginx|objectivec|ruby|perl|php|python|sql|handlebars","censored_words":"","censored_pattern":"","enable_emoji":true,"emoji_set":"twitter","code_formatting_style":"4-spaces-indent","allowed_href_schemes":"","email_time_window_mins":10,"disable_digest_emails":false,"email_in":false,"disable_emails":false,"bounce_score_threshold":4,"max_image_size_kb":3072,"max_attachment_size_kb":3072,"authorized_extensions":"jpg|jpeg|png|gif|axo|axp|axs|axh|fpd|brd|axt","max_image_width":690,"max_image_height":500,"prevent_anons_from_downloading_files":false,"enable_s3_uploads":false,"allow_profile_backgrounds":true,"allow_uploaded_avatars":true,"allow_animated_avatars":false,"default_avatars":"","external_system_avatars_enabled":true,"external_system_avatars_url":"/letter_avatar_proxy/v2/letter/{first_letter}/{color}/{size}.png","allow_staff_to_upload_any_file_in_pm":true,"tl1_requires_read_posts":30,"tl3_links_no_follow":false,"use_admin_ip_whitelist":false,"max_oneboxes_per_post":50,"alert_admins_if_errors_per_minute":0,"alert_admins_if_errors_per_hour":0,"max_prints_per_hour_per_user":5,"enable_long_polling":true,"long_polling_base_url":"/","background_polling_interval":60000,"polling_interval":3000,"anon_polling_interval":15000,"flush_timings_secs":20,"verbose_localization":false,"max_new_topics":500,"tos_url":"","privacy_policy_url":"","faq_url":"","maximum_backups":5,"min_search_term_length":3,"version_checks":true,"suppress_uncategorized_badge":true,"topic_views_heat_low":1000,"topic_views_heat_medium":2000,"topic_views_heat_high":5000,"topic_post_like_heat_low":0.5,"topic_post_like_heat_medium":1.0,"topic_post_like_heat_high":2.0,"history_hours_low":12,"history_hours_medium":24,"history_hours_high":48,"cold_age_days_low":14,"cold_age_days_medium":90,"cold_age_days_high":180,"global_notice":"","show_create_topics_notice":true,"bootstrap_mode_min_users":50,"bootstrap_mode_enabled":false,"automatically_unpin_topics":true,"read_time_word_count":500,"disable_mailing_list_mode":false,"default_topics_automatic_unpin":true,"tagging_enabled":true,"tag_style":"simple","max_tags_per_topic":5,"max_tag_length":20,"min_trust_level_to_tag_topics":0,"max_tag_search_results":5,"show_filter_by_tag":true,"tags_sort_alphabetically":false,"staff_tags":"","suppress_overlapping_tags_in_list":false,"discourse_narrative_bot_enabled":true,"poll_enabled":true,"poll_maximum_options":20,"details_enabled":true,"available_locales":"ar|bs_BA|cs|da|de|el|en|es|et|fa_IR|fi|fr|gl|he|id|it|ja|ko|nb_NO|nl|pl_PL|pt|pt_BR|ro|ru|sk|sq|sv|te|tr_TR|uk|ur|vi|zh_CN|zh_TW"});
          ps.store("customHTML", {"top":"","footer":""});
          ps.store("banner", {});
          ps.store("customEmoji", []);
          ps.store("translationOverrides", {});
          ps.store("topic_1720", {"post_stream":{"posts":[{"id":10189,"name":"Ricard Wanderlof","username":"ricard","avatar_template":"/user_avatar/community.axoloti.com/ricard/{size}/163_1.png","created_at":"2016-05-19T04:45:24.187Z","cooked":"\u003cp\u003eI'm not really sure if this should be in the 1.0.10 thread or separate, but it is not really directly related to 1.0.10, although commit 90adea74fbbc4dbf676832f2c28b408c607c89aa (GUI: polyphonic voice allocation -  keep cycling when repeating one note) made me think of it.\u003c/p\u003e\n\n\u003cp\u003eWhat has struck me about polyphonic patches in Axoloti is that there is no control over the voice allocation. Many synths have a couple of assignment modes, often with slightly obscure names like Poly 1 and Poly 2. In practice there are a number of things that could be configured, and in such a flexibile system as the Axoloti I think it should be possible.\u003c/p\u003e\n\n\u003cp\u003eThings such as:\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eShould playing voices be robbed for new notes when the polyphony llimit is reached?\u003c/li\u003e\n\u003cli\u003eShould the same voice be played when playing the same note, or should a new voice be allocated?\u003c/li\u003e\n\u003cli\u003eIf more notes than voices have been played, and notes are released, should the notes that were once silenced be played again (in essence, a polyphonic version of the monophonic behavior that when two notes are played, and the second one released, the first one is heard again).\u003c/li\u003e\n\u003cli\u003eetc\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eAlso, the sustain pedal behavior could be taken into account. A handy pedal mode is 'sostenuto', whereby the sustain pedal only holds notes that were playing at the time the pedal was pressed, newly played notes aren't sustained. This allows you to play a couple of notes as a drone and then play on top of that. (It mimics the middle pedal on certain grand pianos which have this feature).\u003c/p\u003e\n\n\u003cp\u003eI feel it's not possible to make the voice allocation choices once and for all, it depends on the patch what is suitable. For instance, if playing a repeated note, if the patch is a drum or piano sound, it more accurately mimics the corresponding acoustic instrument if the same voices is triggered - and that also avoids stealing voices that are already playing. On a pad sound, it can tend to cut off the release of the previous note, so having a cyclic assignment might be better. So, these choices should be up to the user.\u003c/p\u003e\n\n\u003cp\u003eIt would also be nice to have a panel in the UI where the individual voices lit up as indicators so you could see which voices are in fact allocated.\u003c/p\u003e\n\n\u003cp\u003eWhat I'm thinking is an object with no actual connections, with a number of parameters in the form of switches which control the allocation modes. If no such object is present in the patch, a default allocation scheme is used. Such an 'allocation' object could also have a row of indicators for the actual voices playing.\u003c/p\u003e\n\n\u003cp\u003eI don't know if anything like that is planned. I don't mind looking into it in due course if there's any interest. I feel voice allocation is a fairly important thing to have control over.\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2016-05-19T13:41:42.984Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"avg_time":42,"incoming_link_count":656,"reads":147,"score":3311.5,"yours":false,"topic_id":1720,"topic_slug":"polyphonic-voice-assignment","display_username":"Ricard Wanderlof","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"http://community.axoloti.com/t/sub-patching-topology-question/4972/4","internal":true,"reflection":true,"title":"Sub Patching Topology Question","clicks":0}],"read":true,"user_title":null,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":111,"hidden":false,"hidden_reason_id":null,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":false,"wiki":false},{"id":10191,"name":"Mark Harris","username":"thetechnobear","avatar_template":"/user_avatar/community.axoloti.com/thetechnobear/{size}/6_1.png","created_at":"2016-05-19T08:10:58.888Z","cooked":"\u003cp\u003eYeah this has been raised a few times. \u003c/p\u003e\n\n\u003cp\u003eMain issue is this code is currently embedded in the Java app, and also linked closely to midi handling. \u003cbr\u003eits not hard to do, just needs careful thought on how to 'represent' it\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2016-05-19T08:10:58.888Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"avg_time":28,"incoming_link_count":4,"reads":132,"score":47.8,"yours":false,"topic_id":1720,"topic_slug":"polyphonic-voice-assignment","display_username":"Mark Harris","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"actions_summary":[],"moderator":true,"admin":true,"staff":true,"user_id":5,"hidden":false,"hidden_reason_id":null,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":false,"wiki":false},{"id":10193,"name":"Mark Harris","username":"thetechnobear","avatar_template":"/user_avatar/community.axoloti.com/thetechnobear/{size}/6_1.png","created_at":"2016-05-19T10:02:01.113Z","cooked":"\u003cp\u003eas I mentioned above, representation is tricky,\u003c/p\u003e\n\n\u003cp\u003ehave you thought how you would represent this to the user?\u003c/p\u003e\n\n\u003cp\u003eheres my thought that I've had on this in the past, but not come to any real conclusion.\u003c/p\u003e\n\n\u003ch3\u003eAxoloti\u003c/h3\u003e\n\n\u003cp\u003eallocation strategy is held as a property of the patch (subpatch in reality), that then triggers different generated code, which can be found in patch.java\u003cbr\u003eit would be fairly easy to add new ones, but obviously cannot be extended by the end user.\u003cbr\u003eI think the other weakness is the link between midi and voice allocation, yes, this is most often useful but not always.\u003cbr\u003e(also I don't like that some of the stealing/re-use logic is held in the midi/in objects, it should all be in one place) \u003c/p\u003e\n\n\u003cp\u003eone oddity in Axoloti, is generally, Axoloti is \u003cstrong\u003enot\u003c/strong\u003e event based, yet it handles midi as an event based, makes allocation 'easier' but not in line with other axoloti models.\u003c/p\u003e\n\n\u003cp\u003enote: midi handling is subject to change, currently it gets an immediate callback on receipt of midi messages, but this is 'wrong' and potentially problematic, we plan to move it to a queue that will be processed in the dsp execution (e.g. like a k-rate,s-rate handlers)\u003c/p\u003e\n\n\u003cp\u003ereal strength is its trivial for end users to use...\u003c/p\u003e\n\n\u003cp\u003ealternatives, I know 2 reasonable well, Reaktor and Max/MSP.\u003c/p\u003e\n\n\u003ch3\u003eReaktor\u003c/h3\u003e\n\n\u003cp\u003eI really like reaktors model, objects are marked as polyphonic, and wires becomes polyphonic. some built-in objects are polyphonic like midi in, so have a 'strategy' BUT there are objects to go from mono to poly to mono (toV, fromV iirc), to allow you do to as you please.\u003cbr\u003eI love this model, but its quite a distance from how Axoloti has things.\u003cbr\u003eadvantage is, flexible, and you don't actually need to have voices in sub-patches.\u003cbr\u003eI will point out, implementing voice strategies is not trivial...definitely and advanced use.\u003cbr\u003e(Reaktor selects max voices on the ensemble level) \u003c/p\u003e\n\n\u003ch3\u003eMax/MSP\u003c/h3\u003e\n\n\u003cp\u003epolyphony is handled in Max using Poly~ and poly, the former creates voices, the later (optional) has a voice allocation scheme that makes it 'easy' to link midi to poly~. In some ways this is quite similar to Axoloti, in that sub patches are used to represent a voice.\u003cbr\u003e(though, poly~ is pretty powerful as can be threaded, and have up/downsampling  ... might be an interesting way for axoloti to do oversampling for a group of objects) \u003cbr\u003eI will say though, its not trivial for a beginner to use poly~ , Axolotl's approach is much easier to just say ... I want this synth to be polyphonic... and we can't take a step back in this regard.\u003c/p\u003e\n\n\u003cp\u003ethere are of course, various reasons, why neither the Max nor Reaktor model would sit perfectly with Axoloti. (Max in particular is a bit too 'event based')\u003c/p\u003e\n\n\u003cp\u003ea couple of random notes:\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003eobviously also need to be 'backwards compatible' \u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eMax/Reaktor bring voice allocation under 'patch control', it would be easier to do in Axoloti if we expect allocation schemes to be written as custom objects.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003ewe don't have a way of allowing 'classes' to be specified e.g. you can't say I want N instances of subpatch type X to be created.  \u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003edue to above, it might be easier to allow a 'polyphonic custom' strategy, that simply creates the voices, but defers how midi messages (etc?) are routed\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eit would be simpler to change the midi routing to voice (see above) than to tackle the more generic voice allocation. \u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003ethere are some 'generic' things you want/need for poly voice allocation in particular, e.g. knowing voice age... you probably would not want to replicate this in custom strategies.\u003c/p\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eI think its possible to write your own voice allocation system current, its just not very nice. there are a few things you can use like the internal midi bus, and the poly multichannel allocation, to allow an object to decide how to allocate voices. also you can use the polyindex with a patch to do things.\u003cbr\u003eof course this is not ideal, and is a little complex (though writing voice allocation scheme, in any way, is never trivial) , but its not impossible either.\u003c/p\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eanyway, thoughts.... how would you represent this?\u003cbr\u003egoal is relatively simple, something that is as trivial to use as it currently is by default. (just mark as polyphonic), yet allows for more flexibility?\u003c/p\u003e\n\n\u003cp\u003eBTW: to get a feel for all of this, best to review patch.java to see whats currently being done, and also look at the generated xpatch.cpp code for the different strategies. you'll see its not that difficult. \u003cbr\u003eIn fact, I think the first think I ever added for Axoloti, as the \"Polyphonic Expression\" mode to handle MPE messages in Axoloti, it was a good 'learning' experience.\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2016-05-19T10:02:01.113Z","reply_count":2,"reply_to_post_number":null,"quote_count":0,"avg_time":40,"incoming_link_count":34,"reads":133,"score":225.6,"yours":false,"topic_id":1720,"topic_slug":"polyphonic-voice-assignment","display_username":"Mark Harris","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"actions_summary":[{"id":2,"count":1}],"moderator":true,"admin":true,"staff":true,"user_id":5,"hidden":false,"hidden_reason_id":null,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":false,"wiki":false},{"id":10200,"name":"","username":"SirPrimalform","avatar_template":"/user_avatar/community.axoloti.com/sirprimalform/{size}/1370_1.png","created_at":"2016-05-19T13:38:13.766Z","cooked":"\u003cp\u003eAh yes, this would be great. I've come across lots of voice allocation modes that are useful for different things so it'd be great to have them as options for something like the Axoloti where the entire point is versatility. Not sure what Axoloti uses at the moment, but useful ones that come to mind are:\u003c/p\u003e\n\n\u003cp\u003eRound-robin: Simplest. Where the voices are allocated cyclically without regard for whether any are currently in use is probably the most basic. Could be used for cool voice variation in conjunction with polyindex. Very Oberheim 4/8 voice-like.\u003c/p\u003e\n\n\u003cp\u003eEarliest available: If no voices are currently in use then voice 1 is used. If three notes are held, using voices 1-3 and then the note using the second voice is released, then the next note would use the second voice \u003cem\u003eif\u003c/em\u003e that voice has finished its release phase. In a fixed architecture synth it's not too hard to see when a given voice has finished its release, but in the Axoloti how do you decide the voice has finished it's release? \u003c/p\u003e\n\n\u003cp\u003eA cool option is deliberate voice stealing where a note that is retriggered steals the voice that was still playing the release phase of the previous instance of that note. It helps avoid overlapping instances of the same note, which of course you wouldn't get on an instrument like the piano. Of course that could be considered desirable for other applications (it can sound great when there's a tiny amount of randomisation to the tuning of each voice so you don't get phase locks).\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2016-05-19T13:38:13.766Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"avg_time":19,"incoming_link_count":3,"reads":104,"score":41.75,"yours":false,"topic_id":1720,"topic_slug":"polyphonic-voice-assignment","display_username":"","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":392,"hidden":false,"hidden_reason_id":null,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":false,"wiki":false},{"id":10201,"name":"johannes","username":"johannes","avatar_template":"/user_avatar/community.axoloti.com/johannes/{size}/8_1.png","created_at":"2016-05-19T13:40:42.537Z","cooked":"\u003cp\u003eIf we'd split up the general \"patch/patcher\" object into \"patch/patcher mono\", \"patch/patcher poly\", and \"patch/patcher mpe\" and add an xml field for the voice allocation code, that 'd open it up for more variations of allocators.\u003cbr\u003eThat 'd look fine for embedded subpatches. \u003cbr\u003eBut currently the mono/poly/mpe setting is part of the subpatch. This 'd break instancing an external poly subpatch. To create an external poly subpatch, you'd need to wrap it into an external subpatch with a \"patch/patcher poly\" object inside, and then the voice structure inside. Often a useful strategy, since a polysynth will likely have a polyphonic part anyway.\u003c/p\u003e\n\n\u003cp\u003eBut preserving compatibility will be hard...\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2016-05-19T13:40:42.537Z","reply_count":1,"reply_to_post_number":3,"quote_count":0,"avg_time":20,"incoming_link_count":3,"reads":100,"score":41.0,"yours":false,"topic_id":1720,"topic_slug":"polyphonic-voice-assignment","display_username":"johannes","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"thetechnobear","avatar_template":"/user_avatar/community.axoloti.com/thetechnobear/{size}/6_1.png"},"actions_summary":[],"moderator":true,"admin":true,"staff":true,"user_id":3,"hidden":false,"hidden_reason_id":null,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":false,"wiki":false},{"id":10204,"name":"Mark Harris","username":"thetechnobear","avatar_template":"/user_avatar/community.axoloti.com/thetechnobear/{size}/6_1.png","created_at":"2016-05-19T14:19:47.589Z","cooked":"\u003cp\u003eyeah, if you make everything embedded this helps, though I will say, we have code that is dependent on 'patch/patcher' (e.g. editor) , and without proper subclassing having derived forms is going to be problematic.\u003c/p\u003e\n\n\u003cp\u003eI think there are perhaps 2 parts to this problem...\u003cbr\u003ea) voice management, is it poly or mono\u003cbr\u003eb) voice allocation \u003c/p\u003e\n\n\u003cp\u003e(a) really simple, as we only have 'static' voices, i.e. its 1 or N... we don't allow more voices to be added.\u003c/p\u003e\n\n\u003cp\u003e(b) currently, is only really handled by midi (shouldn't be, but it is) ... and this is simply a midi handler.\u003cbr\u003eso theoretically, we only need to substitute a midi handler... this could simply be a proxy object.\u003cbr\u003e(i.e. its midi handler is called, and it is passed the proxied object, to call if it wants to allocate to that object)\u003c/p\u003e\n\n\u003cp\u003eanother option, which we have discussed before, is perhaps we should have a 'midi event' type, this could then be handled in the parent class, and perhaps then pass the event on, to and instance of a voice. this could be relatively easy, as we could use 'channel' as a proxy for voice id.(this is similar to as i mentioned above about using the internal midi bus, but more direct) \u003cbr\u003ethis has the advantage midi message routing becomes explicit, rather than the current view where the patcher does not show the midi routing.  (also open up midi filtering, and all sorts of midi fx options)\u003c/p\u003e\n\n\u003cp\u003ething I'm not keen on on this, is it propagates the 'midi' to voice , which i think should only be one way... e.g. when your doing sequencer, then midi is irrelevant, but you still might want to be polyphonic.\u003cbr\u003ethe only way currently, is to do it all yourself (I've done this, its not that bad), or go via midi.\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2016-05-19T14:19:47.589Z","reply_count":0,"reply_to_post_number":5,"quote_count":0,"avg_time":20,"incoming_link_count":3,"reads":98,"score":35.6,"yours":false,"topic_id":1720,"topic_slug":"polyphonic-voice-assignment","display_username":"Mark Harris","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"johannes","avatar_template":"/user_avatar/community.axoloti.com/johannes/{size}/8_1.png"},"actions_summary":[],"moderator":true,"admin":true,"staff":true,"user_id":5,"hidden":false,"hidden_reason_id":null,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":false,"wiki":false},{"id":10209,"name":"Ricard Wanderlof","username":"ricard","avatar_template":"/user_avatar/community.axoloti.com/ricard/{size}/163_1.png","created_at":"2016-05-19T16:20:56.570Z","cooked":"\u003caside class=\"quote\" data-post=\"3\" data-topic=\"1720\" data-full=\"true\"\u003e\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"//community.axoloti.com/user_avatar/community.axoloti.com/thetechnobear/40/6_1.png\" class=\"avatar\"\u003ethetechnobear:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eas I mentioned above, representation is tricky,\u003c/p\u003e\n\u003cp\u003ehave you thought how you would represent this to the user?\u003c/p\u003e\n\u003c/blockquote\u003e\u003c/aside\u003e\n\n\u003cp\u003eWell, my spontaneous thought, without having looked at the code or anything, was to add it to the subpatch object. There is already a 'poly' spinner representing the number of voices in the subpatch, so it would be natural to add a 'voice allocation' combo box with various modes.\u003c/p\u003e\n\n\u003cp\u003eMy initial thought was that the modes could be implemented in the firmware (or as the case seems to be, in xpatch.cpp), and the object would just select among a number of preset modes. On the other hand, looking at the discussion above, given the flexibility of the Axoloti, perhaps we could do better.\u003c/p\u003e\n\n\u003cp\u003eThere are objects such as sample playback, which refer to a 'memory' object (using the objref type), so perhaps a subpatch object could refer to an 'allocation' object which would do the actual allocation. The idea being that an 'allocation' object would actually have the allocation in code, so that you could write your own allocation algorithm if you wanted to, of course there would be a number of factory objects with useful pre-set algorithms, or perhaps better a single one which was configurable using parameters. Thus the actual API between the subpatch object and the allocation object would be hidden and doesn't need to be restrained to the ordinary data types.\u003c/p\u003e\n\n\u003cp\u003eOtherwise it would be cool with some form of 'note' data type, which basically could be MIDI messages stuffed into an int, one int per message. Incoming note data, be it from MIDI, USB, or from an object scanning a string of switches laid out as a keyboard, could then be patched into an 'allocation' object which would accept that type of data at its input.  A hidden internal API would then be used to actually trigger the voices.\u003c/p\u003e\n\n\u003caside class=\"quote\" data-post=\"4\" data-topic=\"1720\" data-full=\"true\"\u003e\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"//community.axoloti.com/user_avatar/community.axoloti.com/sirprimalform/40/1370_1.png\" class=\"avatar\"\u003eSirPrimalform:\u003c/div\u003e\n\u003cblockquote\u003e\u003cp\u003eEarliest available: If no voices are currently in use then voice 1 is used. If three notes are held, using voices 1-3 and then the note using the second voice is released, then the next note would use the second voice \u003cem\u003eif\u003c/em\u003e that voice has finished its release phase. In a fixed architecture synth it's not too hard to see when a given voice has finished its release, but in the Axoloti how do you decide the voice has finished it's release? \u003c/p\u003e\u003c/blockquote\u003e\u003c/aside\u003e\n\n\u003cp\u003ePerhaps there could be an attribute in the envelope objects, indicating if their release phase should be considered when it comes to allocation. That way you can have both envelopes which do affect allocation, but at the same time you don't have to. On the other hand, it could get very confusing if set up incorrectly, with all voices seemingly never getting relased if you patch something strangely.\u003c/p\u003e","post_number":7,"post_type":1,"updated_at":"2016-05-19T16:20:56.570Z","reply_count":1,"reply_to_post_number":4,"quote_count":2,"avg_time":15,"incoming_link_count":3,"reads":90,"score":38.75,"yours":false,"topic_id":1720,"topic_slug":"polyphonic-voice-assignment","display_username":"Ricard Wanderlof","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"SirPrimalform","avatar_template":"/user_avatar/community.axoloti.com/sirprimalform/{size}/1370_1.png"},"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":111,"hidden":false,"hidden_reason_id":null,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":false,"wiki":false},{"id":10216,"name":"johannes","username":"johannes","avatar_template":"/user_avatar/community.axoloti.com/johannes/{size}/8_1.png","created_at":"2016-05-19T20:39:41.814Z","cooked":"\u003cp\u003eAnother use case to consider: tonewheel/drawbar organs...\u003c/p\u003e\n\n\u003cp\u003eTonewheel/drawbars would currently partition into\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eone table/alloc object, containing the amplitude of each tonewheel.\u003c/li\u003e\n\u003cli\u003eone \"drawbar\" object manipulating the amplitudes, midi/in/script could serve this\u003c/li\u003e\n\u003cli\u003eone polyphonic subpatch of tonewheels accessing the amplitude table, without using any MIDI features in the subpatch.\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eIn case of more regular voice allocation one could expose tables containing the voice pitches, velocities and gates. Written by the voice allocator, read by the voices.\u003c/p\u003e\n\n\u003caside class=\"quote\" data-post=\"7\" data-topic=\"1720\"\u003e\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"//community.axoloti.com/user_avatar/community.axoloti.com/ricard/40/163_1.png\" class=\"avatar\"\u003ericard:\u003c/div\u003e\n\u003cblockquote\u003e\u003cp\u003ePerhaps there could be an attribute in the envelope objects, indicating if their release phase should be considered when it comes to allocation.\u003c/p\u003e\u003c/blockquote\u003e\u003c/aside\u003e\n\n\u003cp\u003eOr more generic, another table that is written by the voice. Then it could be the output of any envelope or envelope follower that gets sorted by the voice allocator.\u003c/p\u003e","post_number":8,"post_type":1,"updated_at":"2016-05-19T20:44:37.854Z","reply_count":1,"reply_to_post_number":null,"quote_count":1,"avg_time":19,"incoming_link_count":12,"reads":79,"score":81.75,"yours":false,"topic_id":1720,"topic_slug":"polyphonic-voice-assignment","display_username":"johannes","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"actions_summary":[],"moderator":true,"admin":true,"staff":true,"user_id":3,"hidden":false,"hidden_reason_id":null,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":false,"wiki":false},{"id":10222,"name":"Mark Harris","username":"thetechnobear","avatar_template":"/user_avatar/community.axoloti.com/thetechnobear/{size}/6_1.png","created_at":"2016-05-20T12:06:34.806Z","cooked":"\u003cp\u003ehmm, I think I would 'avoid' have the voice management know anything about envelopes or even gates.\u003cbr\u003e(voices are not necessarily always used for such things)\u003c/p\u003e\n\n\u003cp\u003eIve another idea... which actually is based a little on the Max/Reaktor models,\u003c/p\u003e\n\n\u003ch2\u003epolyphonic inlets and outlets\u003c/h2\u003e\n\n\u003cp\u003e(this would not replace the current mechanism, at lease initially, it would sit alongside, and be used with patches marked as polyphonic) \u003c/p\u003e\n\n\u003ch3\u003epolyphonic inlets\u003c/h3\u003e\n\n\u003cp\u003ethis would be similar to normal inlets, except the 'outside' can address individual voices.\u003cbr\u003ethis is like Reaktors toV object, you give it data and a voice, to target a specific voice.\u003cbr\u003einside the subpatch, these polyphonic inlets, are seen as monophonic.. so no change there.\u003c/p\u003e\n\n\u003cp\u003e(in someway this is getting a little like reactors model, the subpatch is marked as polyphonic, and some wires are conceptually polyphonic) \u003c/p\u003e\n\n\u003cp\u003efor backwards compatibly we keep existing midi polyphonic behaviour, and the default behaviour of a monophonic outlet to a polyphonic inlet is to copy the data to all voices.\u003c/p\u003e\n\n\u003ch3\u003epolyphonic outlets?\u003c/h3\u003e\n\n\u003cp\u003ewell this is actually the reverse, currently what happens to outlets of polyphonic modules depends on type e.g. data is summed... but it would be nice have some control of this...\u003cbr\u003eIm thinking here of an object like fromV\u003cbr\u003ewhat this does is take a polyphonic outlet, and a voice index and has a monophonic output. \u003cbr\u003ethus allowing the parent patch, to be able (with multiple fromV objects, or a selector) take apart the various outputs.\u003cbr\u003e(the default behaviour of a polyphonic output into a monophonic input, is the current behaviour e.g. summing) \u003c/p\u003e\n\n\u003cp\u003ewhat does this mean?\u003cbr\u003ewell it means we don't actually needs allocators at all, instead like Reaktor/Max , we just provide a mechanism for patch writers to access voices directly i.e. write there own allocator.\u003cbr\u003ebecause its 'separate' from voice allocation, they can live side by side (at least initially, we may review in time) - which means compatibility.\u003cbr\u003eits very generic, no assumptions about what a voice is used for.... e.g. its not even assuming the voice is used for audio, it could be anything.\u003cbr\u003e(it would also fit nicely if in the future we make midi data type, as that could then feed in/out using polyphonic inlets/outlets)\u003cbr\u003eI also think its quite simple to implement \u003cimg src=\"/images/emoji/emoji_one/slight_smile.png?v=2\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\"\u003e \u003c/p\u003e\n\n\u003cp\u003e(simple) example of use:\u003cbr\u003eso a user whats a simple polyphonic patch, with note and date input via midi... but wants to take control of how the midi gets translated to a voice\u003c/p\u003e\n\n\u003cp\u003ea user creates a sub-patch with 2 polyphonic inlets, note and gate... they may also have mono inlets, eg. for filter cutoff control.\u003cbr\u003ein the parent patch, they have an object with a midi handler , that looks at the midi data directly... selects a voice , and then puts the note and gate data on that specify voice inlet.\u003c/p\u003e\n\n\u003cp\u003ethere is a question about if this can be done only as a custom object or also as patching.\u003c/p\u003e\n\n\u003cp\u003ea custom object is the most efficient, since its the only way to do conditional behaviour\u003cbr\u003eBUT we can also have a patching objects.\u003c/p\u003e\n\n\u003cp\u003ethis basically would required that the user would (potentially) need to a patching object (toV) for each voice they want to target , the toV object takes a voice id and a data value (so one for each data type), the voice id can either be fixed (using const/i) or derived. the output is a polyphonic output to connect to the polyphonic inlet of the subpatch. using a dynamic value for toV obviously means its only possible to set one value per 'k-rate cycle' or midi handling cycling.\u003c/p\u003e\n\n\u003cp\u003e(visually , we should differentiate poly inlets/outlets and wires from mono equivalents... perhaps like a 'double line', as its 'thicker' coz its got more data ?)\u003c/p\u003e\n\n\u003cp\u003eone other option object developers have, is to write polyphonic outlet objects... \u003cbr\u003ee.g. one could write a polyphonic midi/in/keyb this could then directly be connected to polyphonic sub patches.\u003cbr\u003e(this is exactly the approach Reaktor takes)\u003c/p\u003e\n\n\u003cp\u003eThoughts?  \u003c/p\u003e\n\n\u003cp\u003e(sorry the above perhaps is not as clear as it could be, but if it has interest then we can dig into details, and I could make some drawings to clear up any confusion.\u003cbr\u003ebut to be clear, its not too dissimilar to Reacktor toV/FromV , an in alot of ways the way poly~ is used in Max when you give it a voice number... so reading those will probably make it reasonable clear)\u003c/p\u003e","post_number":9,"post_type":1,"updated_at":"2016-05-20T12:06:34.806Z","reply_count":1,"reply_to_post_number":8,"quote_count":0,"avg_time":26,"incoming_link_count":0,"reads":77,"score":21.7,"yours":false,"topic_id":1720,"topic_slug":"polyphonic-voice-assignment","display_username":"Mark Harris","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"johannes","avatar_template":"/user_avatar/community.axoloti.com/johannes/{size}/8_1.png"},"actions_summary":[],"moderator":true,"admin":true,"staff":true,"user_id":5,"hidden":false,"hidden_reason_id":null,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":false,"wiki":false},{"id":10340,"name":"johannes","username":"johannes","avatar_template":"/user_avatar/community.axoloti.com/johannes/{size}/8_1.png","created_at":"2016-05-23T13:16:00.850Z","cooked":"\u003cp\u003eCan that simplify to array types for inlets/outlets, and a mechanism for poly subpatches to distribute an array inlet/outlet to each voice?\u003cbr\u003eA voice allocator object could have pitch, gate and velocity array-outlets.\u003cbr\u003eA poly subpatch outlet could expose as an array-outlet on the parent object, summing could be an implicit conversion when connecting to a non-array outlet.\u003c/p\u003e\n\n\u003cp\u003eThis could also be a solution for oversampling/downsampling. Except in case where a polyphonic subpatch operates in oversampled domain and the downsampler needs to be shared for all voices, then we 'd need 2d arrays...\u003c/p\u003e\n\n\u003cp\u003eThe hard part: which object will decide on the array size of a net, so that run-time bounds checks can be eliminated? If the source outlet decides, two sources could connect to one object that each have a different array size. If we just check for mismatches, still, both the voice allocator object and the poly voices object must be configures for the number of voices.\u003c/p\u003e\n\n\u003cp\u003eSometimes a mismatch between allocator and poly voice object would be useful too, in case where one Axoloti Core handles voice allocation but multiple boards are used to generate the voices. Then the cv/gate arrays could be split and distributed at control rate. But then we need objects to expand/combine/subrange arrays. An array expander object, translating one array-inlet into one outlet per element requires more object dynamism than there currently is. Or it could also take the form of a one array-inlet into one outlet and an array-outlet of the remainder of the array, but also in that case the array-outlet size is only known after connecting the array-inlet. This needs further thoughts...\u003c/p\u003e","post_number":10,"post_type":1,"updated_at":"2016-05-23T13:16:00.850Z","reply_count":1,"reply_to_post_number":9,"quote_count":0,"avg_time":13,"incoming_link_count":0,"reads":62,"score":18.05,"yours":false,"topic_id":1720,"topic_slug":"polyphonic-voice-assignment","display_username":"johannes","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"thetechnobear","avatar_template":"/user_avatar/community.axoloti.com/thetechnobear/{size}/6_1.png"},"actions_summary":[],"moderator":true,"admin":true,"staff":true,"user_id":3,"hidden":false,"hidden_reason_id":null,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":false,"wiki":false},{"id":10346,"name":"Mark Harris","username":"thetechnobear","avatar_template":"/user_avatar/community.axoloti.com/thetechnobear/{size}/6_1.png","created_at":"2016-05-23T16:14:47.192Z","cooked":"\u003cp\u003eyeah I kind of envisaged this being implemented as arrays... in some ways.\u003c/p\u003e\n\n\u003cp\u003ei don't really see the need at all though for a 'voice allocator', a voice allocator just becomes an object that happens to 'output' polyphonic outlets.\u003c/p\u003e\n\n\u003cp\u003ee.g. \u003cbr\u003eimagine a new polymidi/in/keyb it could output a polyphonic pitch,gate,velocity ... and yes by implication, the decision on how it decides what messages to put on which channels, means it is a voice allocator.  the cool thing is , don't like it? just implement a different one!\u003cbr\u003ebut its important its \u003cstrong\u003enot\u003c/strong\u003e just notes, e.g. polymidi/in/cc could also be implemented and again would decide how to allocate these messages to each voice.\u003c/p\u003e\n\n\u003cp\u003ewith this, arrangement we could have implemented the 'polyphonic expression' modes without resorting to a new 'type of subpatch'\u003c/p\u003e\n\n\u003cp\u003earray size, yeah Id assumed this would be calculated from the subpatch voices.\u003cbr\u003ethis is easy for direct connect to the subpatch.\u003c/p\u003e\n\n\u003cp\u003eI think the question is do you need polyphonic wires upstream?\u003c/p\u003e\n\n\u003cp\u003eso... max doesn't do this at all, basically you can only communicate with poly~ as voices, in the rest of the patch, you have to use your own table structures.\u003cbr\u003ein Reaktor, this is controlled at the 'instrument' level, basically you define the number of voices.\u003cbr\u003e(hmm, could be ensemble, would have to double check \u003cimg src=\"/images/emoji/emoji_one/slight_smile.png?v=2\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\"\u003e ) , this means any polyphonic wire has that number of voices. Id say for us we could say its at 'patch' level...\u003cbr\u003e(this ensures within a patch a poly wire is a known size everywhere, but at the boundary to a subpatch it can change) \u003c/p\u003e\n\n\u003cp\u003ebounds checking etc, well I think the 'wire' has to know the number of voices, and we can decide what happens when the user 'access' a wire \u0026gt; poly count. possible options are... ignore or wrap around (modulus)    ...its considered a 'patching bug' but we have to do something that doesn't crash \u003cimg src=\"/images/emoji/emoji_one/slight_smile.png?v=2\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\"\u003e \u003c/p\u003e\n\n\u003cp\u003eoversampling/downsampling - yes, this is what max does with its poly~ object, its basically can oversample internally, and then downsample the outlets back to the parent patch SR.\u003c/p\u003e\n\n\u003cp\u003eok, the above is all a little bit 'all over the place' , as yeah, it needs a lot of thought to get it right, but it seems a simple solution (at least conceptually) thats very flexible.\u003c/p\u003e","post_number":11,"post_type":1,"updated_at":"2016-05-23T16:14:47.192Z","reply_count":0,"reply_to_post_number":10,"quote_count":0,"avg_time":22,"incoming_link_count":1,"reads":61,"score":18.3,"yours":false,"topic_id":1720,"topic_slug":"polyphonic-voice-assignment","display_username":"Mark Harris","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"johannes","avatar_template":"/user_avatar/community.axoloti.com/johannes/{size}/8_1.png"},"actions_summary":[],"moderator":true,"admin":true,"staff":true,"user_id":5,"hidden":false,"hidden_reason_id":null,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":false,"wiki":false},{"id":10358,"name":"Nicholas Bryant","username":"C0dexter","avatar_template":"/user_avatar/community.axoloti.com/c0dexter/{size}/2202_1.png","created_at":"2016-05-24T11:37:40.651Z","cooked":"\u003cp\u003eExcuse my ignorance if this already exists, but I'd like to send from the polyphonic input to individual voices. Having a separate sub-patch/voice with different sounds, regardless of assignment regime.. something like the Roland 100M 184 keyboard, or pizmidi midiChordSplit in VST terms.\u003c/p\u003e","post_number":12,"post_type":1,"updated_at":"2016-05-24T11:37:40.651Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"avg_time":22,"incoming_link_count":0,"reads":57,"score":17.5,"yours":false,"topic_id":1720,"topic_slug":"polyphonic-voice-assignment","display_username":"Nicholas Bryant","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":360,"hidden":false,"hidden_reason_id":null,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":false,"wiki":false},{"id":10359,"name":"Mark Harris","username":"thetechnobear","avatar_template":"/user_avatar/community.axoloti.com/thetechnobear/{size}/6_1.png","created_at":"2016-05-24T12:30:22.435Z","cooked":"\u003caside class=\"quote\" data-post=\"12\" data-topic=\"1720\" data-full=\"true\"\u003e\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"//community.axoloti.com/user_avatar/community.axoloti.com/c0dexter/40/2202_1.png\" class=\"avatar\"\u003eC0dexter:\u003c/div\u003e\n\u003cblockquote\u003e\u003cp\u003eExcuse my ignorance if this already exists, but I'd like to send from the polyphonic input to individual voices. Having a separate sub-patch/voice with different sounds, regardless of assignment regime.. something like the Roland 100M 184 keyboard, or pizmidi midiChordSplit in VST terms.\u003c/p\u003e\u003c/blockquote\u003e\u003c/aside\u003e\n\n\u003cp\u003eyou could already do this with a custom object, as it can create a midi handler that can split out the voices, and send to different outputs.  the main issue you face, is that while the midi handler is event based, the k-rate handler is NOT, this means an individual k-rate port \u003cstrong\u003etheoretically\u003c/strong\u003e cannot work, since you might have 2 midi messages arrive within one k-rate cycle that specified two notes. I say theoretically, because its unlikely your going to get midi at 3000 msg/second (the k-rate)... in practice, i suspect a midi/in/keyb with objects patched to split out the messages to different sub-patches would likely work.\u003c/p\u003e\n\n\u003cp\u003egoing forward a polyphonic outlets (and poly midi objects) would make this much easier!\u003cbr\u003esimply use the polymidi/in/keyb   and then use an 'fromV' object to split into different outlets, to be then passed onto the voices.\u003cbr\u003e(different polymidi/in/keyb variants could implement different allocation strategies e.g. RR, last, random etc)\u003c/p\u003e","post_number":13,"post_type":1,"updated_at":"2016-05-24T12:30:22.435Z","reply_count":0,"reply_to_post_number":12,"quote_count":1,"avg_time":26,"incoming_link_count":3,"reads":58,"score":42.9,"yours":false,"topic_id":1720,"topic_slug":"polyphonic-voice-assignment","display_username":"Mark Harris","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"C0dexter","avatar_template":"/user_avatar/community.axoloti.com/c0dexter/{size}/2202_1.png"},"actions_summary":[{"id":2,"count":1}],"moderator":true,"admin":true,"staff":true,"user_id":5,"hidden":false,"hidden_reason_id":null,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":false,"wiki":false}],"stream":[10189,10191,10193,10200,10201,10204,10209,10216,10222,10340,10346,10358,10359]},"timeline_lookup":[[1,1620],[8,1619],[10,1616],[12,1615]],"id":1720,"title":"Polyphonic voice assignment","fancy_title":"Polyphonic voice assignment","posts_count":13,"created_at":"2016-05-19T04:45:24.015Z","views":2205,"reply_count":7,"participant_count":5,"like_count":2,"last_posted_at":"2016-05-24T12:30:22.435Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"polyphonic-voice-assignment","category_id":11,"word_count":4356,"deleted_at":null,"user_id":111,"pm_with_non_human_user":false,"draft":null,"draft_key":"topic_1720","draft_sequence":null,"unpinned":null,"pinned_globally":false,"pinned":false,"pinned_at":null,"pinned_until":null,"details":{"created_by":{"id":111,"username":"ricard","avatar_template":"/user_avatar/community.axoloti.com/ricard/{size}/163_1.png"},"last_poster":{"id":5,"username":"thetechnobear","avatar_template":"/user_avatar/community.axoloti.com/thetechnobear/{size}/6_1.png"},"participants":[{"id":5,"username":"thetechnobear","avatar_template":"/user_avatar/community.axoloti.com/thetechnobear/{size}/6_1.png","post_count":6,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":3,"username":"johannes","avatar_template":"/user_avatar/community.axoloti.com/johannes/{size}/8_1.png","post_count":3,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":111,"username":"ricard","avatar_template":"/user_avatar/community.axoloti.com/ricard/{size}/163_1.png","post_count":2,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":392,"username":"SirPrimalform","avatar_template":"/user_avatar/community.axoloti.com/sirprimalform/{size}/1370_1.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":360,"username":"C0dexter","avatar_template":"/user_avatar/community.axoloti.com/c0dexter/{size}/2202_1.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null}],"suggested_topics":[{"id":6154,"title":"Ipads and tablets","fancy_title":"Ipads and tablets","slug":"ipads-and-tablets","posts_count":13,"reply_count":4,"highest_post_number":13,"image_url":null,"created_at":"2019-11-11T10:40:12.736Z","last_posted_at":"2019-11-14T22:38:38.736Z","bumped":true,"bumped_at":"2019-11-15T18:47:48.926Z","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"archetype":"regular","like_count":3,"views":418,"category_id":5,"tags":[],"featured_link":null,"posters":[{"extras":null,"description":"Original Poster","user":{"id":853,"username":"Chambers79","avatar_template":"/user_avatar/community.axoloti.com/chambers79/{size}/2757_1.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":2111,"username":"tele_player","avatar_template":"/letter_avatar_proxy/v2/letter/t/e47c2d/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":2323,"username":"alanennis","avatar_template":"/letter_avatar_proxy/v2/letter/a/49beb7/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":1143,"username":"axoman","avatar_template":"/letter_avatar_proxy/v2/letter/a/848f3c/{size}.png"}}]},{"id":6208,"title":"Proce55ing + Axoloti","fancy_title":"Proce55ing + Axoloti","slug":"proce55ing-axoloti","posts_count":3,"reply_count":0,"highest_post_number":3,"image_url":null,"created_at":"2019-12-04T18:09:42.264Z","last_posted_at":"2019-12-05T17:26:08.871Z","bumped":true,"bumped_at":"2019-12-20T07:05:35.427Z","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"archetype":"regular","like_count":0,"views":296,"category_id":15,"tags":["midi"],"featured_link":null,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":2192,"username":"joaogatao","avatar_template":"/user_avatar/community.axoloti.com/joaogatao/{size}/6254_1.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":2111,"username":"tele_player","avatar_template":"/letter_avatar_proxy/v2/letter/t/e47c2d/{size}.png"}}]},{"id":6292,"title":"HELP! programming objects (without knowing how to program)","fancy_title":"HELP! programming objects (without knowing how to program)","slug":"help-programming-objects-without-knowing-how-to-program","posts_count":7,"reply_count":2,"highest_post_number":7,"image_url":null,"created_at":"2019-12-30T00:02:33.060Z","last_posted_at":"2020-01-14T02:24:02.336Z","bumped":true,"bumped_at":"2020-01-14T02:24:02.336Z","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"archetype":"regular","like_count":4,"views":285,"category_id":7,"tags":[],"featured_link":null,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":2223,"username":"DrGwon","avatar_template":"/user_avatar/community.axoloti.com/drgwon/{size}/6810_1.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":772,"username":"patatos","avatar_template":"/letter_avatar_proxy/v2/letter/p/5f9b8f/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":410,"username":"SirSickSik","avatar_template":"/user_avatar/community.axoloti.com/sirsicksik/{size}/5014_1.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1880,"username":"MattilynMattroe","avatar_template":"/user_avatar/community.axoloti.com/mattilynmattroe/{size}/7160_1.png"}}]},{"id":6424,"title":"Axoloti connects but doesn't run patches","fancy_title":"Axoloti connects but doesn\u0026rsquo;t run patches","slug":"axoloti-connects-but-doesnt-run-patches","posts_count":12,"reply_count":1,"highest_post_number":12,"image_url":"/uploads/default/optimized/2X/1/164d09c3275830058e53338fc22363857b5bff59_1_611x500.png","created_at":"2020-02-18T23:50:39.614Z","last_posted_at":"2020-02-20T21:40:39.079Z","bumped":true,"bumped_at":"2020-02-20T21:40:39.079Z","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"archetype":"regular","like_count":0,"views":248,"category_id":8,"tags":[],"featured_link":null,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":53,"username":"miketheman","avatar_template":"/user_avatar/community.axoloti.com/miketheman/{size}/858_1.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":2111,"username":"tele_player","avatar_template":"/letter_avatar_proxy/v2/letter/t/e47c2d/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":745,"username":"jaffasplaffa","avatar_template":"/user_avatar/community.axoloti.com/jaffasplaffa/{size}/5808_1.png"}}]},{"id":6434,"title":"Switch S1 for DFU mode","fancy_title":"Switch S1 for DFU mode","slug":"switch-s1-for-dfu-mode","posts_count":6,"reply_count":0,"highest_post_number":6,"image_url":null,"created_at":"2020-02-21T21:46:20.753Z","last_posted_at":"2020-03-06T17:28:37.882Z","bumped":true,"bumped_at":"2020-03-06T17:28:37.882Z","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"archetype":"regular","like_count":2,"views":208,"category_id":8,"tags":[],"featured_link":null,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":2471,"username":"SpaceSlab","avatar_template":"/user_avatar/community.axoloti.com/spaceslab/{size}/6881_1.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":745,"username":"jaffasplaffa","avatar_template":"/user_avatar/community.axoloti.com/jaffasplaffa/{size}/5808_1.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":2111,"username":"tele_player","avatar_template":"/letter_avatar_proxy/v2/letter/t/e47c2d/{size}.png"}}]}],"links":[{"url":"http://community.axoloti.com/t/sub-patching-topology-question/4972/4","title":"Sub Patching Topology Question","fancy_title":null,"internal":true,"attachment":false,"reflection":true,"clicks":0,"user_id":13,"domain":"community.axoloti.com"}],"notification_level":1,"can_flag_topic":false},"highest_post_number":13,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":null,"tags":[],"featured_link":null,"topic_timer":null,"message_bus_last_id":39});
      })();
      </script>

    

    <script>
  Ember.RSVP.configure('onerror', function(e) {
    // Ignore TransitionAborted exceptions that bubble up
    if (e && e.message === "TransitionAborted") { return; }

    window.onerror(e && e.message, null,null,null,e);
  });
</script>

<script>

  (function() {
    var ps = require('preload-store').default;

    Discourse.CDN = '';
    Discourse.BaseUrl = 'community.axoloti.com'.replace(/:[\d]*$/,"");
    Discourse.BaseUri = '';
    Discourse.Environment = 'production';
    Discourse.SiteSettings = ps.get('siteSettings');
    Discourse.LetterAvatarVersion = '5_9b142ce9460b8c6b265fd9abf598d3fd';
    I18n.defaultLocale = 'en';
    Discourse.start();
    Discourse.set('assetVersion','d1ec72c862674d2eea0eb8ef6fc5934f');
    Discourse.Session.currentProp("disableCustomCSS", false);
    Discourse.HighlightJSPath = "/highlight-js/community.axoloti.com/100444ceef8ca161334f64d3ce49fe7a1556f943.js";
  })();
</script>

<link rel='preload' href='/assets/browser-update-f57286e74ddbc53aa899689b01ef467078911e4138050c561939955849af35dd.js' as='script'/>
<script src='/assets/browser-update-f57286e74ddbc53aa899689b01ef467078911e4138050c561939955849af35dd.js'></script>


    

      
    
  </body>
</html>
