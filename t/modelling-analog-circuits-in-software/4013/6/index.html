<!DOCTYPE html>
<html lang="en" class="desktop-view not-mobile-device  anon">
  <head>
    <meta charset="utf-8">
    <title>Modelling analog circuits in software - AxoObject coding - Axoloti Community</title>
    <meta name="description" content="Hi everyone, 

I&amp;#39;m about to start a journey into modelling analog circuits. The topic has been in my head for some time already and I want to finally get started. What I&amp;#39;m looking for now is some fellows to go through th&amp;hellip;">
    <meta name="discourse_theme_key" content="b5ce34aa-3ee1-4d3e-b190-0a2ab62c7408">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.9.0.beta3 - https://github.com/discourse/discourse version 13f3de4bf673802eb8ec595d36587b4524773209">
<link rel="icon" type="image/png" href="/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="https://sebiik.github.io/community.axoloti.com.backup/t/modelling-analog-circuits-in-software/4013" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"http://community.axoloti.com","potentialAction":{"@type":"SearchAction","target":"http://community.axoloti.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="https://sebiik.github.io/community.axoloti.com.backup/opensearch.xml" title="Axoloti Community Search">

    

      <meta name="fragment" content="!">


    <script>
      window.EmberENV = window.EmberENV || {};
      window.EmberENV['FORCE_JQUERY'] = true;
    </script>

    <link rel='preload' href='/assets/locales/en-5bbc8626277bd471a9fcd063411070c515cad1a78c86a38ad27792a513f11bd4.js' as='script'/>
<script src='/assets/locales/en-5bbc8626277bd471a9fcd063411070c515cad1a78c86a38ad27792a513f11bd4.js'></script>
    <link rel='preload' href='/assets/ember_jquery-a8dcbd325e04410f036f2a791d66d8316c48c5387acdd914de99a5dd6afb3cd3.js' as='script'/>
<script src='/assets/ember_jquery-a8dcbd325e04410f036f2a791d66d8316c48c5387acdd914de99a5dd6afb3cd3.js'></script>
    <link rel='preload' href='/assets/preload-store-ec90ffab9d7a6d9e507dda7cf7343e9d50b8bce624f7f44486ac8fd6b9814309.js' as='script'/>
<script src='/assets/preload-store-ec90ffab9d7a6d9e507dda7cf7343e9d50b8bce624f7f44486ac8fd6b9814309.js'></script>
    <link rel='preload' href='/assets/vendor-199fce5a9e9895329b51b04605f1f5061951acb488baa6b2ea2fc2ae36def529.js' as='script'/>
<script src='/assets/vendor-199fce5a9e9895329b51b04605f1f5061951acb488baa6b2ea2fc2ae36def529.js'></script>
    <link rel='preload' href='/assets/pretty-text-bundle-e888dd08c05658b05da2124dd56955aa8fe94225d532fb8bfa3264a3eb2aa581.js' as='script'/>
<script src='/assets/pretty-text-bundle-e888dd08c05658b05da2124dd56955aa8fe94225d532fb8bfa3264a3eb2aa581.js'></script>
    <link rel='preload' href='/assets/application-13a284a273d9247cd8b3d19ae7d053297aeb5b3eabaa9a901c9fd236fb7dfe60.js' as='script'/>
<script src='/assets/application-13a284a273d9247cd8b3d19ae7d053297aeb5b3eabaa9a901c9fd236fb7dfe60.js'></script>
    <link rel='preload' href='/assets/plugin-3a5d56cbe920ebb10de8abd59e839cf2d48d598ca07a267327f96e3fec534065.js' as='script'/>
<script src='/assets/plugin-3a5d56cbe920ebb10de8abd59e839cf2d48d598ca07a267327f96e3fec534065.js'></script>
    <link rel='preload' href='/assets/plugin-third-party-346f0166b34a16f0ac66ea388d925068ee8f76267dc167ac7173785ea046f465.js' as='script'/>
<script src='/assets/plugin-third-party-346f0166b34a16f0ac66ea388d925068ee8f76267dc167ac7173785ea046f465.js'></script>


      

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

    <link rel="manifest" href="/manifest.json">


      <link href="/stylesheets/desktop_d93a33ca8617326fe353f80e6ab865188244d48c.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop"/>


  <link href="/stylesheets/desktop_theme_1_6c5f8f7f5e6a154a9f0dfd7aedf04bae4b669f17.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop_theme"/>

    

<link rel="preload" href="/assets/fontawesome-webfont-2adefcbc041e7d18fcf2d417879dc5a09997aa64d675b7a3c4b6ce33da13f3fe.woff2?http://community.axoloti.com&2&v=4.7.0" as="font" type="font/woff2" crossorigin />
<style>
  @font-face {
    font-family: 'FontAwesome';
    src: url('/assets/fontawesome-webfont-2adefcbc041e7d18fcf2d417879dc5a09997aa64d675b7a3c4b6ce33da13f3fe.woff2?http://community.axoloti.com&2&v=4.7.0') format('woff2'),
         url('/assets/fontawesome-webfont-ba0c59deb5450f5cb41b3f93609ee2d0d995415877ddfa223e8a8a7533474f07.woff?http://community.axoloti.com&amp;2&v=4.7.0') format('woff');
  }
</style>


      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Modelling analog circuits in software&#39;" href="https://sebiik.github.io/community.axoloti.com.backup/t/modelling-analog-circuits-in-software/4013.rss" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://community.axoloti.com/uploads/default/original/2X/f/fcc033325b671fd7559653096a2bc328cb576673.png" />
<meta property="og:image" content="http://community.axoloti.com/uploads/default/original/2X/f/fcc033325b671fd7559653096a2bc328cb576673.png" />
<meta property="og:url" content="http://community.axoloti.com/t/modelling-analog-circuits-in-software/4013/6" />
<meta name="twitter:url" content="http://community.axoloti.com/t/modelling-analog-circuits-in-software/4013/6" />
<meta property="og:title" content="Modelling analog circuits in software" />
<meta name="twitter:title" content="Modelling analog circuits in software" />
<meta property="og:description" content="Okay, so here&#39;s how far I got today. I wrote down the simple equation that describes the circuit in this picture:[image] If you sum up all currents flowing out of the node connecting R, Ri and D, you get:   0 = -(10*Uin - Ud)/R + I0*(exp(A*Ud) - 1) + Ud/Ri  where Ud is the voltage between the node and GND, I0 = 50.36µA and A = 7.48336 1/V (which I calculated from two points in the U/I plot in the 1N4148 datasheet).   I took the opportunity to finally learn some python (which I wanted to do for a..." />
<meta name="twitter:description" content="Okay, so here&#39;s how far I got today. I wrote down the simple equation that describes the circuit in this picture:[image] If you sum up all currents flowing out of the node connecting R, Ri and D, you get:   0 = -(10*Uin - Ud)/R + I0*(exp(A*Ud) - 1) + Ud/Ri  where Ud is the voltage between the node and GND, I0 = 50.36µA and A = 7.48336 1/V (which I calculated from two points in the U/I plot in the 1N4148 datasheet).   I took the opportunity to finally learn some python (which I wanted to do for a..." />

      <link rel="next" href="/t/modelling-analog-circuits-in-software/4013?page=2">


    
  </head>

  <body class="">
    

    <div class='debug-eyeline'></div>

    <noscript data-path="/t/modelling-analog-circuits-in-software/4013/6">
      <header class="d-header">
  <div class="wrap">
    <div class="contents">
      <div class="row">
        <div class="title span13">
          <a href="/">
              <img src="/uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo">
          </a>
        </div>
            <div class='panel clearfix'>
              <a href="/login" class='btn btn-primary btn-small login-button'><i class="fa fa-user"></i> Log In</a>
            </div>
      </div>
    </div>
  </div>
</header>

      <div id="main-outlet" class="wrap">
        <!-- preload-content: -->
        <h1>
  <a href="/t/modelling-analog-circuits-in-software/4013">Modelling analog circuits in software</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="/c/axoobject-code" itemprop="url">
        <span itemprop="title">AxoObject coding</span>
      </a>
    </div>
</div>





<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/TheSlowGrowth'><b itemprop='author'>TheSlowGrowth</b></a>
           
           <time datetime='2017-12-11T13:52:26Z' itemprop='datePublished'>
             2017-12-11 13:52:26 UTC
           </time>
        </span>
        <span itemprop='position'>#1</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hi everyone,</p>

<p>I'm about to start a journey into modelling analog circuits. The topic has been in my head for some time already and I want to finally get started. What I'm looking for now is some fellows to go through this together. In my experience ping-ponging ideas can greatly improve the experience for everyone and that's why I think it could be great to work on this together.</p>

<h3>My goal...</h3>

<p>... is to gain a deeper understanding about what matters in analog circuits and how to model some of the relevant behaviour in a DSP. Maybe we create some Axoloti objects for saturation/filters/vcas based on real circuits. But I consider the creation of new objects a side effect. Really, the primary goal, for me, is to learn and tinker.</p>

<h3>My background</h3>

<p>I'm currently approaching my final thesis in electrical engineering at a university in Germany. I have some background in DSP and signal theory as well as C/C++ programming. Add to that multiple years of experience building synths and synth modules (eurorack, it's a horrible drug). Why am I mentioning this? Because that says a lot about the angle from which I'll approach this topic.</p>

<h3>Preferred methodology</h3>

<p>To make this fun and interesting for everyone, I'd suggest we try to make things reproducible for everyone. That means we should be clear about what we did and how so we can all follow each others discoveries. Most importantly, I think we should stick to the same circuit until we all decide we want try something else. </p>

<h3>My plan...</h3>

<p>... is to start simple and slowly move forward. Ideally, I'd like to pick a circuit and build it. Then we can start making a model in the form of an Axoloti object/patch. With the right tools (oscilloscope, ears, circuit simulator, math, ...) we can compare the real thing to our model and slowly work towards a perfect model. If we succeed in one circuit we can pick the next, more complicated one. All of this will require patience and realistic goals.</p>

<p>Here's my roadmap, but this is more of a suggestion than a fixed schedule:</p>

<ol>
<li>Start with a simple circuit that involves only a minimal number of components, no feedback and preferrably only a single type of semiconductor. (My idea would be a simple diode saturation, but I'm open to anything)</li>
<li>Decide on a realization of this circuit and build a test rig that we can use to measure stuff about this circuit.</li>
<li>Create a specific object/patch to create test signals like certain oscillator shapes, impulses, sweeps, etc. We could use the community library or another github repo for this. That way, we all work with the same test signals and know that we're talking about the same thing.</li>
<li>Setup an Axoloti patch to feed the test signals to both our real circuit and our model. If we use the left audio output to feed our (real) test circuit, we can use the right output for our digital model. That way, we can directly compare the real thing with our model using all kinds of test equipment.</li>
<li>Create a first naive model by using simple math and circuit analysis. No worries about optimization at this point.</li>
<li>From there on it'll be about comparing our model to the real thing by firing all kinds of test signals at it. </li>
<li>If we succeed with our first simple model, I'd suggest we pick the next. I have some ideas about circuits to try.</li>
</ol>

<h3>My worries</h3>

<p>All of this may sound like a rigid plan, but to be honest, I'm not even sure if this is the right approach. What do you think? I'm open for any suggestions, so please: Go ahead and let me know what you think about this.</p>

<p>Does all of that sound interesting to you? Let's go!</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:5'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Modelling analog circuits in software'>
      <hr>
            <a href="https://sebiik.github.io/community.axoloti.com.backup/t/theslowgrowth-contributions/2959/28">TheSlowGrowth contributions</a>
            <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/TheSlowGrowth'><b itemprop='author'>TheSlowGrowth</b></a>
           
           <time datetime='2017-12-11T13:59:47Z' itemprop='datePublished'>
             2017-12-11 13:59:47 UTC
           </time>
        </span>
        <span itemprop='position'>#2</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>And to get things started, here is a suggestion for a first test circuit. The goal of this could be to find out what's important about a diode distortion. We could later on add a second diode antiparallel to the first to create the typical guitar distortion effect. For now, I think this will give a good starting point.<br>I guess we will need a high pass filter to compensate for the introduced DC offset with just one diode. Otherwise we may have trouble comparing this to our model.<br>(warning: I haven't yet built this so I don't know if the gain would be enough).</p>

<p><div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/ac72587fa93173671870b580e859b62212335002" href="//community.axoloti.com/uploads/default/original/2X/a/ac72587fa93173671870b580e859b62212335002.png" class="lightbox" title="Bildschirmfoto 2017-12-11 um 14.56.05.png"><img src="//community.axoloti.com/uploads/default/optimized/2X/a/ac72587fa93173671870b580e859b62212335002_1_690x233.png" width="690" height="233"><div class="meta">
<span class="filename">Bildschirmfoto 2017-12-11 um 14.56.05.png</span><span class="informations">1926x652 72.5 KB</span><span class="expand"></span>
</div></a></div></p>

<p>I'll build this tomorrow and see if it is a good idea, but until then it could serve as a little bait to get you interested <img src="//community.axoloti.com/images/emoji/twitter/wink.png?v=5" title=":wink:" class="emoji" alt=":wink:"></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:2'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Modelling analog circuits in software'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/Gavin'><b itemprop='author'>Gavin</b></a>
           
           <time datetime='2017-12-11T23:14:44Z' itemprop='datePublished'>
             2017-12-11 23:14:44 UTC
           </time>
        </span>
        <span itemprop='position'>#3</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p><a class="mention" href="/u/theslowgrowth">@TheSlowGrowth</a>, I like your idea, and would love to participate, but I'm not sure I have anything to offer, only basic circuit building experience, and the only DSP knowledge I have is almost nil, except what I have learnt on this forum. But the main reason why I am responding is your choice of first test circuit. "Distortion" From what I have been reading on the great wide web, is that this is a bit of a holy grail search to achieve a true distortion with DSP. Even without extensive knowledge, my attempt at distortion through my "Diode Clipping Simulator" object I posted on the community contributions. But as seams to be the case with most DSP distortion is its lack of random natural feel it has, somehow randomness need to be added to the surface of where the signal is clipped. But I also believe maybe the search for the holy grail needs to end, and in stead of trying to mimic, create something new based on what DSP can achieve that circuitry cannot. The same applies to "Boost" and "Overdrive", as these are part of the family that leads to distortion. This reply is not intended to be negative in any way, as I will watch your progress with great interest and desire to test, but maybe to not follow other DSP distortion attempts to re-create, but more like what is unique about the result. Boost, Overdrive and Distortion is just a topic I am very passionate about but also want to see attempts break down barriers rather then held back by borders.<br><img src="//community.axoloti.com/images/emoji/twitter/grin.png?v=5" title=":grin:" class="emoji" alt=":grin:"></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Modelling analog circuits in software'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/SmashedTransistors'><b itemprop='author'>SmashedTransistors</b></a>
           
           <time datetime='2017-12-11T23:40:36Z' itemprop='datePublished'>
             2017-12-11 23:40:36 UTC
           </time>
        </span>
        <span itemprop='position'>#4</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="1" data-topic="4013"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//community.axoloti.com/letter_avatar_proxy/v2/letter/t/90db22/40.png" class="avatar">TheSlowGrowth:</div>
<blockquote><p>I'm currently approaching my final thesis in electrical engineering at a university in Germany.</p></blockquote></aside>

<p>Maybe it is a good idea to study <strong>how</strong> an electronic modelling software works.<br>The best exemple is the ubiquitous Spice you may know and use in your studies<br><aside class="onebox wikipedia">
  <header class="source">
    <a href="https://en.wikipedia.org/wiki/SPICE" target="_blank" rel="nofollow noopener">en.wikipedia.org</a>
  </header>
  <article class="onebox-body">
    <img src="//upload.wikimedia.org/wikipedia/commons/thumb/8/8d/Nuvola_apps_ksim.png/28px-Nuvola_apps_ksim.png" class="thumbnail">

<h3><a href="https://en.wikipedia.org/wiki/SPICE" target="_blank" rel="nofollow noopener">SPICE</a></h3>

<p>SPICE (Simulation Program with Integrated Circuit Emphasis) is a general-purpose, open source analog electronic circuit simulator. It is a program used in integrated circuit and board-level design to check the integrity of circuit designs and to predict circuit behavior.   Unlike board-level designs composed of discrete parts, it is not practical to breadboard integrated circuits before manufacture. Further, the high costs of photolithographic masks and other manufacturing prerequisites make it e...</p>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
 </p>

<p>That is written in C and open source. <br>And you can find many tutorials about it. </p>

<p><aside class="onebox pdf">
  <header class="source">
    <a href="https://www3.imperial.ac.uk/pls/portallive/docs/1/7292571.PDF" target="_blank" rel="nofollow noopener">www3.imperial.ac.uk</a>
  </header>
  <article class="onebox-body">
    <a href="https://www3.imperial.ac.uk/pls/portallive/docs/1/7292571.PDF" target="_blank" rel="nofollow noopener"><span class="pdf-onebox-logo"></span></a>
<h3><a href="https://www3.imperial.ac.uk/pls/portallive/docs/1/7292571.PDF" target="_blank" rel="nofollow noopener">7292571.PDF</a></h3>

<p class="filesize">0 B</p>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
<br><a href="http://emcs.org/acstrial/newsletters/summer09/HowSpiceWorks.pdf" class="onebox" target="_blank">http://emcs.org/acstrial/newsletters/summer09/HowSpiceWorks.pdf</a></p>

<p>Personally, i think that many analog cicuits, and especially stompboxes, are particular because buffering is not very high impedance and not linear (NPN common emitter buffers), the different stages are more <em>coupled</em> than <em>chained</em>, this causes many implicit feedback loops... these feedback loops are source of chaotic behaviours that can be the kind of behaviour mentioned by <a class="mention" href="/u/gavin">@Gavin</a> ...</p>

<p>One critical issue with distortion in the digital/sampled domain is aliasing.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Modelling analog circuits in software'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/TheSlowGrowth'><b itemprop='author'>TheSlowGrowth</b></a>
           
           <time datetime='2017-12-12T14:09:39Z' itemprop='datePublished'>
             2017-12-12 14:09:39 UTC
           </time>
        </span>
        <span itemprop='position'>#5</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Okay. So I went ahead and built this small setup.<div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/dafc5a480108316b706f0bdaf8d9ae373e536daf" href="//community.axoloti.com/uploads/default/original/2X/d/dafc5a480108316b706f0bdaf8d9ae373e536daf.jpg" class="lightbox" title="photo.jpg"><img src="//community.axoloti.com/uploads/default/optimized/2X/d/dafc5a480108316b706f0bdaf8d9ae373e536daf_1_690x388.jpg" width="690" height="388"><div class="meta">
<span class="filename">photo.jpg</span><span class="informations">1280x720 135 KB</span><span class="expand"></span>
</div></a></div><br>The audio from Axoloti comes in with the orange cable on the left. My soundcard/headphones are connected to the black cable on the right. Power comes from a eurorack case via the ribbon cable. There are some ground hooks for probes and two 3.5mm jacks for connecting a scope (I had the 3.5mm=&gt;BNC cables already and found this less fiddly than standard oscilloscope probes. For audio signal it doesnt make much of a difference anyway)<br>It is the circuit posted above. Only difference: There is no high pass filter cap and the diode is pointing from ground upwards to the opamp output (due to the inverted signal, this gives me clipping on the positive side of the waveform).</p>

<p>I used this Axoloti patch to send various waveforms to the circuit:<br><a class="attachment" href="//community.axoloti.com/uploads/default/original/2X/a/aca0c43b3bae86aac2f884312ddf8c6b0e1f5aa5.axp">testsignals.axp</a> (28.7 KB)<br>You can select between Sin/Tri/Saw/Sqr oscillators (both antialiased and not), repeating clicks/pulses, a drum pattern, a synth line and white noise. I'm not sure yet which of these will prove helpful, but it's a start.</p>

<p>I then observed the waveforms on the scope. Here is a zip file with all my measurements: <a class="attachment" href="//community.axoloti.com/uploads/default/original/2X/e/ee0d238b678a0019b432d7de3e84751a618ee568.axp">Measurements.zip.axp</a> (1.5 MB - remove the *.axp file extension. I had to rename it to upload)</p>

<p><strong>The measurements I did (+ a few example pics, the rest is in the zip file):</strong><br>Spectrum of the sine wave I feed into the circuit as well as the spectrum of the distorted waveform with the master volume int he patch set to 32, 45, 55. Here's the distorted version with the level set to 55:<br><div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/a33d60ee3fcdbf5a06c65204c5a378a106ef44f0" href="//community.axoloti.com/uploads/default/original/2X/a/a33d60ee3fcdbf5a06c65204c5a378a106ef44f0.png" class="lightbox" title="Spectrum_Dist55_sin.png"><img src="//community.axoloti.com/uploads/default/optimized/2X/a/a33d60ee3fcdbf5a06c65204c5a378a106ef44f0_1_690x414.png" width="690" height="414"><div class="meta">
<span class="filename">Spectrum_Dist55_sin.png</span><span class="informations">800x480 84.7 KB</span><span class="expand"></span>
</div></a></div></p>

<p>Sin and Saw waveforms with the pitch control set to -38 and +16. Recorded at various levels of dirstorion (32, 40, 45, 50, 55, 64). Here's a saw wave, pitch=-38, level=50:<div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/e8518c3af12789624aec1e11c6d4c092688281d6" href="//community.axoloti.com/uploads/default/original/2X/e/e8518c3af12789624aec1e11c6d4c092688281d6.png" class="lightbox" title="-38_50_saw.png"><img src="//community.axoloti.com/uploads/default/optimized/2X/e/e8518c3af12789624aec1e11c6d4c092688281d6_1_690x414.png" width="690" height="414"><div class="meta">
<span class="filename">-38_50_saw.png</span><span class="informations">800x480 42.7 KB</span><span class="expand"></span>
</div></a></div><br>And the same waveform recorded with the pitch set to +16: <div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/d37b4eb1de5f97bc1788d0a27bcdc49a6ca4be45" href="//community.axoloti.com/uploads/default/original/2X/d/d37b4eb1de5f97bc1788d0a27bcdc49a6ca4be45.png" class="lightbox" title=" 16_50_saw.png"><img src="//community.axoloti.com/uploads/default/optimized/2X/d/d37b4eb1de5f97bc1788d0a27bcdc49a6ca4be45_1_690x414.png" width="690" height="414"><div class="meta">
<span class="filename"> 16_50_saw.png</span><span class="informations">800x480 50.4 KB</span><span class="expand"></span>
</div></a></div></p>

<p>Also I recorded some shots of the Drumbeat. Here's a closeup of the noise portion of a snare hit:<div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/c72939a6dd09d0a42ffa6e683fb39d986260215e" href="//community.axoloti.com/uploads/default/original/2X/c/c72939a6dd09d0a42ffa6e683fb39d986260215e.png" class="lightbox" title="Drums_55_SD_Zoomed2.png"><img src="//community.axoloti.com/uploads/default/optimized/2X/c/c72939a6dd09d0a42ffa6e683fb39d986260215e_1_690x414.png" width="690" height="414"><div class="meta">
<span class="filename">Drums_55_SD_Zoomed2.png</span><span class="informations">800x480 36.9 KB</span><span class="expand"></span>
</div></a></div></p>

<p>Seems to me like this could be nicely recreated with just waveshaping. I was expecting to see some diode recovery effects on higher frequency signals, but apparently we're not yet high enough to <strong>see</strong> anything.</p>

<p>Here's a recording of the drumloop. First the source signal, then the distorted signal at levels of 32, 45 and 55 (all normalized so we can hear the effect of the distortion, not just the difference in volume):<a class="attachment" href="//community.axoloti.com/uploads/default/original/2X/0/0da4557ce55c8b6e5cf34161a1a1eef566fa3db0.axp">Drums_src_32_45_55.flac.axp</a> (1.7 MB - again, remove the *.axp file extension)</p>

<p>So, that's all I can do for today, but I'll start creating a simple model later.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Modelling analog circuits in software'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/TheSlowGrowth'><b itemprop='author'>TheSlowGrowth</b></a>
           
           <time datetime='2017-12-13T20:09:35Z' itemprop='datePublished'>
             2017-12-13 20:09:35 UTC
           </time>
        </span>
        <span itemprop='position'>#6</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Okay, so here's how far I got today.<br>I wrote down the simple equation that describes the circuit in this picture:<img src="//community.axoloti.com/uploads/default/original/2X/f/fcc033325b671fd7559653096a2bc328cb576673.png" width="602" height="173"><br>If you sum up all currents flowing out of the node connecting R, Ri and D, you get:</p>

<pre><code>0 = -(10*Uin - Ud)/R + I0*(exp(A*Ud) - 1) + Ud/Ri</code></pre>

<p>where <code>Ud</code> is the voltage between the node and GND, <code>I0 = 50.36µA</code> and <code>A = 7.48336 1/V</code> (which I calculated from two points in the U/I plot in the 1N4148 datasheet).</p>

<p>I took the opportunity to finally learn some python (which I wanted to do for a long time). Here's a script that numerically solves that equation for all input voltages between 0-1V and creates the sourcecode for a lookup table to be used in C source code (this could be the start for a actual implementation). Also the script prints a saw and sine waveform together with their distorted signals, which are computed using the lookup table.<br><a class="attachment" href="//community.axoloti.com/uploads/default/original/2X/0/00e9a365d2e5849f763b3f46a55c6dfbe1d62c6b.axp">Approximation.py.axp</a> (3.2 KB - please remove *.axp file ending) <br>Please bear with me, it's my first ever python code. Frankly, I was quite surprised how quickly I had put this together.</p>

<p>Here's the numerical solution of the above equation:<br><div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/66f2b15894d08467ee5d95ca0ddd34a0b725bba3" href="//community.axoloti.com/uploads/default/original/2X/6/66f2b15894d08467ee5d95ca0ddd34a0b725bba3.png" class="lightbox" title="Uout_vs_Uin.png"><img src="//community.axoloti.com/uploads/default/optimized/2X/6/66f2b15894d08467ee5d95ca0ddd34a0b725bba3_1_666x500.png" width="666" height="500"><div class="meta">
<span class="filename">Uout_vs_Uin.png</span><span class="informations">1280x960 33.4 KB</span><span class="expand"></span>
</div></a></div><br>Here's a saw wave and its distorted counterpart, as computed from the equation. This plot is formatted so it can be easily compared to the scope shot from my last post. As you can see its not yet looking anything like the real scope shot, so I guess there's something wrong with my formula so far.<div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/63e2a16e205277267f2fcfbf15684a4b23dcfd7e" href="//community.axoloti.com/uploads/default/original/2X/6/63e2a16e205277267f2fcfbf15684a4b23dcfd7e.png" class="lightbox" title="model_distorted_saw.png"><img src="//community.axoloti.com/uploads/default/optimized/2X/6/63e2a16e205277267f2fcfbf15684a4b23dcfd7e_1_666x500.png" width="666" height="500"><div class="meta">
<span class="filename">model_distorted_saw.png</span><span class="informations">1280x960 46.1 KB</span><span class="expand"></span>
</div></a></div><br>I'm currently trying to figure out why it doesn't show the same image. To me it looks like the diode curve is not quite steep enough, so maybe I picked the wrong values for I0 and A.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:2'>
      <meta itemprop='headline' content='Modelling analog circuits in software'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/TheSlowGrowth'><b itemprop='author'>TheSlowGrowth</b></a>
           
           <time datetime='2017-12-13T21:29:51Z' itemprop='datePublished'>
             2017-12-13 21:29:51 UTC
           </time>
        </span>
        <span itemprop='position'>#7</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Okay, I fixed the issue. Turns out, I had wrong values for <code>I0</code> and <code>A</code>. I was basically taking wrong readings from the chart in the datasheet.<br>Now, with the values corrected, this is the new plot:<div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/aa1b949a043c208cecbb92e2f1c33d90a6516922" href="//community.axoloti.com/uploads/default/original/2X/a/aa1b949a043c208cecbb92e2f1c33d90a6516922.png" class="lightbox" title="model_distorted_saw_fixed.png"><img src="//community.axoloti.com/uploads/default/optimized/2X/a/aa1b949a043c208cecbb92e2f1c33d90a6516922_1_666x500.png" width="666" height="500"><div class="meta">
<span class="filename">model_distorted_saw_fixed.png</span><span class="informations">1280x960 45.6 KB</span><span class="expand"></span>
</div></a></div><br>which looks fairly similar to the real scope shot.</p>

<p>I added the second diode antiparallel to the first to make the distortion circuit complete. In the model, simply only one diode is conductive at a time, which is a good approximation, given that the reverse current in these diodes is so incredibly small.</p>

<p>I then copied the lookup table that was generated by the script into a new axoloti object and added the code that does the interpolation. Right now, it converts to float and does everything super unoptimized. That's why it consumes around 10% CPU (for a simple lookup table read, lol!)<br>Anyway, here's the object for you to play with:<br><a class="attachment" href="//community.axoloti.com/uploads/default/original/2X/d/d9caa4b219c1c7955568d7e6477ce23adeabb506.axo">diodeDist.axo</a> (3.2 KB)</p>

<p>Here is a audio demo comparing the real distorted drums to the model (real first, model second):<br><a class="attachment" href="//community.axoloti.com/uploads/default/original/2X/6/65392b0933ed79c9bfef2fe3adb49b0c069bbb70.axp">real_vs_model.flac.axp</a> (443.2 KB - please remove *.axp file extension)<br>I can barely hear a difference. To my ears, the model lacks a little bit of top end, but that could just be a subjective thing. I'd say, it's close enough - probably not worth adding any additional stuff to this model, it would only make the computation more CPU intensive.<br>On the oscilloscope, the real signal and the model look identical now.</p>

<p>Funny, that was way simpler than I had expected.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Modelling analog circuits in software'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/TheSlowGrowth'><b itemprop='author'>TheSlowGrowth</b></a>
           
           <time datetime='2017-12-14T00:08:37Z' itemprop='datePublished'>
             2017-12-14 00:08:37 UTC
           </time>
        </span>
        <span itemprop='position'>#8</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>The optimized (still beta) version can now be found in the community library. <code>TSG/dist/diodeDist.axo</code><br>It consumes roughly 6% CPU (still too much if you ask me)</p>

<p>One thing that I found difficult is getting rid of noise introduced by the lookup table. For medium distortion settings and a table size of 256, only the lowest 4 values were actually used! The introduced noise was clearly audible. I tweaked the values a little bit and reduced the maximum available distortion level. Also I increased the size of the table to 1024 values. Now the noise is not audible anymore. Still, it's kind of silly to have a large lookup table, when most of the time you only really use the lowest quarter of it. It would actually be better, if there were more values in the lower ranges and fewer in the higher ranges (were the distortion will mask away any noise that may be introduced by reading from the table).</p>

<p>I'm thinking, a way out of this may be to have multiple, smaller lookup tables for different regions of the curve instead of one single table for the whole curve. I could then dynamically switch between the different tables, depending on where on the curve my input value is. Let's say I originally had a table with 1024 values for the whole input range of -1&lt;28 to 1&gt;&gt;28. That would mean, each value in the table spans over 1&lt;&lt;18 steps of the input.<br>I could instead have one table of size 512 for the whole range (step size would be 1&lt;&lt;19) and an additional table of size 512 for the range of -1&lt;&lt;22 to 1&lt;&lt;22 (stepsize would be 1&lt;&lt;13). That would be the same memory footprint, but orders of magnitude better resolution in the critical low ranges of the waveform.<br>The processing would be only marginally more complicated:</p>

<pre><code>if (input &lt; (1&lt;&lt;22))
{
    // read from small table
}
else
{
    // read from big table
}</code></pre>

<p>So that would be an additional shift, subtract and conditional jump operation - that's only very little increase. I'll try this tomorrow and see if the noise can be reduced further.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Modelling analog circuits in software'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/Ott'><b itemprop='author'>Ott</b></a>
           
           <time datetime='2017-12-14T03:29:16Z' itemprop='datePublished'>
             2017-12-14 03:29:16 UTC
           </time>
        </span>
        <span itemprop='position'>#9</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>You could simply have your table be in log scale, although I'm not sure how much CPU that would end up costing.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Modelling analog circuits in software'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/TheSlowGrowth'><b itemprop='author'>TheSlowGrowth</b></a>
           
           <time datetime='2017-12-14T06:07:52Z' itemprop='datePublished'>
             2017-12-14 06:07:52 UTC
           </time>
        </span>
        <span itemprop='position'>#10</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="9" data-topic="4013"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//community.axoloti.com/user_avatar/community.axoloti.com/ott/40/4529_1.png" class="avatar">Ott:</div>
<blockquote><p>[...] have your table be in log scale, [...]</p></blockquote></aside>

<p>Yes, but scaling the read index and the fractional would be way too complicated and cost a lot of CPU.</p>

<p>It dawned on me, that lookup tables are not ideal for this application.</p>

<ul>
<li>Not the exact shape of the curve is important (some deviation there wouldn't be problematic) but how smooth the interpolated waveform would be (first order deviation must be continuous)</li>
<li>The curve itself is very smooth - a low order polynomial would already be sufficient to approximate the curve well enough.</li>
</ul>

<p>From there on, its simply a matter of fitting a polynomial into the desired curve. The only important thing is that this polynomial would have to be symmetrical to the origin.<br>After I realizes that, it dawned on me that this pretty much directly leads to the typical curve found in the <code>dist/soft</code> object in the factory library, which implements this function: <code>y=1.5*x-0.5*x^3 for -1&lt;x&lt;1, y=-1 for x&lt;-1, y=1 for x&gt;1</code><br><img src="//community.axoloti.com/uploads/default/original/2X/5/590efa162064614ed597aad70bc860f0431facb5.jpg" width="658" height="406"></p>

<p>So - yea - unless I wanted to specifically model the 1N4148 circuit I have here on the breadboard, I could just stop here because I would basically recreate something that exists already.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Modelling analog circuits in software'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/Sputnki'><b itemprop='author'>Sputnki</b></a>
           
           <time datetime='2017-12-14T12:28:58Z' itemprop='datePublished'>
             2017-12-14 12:28:58 UTC
           </time>
        </span>
        <span itemprop='position'>#11</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>What if you fit the function with taylor expansions around several points and weigh the single contributions with a table?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Modelling analog circuits in software'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/TheSlowGrowth'><b itemprop='author'>TheSlowGrowth</b></a>
           
           <time datetime='2017-12-14T13:06:58Z' itemprop='datePublished'>
             2017-12-14 13:06:58 UTC
           </time>
        </span>
        <span itemprop='position'>#12</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="11" data-topic="4013" data-full="true"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//community.axoloti.com/user_avatar/community.axoloti.com/sputnki/40/175_1.png" class="avatar">Sputnki:</div>
<blockquote><p>What if you fit the function with taylor expansions around several points and weigh the single contributions with a table?</p></blockquote></aside>

<p>That is actually a very nice idea! I wonder how complicated this would get, computation wise. I spent half of this morning trying to fit some polynomials into my curve. I was able to get halfway decent results with 2nd-order polynomials, but only if I split the whole curve into 100 2nd order polynomial sections. The problem with this is that low order polynomials are easy to compute but you need many of them to get decent results. On the other hand you can also (sometimes) get good results with a few high order polynomials - which saves memory but requires many additional multiplications, making it a poor solution for low-powered processors like Axoloti. Right now with my 100 2nd order sections, I don't really save enough memory  to justify the increased processing effort.</p>

<p>Coming back to your idea with the weighted taylor sections: I think the same tradeoff applies here. If I use higher order taylor expansions for this, it will be too computationally expensive. If I use lower order taylor expansions, I need more of them, mitigating the benefits alltogether. I might, however get less noise compared to the linear interpolated lookup table.</p>

<p>PS: I also tried to use 5th order polynomials, which are constrained to three points of the curve and the steepness on the points where they touch each other. However, there's still a problem in my equations, I keep getting poorly conditioned equation systems that can't be solved.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:2'>
      <meta itemprop='headline' content='Modelling analog circuits in software'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/thetechnobear'><b itemprop='author'>thetechnobear</b></a>
           
           <time datetime='2017-12-14T14:55:16Z' itemprop='datePublished'>
             2017-12-14 14:55:16 UTC
           </time>
        </span>
        <span itemprop='position'>#13</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>could you possibly explain how you derived your equation in more detail?<br>It’s not something I’ve seen before, or perhaps reference something I could read up on.<br>Thanks</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Modelling analog circuits in software'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/TheSlowGrowth'><b itemprop='author'>TheSlowGrowth</b></a>
           
           <time datetime='2017-12-14T15:28:12Z' itemprop='datePublished'>
             2017-12-14 15:28:12 UTC
           </time>
        </span>
        <span itemprop='position'>#14</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="13" data-topic="4013"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//community.axoloti.com/user_avatar/community.axoloti.com/thetechnobear/40/6_1.png" class="avatar">thetechnobear:</div>
<blockquote><p>explain how you derived your equation</p></blockquote></aside>

<p>A few posts back I wrote the equation and also posted an image of the circuit I used to model this.<br>As you can see, I assumed the operational amplifiers as "perfect amplifiers", so they appear only as abstract amplification blocks, except for the second amplifier, which has a finite input impedance of 47k, which i modeled with resistor Ri.</p>

<p>Now we need the basic equations of each components.<br>For the resistor, the current/voltage relationship is defined by Ohm's law: <code>R = Ur/Ir</code>. For the 1k resistor: <code>Ur=10*Uin - Ud</code> (<code>Ud</code> is the voltage at the node connecting the diode and the resistor relative to ground.) So that gives: <code>Ir = (10*Uin - Ud)/R</code>. For the 47k resistor that models the imput impedance of the following amplifier stage: <code>Ur = Ud</code>, so that gives: <code>Iri = Ud/Ri</code><br>For the Diode, the relationship is <code>Id = I0 * (exp(A*Ud) - 1)</code>, where <code>A</code> and <code>I0</code> are constants that I read from the datasheet. This is the very basic diode equation you will find in every textbook or on every website. Except that I concentrated three values into one constant, <code>A = q/nkT</code> - I don't need to know them all individually.</p>

<p>From  there on it's Kirchhoffs law: All currents flowing into a node have to cancel each other out. That leads directly to the equation posted above.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Modelling analog circuits in software'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/thetechnobear'><b itemprop='author'>thetechnobear</b></a>
           
           <time datetime='2017-12-14T16:15:23Z' itemprop='datePublished'>
             2017-12-14 16:15:23 UTC
           </time>
        </span>
        <span itemprop='position'>#15</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>thanks for that, will delve into this with a cup of strong black coffee <img src="//community.axoloti.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Modelling analog circuits in software'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/SmashedTransistors'><b itemprop='author'>SmashedTransistors</b></a>
           
           <time datetime='2017-12-14T20:18:49Z' itemprop='datePublished'>
             2017-12-14 20:18:49 UTC
           </time>
        </span>
        <span itemprop='position'>#16</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="12" data-topic="4013"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//community.axoloti.com/letter_avatar_proxy/v2/letter/t/90db22/40.png" class="avatar">TheSlowGrowth:</div>
<blockquote><p>However, there's still a problem in my equations, I keep getting poorly conditioned equation systems that can't be solved.</p></blockquote></aside>

<p>Maybe, you can have a look at Chebychev polynomials approximation. These approximate a function over a segment rather than around a single point.</p>

<p><a href="https://www.embeddedrelated.com/showarticle/152.php" class="onebox" target="_blank">https://www.embeddedrelated.com/showarticle/152.php</a></p>

<aside class="onebox pdf">
  <header class="source">
    <a href="https://www.aip.de/groups/soe/local/numres/bookcpdf/c5-8.pdf" target="_blank" rel="nofollow noopener">aip.de</a>
  </header>
  <article class="onebox-body">
    <a href="https://www.aip.de/groups/soe/local/numres/bookcpdf/c5-8.pdf" target="_blank" rel="nofollow noopener"><span class="pdf-onebox-logo"></span></a>
<h3><a href="https://www.aip.de/groups/soe/local/numres/bookcpdf/c5-8.pdf" target="_blank" rel="nofollow noopener">c5-8.pdf</a></h3>

<p class="filesize">0 B</p>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Modelling analog circuits in software'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/TheSlowGrowth'><b itemprop='author'>TheSlowGrowth</b></a>
           
           <time datetime='2017-12-14T21:04:20Z' itemprop='datePublished'>
             2017-12-14 21:04:20 UTC
           </time>
        </span>
        <span itemprop='position'>#17</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Oh wow, that was a great read. So much valuable information! I'll dive into this a little further. If you have any other links on this topic, don't hold back!</p>

<p>PS: It seems the second link is unfortunately not available anymore.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Modelling analog circuits in software'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/SmashedTransistors'><b itemprop='author'>SmashedTransistors</b></a>
           
           <time datetime='2017-12-14T21:31:51Z' itemprop='datePublished'>
             2017-12-14 21:31:51 UTC
           </time>
        </span>
        <span itemprop='position'>#18</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Here is another like for the numerical recipes chapter:<br><aside class="onebox pdf">
  <header class="source">
    <a href="https://cpp.in.ua/nrc/c5-8.pdf" target="_blank" rel="nofollow noopener">cpp.in.ua</a>
  </header>
  <article class="onebox-body">
    <a href="https://cpp.in.ua/nrc/c5-8.pdf" target="_blank" rel="nofollow noopener"><span class="pdf-onebox-logo"></span></a>
<h3><a href="https://cpp.in.ua/nrc/c5-8.pdf" target="_blank" rel="nofollow noopener">c5-8.pdf</a></h3>

<p class="filesize">153.85 KB</p>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
</p>

<aside class="onebox pdf">
  <header class="source">
    <a href="https://www.fizyka.umk.pl/~jacek/docs/nrc/c5-9.pdf" target="_blank" rel="nofollow noopener">fizyka.umk.pl</a>
  </header>
  <article class="onebox-body">
    <a href="https://www.fizyka.umk.pl/~jacek/docs/nrc/c5-9.pdf" target="_blank" rel="nofollow noopener"><span class="pdf-onebox-logo"></span></a>
<h3><a href="https://www.fizyka.umk.pl/~jacek/docs/nrc/c5-9.pdf" target="_blank" rel="nofollow noopener">c5-9.pdf</a></h3>

<p class="filesize">226.69 KB</p>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>


<aside class="onebox pdf">
  <header class="source">
    <a href="https://www.fizyka.umk.pl/~jacek/docs/nrc/c5-10.pdf" target="_blank" rel="nofollow noopener">fizyka.umk.pl</a>
  </header>
  <article class="onebox-body">
    <a href="https://www.fizyka.umk.pl/~jacek/docs/nrc/c5-10.pdf" target="_blank" rel="nofollow noopener"><span class="pdf-onebox-logo"></span></a>
<h3><a href="https://www.fizyka.umk.pl/~jacek/docs/nrc/c5-10.pdf" target="_blank" rel="nofollow noopener">c5-10.pdf</a></h3>

<p class="filesize">171.89 KB</p>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>


<p>You can also have a look at Padé approximates, but those need division.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Modelling analog circuits in software'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/TheSlowGrowth'><b itemprop='author'>TheSlowGrowth</b></a>
           
           <time datetime='2017-12-15T09:09:05Z' itemprop='datePublished'>
             2017-12-15 09:09:05 UTC
           </time>
        </span>
        <span itemprop='position'>#19</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Yesterday I talked to a friend about my efforts in understand analog modelling. <a href="https://www.youtube.com/watch?v=oIChUOV_0w4" rel="nofollow noopener">He recommended me to this talk.</a> I just watched it and its a wealth of precious information for a beginner like me, and I'm sure everyone here can find some nice inspiration in this - not only for modelling circuits, but also for some general creative patching ideas.</p>

<p>Feedback loops will occur pretty much anywhere, even the circuit I worked on here has feedback, which you can directly see from the form of the equation - it is implicit! To deal with these equations, he suggests to use the Newton Raphson algorithm. I knew about this and the numerical solver in python probably uses this algorithm or something similar. But hadn't thought about using it in real time, because it is very CPU hungry and depending on your exit condition for the algorithm, it can also take different number of iterations to get to a desired result, or not get any result at all - which is something very undesireable in a DSP environment. <br>One interesting note here is that he suggests to use lookup tables to do the first iterations of the Newton Raphson algorithm, speeding things up immensly. This is something I hadn't yet though of. You don't even need a lot of precision in these tables and you could probably get along just fine with uninterpolated tables - if you use them for the first few iterations of the algorithm, that will get you close to the solution of the implicit equation. You can then refine the result further by doing the last few iterations with the real, CPU hungry equation.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Modelling analog circuits in software'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/Sputnki'><b itemprop='author'>Sputnki</b></a>
           
           <time datetime='2017-12-15T11:58:45Z' itemprop='datePublished'>
             2017-12-15 11:58:45 UTC
           </time>
        </span>
        <span itemprop='position'>#20</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Ok, maybe taylor approximation is not the correct solution. What if instead you do this?</p>

<p>1) the function is antisymmetric, so you don't actually have to fit the whole curve<br>2) divide the interval in which you want to fit the function in n+1 sections (better if equally spaced).<br>for each section Si (from x[i] to x[i+1]) you could define a II order polynomial like:</p>

<p></p><pre><code class="lang-auto"> 
a[i] + b[i]*x + c[i]*x^2</code></pre>

<p>This gives you a total of 3*(n+1) coefficients to determine.<br>3) for the sections S[0], .. , S[n-1] you can define two congruency equations:<br></p>

<p></p><pre><code class="lang-auto">a[i]+b[i]*x[i+1] + c[i]*x[i+1]^2 = a[i+1]+b[i+1]*x[i+1] + c[i+1]*x[i+1]^2 (continuity)
b[i] + 2*c[i]*x[i+1] = b[i+1] + 2*c[i+1]*x[i+1] (continuity of the first derivative)</code></pre>

<p>that make up for 2*n constraint equations.<br>4) You can already say that a[0] = 0 (this makes for another constraint equation)<br>5) The number of degrees of freedom if 3*(n+1) - (2*n+1) = n+2 </p>

<p>Your objective is that to minimize the distance between the sampled function and the polynomial approximation, so that sum(j) (f(x[j])-p(x[j]))^2 -----&gt;0</p>

<p>It's a constrained minimization problem, that you can solve numerically (octave, matlab) by the method of lagrange multipliers.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Modelling analog circuits in software'>
      <hr>
  </div>

  <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement'>
      <span itemprop='url'><b><a rel="next" itemprop="name" href="/t/modelling-analog-circuits-in-software/4013?page=2">next page →</a></b></span>
  </div>





        <!-- :preload-content -->
        <footer>
          <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
            <a href='/'>Home</a>
            <a href="/categories">Categories</a>
            <a href="/guidelines">FAQ/Guidelines</a>
            <a href="/tos">Terms of Service</a>
            <a href="/privacy">Privacy Policy</a>
          </nav>
        </footer>
      </div>

      <footer id='noscript-footer'>
        <p>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
      </footer>
    </noscript>

      

    <section id='main'>
    </section>

    <div id='offscreen-content'>
    </div>

      <form id='hidden-login-form' method="post" action="/login" style="display: none;">
        <input name="username" type="text"     id="signin_username">
        <input name="password" type="password" id="signin_password">
        <input name="redirect" type="hidden">
        <input type="submit" id="signin-button" value="Log In">
      </form>

      <script>
      (function() {
        var ps = require('preload-store').default;
          ps.store("site", {"default_archetype":"regular","notification_types":{"mentioned":1,"replied":2,"quoted":3,"edited":4,"liked":5,"private_message":6,"invited_to_private_message":7,"invitee_accepted":8,"posted":9,"moved_post":10,"linked":11,"granted_badge":12,"invited_to_topic":13,"custom":14,"group_mentioned":15,"group_message_summary":16,"watching_first_post":17,"topic_reminder":18},"post_types":{"regular":1,"moderator_action":2,"small_action":3,"whisper":4},"groups":[{"id":1,"name":"admins"},{"id":0,"name":"everyone"},{"id":2,"name":"moderators"},{"id":3,"name":"staff"},{"id":10,"name":"trust_level_0"},{"id":11,"name":"trust_level_1"},{"id":12,"name":"trust_level_2"},{"id":13,"name":"trust_level_3"},{"id":14,"name":"trust_level_4"}],"filters":["latest","unread","new","read","posted","bookmarks"],"periods":["all","yearly","quarterly","monthly","weekly","daily"],"top_menu_items":["latest","unread","new","read","posted","bookmarks","category","categories","top"],"anonymous_top_menu_items":["latest","top","categories","category","categories","top"],"uncategorized_category_id":1,"is_readonly":false,"disabled_plugins":[],"user_field_max_length":2048,"suppressed_from_homepage_category_ids":[],"post_action_types":[{"name_key":"bookmark","name":"Bookmark","description":"Bookmark this post","short_description":"Bookmark this post","long_form":"bookmarked this post","is_flag":false,"icon":null,"id":1,"is_custom_flag":false},{"name_key":"like","name":"Like","description":"Like this post","short_description":"Like this post","long_form":"liked this","is_flag":false,"icon":"heart","id":2,"is_custom_flag":false},{"name_key":"off_topic","name":"Off-Topic","description":"This post is not relevant to the current discussion as defined by the title and first post, and should probably be moved elsewhere.","short_description":"Not relevant to the discussion","long_form":"flagged this as off-topic","is_flag":true,"icon":null,"id":3,"is_custom_flag":false},{"name_key":"inappropriate","name":"Inappropriate","description":"This post contains content that a reasonable person would consider offensive, abusive, or a violation of \u003ca href=\"/guidelines\"\u003eour community guidelines\u003c/a\u003e.","short_description":"A violation of \u003ca href=\"/guidelines\"\u003eour community guidelines\u003c/a\u003e","long_form":"flagged this as inappropriate","is_flag":true,"icon":null,"id":4,"is_custom_flag":false},{"name_key":"vote","name":"Vote","description":"Vote for this post","short_description":"Vote for this post","long_form":"voted for this post","is_flag":false,"icon":null,"id":5,"is_custom_flag":false},{"name_key":"spam","name":"Spam","description":"This post is an advertisement, or vandalism. It is not useful or relevant to the current topic.","short_description":"This is an advertisement or vandalism","long_form":"flagged this as spam","is_flag":true,"icon":null,"id":8,"is_custom_flag":false},{"name_key":"notify_user","name":"Send @{{username}} a message","description":"I want to talk to this person directly and privately about their post.","short_description":"I want to talk to this person directly and privately about their post.","long_form":"messaged user","is_flag":true,"icon":null,"id":6,"is_custom_flag":true},{"name_key":"notify_moderators","name":"Something Else","description":"This post requires staff attention for another reason not listed above.","short_description":"Requires staff attention for another reason","long_form":"flagged this for staff attention","is_flag":true,"icon":null,"id":7,"is_custom_flag":true}],"topic_flag_types":[{"name_key":"inappropriate","name":"Inappropriate","description":"This topic contains content that a reasonable person would consider offensive, abusive, or a violation of \u003ca href=\"/guidelines\"\u003eour community guidelines\u003c/a\u003e.","short_description":"translation missing: en.topic_flag_types.inappropriate.short_description","long_form":"flagged this as inappropriate","is_flag":true,"icon":null,"id":4,"is_custom_flag":false},{"name_key":"spam","name":"Spam","description":"This topic is an advertisement. It is not useful or relevant to this site, but promotional in nature.","short_description":"translation missing: en.topic_flag_types.spam.short_description","long_form":"flagged this as spam","is_flag":true,"icon":null,"id":8,"is_custom_flag":false},{"name_key":"notify_moderators","name":"Something Else","description":"This topic requires general staff attention based on the \u003ca href=\"/guidelines\"\u003eguidelines\u003c/a\u003e, \u003ca href=\"/tos\"\u003eTOS\u003c/a\u003e, or for another reason not listed above.","short_description":"translation missing: en.topic_flag_types.notify_moderators.short_description","long_form":"flagged this for moderator attention","is_flag":true,"icon":null,"id":7,"is_custom_flag":true}],"can_create_tag":null,"can_tag_topics":null,"tags_filter_regexp":"[/\\?#\\[\\]@!\\$\u0026'\\(\\)\\*\\+,;=\\.%\\\\`^\\s|\\{\\}\"\u003c\u003e]+","top_tags":["midi","controllers","modular","linux","1.0.11","macos","windows","troubleshooting","usb","wavetable","challenge","library","14bit","tips","out","current"],"topic_featured_link_allowed_category_ids":[4,1,12,15,5,2,6,10,16,14,8,9,3,7,13,11],"user_themes":[{"theme_key":"b5ce34aa-3ee1-4d3e-b190-0a2ab62c7408","name":"Migrated from Site Text","default":true}],"categories":[{"id":1,"name":"Uncategorized","color":"AB9364","text_color":"FFFFFF","slug":"uncategorized","topic_count":-1,"post_count":1,"position":0,"description":"Topics that don't need a category, or don't fit into any other existing category.","description_text":"","topic_url":"/t/","read_restricted":false,"permission":null,"notification_level":1,"topic_template":null,"has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":10,"name":"User Guide","color":"3AB54A","text_color":"FFFFFF","slug":"user-guide","topic_count":24,"post_count":102,"position":1,"description":"This category contains posts to help users use Axoloti, a dynamic user guide.","description_text":"This category contains posts to help users use Axoloti, a dynamic user guide.","topic_url":"/t/about-the-user-guide-category/51","read_restricted":false,"permission":null,"notification_level":1,"topic_template":"","has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":8,"name":"Helpdesk","color":"9EB83B","text_color":"FFFFFF","slug":"helpdesk","topic_count":359,"post_count":2944,"position":2,"description":"This category is for reporting issues and bugs\u003cbr\u003ePlease use other categories for discussions on features or questions or \"how to?\"","description_text":"This category is for reporting issues and bugsPlease use other categories for discussions on features or questions or \"how to?\"","topic_url":"/t/about-the-helpdesk-category/23","read_restricted":false,"permission":null,"notification_level":1,"topic_template":"","has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":13,"name":"Community Library","color":"9EB83B","text_color":"FFFFFF","slug":"community-library","topic_count":54,"post_count":2845,"position":3,"description":"Category for the community library","description_text":"Category for the community library","topic_url":"/t/about-the-community-library-category/1005","read_restricted":false,"permission":null,"notification_level":1,"topic_template":"","has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":7,"name":"Patching","color":"AB9364","text_color":"FFFFFF","slug":"patching","topic_count":949,"post_count":7802,"position":4,"description":"This category is for discussion about patching Axoloti, and sharing patches.","description_text":"This category is for discussion about patching Axoloti, and sharing patches.","topic_url":"/t/about-the-patching-category/14","read_restricted":false,"permission":null,"notification_level":1,"topic_template":"","has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":5,"name":"Hardware","color":"AB9364","text_color":"FFFFFF","slug":"hardware","topic_count":624,"post_count":6868,"position":5,"description":"This category is intended for discussion about the Axoloti hardware and connecting to other hardware, including , connecting midi controllers and other hardware, related hardware projects. ","description_text":"This category is intended for discussion about the Axoloti hardware and connecting to other hardware, including , connecting midi controllers and other hardware, related hardware projects.","topic_url":"/t/about-the-hardware-category/12","read_restricted":false,"permission":null,"notification_level":1,"topic_template":null,"has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":6,"name":"Software","color":"AB9364","text_color":"FFFFFF","slug":"software","topic_count":322,"post_count":3281,"position":6,"description":"This category is for posts regarding the software of Axoloti, this includes the Axoloti patching GUI, Axoloti Objects (axo) and firmware. Please use the Patching category to discuss patching Axoloti. ","description_text":"This category is for posts regarding the software of Axoloti, this includes the Axoloti patching GUI, Axoloti Objects (axo) and firmware. Please use the Patching category to discuss patching Axoloti.","topic_url":"/t/about-the-software-category/13","read_restricted":false,"permission":null,"notification_level":1,"topic_template":null,"has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":16,"name":"AxoObject coding","color":"AB9364","text_color":"FFFFFF","slug":"axoobject-code","topic_count":256,"post_count":2112,"position":7,"description":"Category to discuss coding Axoloti Objects.","description_text":"Category to discuss coding Axoloti Objects.","topic_url":"/t/about-the-axoobject-coding-category/1519","read_restricted":false,"permission":null,"notification_level":1,"topic_template":null,"has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":14,"name":"News/Events","color":"283890","text_color":"FFFFFF","slug":"events","topic_count":30,"post_count":106,"position":8,"description":"Meetups, workshops, presentations, all sort of events.\u003cbr\u003eIt's perfectly fine for users to announce and discuss their own events, as long as it is related to Axoloti somehow.\u003cbr\u003eStart your topic title with the name of the area where your event will happen.","description_text":"Meetups, workshops, presentations, all sort of events.It's perfectly fine for users to announce and discuss their own events, as long as it is related to Axoloti somehow.Start your topic title with the name of the area where your event will happen.","topic_url":"/t/about-the-events-category/1142","read_restricted":false,"permission":null,"notification_level":1,"topic_template":"","has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":12,"name":"Challenges","color":"0E76BD","text_color":"FFFFFF","slug":"challenges","topic_count":19,"post_count":266,"position":9,"description":"This category is for challenges, competitions and discussions related to these.\u003cbr\u003eposters are reminded when entering challenges and competitions to not include any copyrighted material","description_text":"This category is for challenges, competitions and discussions related to these.posters are reminded when entering challenges and competitions to not include any copyrighted material","topic_url":"/t/about-the-challenges-category/838","read_restricted":false,"permission":null,"notification_level":1,"topic_template":"","has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":9,"name":"Your Music/Projects","color":"0E76BD","text_color":"FFFFFF","slug":"your-music-projects","topic_count":172,"post_count":1194,"position":10,"description":"Have some music that you have made with Axoloti? or an interesting project you would like to share the communities?\u003cbr\u003eTells us about it here.","description_text":"Have some music that you have made with Axoloti? or an interesting project you would like to share the communities?Tells us about it here.","topic_url":"/t/about-the-your-music-projects-category/25","read_restricted":false,"permission":null,"notification_level":1,"topic_template":"","has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":15,"name":"Lounge","color":"AB9364","text_color":"FFFFFF","slug":"lounge","topic_count":99,"post_count":1668,"position":11,"description":"This category is for discussions that are related to Axoloti generally but are not specifically about Axoloti.\u003cbr\u003e(please ensure it has some relevance to Axoloti, rather than general discussion) ","description_text":"This category is for discussions that are related to Axoloti generally but are not specifically about Axoloti.(please ensure it has some relevance to Axoloti, rather than general discussion)","topic_url":"/t/about-the-lounge-category/1277","read_restricted":false,"permission":null,"notification_level":1,"topic_template":null,"has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":11,"name":"Developer","color":"BF1E2E","text_color":"FFFFFF","slug":"developer","topic_count":64,"post_count":639,"position":12,"description":"This category is for discussion about the development of Axoloti at a low level, its intended only for developers/programmers.","description_text":"This category is for discussion about the development of Axoloti at a low level, its intended only for developers/programmers.","topic_url":"/t/about-the-developer-category/735","read_restricted":false,"permission":null,"notification_level":1,"topic_template":"This category is for low level discussion on the development of Axoloti, its is intended for developers/programmers only.","has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":3,"name":"Website and Forum","color":"808281","text_color":"FFFFFF","slug":"meta","topic_count":44,"post_count":406,"position":13,"description":"Discussion about this site, its organization, how it works, and how we can improve it.","description_text":"Discussion about this site, its organization, how it works, and how we can improve it.","topic_url":"/t/about-the-meta-category/2","read_restricted":false,"permission":null,"notification_level":1,"topic_template":"","has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null}],"trust_levels":[{"id":0,"name":"new user"},{"id":1,"name":"basic user"},{"id":2,"name":"member"},{"id":3,"name":"regular"},{"id":4,"name":"leader"}],"archetypes":[{"id":"regular","name":"Regular Topic","options":[]},{"id":"banner","name":"Banner Topic","options":[]}],"user_fields":[]});
          ps.store("siteSettings", {"title":"Axoloti Community","contact_email":"johannes.taelman@gmail.com","contact_url":"","logo_url":"/uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png","logo_small_url":"/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png","mobile_logo_url":"","favicon_url":"/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png","allow_user_locale":false,"suggested_topics":5,"track_external_right_clicks":false,"ga_universal_tracking_code":"UA-56017691-4","ga_universal_domain_name":"auto","ga_tracking_code":"","ga_domain_name":"","gtm_container_id":"","top_menu":"categories|latest|new|unread|top","post_menu":"like-count|like|share|flag|edit|bookmark|delete|admin|reply","post_menu_hidden_items":"flag|bookmark|edit|delete|admin","share_links":"twitter|facebook|email","desktop_category_page_style":"categories_and_latest_topics","category_colors":"BF1E2E|F1592A|F7941D|9EB83B|3AB54A|12A89D|25AAE2|0E76BD|652D90|92278F|ED207B|8C6238|231F20|808281|B3B5B4|283890","category_style":"bullet","enable_mobile_theme":true,"relative_date_duration":30,"fixed_category_positions":true,"fixed_category_positions_on_create":false,"enable_badges":true,"enable_badge_sql":false,"enable_whispers":false,"invite_only":false,"login_required":false,"must_approve_users":false,"enable_local_logins":true,"allow_new_registrations":true,"enable_signup_cta":true,"enable_google_oauth2_logins":false,"enable_yahoo_logins":false,"enable_twitter_logins":false,"enable_instagram_logins":false,"enable_facebook_logins":false,"enable_github_logins":false,"enable_sso":false,"sso_overrides_avatar":false,"min_username_length":3,"max_username_length":20,"min_password_length":10,"min_admin_password_length":15,"logout_redirect":"","full_name_required":false,"enable_names":true,"invites_per_page":40,"delete_user_max_post_age":60,"delete_all_posts_max":15,"show_email_on_profile":false,"prioritize_username_in_ux":true,"enable_user_directory":true,"allow_anonymous_posting":false,"anonymous_posting_min_trust_level":1,"hide_user_profiles_from_public":false,"enable_group_directory":true,"min_post_length":20,"min_first_post_length":20,"min_private_message_post_length":10,"max_post_length":32000,"topic_featured_link_enabled":true,"min_topic_title_length":15,"max_topic_title_length":255,"min_private_message_title_length":2,"allow_uncategorized_topics":false,"min_title_similar_length":10,"min_body_similar_length":15,"enable_private_messages":true,"edit_history_visible_to_public":false,"delete_removed_posts_after":24,"enable_experimental_markdown_it":false,"traditional_markdown_linebreaks":false,"enable_markdown_typographer":false,"allow_html_tables":false,"suppress_reply_directly_below":true,"suppress_reply_directly_above":true,"max_reply_history":1,"newuser_max_images":1,"newuser_max_attachments":2,"show_pinned_excerpt_mobile":true,"show_pinned_excerpt_desktop":true,"display_name_on_posts":false,"show_time_gap_days":7,"short_progress_text_threshold":10000,"default_code_lang":"auto","autohighlight_all_code":false,"highlighted_languages":"apache|bash|cs|cpp|css|coffeescript|diff|xml|http|ini|json|java|javascript|makefile|markdown|nginx|objectivec|ruby|perl|php|python|sql|handlebars","censored_words":"","censored_pattern":"","enable_emoji":true,"emoji_set":"twitter","code_formatting_style":"4-spaces-indent","allowed_href_schemes":"","email_time_window_mins":10,"disable_digest_emails":false,"email_in":false,"disable_emails":false,"bounce_score_threshold":4,"max_image_size_kb":3072,"max_attachment_size_kb":3072,"authorized_extensions":"jpg|jpeg|png|gif|axo|axp|axs|axh|fpd|brd|axt","max_image_width":690,"max_image_height":500,"prevent_anons_from_downloading_files":false,"enable_s3_uploads":false,"allow_profile_backgrounds":true,"allow_uploaded_avatars":true,"allow_animated_avatars":false,"default_avatars":"","external_system_avatars_enabled":true,"external_system_avatars_url":"/letter_avatar_proxy/v2/letter/{first_letter}/{color}/{size}.png","allow_staff_to_upload_any_file_in_pm":true,"tl1_requires_read_posts":30,"tl3_links_no_follow":false,"use_admin_ip_whitelist":false,"max_oneboxes_per_post":50,"alert_admins_if_errors_per_minute":0,"alert_admins_if_errors_per_hour":0,"max_prints_per_hour_per_user":5,"enable_long_polling":true,"long_polling_base_url":"/","background_polling_interval":60000,"polling_interval":3000,"anon_polling_interval":15000,"flush_timings_secs":20,"verbose_localization":false,"max_new_topics":500,"tos_url":"","privacy_policy_url":"","faq_url":"","maximum_backups":5,"min_search_term_length":3,"version_checks":true,"suppress_uncategorized_badge":true,"topic_views_heat_low":1000,"topic_views_heat_medium":2000,"topic_views_heat_high":5000,"topic_post_like_heat_low":0.5,"topic_post_like_heat_medium":1.0,"topic_post_like_heat_high":2.0,"history_hours_low":12,"history_hours_medium":24,"history_hours_high":48,"cold_age_days_low":14,"cold_age_days_medium":90,"cold_age_days_high":180,"global_notice":"","show_create_topics_notice":true,"bootstrap_mode_min_users":50,"bootstrap_mode_enabled":false,"automatically_unpin_topics":true,"read_time_word_count":500,"disable_mailing_list_mode":false,"default_topics_automatic_unpin":true,"tagging_enabled":true,"tag_style":"simple","max_tags_per_topic":5,"max_tag_length":20,"min_trust_level_to_tag_topics":0,"max_tag_search_results":5,"show_filter_by_tag":true,"tags_sort_alphabetically":false,"staff_tags":"","suppress_overlapping_tags_in_list":false,"discourse_narrative_bot_enabled":true,"poll_enabled":true,"poll_maximum_options":20,"details_enabled":true,"available_locales":"ar|bs_BA|cs|da|de|el|en|es|et|fa_IR|fi|fr|gl|he|id|it|ja|ko|nb_NO|nl|pl_PL|pt|pt_BR|ro|ru|sk|sq|sv|te|tr_TR|uk|ur|vi|zh_CN|zh_TW"});
          ps.store("customHTML", {"top":"","footer":""});
          ps.store("banner", {});
          ps.store("customEmoji", []);
          ps.store("translationOverrides", {});
          ps.store("topic_4013", {"post_stream":{"posts":[{"id":25353,"name":"","username":"TheSlowGrowth","avatar_template":"/letter_avatar_proxy/v2/letter/t/90db22/{size}.png","created_at":"2017-12-11T13:52:26.018Z","cooked":"\u003cp\u003eHi everyone,\u003c/p\u003e\n\n\u003cp\u003eI'm about to start a journey into modelling analog circuits. The topic has been in my head for some time already and I want to finally get started. What I'm looking for now is some fellows to go through this together. In my experience ping-ponging ideas can greatly improve the experience for everyone and that's why I think it could be great to work on this together.\u003c/p\u003e\n\n\u003ch3\u003eMy goal...\u003c/h3\u003e\n\n\u003cp\u003e... is to gain a deeper understanding about what matters in analog circuits and how to model some of the relevant behaviour in a DSP. Maybe we create some Axoloti objects for saturation/filters/vcas based on real circuits. But I consider the creation of new objects a side effect. Really, the primary goal, for me, is to learn and tinker.\u003c/p\u003e\n\n\u003ch3\u003eMy background\u003c/h3\u003e\n\n\u003cp\u003eI'm currently approaching my final thesis in electrical engineering at a university in Germany. I have some background in DSP and signal theory as well as C/C++ programming. Add to that multiple years of experience building synths and synth modules (eurorack, it's a horrible drug). Why am I mentioning this? Because that says a lot about the angle from which I'll approach this topic.\u003c/p\u003e\n\n\u003ch3\u003ePreferred methodology\u003c/h3\u003e\n\n\u003cp\u003eTo make this fun and interesting for everyone, I'd suggest we try to make things reproducible for everyone. That means we should be clear about what we did and how so we can all follow each others discoveries. Most importantly, I think we should stick to the same circuit until we all decide we want try something else. \u003c/p\u003e\n\n\u003ch3\u003eMy plan...\u003c/h3\u003e\n\n\u003cp\u003e... is to start simple and slowly move forward. Ideally, I'd like to pick a circuit and build it. Then we can start making a model in the form of an Axoloti object/patch. With the right tools (oscilloscope, ears, circuit simulator, math, ...) we can compare the real thing to our model and slowly work towards a perfect model. If we succeed in one circuit we can pick the next, more complicated one. All of this will require patience and realistic goals.\u003c/p\u003e\n\n\u003cp\u003eHere's my roadmap, but this is more of a suggestion than a fixed schedule:\u003c/p\u003e\n\n\u003col\u003e\n\u003cli\u003eStart with a simple circuit that involves only a minimal number of components, no feedback and preferrably only a single type of semiconductor. (My idea would be a simple diode saturation, but I'm open to anything)\u003c/li\u003e\n\u003cli\u003eDecide on a realization of this circuit and build a test rig that we can use to measure stuff about this circuit.\u003c/li\u003e\n\u003cli\u003eCreate a specific object/patch to create test signals like certain oscillator shapes, impulses, sweeps, etc. We could use the community library or another github repo for this. That way, we all work with the same test signals and know that we're talking about the same thing.\u003c/li\u003e\n\u003cli\u003eSetup an Axoloti patch to feed the test signals to both our real circuit and our model. If we use the left audio output to feed our (real) test circuit, we can use the right output for our digital model. That way, we can directly compare the real thing with our model using all kinds of test equipment.\u003c/li\u003e\n\u003cli\u003eCreate a first naive model by using simple math and circuit analysis. No worries about optimization at this point.\u003c/li\u003e\n\u003cli\u003eFrom there on it'll be about comparing our model to the real thing by firing all kinds of test signals at it. \u003c/li\u003e\n\u003cli\u003eIf we succeed with our first simple model, I'd suggest we pick the next. I have some ideas about circuits to try.\u003c/li\u003e\n\u003c/ol\u003e\n\n\u003ch3\u003eMy worries\u003c/h3\u003e\n\n\u003cp\u003eAll of this may sound like a rigid plan, but to be honest, I'm not even sure if this is the right approach. What do you think? I'm open for any suggestions, so please: Go ahead and let me know what you think about this.\u003c/p\u003e\n\n\u003cp\u003eDoes all of that sound interesting to you? Let's go!\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2017-12-11T13:52:26.018Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"avg_time":45,"incoming_link_count":69,"reads":110,"score":483.05,"yours":false,"topic_id":4013,"topic_slug":"modelling-analog-circuits-in-software","display_username":"","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"http://community.axoloti.com/t/theslowgrowth-contributions/2959/28","internal":true,"reflection":true,"title":"TheSlowGrowth contributions","clicks":1}],"read":true,"user_title":null,"actions_summary":[{"id":2,"count":5}],"moderator":false,"admin":false,"staff":false,"user_id":1129,"hidden":false,"hidden_reason_id":null,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":false,"wiki":false},{"id":25355,"name":"","username":"TheSlowGrowth","avatar_template":"/letter_avatar_proxy/v2/letter/t/90db22/{size}.png","created_at":"2017-12-11T13:59:47.982Z","cooked":"\u003cp\u003eAnd to get things started, here is a suggestion for a first test circuit. The goal of this could be to find out what's important about a diode distortion. We could later on add a second diode antiparallel to the first to create the typical guitar distortion effect. For now, I think this will give a good starting point.\u003cbr\u003eI guess we will need a high pass filter to compensate for the introduced DC offset with just one diode. Otherwise we may have trouble comparing this to our model.\u003cbr\u003e(warning: I haven't yet built this so I don't know if the gain would be enough).\u003c/p\u003e\n\n\u003cp\u003e\u003cdiv class=\"lightbox-wrapper\"\u003e\u003ca data-download-href=\"//community.axoloti.com/uploads/default/ac72587fa93173671870b580e859b62212335002\" href=\"//community.axoloti.com/uploads/default/original/2X/a/ac72587fa93173671870b580e859b62212335002.png\" class=\"lightbox\" title=\"Bildschirmfoto 2017-12-11 um 14.56.05.png\"\u003e\u003cimg src=\"//community.axoloti.com/uploads/default/optimized/2X/a/ac72587fa93173671870b580e859b62212335002_1_690x233.png\" width=\"690\" height=\"233\"\u003e\u003cdiv class=\"meta\"\u003e\n\u003cspan class=\"filename\"\u003eBildschirmfoto 2017-12-11 um 14.56.05.png\u003c/span\u003e\u003cspan class=\"informations\"\u003e1926x652 72.5 KB\u003c/span\u003e\u003cspan class=\"expand\"\u003e\u003c/span\u003e\n\u003c/div\u003e\u003c/a\u003e\u003c/div\u003e\u003c/p\u003e\n\n\u003cp\u003eI'll build this tomorrow and see if it is a good idea, but until then it could serve as a little bait to get you interested \u003cimg src=\"//community.axoloti.com/images/emoji/twitter/wink.png?v=5\" title=\":wink:\" class=\"emoji\" alt=\":wink:\"\u003e\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2017-12-11T14:15:43.418Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"avg_time":34,"incoming_link_count":0,"reads":101,"score":51.7,"yours":false,"topic_id":4013,"topic_slug":"modelling-analog-circuits-in-software","display_username":"","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"//community.axoloti.com/uploads/default/original/2X/a/ac72587fa93173671870b580e859b62212335002.png","internal":true,"reflection":false,"clicks":0}],"read":true,"user_title":null,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":1129,"hidden":false,"hidden_reason_id":null,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":false,"wiki":false},{"id":25377,"name":"Gavin","username":"Gavin","avatar_template":"/user_avatar/community.axoloti.com/gavin/{size}/5153_1.png","created_at":"2017-12-11T23:14:44.311Z","cooked":"\u003cp\u003e\u003ca class=\"mention\" href=\"/u/theslowgrowth\"\u003e@TheSlowGrowth\u003c/a\u003e, I like your idea, and would love to participate, but I'm not sure I have anything to offer, only basic circuit building experience, and the only DSP knowledge I have is almost nil, except what I have learnt on this forum. But the main reason why I am responding is your choice of first test circuit. \"Distortion\" From what I have been reading on the great wide web, is that this is a bit of a holy grail search to achieve a true distortion with DSP. Even without extensive knowledge, my attempt at distortion through my \"Diode Clipping Simulator\" object I posted on the community contributions. But as seams to be the case with most DSP distortion is its lack of random natural feel it has, somehow randomness need to be added to the surface of where the signal is clipped. But I also believe maybe the search for the holy grail needs to end, and in stead of trying to mimic, create something new based on what DSP can achieve that circuitry cannot. The same applies to \"Boost\" and \"Overdrive\", as these are part of the family that leads to distortion. This reply is not intended to be negative in any way, as I will watch your progress with great interest and desire to test, but maybe to not follow other DSP distortion attempts to re-create, but more like what is unique about the result. Boost, Overdrive and Distortion is just a topic I am very passionate about but also want to see attempts break down barriers rather then held back by borders.\u003cbr\u003e\u003cimg src=\"//community.axoloti.com/images/emoji/twitter/grin.png?v=5\" title=\":grin:\" class=\"emoji\" alt=\":grin:\"\u003e\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2017-12-11T23:14:44.311Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"avg_time":27,"incoming_link_count":0,"reads":100,"score":36.15,"yours":false,"topic_id":4013,"topic_slug":"modelling-analog-circuits-in-software","display_username":"Gavin","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":558,"hidden":false,"hidden_reason_id":null,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":false,"wiki":false},{"id":25378,"name":"","username":"SmashedTransistors","avatar_template":"/user_avatar/community.axoloti.com/smashedtransistors/{size}/3147_1.png","created_at":"2017-12-11T23:40:36.043Z","cooked":"\u003caside class=\"quote\" data-post=\"1\" data-topic=\"4013\"\u003e\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"//community.axoloti.com/letter_avatar_proxy/v2/letter/t/90db22/40.png\" class=\"avatar\"\u003eTheSlowGrowth:\u003c/div\u003e\n\u003cblockquote\u003e\u003cp\u003eI'm currently approaching my final thesis in electrical engineering at a university in Germany.\u003c/p\u003e\u003c/blockquote\u003e\u003c/aside\u003e\n\n\u003cp\u003eMaybe it is a good idea to study \u003cstrong\u003ehow\u003c/strong\u003e an electronic modelling software works.\u003cbr\u003eThe best exemple is the ubiquitous Spice you may know and use in your studies\u003cbr\u003e\u003caside class=\"onebox wikipedia\"\u003e\n  \u003cheader class=\"source\"\u003e\n    \u003ca href=\"https://en.wikipedia.org/wiki/SPICE\" target=\"_blank\" rel=\"nofollow noopener\"\u003een.wikipedia.org\u003c/a\u003e\n  \u003c/header\u003e\n  \u003carticle class=\"onebox-body\"\u003e\n    \u003cimg src=\"//upload.wikimedia.org/wikipedia/commons/thumb/8/8d/Nuvola_apps_ksim.png/28px-Nuvola_apps_ksim.png\" class=\"thumbnail\"\u003e\n\n\u003ch3\u003e\u003ca href=\"https://en.wikipedia.org/wiki/SPICE\" target=\"_blank\" rel=\"nofollow noopener\"\u003eSPICE\u003c/a\u003e\u003c/h3\u003e\n\n\u003cp\u003eSPICE (Simulation Program with Integrated Circuit Emphasis) is a general-purpose, open source analog electronic circuit simulator. It is a program used in integrated circuit and board-level design to check the integrity of circuit designs and to predict circuit behavior.   Unlike board-level designs composed of discrete parts, it is not practical to breadboard integrated circuits before manufacture. Further, the high costs of photolithographic masks and other manufacturing prerequisites make it e...\u003c/p\u003e\n\n  \u003c/article\u003e\n  \u003cdiv class=\"onebox-metadata\"\u003e\n    \n    \n  \u003c/div\u003e\n  \u003cdiv style=\"clear: both\"\u003e\u003c/div\u003e\n\u003c/aside\u003e\n \u003c/p\u003e\n\n\u003cp\u003eThat is written in C and open source. \u003cbr\u003eAnd you can find many tutorials about it. \u003c/p\u003e\n\n\u003cp\u003e\u003caside class=\"onebox pdf\"\u003e\n  \u003cheader class=\"source\"\u003e\n    \u003ca href=\"https://www3.imperial.ac.uk/pls/portallive/docs/1/7292571.PDF\" target=\"_blank\" rel=\"nofollow noopener\"\u003ewww3.imperial.ac.uk\u003c/a\u003e\n  \u003c/header\u003e\n  \u003carticle class=\"onebox-body\"\u003e\n    \u003ca href=\"https://www3.imperial.ac.uk/pls/portallive/docs/1/7292571.PDF\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cspan class=\"pdf-onebox-logo\"\u003e\u003c/span\u003e\u003c/a\u003e\n\u003ch3\u003e\u003ca href=\"https://www3.imperial.ac.uk/pls/portallive/docs/1/7292571.PDF\" target=\"_blank\" rel=\"nofollow noopener\"\u003e7292571.PDF\u003c/a\u003e\u003c/h3\u003e\n\n\u003cp class=\"filesize\"\u003e0 B\u003c/p\u003e\n\n  \u003c/article\u003e\n  \u003cdiv class=\"onebox-metadata\"\u003e\n    \n    \n  \u003c/div\u003e\n  \u003cdiv style=\"clear: both\"\u003e\u003c/div\u003e\n\u003c/aside\u003e\n\u003cbr\u003e\u003ca href=\"http://emcs.org/acstrial/newsletters/summer09/HowSpiceWorks.pdf\" class=\"onebox\" target=\"_blank\"\u003ehttp://emcs.org/acstrial/newsletters/summer09/HowSpiceWorks.pdf\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003ePersonally, i think that many analog cicuits, and especially stompboxes, are particular because buffering is not very high impedance and not linear (NPN common emitter buffers), the different stages are more \u003cem\u003ecoupled\u003c/em\u003e than \u003cem\u003echained\u003c/em\u003e, this causes many implicit feedback loops... these feedback loops are source of chaotic behaviours that can be the kind of behaviour mentioned by \u003ca class=\"mention\" href=\"/u/gavin\"\u003e@Gavin\u003c/a\u003e ...\u003c/p\u003e\n\n\u003cp\u003eOne critical issue with distortion in the digital/sampled domain is aliasing.\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2017-12-12T00:53:32.498Z","reply_count":0,"reply_to_post_number":null,"quote_count":1,"avg_time":32,"incoming_link_count":5,"reads":102,"score":46.8,"yours":false,"topic_id":4013,"topic_slug":"modelling-analog-circuits-in-software","display_username":"","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://www3.imperial.ac.uk/pls/portallive/docs/1/7292571.PDF","internal":false,"reflection":false,"clicks":8},{"url":"https://en.wikipedia.org/wiki/SPICE","internal":false,"reflection":false,"title":"SPICE - Wikipedia","clicks":7},{"url":"http://emcs.org/acstrial/newsletters/summer09/HowSpiceWorks.pdf","internal":false,"reflection":false,"clicks":4}],"read":true,"user_title":null,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":967,"hidden":false,"hidden_reason_id":null,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":false,"wiki":false},{"id":25391,"name":"","username":"TheSlowGrowth","avatar_template":"/letter_avatar_proxy/v2/letter/t/90db22/{size}.png","created_at":"2017-12-12T14:09:39.769Z","cooked":"\u003cp\u003eOkay. So I went ahead and built this small setup.\u003cdiv class=\"lightbox-wrapper\"\u003e\u003ca data-download-href=\"//community.axoloti.com/uploads/default/dafc5a480108316b706f0bdaf8d9ae373e536daf\" href=\"//community.axoloti.com/uploads/default/original/2X/d/dafc5a480108316b706f0bdaf8d9ae373e536daf.jpg\" class=\"lightbox\" title=\"photo.jpg\"\u003e\u003cimg src=\"//community.axoloti.com/uploads/default/optimized/2X/d/dafc5a480108316b706f0bdaf8d9ae373e536daf_1_690x388.jpg\" width=\"690\" height=\"388\"\u003e\u003cdiv class=\"meta\"\u003e\n\u003cspan class=\"filename\"\u003ephoto.jpg\u003c/span\u003e\u003cspan class=\"informations\"\u003e1280x720 135 KB\u003c/span\u003e\u003cspan class=\"expand\"\u003e\u003c/span\u003e\n\u003c/div\u003e\u003c/a\u003e\u003c/div\u003e\u003cbr\u003eThe audio from Axoloti comes in with the orange cable on the left. My soundcard/headphones are connected to the black cable on the right. Power comes from a eurorack case via the ribbon cable. There are some ground hooks for probes and two 3.5mm jacks for connecting a scope (I had the 3.5mm=\u0026gt;BNC cables already and found this less fiddly than standard oscilloscope probes. For audio signal it doesnt make much of a difference anyway)\u003cbr\u003eIt is the circuit posted above. Only difference: There is no high pass filter cap and the diode is pointing from ground upwards to the opamp output (due to the inverted signal, this gives me clipping on the positive side of the waveform).\u003c/p\u003e\n\n\u003cp\u003eI used this Axoloti patch to send various waveforms to the circuit:\u003cbr\u003e\u003ca class=\"attachment\" href=\"//community.axoloti.com/uploads/default/original/2X/a/aca0c43b3bae86aac2f884312ddf8c6b0e1f5aa5.axp\"\u003etestsignals.axp\u003c/a\u003e (28.7 KB)\u003cbr\u003eYou can select between Sin/Tri/Saw/Sqr oscillators (both antialiased and not), repeating clicks/pulses, a drum pattern, a synth line and white noise. I'm not sure yet which of these will prove helpful, but it's a start.\u003c/p\u003e\n\n\u003cp\u003eI then observed the waveforms on the scope. Here is a zip file with all my measurements: \u003ca class=\"attachment\" href=\"//community.axoloti.com/uploads/default/original/2X/e/ee0d238b678a0019b432d7de3e84751a618ee568.axp\"\u003eMeasurements.zip.axp\u003c/a\u003e (1.5 MB - remove the *.axp file extension. I had to rename it to upload)\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003eThe measurements I did (+ a few example pics, the rest is in the zip file):\u003c/strong\u003e\u003cbr\u003eSpectrum of the sine wave I feed into the circuit as well as the spectrum of the distorted waveform with the master volume int he patch set to 32, 45, 55. Here's the distorted version with the level set to 55:\u003cbr\u003e\u003cdiv class=\"lightbox-wrapper\"\u003e\u003ca data-download-href=\"//community.axoloti.com/uploads/default/a33d60ee3fcdbf5a06c65204c5a378a106ef44f0\" href=\"//community.axoloti.com/uploads/default/original/2X/a/a33d60ee3fcdbf5a06c65204c5a378a106ef44f0.png\" class=\"lightbox\" title=\"Spectrum_Dist55_sin.png\"\u003e\u003cimg src=\"//community.axoloti.com/uploads/default/optimized/2X/a/a33d60ee3fcdbf5a06c65204c5a378a106ef44f0_1_690x414.png\" width=\"690\" height=\"414\"\u003e\u003cdiv class=\"meta\"\u003e\n\u003cspan class=\"filename\"\u003eSpectrum_Dist55_sin.png\u003c/span\u003e\u003cspan class=\"informations\"\u003e800x480 84.7 KB\u003c/span\u003e\u003cspan class=\"expand\"\u003e\u003c/span\u003e\n\u003c/div\u003e\u003c/a\u003e\u003c/div\u003e\u003c/p\u003e\n\n\u003cp\u003eSin and Saw waveforms with the pitch control set to -38 and +16. Recorded at various levels of dirstorion (32, 40, 45, 50, 55, 64). Here's a saw wave, pitch=-38, level=50:\u003cdiv class=\"lightbox-wrapper\"\u003e\u003ca data-download-href=\"//community.axoloti.com/uploads/default/e8518c3af12789624aec1e11c6d4c092688281d6\" href=\"//community.axoloti.com/uploads/default/original/2X/e/e8518c3af12789624aec1e11c6d4c092688281d6.png\" class=\"lightbox\" title=\"-38_50_saw.png\"\u003e\u003cimg src=\"//community.axoloti.com/uploads/default/optimized/2X/e/e8518c3af12789624aec1e11c6d4c092688281d6_1_690x414.png\" width=\"690\" height=\"414\"\u003e\u003cdiv class=\"meta\"\u003e\n\u003cspan class=\"filename\"\u003e-38_50_saw.png\u003c/span\u003e\u003cspan class=\"informations\"\u003e800x480 42.7 KB\u003c/span\u003e\u003cspan class=\"expand\"\u003e\u003c/span\u003e\n\u003c/div\u003e\u003c/a\u003e\u003c/div\u003e\u003cbr\u003eAnd the same waveform recorded with the pitch set to +16: \u003cdiv class=\"lightbox-wrapper\"\u003e\u003ca data-download-href=\"//community.axoloti.com/uploads/default/d37b4eb1de5f97bc1788d0a27bcdc49a6ca4be45\" href=\"//community.axoloti.com/uploads/default/original/2X/d/d37b4eb1de5f97bc1788d0a27bcdc49a6ca4be45.png\" class=\"lightbox\" title=\" 16_50_saw.png\"\u003e\u003cimg src=\"//community.axoloti.com/uploads/default/optimized/2X/d/d37b4eb1de5f97bc1788d0a27bcdc49a6ca4be45_1_690x414.png\" width=\"690\" height=\"414\"\u003e\u003cdiv class=\"meta\"\u003e\n\u003cspan class=\"filename\"\u003e 16_50_saw.png\u003c/span\u003e\u003cspan class=\"informations\"\u003e800x480 50.4 KB\u003c/span\u003e\u003cspan class=\"expand\"\u003e\u003c/span\u003e\n\u003c/div\u003e\u003c/a\u003e\u003c/div\u003e\u003c/p\u003e\n\n\u003cp\u003eAlso I recorded some shots of the Drumbeat. Here's a closeup of the noise portion of a snare hit:\u003cdiv class=\"lightbox-wrapper\"\u003e\u003ca data-download-href=\"//community.axoloti.com/uploads/default/c72939a6dd09d0a42ffa6e683fb39d986260215e\" href=\"//community.axoloti.com/uploads/default/original/2X/c/c72939a6dd09d0a42ffa6e683fb39d986260215e.png\" class=\"lightbox\" title=\"Drums_55_SD_Zoomed2.png\"\u003e\u003cimg src=\"//community.axoloti.com/uploads/default/optimized/2X/c/c72939a6dd09d0a42ffa6e683fb39d986260215e_1_690x414.png\" width=\"690\" height=\"414\"\u003e\u003cdiv class=\"meta\"\u003e\n\u003cspan class=\"filename\"\u003eDrums_55_SD_Zoomed2.png\u003c/span\u003e\u003cspan class=\"informations\"\u003e800x480 36.9 KB\u003c/span\u003e\u003cspan class=\"expand\"\u003e\u003c/span\u003e\n\u003c/div\u003e\u003c/a\u003e\u003c/div\u003e\u003c/p\u003e\n\n\u003cp\u003eSeems to me like this could be nicely recreated with just waveshaping. I was expecting to see some diode recovery effects on higher frequency signals, but apparently we're not yet high enough to \u003cstrong\u003esee\u003c/strong\u003e anything.\u003c/p\u003e\n\n\u003cp\u003eHere's a recording of the drumloop. First the source signal, then the distorted signal at levels of 32, 45 and 55 (all normalized so we can hear the effect of the distortion, not just the difference in volume):\u003ca class=\"attachment\" href=\"//community.axoloti.com/uploads/default/original/2X/0/0da4557ce55c8b6e5cf34161a1a1eef566fa3db0.axp\"\u003eDrums_src_32_45_55.flac.axp\u003c/a\u003e (1.7 MB - again, remove the *.axp file extension)\u003c/p\u003e\n\n\u003cp\u003eSo, that's all I can do for today, but I'll start creating a simple model later.\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2017-12-12T16:08:12.553Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"avg_time":50,"incoming_link_count":0,"reads":96,"score":36.5,"yours":false,"topic_id":4013,"topic_slug":"modelling-analog-circuits-in-software","display_username":"","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"//community.axoloti.com/uploads/default/original/2X/0/0da4557ce55c8b6e5cf34161a1a1eef566fa3db0.axp","internal":true,"reflection":false,"clicks":3},{"url":"//community.axoloti.com/uploads/default/original/2X/a/aca0c43b3bae86aac2f884312ddf8c6b0e1f5aa5.axp","internal":true,"reflection":false,"clicks":1},{"url":"//community.axoloti.com/uploads/default/original/2X/d/dafc5a480108316b706f0bdaf8d9ae373e536daf.jpg","internal":true,"reflection":false,"clicks":0},{"url":"//community.axoloti.com/uploads/default/original/2X/c/c72939a6dd09d0a42ffa6e683fb39d986260215e.png","internal":true,"reflection":false,"clicks":0},{"url":"//community.axoloti.com/uploads/default/original/2X/d/d37b4eb1de5f97bc1788d0a27bcdc49a6ca4be45.png","internal":true,"reflection":false,"clicks":0},{"url":"//community.axoloti.com/uploads/default/original/2X/e/e8518c3af12789624aec1e11c6d4c092688281d6.png","internal":true,"reflection":false,"clicks":0},{"url":"//community.axoloti.com/uploads/default/original/2X/a/a33d60ee3fcdbf5a06c65204c5a378a106ef44f0.png","internal":true,"reflection":false,"clicks":0},{"url":"//community.axoloti.com/uploads/default/original/2X/e/ee0d238b678a0019b432d7de3e84751a618ee568.axp","internal":true,"reflection":false,"clicks":0}],"read":true,"user_title":null,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":1129,"hidden":false,"hidden_reason_id":null,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":false,"wiki":false},{"id":25422,"name":"","username":"TheSlowGrowth","avatar_template":"/letter_avatar_proxy/v2/letter/t/90db22/{size}.png","created_at":"2017-12-13T20:09:35.814Z","cooked":"\u003cp\u003eOkay, so here's how far I got today.\u003cbr\u003eI wrote down the simple equation that describes the circuit in this picture:\u003cimg src=\"//community.axoloti.com/uploads/default/original/2X/f/fcc033325b671fd7559653096a2bc328cb576673.png\" width=\"602\" height=\"173\"\u003e\u003cbr\u003eIf you sum up all currents flowing out of the node connecting R, Ri and D, you get:\u003c/p\u003e\n\n\u003cpre\u003e\u003ccode\u003e0 = -(10*Uin - Ud)/R + I0*(exp(A*Ud) - 1) + Ud/Ri\u003c/code\u003e\u003c/pre\u003e\n\n\u003cp\u003ewhere \u003ccode\u003eUd\u003c/code\u003e is the voltage between the node and GND, \u003ccode\u003eI0 = 50.36µA\u003c/code\u003e and \u003ccode\u003eA = 7.48336 1/V\u003c/code\u003e (which I calculated from two points in the U/I plot in the 1N4148 datasheet).\u003c/p\u003e\n\n\u003cp\u003eI took the opportunity to finally learn some python (which I wanted to do for a long time). Here's a script that numerically solves that equation for all input voltages between 0-1V and creates the sourcecode for a lookup table to be used in C source code (this could be the start for a actual implementation). Also the script prints a saw and sine waveform together with their distorted signals, which are computed using the lookup table.\u003cbr\u003e\u003ca class=\"attachment\" href=\"//community.axoloti.com/uploads/default/original/2X/0/00e9a365d2e5849f763b3f46a55c6dfbe1d62c6b.axp\"\u003eApproximation.py.axp\u003c/a\u003e (3.2 KB - please remove *.axp file ending) \u003cbr\u003ePlease bear with me, it's my first ever python code. Frankly, I was quite surprised how quickly I had put this together.\u003c/p\u003e\n\n\u003cp\u003eHere's the numerical solution of the above equation:\u003cbr\u003e\u003cdiv class=\"lightbox-wrapper\"\u003e\u003ca data-download-href=\"//community.axoloti.com/uploads/default/66f2b15894d08467ee5d95ca0ddd34a0b725bba3\" href=\"//community.axoloti.com/uploads/default/original/2X/6/66f2b15894d08467ee5d95ca0ddd34a0b725bba3.png\" class=\"lightbox\" title=\"Uout_vs_Uin.png\"\u003e\u003cimg src=\"//community.axoloti.com/uploads/default/optimized/2X/6/66f2b15894d08467ee5d95ca0ddd34a0b725bba3_1_666x500.png\" width=\"666\" height=\"500\"\u003e\u003cdiv class=\"meta\"\u003e\n\u003cspan class=\"filename\"\u003eUout_vs_Uin.png\u003c/span\u003e\u003cspan class=\"informations\"\u003e1280x960 33.4 KB\u003c/span\u003e\u003cspan class=\"expand\"\u003e\u003c/span\u003e\n\u003c/div\u003e\u003c/a\u003e\u003c/div\u003e\u003cbr\u003eHere's a saw wave and its distorted counterpart, as computed from the equation. This plot is formatted so it can be easily compared to the scope shot from my last post. As you can see its not yet looking anything like the real scope shot, so I guess there's something wrong with my formula so far.\u003cdiv class=\"lightbox-wrapper\"\u003e\u003ca data-download-href=\"//community.axoloti.com/uploads/default/63e2a16e205277267f2fcfbf15684a4b23dcfd7e\" href=\"//community.axoloti.com/uploads/default/original/2X/6/63e2a16e205277267f2fcfbf15684a4b23dcfd7e.png\" class=\"lightbox\" title=\"model_distorted_saw.png\"\u003e\u003cimg src=\"//community.axoloti.com/uploads/default/optimized/2X/6/63e2a16e205277267f2fcfbf15684a4b23dcfd7e_1_666x500.png\" width=\"666\" height=\"500\"\u003e\u003cdiv class=\"meta\"\u003e\n\u003cspan class=\"filename\"\u003emodel_distorted_saw.png\u003c/span\u003e\u003cspan class=\"informations\"\u003e1280x960 46.1 KB\u003c/span\u003e\u003cspan class=\"expand\"\u003e\u003c/span\u003e\n\u003c/div\u003e\u003c/a\u003e\u003c/div\u003e\u003cbr\u003eI'm currently trying to figure out why it doesn't show the same image. To me it looks like the diode curve is not quite steep enough, so maybe I picked the wrong values for I0 and A.\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2017-12-13T20:12:00.603Z","reply_count":2,"reply_to_post_number":null,"quote_count":0,"avg_time":21,"incoming_link_count":1,"reads":86,"score":78.05,"yours":false,"topic_id":4013,"topic_slug":"modelling-analog-circuits-in-software","display_username":"","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"//community.axoloti.com/uploads/default/original/2X/0/00e9a365d2e5849f763b3f46a55c6dfbe1d62c6b.axp","internal":true,"reflection":false,"clicks":2},{"url":"//community.axoloti.com/uploads/default/original/2X/6/63e2a16e205277267f2fcfbf15684a4b23dcfd7e.png","internal":true,"reflection":false,"clicks":0},{"url":"//community.axoloti.com/uploads/default/original/2X/6/66f2b15894d08467ee5d95ca0ddd34a0b725bba3.png","internal":true,"reflection":false,"clicks":0}],"read":true,"user_title":null,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":1129,"hidden":false,"hidden_reason_id":null,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":false,"wiki":false},{"id":25429,"name":"","username":"TheSlowGrowth","avatar_template":"/letter_avatar_proxy/v2/letter/t/90db22/{size}.png","created_at":"2017-12-13T21:29:51.574Z","cooked":"\u003cp\u003eOkay, I fixed the issue. Turns out, I had wrong values for \u003ccode\u003eI0\u003c/code\u003e and \u003ccode\u003eA\u003c/code\u003e. I was basically taking wrong readings from the chart in the datasheet.\u003cbr\u003eNow, with the values corrected, this is the new plot:\u003cdiv class=\"lightbox-wrapper\"\u003e\u003ca data-download-href=\"//community.axoloti.com/uploads/default/aa1b949a043c208cecbb92e2f1c33d90a6516922\" href=\"//community.axoloti.com/uploads/default/original/2X/a/aa1b949a043c208cecbb92e2f1c33d90a6516922.png\" class=\"lightbox\" title=\"model_distorted_saw_fixed.png\"\u003e\u003cimg src=\"//community.axoloti.com/uploads/default/optimized/2X/a/aa1b949a043c208cecbb92e2f1c33d90a6516922_1_666x500.png\" width=\"666\" height=\"500\"\u003e\u003cdiv class=\"meta\"\u003e\n\u003cspan class=\"filename\"\u003emodel_distorted_saw_fixed.png\u003c/span\u003e\u003cspan class=\"informations\"\u003e1280x960 45.6 KB\u003c/span\u003e\u003cspan class=\"expand\"\u003e\u003c/span\u003e\n\u003c/div\u003e\u003c/a\u003e\u003c/div\u003e\u003cbr\u003ewhich looks fairly similar to the real scope shot.\u003c/p\u003e\n\n\u003cp\u003eI added the second diode antiparallel to the first to make the distortion circuit complete. In the model, simply only one diode is conductive at a time, which is a good approximation, given that the reverse current in these diodes is so incredibly small.\u003c/p\u003e\n\n\u003cp\u003eI then copied the lookup table that was generated by the script into a new axoloti object and added the code that does the interpolation. Right now, it converts to float and does everything super unoptimized. That's why it consumes around 10% CPU (for a simple lookup table read, lol!)\u003cbr\u003eAnyway, here's the object for you to play with:\u003cbr\u003e\u003ca class=\"attachment\" href=\"//community.axoloti.com/uploads/default/original/2X/d/d9caa4b219c1c7955568d7e6477ce23adeabb506.axo\"\u003ediodeDist.axo\u003c/a\u003e (3.2 KB)\u003c/p\u003e\n\n\u003cp\u003eHere is a audio demo comparing the real distorted drums to the model (real first, model second):\u003cbr\u003e\u003ca class=\"attachment\" href=\"//community.axoloti.com/uploads/default/original/2X/6/65392b0933ed79c9bfef2fe3adb49b0c069bbb70.axp\"\u003ereal_vs_model.flac.axp\u003c/a\u003e (443.2 KB - please remove *.axp file extension)\u003cbr\u003eI can barely hear a difference. To my ears, the model lacks a little bit of top end, but that could just be a subjective thing. I'd say, it's close enough - probably not worth adding any additional stuff to this model, it would only make the computation more CPU intensive.\u003cbr\u003eOn the oscilloscope, the real signal and the model look identical now.\u003c/p\u003e\n\n\u003cp\u003eFunny, that was way simpler than I had expected.\u003c/p\u003e","post_number":7,"post_type":1,"updated_at":"2017-12-13T21:33:56.753Z","reply_count":0,"reply_to_post_number":6,"quote_count":0,"avg_time":15,"incoming_link_count":0,"reads":80,"score":31.75,"yours":false,"topic_id":4013,"topic_slug":"modelling-analog-circuits-in-software","display_username":"","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"//community.axoloti.com/uploads/default/original/2X/d/d9caa4b219c1c7955568d7e6477ce23adeabb506.axo","internal":true,"reflection":false,"clicks":1},{"url":"//community.axoloti.com/uploads/default/original/2X/6/65392b0933ed79c9bfef2fe3adb49b0c069bbb70.axp","internal":true,"reflection":false,"clicks":1},{"url":"//community.axoloti.com/uploads/default/original/2X/a/aa1b949a043c208cecbb92e2f1c33d90a6516922.png","internal":true,"reflection":false,"clicks":0}],"read":true,"user_title":null,"reply_to_user":{"username":"TheSlowGrowth","avatar_template":"/letter_avatar_proxy/v2/letter/t/90db22/{size}.png"},"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":1129,"hidden":false,"hidden_reason_id":null,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":false,"wiki":false},{"id":25434,"name":"","username":"TheSlowGrowth","avatar_template":"/letter_avatar_proxy/v2/letter/t/90db22/{size}.png","created_at":"2017-12-14T00:08:37.661Z","cooked":"\u003cp\u003eThe optimized (still beta) version can now be found in the community library. \u003ccode\u003eTSG/dist/diodeDist.axo\u003c/code\u003e\u003cbr\u003eIt consumes roughly 6% CPU (still too much if you ask me)\u003c/p\u003e\n\n\u003cp\u003eOne thing that I found difficult is getting rid of noise introduced by the lookup table. For medium distortion settings and a table size of 256, only the lowest 4 values were actually used! The introduced noise was clearly audible. I tweaked the values a little bit and reduced the maximum available distortion level. Also I increased the size of the table to 1024 values. Now the noise is not audible anymore. Still, it's kind of silly to have a large lookup table, when most of the time you only really use the lowest quarter of it. It would actually be better, if there were more values in the lower ranges and fewer in the higher ranges (were the distortion will mask away any noise that may be introduced by reading from the table).\u003c/p\u003e\n\n\u003cp\u003eI'm thinking, a way out of this may be to have multiple, smaller lookup tables for different regions of the curve instead of one single table for the whole curve. I could then dynamically switch between the different tables, depending on where on the curve my input value is. Let's say I originally had a table with 1024 values for the whole input range of -1\u0026lt;28 to 1\u0026gt;\u0026gt;28. That would mean, each value in the table spans over 1\u0026lt;\u0026lt;18 steps of the input.\u003cbr\u003eI could instead have one table of size 512 for the whole range (step size would be 1\u0026lt;\u0026lt;19) and an additional table of size 512 for the range of -1\u0026lt;\u0026lt;22 to 1\u0026lt;\u0026lt;22 (stepsize would be 1\u0026lt;\u0026lt;13). That would be the same memory footprint, but orders of magnitude better resolution in the critical low ranges of the waveform.\u003cbr\u003eThe processing would be only marginally more complicated:\u003c/p\u003e\n\n\u003cpre\u003e\u003ccode\u003eif (input \u0026lt; (1\u0026lt;\u0026lt;22))\n{\n    // read from small table\n}\nelse\n{\n    // read from big table\n}\u003c/code\u003e\u003c/pre\u003e\n\n\u003cp\u003eSo that would be an additional shift, subtract and conditional jump operation - that's only very little increase. I'll try this tomorrow and see if the noise can be reduced further.\u003c/p\u003e","post_number":8,"post_type":1,"updated_at":"2017-12-14T00:08:37.661Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"avg_time":15,"incoming_link_count":2,"reads":80,"score":46.75,"yours":false,"topic_id":4013,"topic_slug":"modelling-analog-circuits-in-software","display_username":"","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":1129,"hidden":false,"hidden_reason_id":null,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":false,"wiki":false},{"id":25436,"name":"","username":"Ott","avatar_template":"/user_avatar/community.axoloti.com/ott/{size}/4529_1.png","created_at":"2017-12-14T03:29:16.800Z","cooked":"\u003cp\u003eYou could simply have your table be in log scale, although I'm not sure how much CPU that would end up costing.\u003c/p\u003e","post_number":9,"post_type":1,"updated_at":"2017-12-14T03:29:16.800Z","reply_count":1,"reply_to_post_number":8,"quote_count":0,"avg_time":8,"incoming_link_count":0,"reads":76,"score":20.6,"yours":false,"topic_id":4013,"topic_slug":"modelling-analog-circuits-in-software","display_username":"","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"TheSlowGrowth","avatar_template":"/letter_avatar_proxy/v2/letter/t/90db22/{size}.png"},"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1451,"hidden":false,"hidden_reason_id":null,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":false,"wiki":false},{"id":25437,"name":"","username":"TheSlowGrowth","avatar_template":"/letter_avatar_proxy/v2/letter/t/90db22/{size}.png","created_at":"2017-12-14T06:07:52.662Z","cooked":"\u003caside class=\"quote\" data-post=\"9\" data-topic=\"4013\"\u003e\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"//community.axoloti.com/user_avatar/community.axoloti.com/ott/40/4529_1.png\" class=\"avatar\"\u003eOtt:\u003c/div\u003e\n\u003cblockquote\u003e\u003cp\u003e[...] have your table be in log scale, [...]\u003c/p\u003e\u003c/blockquote\u003e\u003c/aside\u003e\n\n\u003cp\u003eYes, but scaling the read index and the fractional would be way too complicated and cost a lot of CPU.\u003c/p\u003e\n\n\u003cp\u003eIt dawned on me, that lookup tables are not ideal for this application.\u003c/p\u003e\n\n\u003cul\u003e\n\u003cli\u003eNot the exact shape of the curve is important (some deviation there wouldn't be problematic) but how smooth the interpolated waveform would be (first order deviation must be continuous)\u003c/li\u003e\n\u003cli\u003eThe curve itself is very smooth - a low order polynomial would already be sufficient to approximate the curve well enough.\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cp\u003eFrom there on, its simply a matter of fitting a polynomial into the desired curve. The only important thing is that this polynomial would have to be symmetrical to the origin.\u003cbr\u003eAfter I realizes that, it dawned on me that this pretty much directly leads to the typical curve found in the \u003ccode\u003edist/soft\u003c/code\u003e object in the factory library, which implements this function: \u003ccode\u003ey=1.5*x-0.5*x^3 for -1\u0026lt;x\u0026lt;1, y=-1 for x\u0026lt;-1, y=1 for x\u0026gt;1\u003c/code\u003e\u003cbr\u003e\u003cimg src=\"//community.axoloti.com/uploads/default/original/2X/5/590efa162064614ed597aad70bc860f0431facb5.jpg\" width=\"658\" height=\"406\"\u003e\u003c/p\u003e\n\n\u003cp\u003eSo - yea - unless I wanted to specifically model the 1N4148 circuit I have here on the breadboard, I could just stop here because I would basically recreate something that exists already.\u003c/p\u003e","post_number":10,"post_type":1,"updated_at":"2017-12-14T06:08:31.967Z","reply_count":1,"reply_to_post_number":9,"quote_count":1,"avg_time":15,"incoming_link_count":3,"reads":79,"score":36.55,"yours":false,"topic_id":4013,"topic_slug":"modelling-analog-circuits-in-software","display_username":"","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Ott","avatar_template":"/user_avatar/community.axoloti.com/ott/{size}/4529_1.png"},"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1129,"hidden":false,"hidden_reason_id":null,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":false,"wiki":false},{"id":25439,"name":"Filippo Tamagnini","username":"Sputnki","avatar_template":"/user_avatar/community.axoloti.com/sputnki/{size}/175_1.png","created_at":"2017-12-14T12:28:58.695Z","cooked":"\u003cp\u003eWhat if you fit the function with taylor expansions around several points and weigh the single contributions with a table?\u003c/p\u003e","post_number":11,"post_type":1,"updated_at":"2017-12-14T12:28:58.695Z","reply_count":1,"reply_to_post_number":10,"quote_count":0,"avg_time":9,"incoming_link_count":0,"reads":72,"score":34.85,"yours":false,"topic_id":4013,"topic_slug":"modelling-analog-circuits-in-software","display_username":"Filippo Tamagnini","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"TheSlowGrowth","avatar_template":"/letter_avatar_proxy/v2/letter/t/90db22/{size}.png"},"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":28,"hidden":false,"hidden_reason_id":null,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":false,"wiki":false},{"id":25440,"name":"","username":"TheSlowGrowth","avatar_template":"/letter_avatar_proxy/v2/letter/t/90db22/{size}.png","created_at":"2017-12-14T13:06:58.075Z","cooked":"\u003caside class=\"quote\" data-post=\"11\" data-topic=\"4013\" data-full=\"true\"\u003e\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"//community.axoloti.com/user_avatar/community.axoloti.com/sputnki/40/175_1.png\" class=\"avatar\"\u003eSputnki:\u003c/div\u003e\n\u003cblockquote\u003e\u003cp\u003eWhat if you fit the function with taylor expansions around several points and weigh the single contributions with a table?\u003c/p\u003e\u003c/blockquote\u003e\u003c/aside\u003e\n\n\u003cp\u003eThat is actually a very nice idea! I wonder how complicated this would get, computation wise. I spent half of this morning trying to fit some polynomials into my curve. I was able to get halfway decent results with 2nd-order polynomials, but only if I split the whole curve into 100 2nd order polynomial sections. The problem with this is that low order polynomials are easy to compute but you need many of them to get decent results. On the other hand you can also (sometimes) get good results with a few high order polynomials - which saves memory but requires many additional multiplications, making it a poor solution for low-powered processors like Axoloti. Right now with my 100 2nd order sections, I don't really save enough memory  to justify the increased processing effort.\u003c/p\u003e\n\n\u003cp\u003eComing back to your idea with the weighted taylor sections: I think the same tradeoff applies here. If I use higher order taylor expansions for this, it will be too computationally expensive. If I use lower order taylor expansions, I need more of them, mitigating the benefits alltogether. I might, however get less noise compared to the linear interpolated lookup table.\u003c/p\u003e\n\n\u003cp\u003ePS: I also tried to use 5th order polynomials, which are constrained to three points of the curve and the steepness on the points where they touch each other. However, there's still a problem in my equations, I keep getting poorly conditioned equation systems that can't be solved.\u003c/p\u003e","post_number":12,"post_type":1,"updated_at":"2017-12-14T13:06:58.075Z","reply_count":2,"reply_to_post_number":11,"quote_count":1,"avg_time":16,"incoming_link_count":0,"reads":75,"score":25.8,"yours":false,"topic_id":4013,"topic_slug":"modelling-analog-circuits-in-software","display_username":"","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1129,"hidden":false,"hidden_reason_id":null,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":false,"wiki":false},{"id":25442,"name":"Mark Harris","username":"thetechnobear","avatar_template":"/user_avatar/community.axoloti.com/thetechnobear/{size}/6_1.png","created_at":"2017-12-14T14:55:16.212Z","cooked":"\u003cp\u003ecould you possibly explain how you derived your equation in more detail?\u003cbr\u003eIt’s not something I’ve seen before, or perhaps reference something I could read up on.\u003cbr\u003eThanks\u003c/p\u003e","post_number":13,"post_type":1,"updated_at":"2017-12-14T14:55:16.212Z","reply_count":1,"reply_to_post_number":6,"quote_count":0,"avg_time":14,"incoming_link_count":0,"reads":71,"score":19.9,"yours":false,"topic_id":4013,"topic_slug":"modelling-analog-circuits-in-software","display_username":"Mark Harris","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"TheSlowGrowth","avatar_template":"/letter_avatar_proxy/v2/letter/t/90db22/{size}.png"},"actions_summary":[],"moderator":true,"admin":true,"staff":true,"user_id":5,"hidden":false,"hidden_reason_id":null,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":false,"wiki":false},{"id":25444,"name":"","username":"TheSlowGrowth","avatar_template":"/letter_avatar_proxy/v2/letter/t/90db22/{size}.png","created_at":"2017-12-14T15:28:12.560Z","cooked":"\u003caside class=\"quote\" data-post=\"13\" data-topic=\"4013\"\u003e\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"//community.axoloti.com/user_avatar/community.axoloti.com/thetechnobear/40/6_1.png\" class=\"avatar\"\u003ethetechnobear:\u003c/div\u003e\n\u003cblockquote\u003e\u003cp\u003eexplain how you derived your equation\u003c/p\u003e\u003c/blockquote\u003e\u003c/aside\u003e\n\n\u003cp\u003eA few posts back I wrote the equation and also posted an image of the circuit I used to model this.\u003cbr\u003eAs you can see, I assumed the operational amplifiers as \"perfect amplifiers\", so they appear only as abstract amplification blocks, except for the second amplifier, which has a finite input impedance of 47k, which i modeled with resistor Ri.\u003c/p\u003e\n\n\u003cp\u003eNow we need the basic equations of each components.\u003cbr\u003eFor the resistor, the current/voltage relationship is defined by Ohm's law: \u003ccode\u003eR = Ur/Ir\u003c/code\u003e. For the 1k resistor: \u003ccode\u003eUr=10*Uin - Ud\u003c/code\u003e (\u003ccode\u003eUd\u003c/code\u003e is the voltage at the node connecting the diode and the resistor relative to ground.) So that gives: \u003ccode\u003eIr = (10*Uin - Ud)/R\u003c/code\u003e. For the 47k resistor that models the imput impedance of the following amplifier stage: \u003ccode\u003eUr = Ud\u003c/code\u003e, so that gives: \u003ccode\u003eIri = Ud/Ri\u003c/code\u003e\u003cbr\u003eFor the Diode, the relationship is \u003ccode\u003eId = I0 * (exp(A*Ud) - 1)\u003c/code\u003e, where \u003ccode\u003eA\u003c/code\u003e and \u003ccode\u003eI0\u003c/code\u003e are constants that I read from the datasheet. This is the very basic diode equation you will find in every textbook or on every website. Except that I concentrated three values into one constant, \u003ccode\u003eA = q/nkT\u003c/code\u003e - I don't need to know them all individually.\u003c/p\u003e\n\n\u003cp\u003eFrom  there on it's Kirchhoffs law: All currents flowing into a node have to cancel each other out. That leads directly to the equation posted above.\u003c/p\u003e","post_number":14,"post_type":1,"updated_at":"2017-12-14T15:28:12.560Z","reply_count":1,"reply_to_post_number":13,"quote_count":1,"avg_time":20,"incoming_link_count":2,"reads":74,"score":75.8,"yours":false,"topic_id":4013,"topic_slug":"modelling-analog-circuits-in-software","display_username":"","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":1129,"hidden":false,"hidden_reason_id":null,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":false,"wiki":false},{"id":25448,"name":"Mark Harris","username":"thetechnobear","avatar_template":"/user_avatar/community.axoloti.com/thetechnobear/{size}/6_1.png","created_at":"2017-12-14T16:15:23.428Z","cooked":"\u003cp\u003ethanks for that, will delve into this with a cup of strong black coffee \u003cimg src=\"//community.axoloti.com/images/emoji/twitter/slight_smile.png?v=5\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\"\u003e\u003c/p\u003e","post_number":15,"post_type":1,"updated_at":"2017-12-14T16:15:31.282Z","reply_count":0,"reply_to_post_number":14,"quote_count":0,"avg_time":15,"incoming_link_count":0,"reads":73,"score":15.35,"yours":false,"topic_id":4013,"topic_slug":"modelling-analog-circuits-in-software","display_username":"Mark Harris","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"TheSlowGrowth","avatar_template":"/letter_avatar_proxy/v2/letter/t/90db22/{size}.png"},"actions_summary":[],"moderator":true,"admin":true,"staff":true,"user_id":5,"hidden":false,"hidden_reason_id":null,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":false,"wiki":false},{"id":25454,"name":"","username":"SmashedTransistors","avatar_template":"/user_avatar/community.axoloti.com/smashedtransistors/{size}/3147_1.png","created_at":"2017-12-14T20:18:49.873Z","cooked":"\u003caside class=\"quote\" data-post=\"12\" data-topic=\"4013\"\u003e\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"//community.axoloti.com/letter_avatar_proxy/v2/letter/t/90db22/40.png\" class=\"avatar\"\u003eTheSlowGrowth:\u003c/div\u003e\n\u003cblockquote\u003e\u003cp\u003eHowever, there's still a problem in my equations, I keep getting poorly conditioned equation systems that can't be solved.\u003c/p\u003e\u003c/blockquote\u003e\u003c/aside\u003e\n\n\u003cp\u003eMaybe, you can have a look at Chebychev polynomials approximation. These approximate a function over a segment rather than around a single point.\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://www.embeddedrelated.com/showarticle/152.php\" class=\"onebox\" target=\"_blank\"\u003ehttps://www.embeddedrelated.com/showarticle/152.php\u003c/a\u003e\u003c/p\u003e\n\n\u003caside class=\"onebox pdf\"\u003e\n  \u003cheader class=\"source\"\u003e\n    \u003ca href=\"https://www.aip.de/groups/soe/local/numres/bookcpdf/c5-8.pdf\" target=\"_blank\" rel=\"nofollow noopener\"\u003eaip.de\u003c/a\u003e\n  \u003c/header\u003e\n  \u003carticle class=\"onebox-body\"\u003e\n    \u003ca href=\"https://www.aip.de/groups/soe/local/numres/bookcpdf/c5-8.pdf\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cspan class=\"pdf-onebox-logo\"\u003e\u003c/span\u003e\u003c/a\u003e\n\u003ch3\u003e\u003ca href=\"https://www.aip.de/groups/soe/local/numres/bookcpdf/c5-8.pdf\" target=\"_blank\" rel=\"nofollow noopener\"\u003ec5-8.pdf\u003c/a\u003e\u003c/h3\u003e\n\n\u003cp class=\"filesize\"\u003e0 B\u003c/p\u003e\n\n  \u003c/article\u003e\n  \u003cdiv class=\"onebox-metadata\"\u003e\n    \n    \n  \u003c/div\u003e\n  \u003cdiv style=\"clear: both\"\u003e\u003c/div\u003e\n\u003c/aside\u003e\n","post_number":16,"post_type":1,"updated_at":"2017-12-14T20:21:27.680Z","reply_count":1,"reply_to_post_number":12,"quote_count":1,"avg_time":18,"incoming_link_count":3,"reads":72,"score":50.3,"yours":false,"topic_id":4013,"topic_slug":"modelling-analog-circuits-in-software","display_username":"","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://www.aip.de/groups/soe/local/numres/bookcpdf/c5-8.pdf","internal":false,"reflection":false,"clicks":10},{"url":"https://www.embeddedrelated.com/showarticle/152.php","internal":false,"reflection":false,"title":"Chebyshev Approximation and How It Can Help You Save Money, Win Friends, and Influence People - Jason Sachs","clicks":4}],"read":true,"user_title":null,"reply_to_user":{"username":"TheSlowGrowth","avatar_template":"/letter_avatar_proxy/v2/letter/t/90db22/{size}.png"},"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":967,"hidden":false,"hidden_reason_id":null,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":false,"wiki":false},{"id":25456,"name":"","username":"TheSlowGrowth","avatar_template":"/letter_avatar_proxy/v2/letter/t/90db22/{size}.png","created_at":"2017-12-14T21:04:20.427Z","cooked":"\u003cp\u003eOh wow, that was a great read. So much valuable information! I'll dive into this a little further. If you have any other links on this topic, don't hold back!\u003c/p\u003e\n\n\u003cp\u003ePS: It seems the second link is unfortunately not available anymore.\u003c/p\u003e","post_number":17,"post_type":1,"updated_at":"2017-12-14T21:05:36.444Z","reply_count":1,"reply_to_post_number":16,"quote_count":0,"avg_time":14,"incoming_link_count":0,"reads":71,"score":19.9,"yours":false,"topic_id":4013,"topic_slug":"modelling-analog-circuits-in-software","display_username":"","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"SmashedTransistors","avatar_template":"/user_avatar/community.axoloti.com/smashedtransistors/{size}/3147_1.png"},"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1129,"hidden":false,"hidden_reason_id":null,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":false,"wiki":false},{"id":25458,"name":"","username":"SmashedTransistors","avatar_template":"/user_avatar/community.axoloti.com/smashedtransistors/{size}/3147_1.png","created_at":"2017-12-14T21:31:51.214Z","cooked":"\u003cp\u003eHere is another like for the numerical recipes chapter:\u003cbr\u003e\u003caside class=\"onebox pdf\"\u003e\n  \u003cheader class=\"source\"\u003e\n    \u003ca href=\"https://cpp.in.ua/nrc/c5-8.pdf\" target=\"_blank\" rel=\"nofollow noopener\"\u003ecpp.in.ua\u003c/a\u003e\n  \u003c/header\u003e\n  \u003carticle class=\"onebox-body\"\u003e\n    \u003ca href=\"https://cpp.in.ua/nrc/c5-8.pdf\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cspan class=\"pdf-onebox-logo\"\u003e\u003c/span\u003e\u003c/a\u003e\n\u003ch3\u003e\u003ca href=\"https://cpp.in.ua/nrc/c5-8.pdf\" target=\"_blank\" rel=\"nofollow noopener\"\u003ec5-8.pdf\u003c/a\u003e\u003c/h3\u003e\n\n\u003cp class=\"filesize\"\u003e153.85 KB\u003c/p\u003e\n\n  \u003c/article\u003e\n  \u003cdiv class=\"onebox-metadata\"\u003e\n    \n    \n  \u003c/div\u003e\n  \u003cdiv style=\"clear: both\"\u003e\u003c/div\u003e\n\u003c/aside\u003e\n\u003c/p\u003e\n\n\u003caside class=\"onebox pdf\"\u003e\n  \u003cheader class=\"source\"\u003e\n    \u003ca href=\"https://www.fizyka.umk.pl/~jacek/docs/nrc/c5-9.pdf\" target=\"_blank\" rel=\"nofollow noopener\"\u003efizyka.umk.pl\u003c/a\u003e\n  \u003c/header\u003e\n  \u003carticle class=\"onebox-body\"\u003e\n    \u003ca href=\"https://www.fizyka.umk.pl/~jacek/docs/nrc/c5-9.pdf\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cspan class=\"pdf-onebox-logo\"\u003e\u003c/span\u003e\u003c/a\u003e\n\u003ch3\u003e\u003ca href=\"https://www.fizyka.umk.pl/~jacek/docs/nrc/c5-9.pdf\" target=\"_blank\" rel=\"nofollow noopener\"\u003ec5-9.pdf\u003c/a\u003e\u003c/h3\u003e\n\n\u003cp class=\"filesize\"\u003e226.69 KB\u003c/p\u003e\n\n  \u003c/article\u003e\n  \u003cdiv class=\"onebox-metadata\"\u003e\n    \n    \n  \u003c/div\u003e\n  \u003cdiv style=\"clear: both\"\u003e\u003c/div\u003e\n\u003c/aside\u003e\n\n\n\u003caside class=\"onebox pdf\"\u003e\n  \u003cheader class=\"source\"\u003e\n    \u003ca href=\"https://www.fizyka.umk.pl/~jacek/docs/nrc/c5-10.pdf\" target=\"_blank\" rel=\"nofollow noopener\"\u003efizyka.umk.pl\u003c/a\u003e\n  \u003c/header\u003e\n  \u003carticle class=\"onebox-body\"\u003e\n    \u003ca href=\"https://www.fizyka.umk.pl/~jacek/docs/nrc/c5-10.pdf\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cspan class=\"pdf-onebox-logo\"\u003e\u003c/span\u003e\u003c/a\u003e\n\u003ch3\u003e\u003ca href=\"https://www.fizyka.umk.pl/~jacek/docs/nrc/c5-10.pdf\" target=\"_blank\" rel=\"nofollow noopener\"\u003ec5-10.pdf\u003c/a\u003e\u003c/h3\u003e\n\n\u003cp class=\"filesize\"\u003e171.89 KB\u003c/p\u003e\n\n  \u003c/article\u003e\n  \u003cdiv class=\"onebox-metadata\"\u003e\n    \n    \n  \u003c/div\u003e\n  \u003cdiv style=\"clear: both\"\u003e\u003c/div\u003e\n\u003c/aside\u003e\n\n\n\u003cp\u003eYou can also have a look at Padé approximates, but those need division.\u003c/p\u003e","post_number":18,"post_type":1,"updated_at":"2017-12-14T21:40:26.466Z","reply_count":0,"reply_to_post_number":17,"quote_count":0,"avg_time":18,"incoming_link_count":0,"reads":75,"score":30.9,"yours":false,"topic_id":4013,"topic_slug":"modelling-analog-circuits-in-software","display_username":"","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://cpp.in.ua/nrc/c5-8.pdf","internal":false,"reflection":false,"clicks":4},{"url":"https://www.fizyka.umk.pl/~jacek/docs/nrc/c5-9.pdf","internal":false,"reflection":false,"clicks":2},{"url":"https://www.fizyka.umk.pl/~jacek/docs/nrc/c5-10.pdf","internal":false,"reflection":false,"clicks":1}],"read":true,"user_title":null,"reply_to_user":{"username":"TheSlowGrowth","avatar_template":"/letter_avatar_proxy/v2/letter/t/90db22/{size}.png"},"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":967,"hidden":false,"hidden_reason_id":null,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":false,"wiki":false},{"id":25464,"name":"","username":"TheSlowGrowth","avatar_template":"/letter_avatar_proxy/v2/letter/t/90db22/{size}.png","created_at":"2017-12-15T09:09:05.040Z","cooked":"\u003cp\u003eYesterday I talked to a friend about my efforts in understand analog modelling. \u003ca href=\"https://www.youtube.com/watch?v=oIChUOV_0w4\" rel=\"nofollow noopener\"\u003eHe recommended me to this talk.\u003c/a\u003e I just watched it and its a wealth of precious information for a beginner like me, and I'm sure everyone here can find some nice inspiration in this - not only for modelling circuits, but also for some general creative patching ideas.\u003c/p\u003e\n\n\u003cp\u003eFeedback loops will occur pretty much anywhere, even the circuit I worked on here has feedback, which you can directly see from the form of the equation - it is implicit! To deal with these equations, he suggests to use the Newton Raphson algorithm. I knew about this and the numerical solver in python probably uses this algorithm or something similar. But hadn't thought about using it in real time, because it is very CPU hungry and depending on your exit condition for the algorithm, it can also take different number of iterations to get to a desired result, or not get any result at all - which is something very undesireable in a DSP environment. \u003cbr\u003eOne interesting note here is that he suggests to use lookup tables to do the first iterations of the Newton Raphson algorithm, speeding things up immensly. This is something I hadn't yet though of. You don't even need a lot of precision in these tables and you could probably get along just fine with uninterpolated tables - if you use them for the first few iterations of the algorithm, that will get you close to the solution of the implicit equation. You can then refine the result further by doing the last few iterations with the real, CPU hungry equation.\u003c/p\u003e","post_number":19,"post_type":1,"updated_at":"2017-12-15T09:26:38.857Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"avg_time":16,"incoming_link_count":0,"reads":73,"score":15.4,"yours":false,"topic_id":4013,"topic_slug":"modelling-analog-circuits-in-software","display_username":"","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":3,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"https://www.youtube.com/watch?v=oIChUOV_0w4","internal":false,"reflection":false,"title":"YouTube","clicks":20}],"read":true,"user_title":null,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":1129,"hidden":false,"hidden_reason_id":null,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":false,"wiki":false},{"id":25468,"name":"Filippo Tamagnini","username":"Sputnki","avatar_template":"/user_avatar/community.axoloti.com/sputnki/{size}/175_1.png","created_at":"2017-12-15T11:58:45.341Z","cooked":"\u003cp\u003eOk, maybe taylor approximation is not the correct solution. What if instead you do this?\u003c/p\u003e\n\n\u003cp\u003e1) the function is antisymmetric, so you don't actually have to fit the whole curve\u003cbr\u003e2) divide the interval in which you want to fit the function in n+1 sections (better if equally spaced).\u003cbr\u003efor each section Si (from x[i] to x[i+1]) you could define a II order polynomial like:\u003c/p\u003e\n\n\u003cp\u003e\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003e \na[i] + b[i]*x + c[i]*x^2\u003c/code\u003e\u003c/pre\u003e\n\n\u003cp\u003eThis gives you a total of 3*(n+1) coefficients to determine.\u003cbr\u003e3) for the sections S[0], .. , S[n-1] you can define two congruency equations:\u003cbr\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"lang-auto\"\u003ea[i]+b[i]*x[i+1] + c[i]*x[i+1]^2 = a[i+1]+b[i+1]*x[i+1] + c[i+1]*x[i+1]^2 (continuity)\nb[i] + 2*c[i]*x[i+1] = b[i+1] + 2*c[i+1]*x[i+1] (continuity of the first derivative)\u003c/code\u003e\u003c/pre\u003e\n\n\u003cp\u003ethat make up for 2*n constraint equations.\u003cbr\u003e4) You can already say that a[0] = 0 (this makes for another constraint equation)\u003cbr\u003e5) The number of degrees of freedom if 3*(n+1) - (2*n+1) = n+2 \u003c/p\u003e\n\n\u003cp\u003eYour objective is that to minimize the distance between the sampled function and the polynomial approximation, so that sum(j) (f(x[j])-p(x[j]))^2 -----\u0026gt;0\u003c/p\u003e\n\n\u003cp\u003eIt's a constrained minimization problem, that you can solve numerically (octave, matlab) by the method of lagrange multipliers.\u003c/p\u003e","post_number":20,"post_type":1,"updated_at":"2017-12-15T11:58:45.341Z","reply_count":0,"reply_to_post_number":12,"quote_count":0,"avg_time":21,"incoming_link_count":0,"reads":71,"score":30.25,"yours":false,"topic_id":4013,"topic_slug":"modelling-analog-circuits-in-software","display_username":"Filippo Tamagnini","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"TheSlowGrowth","avatar_template":"/letter_avatar_proxy/v2/letter/t/90db22/{size}.png"},"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":28,"hidden":false,"hidden_reason_id":null,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":false,"wiki":false}],"stream":[25353,25355,25377,25378,25391,25422,25429,25434,25436,25437,25439,25440,25442,25444,25448,25454,25456,25458,25464,25468,25475,25565,25566,25567,25589,27422]},"timeline_lookup":[[1,1017],[5,1016],[6,1015],[10,1014],[19,1013],[22,1008],[26,932]],"id":4013,"title":"Modelling analog circuits in software","fancy_title":"Modelling analog circuits in software","posts_count":26,"created_at":"2017-12-11T13:52:25.910Z","views":1658,"reply_count":17,"participant_count":6,"like_count":25,"last_posted_at":"2018-03-06T18:13:15.600Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"modelling-analog-circuits-in-software","category_id":16,"word_count":5119,"deleted_at":null,"user_id":1129,"pm_with_non_human_user":false,"draft":null,"draft_key":"topic_4013","draft_sequence":null,"unpinned":null,"pinned_globally":false,"pinned":false,"pinned_at":null,"pinned_until":null,"details":{"created_by":{"id":1129,"username":"TheSlowGrowth","avatar_template":"/letter_avatar_proxy/v2/letter/t/90db22/{size}.png"},"last_poster":{"id":1451,"username":"Ott","avatar_template":"/user_avatar/community.axoloti.com/ott/{size}/4529_1.png"},"participants":[{"id":1129,"username":"TheSlowGrowth","avatar_template":"/letter_avatar_proxy/v2/letter/t/90db22/{size}.png","post_count":13,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":967,"username":"SmashedTransistors","avatar_template":"/user_avatar/community.axoloti.com/smashedtransistors/{size}/3147_1.png","post_count":5,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":1451,"username":"Ott","avatar_template":"/user_avatar/community.axoloti.com/ott/{size}/4529_1.png","post_count":3,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":5,"username":"thetechnobear","avatar_template":"/user_avatar/community.axoloti.com/thetechnobear/{size}/6_1.png","post_count":2,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":28,"username":"Sputnki","avatar_template":"/user_avatar/community.axoloti.com/sputnki/{size}/175_1.png","post_count":2,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":558,"username":"Gavin","avatar_template":"/user_avatar/community.axoloti.com/gavin/{size}/5153_1.png","post_count":1,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null}],"suggested_topics":[{"id":6570,"title":"Fun thing about #define","fancy_title":"Fun thing about #define","slug":"fun-thing-about-define","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":"/uploads/default/optimized/2X/5/59e50df43a7fa7e6b1a9461051312bf5350c9631_1_690x391.PNG","created_at":"2020-04-17T20:51:43.286Z","last_posted_at":"2020-04-18T14:52:53.574Z","bumped":true,"bumped_at":"2020-04-18T14:52:53.574Z","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"archetype":"regular","like_count":3,"views":166,"category_id":16,"tags":[],"featured_link":null,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":384,"username":"rbrt","avatar_template":"/user_avatar/community.axoloti.com/rbrt/{size}/1907_1.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":745,"username":"jaffasplaffa","avatar_template":"/user_avatar/community.axoloti.com/jaffasplaffa/{size}/5808_1.png"}}]},{"id":6255,"title":"Pitch detection on axoloti","fancy_title":"Pitch detection on axoloti","slug":"pitch-detection-on-axoloti","posts_count":3,"reply_count":1,"highest_post_number":3,"image_url":null,"created_at":"2019-12-15T09:13:31.980Z","last_posted_at":"2019-12-15T14:06:51.796Z","bumped":true,"bumped_at":"2019-12-15T14:06:51.796Z","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"archetype":"regular","like_count":2,"views":212,"category_id":16,"tags":[],"featured_link":null,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":790,"username":"lokki","avatar_template":"/user_avatar/community.axoloti.com/lokki/{size}/5157_1.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":745,"username":"jaffasplaffa","avatar_template":"/user_avatar/community.axoloti.com/jaffasplaffa/{size}/5808_1.png"}}]},{"id":6532,"title":"Help, connector matrix","fancy_title":"Help, connector matrix","slug":"help-connector-matrix","posts_count":11,"reply_count":7,"highest_post_number":11,"image_url":"/uploads/default/optimized/2X/b/b61ca067b5aff25ad28e666553fd986692da49a0_1_666x500.png","created_at":"2020-04-03T17:14:24.281Z","last_posted_at":"2020-04-07T13:05:34.129Z","bumped":true,"bumped_at":"2020-04-07T13:05:34.129Z","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"archetype":"regular","like_count":1,"views":222,"category_id":16,"tags":[],"featured_link":null,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1124,"username":"PabloEnelotromundo","avatar_template":"/user_avatar/community.axoloti.com/pabloenelotromundo/{size}/3636_1.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":772,"username":"patatos","avatar_template":"/letter_avatar_proxy/v2/letter/p/5f9b8f/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":790,"username":"lokki","avatar_template":"/user_avatar/community.axoloti.com/lokki/{size}/5157_1.png"}}]},{"id":6393,"title":"Write 16 bools to a single index of a 16 bit table question!","fancy_title":"Write 16 bools to a single index of a 16 bit table question!","slug":"write-16-bools-to-a-single-index-of-a-16-bit-table-question","posts_count":10,"reply_count":3,"highest_post_number":10,"image_url":null,"created_at":"2020-02-08T16:25:11.974Z","last_posted_at":"2020-02-11T07:02:00.311Z","bumped":true,"bumped_at":"2020-02-11T07:02:00.311Z","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"archetype":"regular","like_count":5,"views":228,"category_id":16,"tags":[],"featured_link":null,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":745,"username":"jaffasplaffa","avatar_template":"/user_avatar/community.axoloti.com/jaffasplaffa/{size}/5808_1.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1532,"username":"Captain_Burek","avatar_template":"/letter_avatar_proxy/v2/letter/c/90db22/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":2111,"username":"tele_player","avatar_template":"/letter_avatar_proxy/v2/letter/t/e47c2d/{size}.png"}}]},{"id":6690,"title":"Invoking the gods of DSP! (Yes, another Moog Filter thread)","fancy_title":"Invoking the gods of DSP! (Yes, another Moog Filter thread)","slug":"invoking-the-gods-of-dsp-yes-another-moog-filter-thread","posts_count":10,"reply_count":4,"highest_post_number":10,"image_url":null,"created_at":"2020-06-18T18:34:08.290Z","last_posted_at":"2020-07-10T09:36:17.539Z","bumped":true,"bumped_at":"2020-07-10T09:36:17.539Z","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"archetype":"regular","like_count":2,"views":257,"category_id":16,"tags":[],"featured_link":null,"posters":[{"extras":null,"description":"Original Poster","user":{"id":2560,"username":"Khorus","avatar_template":"/user_avatar/community.axoloti.com/khorus/{size}/7207_1.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":790,"username":"lokki","avatar_template":"/user_avatar/community.axoloti.com/lokki/{size}/5157_1.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":967,"username":"SmashedTransistors","avatar_template":"/user_avatar/community.axoloti.com/smashedtransistors/{size}/3147_1.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":745,"username":"jaffasplaffa","avatar_template":"/user_avatar/community.axoloti.com/jaffasplaffa/{size}/5808_1.png"}}]}],"links":[{"url":"https://www.youtube.com/watch?v=oIChUOV_0w4","title":"YouTube","fancy_title":null,"internal":false,"attachment":false,"reflection":false,"clicks":20,"user_id":1129,"domain":"www.youtube.com"},{"url":"https://stash.reaper.fm/28384/DifferentiatedPolynomialWaveTables.pdf","title":null,"fancy_title":null,"internal":false,"attachment":false,"reflection":false,"clicks":12,"user_id":967,"domain":"stash.reaper.fm"},{"url":"https://www.aip.de/groups/soe/local/numres/bookcpdf/c5-8.pdf","title":null,"fancy_title":null,"internal":false,"attachment":false,"reflection":false,"clicks":10,"user_id":967,"domain":"www.aip.de"},{"url":"https://www3.imperial.ac.uk/pls/portallive/docs/1/7292571.PDF","title":null,"fancy_title":null,"internal":false,"attachment":false,"reflection":false,"clicks":8,"user_id":967,"domain":"www3.imperial.ac.uk"},{"url":"https://en.wikipedia.org/wiki/SPICE","title":"SPICE - Wikipedia","fancy_title":null,"internal":false,"attachment":false,"reflection":false,"clicks":7,"user_id":967,"domain":"en.wikipedia.org"},{"url":"https://learningmodular.com/exploring-the-moog-cp3-type-mixer/","title":"Exploring the Moog CP3-Type Mixer | Learning Modular","fancy_title":null,"internal":false,"attachment":false,"reflection":false,"clicks":4,"user_id":1129,"domain":"learningmodular.com"},{"url":"https://cpp.in.ua/nrc/c5-8.pdf","title":null,"fancy_title":null,"internal":false,"attachment":false,"reflection":false,"clicks":4,"user_id":967,"domain":"cpp.in.ua"},{"url":"https://www.embeddedrelated.com/showarticle/152.php","title":"Chebyshev Approximation and How It Can Help You Save Money, Win Friends, and Influence People - Jason Sachs","fancy_title":null,"internal":false,"attachment":false,"reflection":false,"clicks":4,"user_id":967,"domain":"www.embeddedrelated.com"},{"url":"http://emcs.org/acstrial/newsletters/summer09/HowSpiceWorks.pdf","title":null,"fancy_title":null,"internal":false,"attachment":false,"reflection":false,"clicks":4,"user_id":967,"domain":"emcs.org"},{"url":"//community.axoloti.com/uploads/default/original/2X/0/0da4557ce55c8b6e5cf34161a1a1eef566fa3db0.axp","title":null,"fancy_title":null,"internal":true,"attachment":true,"reflection":false,"clicks":3,"user_id":1129,"domain":"community.axoloti.com"},{"url":"//community.axoloti.com/uploads/default/original/2X/0/00e9a365d2e5849f763b3f46a55c6dfbe1d62c6b.axp","title":null,"fancy_title":null,"internal":true,"attachment":true,"reflection":false,"clicks":2,"user_id":1129,"domain":"community.axoloti.com"},{"url":"https://www.fizyka.umk.pl/~jacek/docs/nrc/c5-9.pdf","title":null,"fancy_title":null,"internal":false,"attachment":false,"reflection":false,"clicks":2,"user_id":967,"domain":"www.fizyka.umk.pl"},{"url":"//community.axoloti.com/uploads/default/original/2X/d/d9caa4b219c1c7955568d7e6477ce23adeabb506.axo","title":null,"fancy_title":null,"internal":true,"attachment":true,"reflection":false,"clicks":1,"user_id":1129,"domain":"community.axoloti.com"},{"url":"https://www.fizyka.umk.pl/~jacek/docs/nrc/c5-10.pdf","title":null,"fancy_title":null,"internal":false,"attachment":false,"reflection":false,"clicks":1,"user_id":967,"domain":"www.fizyka.umk.pl"},{"url":"//community.axoloti.com/uploads/default/original/2X/a/aca0c43b3bae86aac2f884312ddf8c6b0e1f5aa5.axp","title":null,"fancy_title":null,"internal":true,"attachment":true,"reflection":false,"clicks":1,"user_id":1129,"domain":"community.axoloti.com"},{"url":"http://community.axoloti.com/t/theslowgrowth-contributions/2959/28","title":"TheSlowGrowth contributions","fancy_title":null,"internal":true,"attachment":false,"reflection":true,"clicks":1,"user_id":1129,"domain":"community.axoloti.com"},{"url":"https://www.muffwiggler.com/forum/viewtopic.php?t=158439","title":"MUFF WIGGLER :: View topic - CP3PLUS Mixer (by FEEDBACK PCB+Panel) (new+old features)","fancy_title":null,"internal":false,"attachment":false,"reflection":false,"clicks":1,"user_id":1129,"domain":"www.muffwiggler.com"},{"url":"//community.axoloti.com/uploads/default/original/2X/6/65392b0933ed79c9bfef2fe3adb49b0c069bbb70.axp","title":null,"fancy_title":null,"internal":true,"attachment":true,"reflection":false,"clicks":1,"user_id":1129,"domain":"community.axoloti.com"},{"url":"//community.axoloti.com/uploads/default/original/2X/6/66f2b15894d08467ee5d95ca0ddd34a0b725bba3.png","title":null,"fancy_title":null,"internal":true,"attachment":true,"reflection":false,"clicks":0,"user_id":1129,"domain":"community.axoloti.com"},{"url":"//community.axoloti.com/uploads/default/original/2X/e/ee0d238b678a0019b432d7de3e84751a618ee568.axp","title":null,"fancy_title":null,"internal":true,"attachment":true,"reflection":false,"clicks":0,"user_id":1129,"domain":"community.axoloti.com"},{"url":"//community.axoloti.com/uploads/default/original/2X/c/c72939a6dd09d0a42ffa6e683fb39d986260215e.png","title":null,"fancy_title":null,"internal":true,"attachment":true,"reflection":false,"clicks":0,"user_id":1129,"domain":"community.axoloti.com"},{"url":"//community.axoloti.com/uploads/default/original/2X/e/e8518c3af12789624aec1e11c6d4c092688281d6.png","title":null,"fancy_title":null,"internal":true,"attachment":true,"reflection":false,"clicks":0,"user_id":1129,"domain":"community.axoloti.com"},{"url":"//community.axoloti.com/uploads/default/original/2X/a/a33d60ee3fcdbf5a06c65204c5a378a106ef44f0.png","title":null,"fancy_title":null,"internal":true,"attachment":true,"reflection":false,"clicks":0,"user_id":1129,"domain":"community.axoloti.com"},{"url":"//community.axoloti.com/uploads/default/original/2X/a/aa1b949a043c208cecbb92e2f1c33d90a6516922.png","title":null,"fancy_title":null,"internal":true,"attachment":true,"reflection":false,"clicks":0,"user_id":1129,"domain":"community.axoloti.com"},{"url":"//community.axoloti.com/uploads/default/original/2X/d/dafc5a480108316b706f0bdaf8d9ae373e536daf.jpg","title":null,"fancy_title":null,"internal":true,"attachment":true,"reflection":false,"clicks":0,"user_id":1129,"domain":"community.axoloti.com"},{"url":"//community.axoloti.com/uploads/default/original/2X/d/d37b4eb1de5f97bc1788d0a27bcdc49a6ca4be45.png","title":null,"fancy_title":null,"internal":true,"attachment":true,"reflection":false,"clicks":0,"user_id":1129,"domain":"community.axoloti.com"},{"url":"//community.axoloti.com/uploads/default/original/2X/a/ac72587fa93173671870b580e859b62212335002.png","title":null,"fancy_title":null,"internal":true,"attachment":true,"reflection":false,"clicks":0,"user_id":1129,"domain":"community.axoloti.com"},{"url":"//community.axoloti.com/uploads/default/original/2X/6/63e2a16e205277267f2fcfbf15684a4b23dcfd7e.png","title":null,"fancy_title":null,"internal":true,"attachment":true,"reflection":false,"clicks":0,"user_id":1129,"domain":"community.axoloti.com"}],"notification_level":1,"can_flag_topic":false},"highest_post_number":27,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":null,"tags":[],"featured_link":null,"topic_timer":null,"message_bus_last_id":150});
      })();
      </script>

    

    <script>
  Ember.RSVP.configure('onerror', function(e) {
    // Ignore TransitionAborted exceptions that bubble up
    if (e && e.message === "TransitionAborted") { return; }

    window.onerror(e && e.message, null,null,null,e);
  });
</script>

<script>

  (function() {
    var ps = require('preload-store').default;

    Discourse.CDN = '';
    Discourse.BaseUrl = 'community.axoloti.com'.replace(/:[\d]*$/,"");
    Discourse.BaseUri = '';
    Discourse.Environment = 'production';
    Discourse.SiteSettings = ps.get('siteSettings');
    Discourse.LetterAvatarVersion = '5_9b142ce9460b8c6b265fd9abf598d3fd';
    I18n.defaultLocale = 'en';
    Discourse.start();
    Discourse.set('assetVersion','d1ec72c862674d2eea0eb8ef6fc5934f');
    Discourse.Session.currentProp("disableCustomCSS", false);
    Discourse.HighlightJSPath = "/highlight-js/community.axoloti.com/100444ceef8ca161334f64d3ce49fe7a1556f943.js";
  })();
</script>

<link rel='preload' href='/assets/browser-update-f57286e74ddbc53aa899689b01ef467078911e4138050c561939955849af35dd.js' as='script'/>
<script src='/assets/browser-update-f57286e74ddbc53aa899689b01ef467078911e4138050c561939955849af35dd.js'></script>


    

      
    
  </body>
</html>
