<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from community.axoloti.com/t/modelling-analog-circuits-in-software/4013?page=2 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 19 Jul 2023 04:25:09 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Modelling analog circuits in software - AxoObject coding - Axoloti Community</title>
    <meta name="description" content="Hi everyone, 

I&amp;#39;m about to start a journey into modelling analog circuits. The topic has been in my head for some time already and I want to finally get started. What I&amp;#39;m looking for now is some fellows to go through th&amp;hellip;">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.9.0.beta3 - https://github.com/discourse/discourse version 13f3de4bf673802eb8ec595d36587b4524773209">
<link rel="icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="40134658.html?page=2" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"http://community.axoloti.com","potentialAction":{"@type":"SearchAction","target":"http://community.axoloti.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Axoloti Community Search">

        <link href="../../stylesheets/desktop_d93a33ca8617326fe353f80e6ab865188244d48c8e0b.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop"/>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','../../../www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Modelling analog circuits in software&#39;" href="4013.rss" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:url" content="http://community.axoloti.com/t/modelling-analog-circuits-in-software/4013?page=2" />
<meta name="twitter:url" content="http://community.axoloti.com/t/modelling-analog-circuits-in-software/4013?page=2" />
<meta property="og:title" content="Modelling analog circuits in software" />
<meta name="twitter:title" content="Modelling analog circuits in software" />
<meta property="og:description" content="Another advantage of polynomial segments is that you can use integro differential anti aliasing to limit aliasing.     (appendix A.3)   I use this trick to limit aliasing in many distortion objects in tiar/dist" />
<meta name="twitter:description" content="Another advantage of polynomial segments is that you can use integro differential anti aliasing to limit aliasing.     (appendix A.3)   I use this trick to limit aliasing in many distortion objects in tiar/dist" />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="10 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="25 ❤" />

      <link rel="prev" href="4013.html">

  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html"><img src="../../uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo" style="max-width: 150px;"></a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1>
  <a href="4013.html">Modelling analog circuits in software</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/axoobject-code.html" itemprop="url">
        <span itemprop="title">AxoObject coding</span>
      </a>
    </div>
</div>





<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/SmashedTransistors.html'><b itemprop='author'>SmashedTransistors</b></a>
           
           <time datetime='2017-12-15T21:10:55Z' itemprop='datePublished'>
             2017-12-15 21:10:55 UTC
           </time>
        </span>
        <span itemprop='position'>#21</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Another advantage of polynomial segments is that you can use integro differential anti aliasing to limit aliasing.</p>

<p><aside class="onebox pdf">
  <header class="source">
    <a href="https://stash.reaper.fm/28384/DifferentiatedPolynomialWaveTables.pdf" target="_blank" rel="nofollow noopener">stash.reaper.fm</a>
  </header>
  <article class="onebox-body">
    <a href="https://stash.reaper.fm/28384/DifferentiatedPolynomialWaveTables.pdf" target="_blank" rel="nofollow noopener"><span class="pdf-onebox-logo"></span></a>
<h3><a href="https://stash.reaper.fm/28384/DifferentiatedPolynomialWaveTables.pdf" target="_blank" rel="nofollow noopener">DifferentiatedPolynomialWaveTables.pdf</a></h3>

<p class="filesize">0 B</p>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
<br>(appendix A.3)</p>

<p>I use this trick to limit aliasing in many distortion objects in tiar/dist</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Modelling analog circuits in software'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/TheSlowGrowth.html'><b itemprop='author'>TheSlowGrowth</b></a>
           
           <time datetime='2017-12-20T09:10:17Z' itemprop='datePublished'>
             2017-12-20 09:10:17 UTC
           </time>
        </span>
        <span itemprop='position'>#22</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Okay, so I think I'm pretty much done with this simple diode circuit. The final version, which is uploaded to the community library, uses two lookup tables - one for the lower 1/8th of the input range (high resolution), and one for the remaining 7/8 (lower resolution)<br>I was not getting anywhere with any other approximation I've tried - polynomials, weighted taylor expansions, segmented polynomials - it was all either too inaccurate or simply not worth the additional computation cycles. In the end the best performance-to-computation ratio was the dual-lookup table method. And given the large program memory of the STM32, it doesn't really affect anything to have a large lookup table somewhere in the flash (to my knowledge, const global variables will be put into the flash memory - or am I wrong here?)<br>Still, the object consumes ~4% CPU which is a little too much for my taste, but meh, I'm not gonna optimize this further.</p>

<p>The factory <code>dist/soft</code> (which is a simple polynomial distortion) consumes ~0.5% CPU but sounds a little less dirty to my ears. The diode distortion has more pleasing overtones, but if CPU cycles are a concern, I'd consider the factory version the better choice.</p>

<p>So the next circuit I'd like to takle is the Moog CP3 mixer. This is another relatively simple circuit (I hope), but it has plenty of interesting characteristics, including </p>

<ul>
<li>different distortion on its positive and negative outputs, </li>
<li>a type of distortion that enhances the bass instead of cutting it away</li>
<li>a kind of compression due to the way the mixbus is designed (ducking the other inputs when you increase the volume of a channel)</li>
</ul>

<p>It is said to be a substantial part of the massive sound of a Moog modular. So, let's see how much of that Mojo we can recreate on the Axoloti, shall we?</p>

<p><a href="https://learningmodular.com/exploring-the-moog-cp3-type-mixer/" rel="nofollow noopener">Here's the original schematic and a video showing some of the interesting features of this mixer</a>. I'm going to build the mixer after the <a href="https://www.muffwiggler.com/forum/viewtopic.php?t=158439" rel="nofollow noopener">schematics from this clone</a> which contains only the typical parts every DIYer will probably have somewhere in their drawer.</p>

<p>I'll be off to visit my family during the festive season, but I'll be tackling this in the new year. If anybody want's to start working on this, I'll happily follow along, but I won't have time to actually build the real thing in the next few weeks.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:2'>
      <meta itemprop='interactionCount' content='UserComments:2'>
      <meta itemprop='headline' content='Modelling analog circuits in software'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/Ott.html'><b itemprop='author'>Ott</b></a>
           
           <time datetime='2017-12-20T09:56:26Z' itemprop='datePublished'>
             2017-12-20 09:56:26 UTC
           </time>
        </span>
        <span itemprop='position'>#23</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I don't have the EE degree required to understand this thread, but I like reading about your progress anyways. Keep working at it, at least until you get a gnarly filter!</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Modelling analog circuits in software'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/TheSlowGrowth.html'><b itemprop='author'>TheSlowGrowth</b></a>
           
           <time datetime='2017-12-20T09:58:58Z' itemprop='datePublished'>
             2017-12-20 09:58:58 UTC
           </time>
        </span>
        <span itemprop='position'>#24</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Haha, I had in mind to do a Moog ladder filter, but <a class="mention" href="../../u/smashedtransistors-2.html">@SmashedTransistors</a> did that already <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"><br>Maybe I'll do an oberheim filter or something. But let's be realistic. I think the CP-3 mixer is a lot tougher than the diode circuit already.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Modelling analog circuits in software'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/SmashedTransistors.html'><b itemprop='author'>SmashedTransistors</b></a>
           
           <time datetime='2017-12-20T19:30:43Z' itemprop='datePublished'>
             2017-12-20 19:30:43 UTC
           </time>
        </span>
        <span itemprop='position'>#26</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>The 24dB/oct filter in tiar/filter/MgExp replicates the frequency response of the filter with a specific "ZDF" method (step invariant transform). It allows fast modulation without glitches and stable high resonance even with high cutoffs...</p>

<p><strong>but</strong>...</p>

<p>It does not implement any <strong>non linearities</strong>. It is a personal choice as - contrarily to a vast majority of analog synth addicts - I consider that stage distortions/saturations have a moderate impact on the tone in that steep Low Pass filter. I think that the main concern here are dynamics when modulating the cutoff.</p>

<hr>

<p>The transistor based mixer is another story ! <br>When i see the schematics, i guess that its non linearities <em>cannot be neglected at all</em>.<br>Maybe the best way to experiment with it is to model it with Spice at first (before building a hardware replica).</p>

<p>Non linear mixing is very interesting as it adds <em>intermodulations</em> between the inputs.</p>

<p>I did a simple non linear mixer object (tiar/dist/SqrtMix4 object and help patch) that is based on squares (as in x²) and square root. It is not based on any hardware but it can give some ideas for an advanced design.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:3'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Modelling analog circuits in software'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/Ott.html'><b itemprop='author'>Ott</b></a>
           
           <time datetime='2018-03-06T18:13:15Z' itemprop='datePublished'>
             2018-03-06 18:13:15 UTC
           </time>
        </span>
        <span itemprop='position'>#27</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Happy new year! How's this project going? If it's too complicated, maybe you can try one of Korg's single-transistor VCA designs.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Modelling analog circuits in software'>
      <hr>
  </div>

  <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement'>
      <span itemprop='url'><a rel="prev" itemprop="name" href="4013.html">← previous page</a></span>
  </div>





    </div>
    <footer class="container">
      <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <a href='../../index.html'>Home</a>
        <a href="../../categories.html">Categories</a>
        <a href="../../guidelines.html">FAQ/Guidelines</a>
        <a href="../../tos.html">Terms of Service</a>
        <a href="../../privacy.html">Privacy Policy</a>
      </nav>
      <p>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  

<!-- Mirrored from community.axoloti.com/t/modelling-analog-circuits-in-software/4013?page=2 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 19 Jul 2023 04:25:09 GMT -->
</html>
