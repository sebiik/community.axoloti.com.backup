<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from community.axoloti.com/t/replace-any-audio-cycle-with-a-sign-wave-object/4325 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 16 Jul 2023 18:40:44 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Replace any audio cycle with a sign wave object - Patching - Axoloti Community</title>
    <meta name="description" content="What I am thinking of, is every time an audio signal completes a cycle, say zero to positive, positive pass zero to negative and back to zero, based on where the signal passes zero, then generates a sine wave that passes&amp;hellip;">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.9.0.beta3 - https://github.com/discourse/discourse version 13f3de4bf673802eb8ec595d36587b4524773209">
<link rel="icon" type="image/png" href="https://sebiik.github.io/community.axoloti.com.backup/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="https://sebiik.github.io/community.axoloti.com.backup/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="https://sebiik.github.io/community.axoloti.com.backup/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="4325.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"http://community.axoloti.com","potentialAction":{"@type":"SearchAction","target":"http://community.axoloti.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Axoloti Community Search">

        <link href="../../stylesheets/desktop_d93a33ca8617326fe353f80e6ab865188244d48c8e0b.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop"/>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Replace any audio cycle with a sign wave object&#39;" href="4325.rss" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:url" content="http://community.axoloti.com/t/replace-any-audio-cycle-with-a-sign-wave-object/4325" />
<meta name="twitter:url" content="http://community.axoloti.com/t/replace-any-audio-cycle-with-a-sign-wave-object/4325" />
<meta property="og:title" content="Replace any audio cycle with a sign wave object" />
<meta name="twitter:title" content="Replace any audio cycle with a sign wave object" />
<meta property="og:description" content="What I am thinking of, is every time an audio signal completes a cycle, say zero to positive, positive pass zero to negative and back to zero, based on where the signal passes zero, then generates a sine wave that passes zero at the same spots. I don&#39;t care if it is a half cycle, or full cycle behind to achieve it, I think this is OK. The only thing I can think of is to count the samples every time it passes zero and generate a signal based on that, but I am not yet sure how to do this yet, but ..." />
<meta name="twitter:description" content="What I am thinking of, is every time an audio signal completes a cycle, say zero to positive, positive pass zero to negative and back to zero, based on where the signal passes zero, then generates a sine wave that passes zero at the same spots. I don&#39;t care if it is a half cycle, or full cycle behind to achieve it, I think this is OK. The only thing I can think of is to count the samples every time it passes zero and generate a signal based on that, but I am not yet sure how to do this yet, but ..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="2 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="1 ❤" />


  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html"><img src="http://community.axoloti.com/uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo" style="max-width: 150px;"></a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1>
  <a href="4325.html">Replace any audio cycle with a sign wave object</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/patching.html" itemprop="url">
        <span itemprop="title">Patching</span>
      </a>
    </div>
</div>





<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/Gavin.html'><b itemprop='author'>Gavin</b></a>
           
           <time datetime='2018-03-07T02:27:10Z' itemprop='datePublished'>
             2018-03-07 02:27:10 UTC
           </time>
        </span>
        <span itemprop='position'>#1</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>What I am thinking of, is every time an audio signal completes a cycle, say zero to positive, positive pass zero to negative and back to zero, based on where the signal passes zero, then generates a sine wave that passes zero at the same spots. I don't care if it is a half cycle, or full cycle behind to achieve it, I think this is OK. The only thing I can think of is to count the samples every time it passes zero and generate a signal based on that, but I am not yet sure how to do this yet, but was wondering if there was an easier way, like maybe just sending a freq value to an OSC to change to the freq required.<br>So its not about reading the freq from the audio signal, its more just mimicking where it passes zero.<br><img src="http://community.axoloti.com/images/emoji/twitter/thinking.png?v=5" title=":thinking:" class="emoji" alt=":thinking:"></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Replace any audio cycle with a sign wave object'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/DrJustice-2.html'><b itemprop='author'>DrJustice</b></a>
           
           <time datetime='2018-03-07T19:31:07Z' itemprop='datePublished'>
             2018-03-07 19:31:07 UTC
           </time>
        </span>
        <span itemprop='position'>#2</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>How to do it depends on the kind of output you want and how advanced you want to go.</p>

<p>If you want to track well behaved repeating waveforms with only two zero crossings per period and possibly asymmetry in the half periods, you can count the half periods and generate sine half periods accordingly, although there will be some jitter in the output since only integer half periods are used. If the input waveform has multiple zero crossings per half period, this method doesn't work too well since the reconstructed waveform lags the input by one zero crossing. For an arbitrary source signal all bets are off.</p>

<p>The situation can be improved (again depending on what output  you want) by pre filtering the source signal if you don't need to track more than two zero crossings per period. You can also simply take the sign of the source wave (as the matching square output) and low pass filter that to approximate a sine wave.</p>

<p>You could also measure the frequency of the fundamental, but then you will not be able to track asymmetry in the half periods or multiple zero crossing per half period, so again it depends on what kind of output you want.</p>

<p>I've attached an experimental patch with a simplistic embedded "sign_wave" object to play around with this based on the above techniques. It has some controls on the left hand side to let you play around with different source signals and enable pre filtering. The sign_wave object also has one control to control sine half period overshoot. The top row of oscilloscopes shows the various outputs, the bottom row shows the source signal. Regarding pre and post filtering; if the pitch control for the source signal is available you could use that to make the filters track the frequency of the source (can be done in the attached patch by connecting the pitch control to the filters pitch inputs).</p>

<p>Somebody else can probably give you a much more clever solution - this was just an experiment made because your posting made me curious.</p>

<p><a class="attachment" href="../../uploads/default/original/2X/8/test_sign_wave_embedded.axp">test_sign_wave_embedded.axp</a> (9.8 KB)</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Replace any audio cycle with a sign wave object'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/Gavin.html'><b itemprop='author'>Gavin</b></a>
           
           <time datetime='2018-03-07T21:31:01Z' itemprop='datePublished'>
             2018-03-07 21:31:01 UTC
           </time>
        </span>
        <span itemprop='position'>#3</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Thanks Dr J,<br>The way you describe it is certainly the original direction I thought the only solution was available, and I am very interested in testing it.<br>But I also had an odd epiphany about half hour ago, and I thought, can I just simply count the samples per crossing, divide that value by 48,000 and then that will give me the freq to send to an OSC to change to that freq. ? its morning here, so will have to wait till tonight to test it. I know it seams crude, but crude might be all I need.<br><img src="http://community.axoloti.com/images/emoji/twitter/thinking.png?v=5" title=":thinking:" class="emoji" alt=":thinking:"></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Replace any audio cycle with a sign wave object'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/DrJustice-2.html'><b itemprop='author'>DrJustice</b></a>
           
           <time datetime='2018-03-07T22:09:43Z' itemprop='datePublished'>
             2018-03-07 22:09:43 UTC
           </time>
        </span>
        <span itemprop='position'>#4</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Sure you can derive the approximate frequency from counting samples between zero crossings and just drive a sine oscillator with that. However, you'll then have that oscillator drifting in frequency relative to the input signal, there will be no fixed phase relationship and asymmetric half periods will not be part of it. If no direct relationship is needed you can count zero crossings for several periods and take an average to track frequency more precisely. From your OP I assumed that you wanted to track the source signal precisely, but I may have misunderstood.</p>

<p>There are also other more advanced methods you could use, such as an FFT for analysis of the source signal and reconstruction as a sine, although that'll use a lot of CPU power. You could also use the period counting method and use some clever curve fitting method to get a sine like output.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Replace any audio cycle with a sign wave object'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/Gavin.html'><b itemprop='author'>Gavin</b></a>
           
           <time datetime='2018-03-08T00:06:31Z' itemprop='datePublished'>
             2018-03-08 00:06:31 UTC
           </time>
        </span>
        <span itemprop='position'>#5</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I think possibly my lack of experiences hinders the understanding I require to match my OP. First goal was to find a way to obtain a cleaner signal then the one coming from my bass guitar, this way I could possibly consider signal manipulation a little more relevant to a lot of the synth type analyzing that is often discussed on the forum. I know this might seem like I am just swapping one audio signal for a synth one, but there is a little more to it than that from what I am thinking, its more about having a signal that I can manipulate for possible potential triggers or re-shapes that may or may not interact with other audio sources etc, and so my thought was to have a signal in its most basic form to work with.<br>You are likely correct that I will require something more precise, but I am always open to crude methods as well as they provide some randomness, the ability to perceive a more natural outcome if possible.<br>I know it might seem long winded, and that could use things like freq detectors, or audio to midi converters and so on, but my goal is to not use these, come up with ideas a little different, and of course most importantly keep CPU usage on the Axo to a minimum.<br><img src="http://community.axoloti.com/images/emoji/twitter/grin.png?v=5" title=":grin:" class="emoji" alt=":grin:"><br>Looking forward to trying out your patch..<br><img src="http://community.axoloti.com/images/emoji/twitter/wink.png?v=5" title=":wink:" class="emoji" alt=":wink:"></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Replace any audio cycle with a sign wave object'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/DrJustice-2.html'><b itemprop='author'>DrJustice</b></a>
           
           <time datetime='2018-03-08T01:34:42Z' itemprop='datePublished'>
             2018-03-08 01:34:42 UTC
           </time>
        </span>
        <span itemprop='position'>#6</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Right, it helps to know the intended application. Browsing the object library I see that <a class="mention" href="../../u/sirsicksik-2.html">@SirSickSik</a> has made a pitch tracking object using averaging of zero crossings, which you want to look at as well. I suppose both phase locked and free running solutions have their uses for experimenting with bass (or any input) analysis/processing/synthesis.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Replace any audio cycle with a sign wave object'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/Gavin.html'><b itemprop='author'>Gavin</b></a>
           
           <time datetime='2018-03-08T01:50:15Z' itemprop='datePublished'>
             2018-03-08 01:50:15 UTC
           </time>
        </span>
        <span itemprop='position'>#7</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Thanks, I must have passed over it not realizing what it can do.<br>I am also starting to realize different ways of generating control variations just from counting samples at zero crossing..<br>More doors are opening today...</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Replace any audio cycle with a sign wave object'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/SirSickSik.html'><b itemprop='author'>SirSickSik</b></a>
           
           <time datetime='2018-03-08T09:03:37Z' itemprop='datePublished'>
             2018-03-08 09:03:37 UTC
           </time>
        </span>
        <span itemprop='position'>#8</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Don't forget to use a lowpass filter before trying to count the zero-crossings.<br>The cutoff frequency can be set pretty low, as you only need the zero crossings and even if you almost totally filter away the sound, it will always still move a bit around the zero. In some cases it's also useful to add a HP filter to remove possible DC-offset (also set at a fairly low cutoff frequency, 15-30 hz will be enough).</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Replace any audio cycle with a sign wave object'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/SirSickSik.html'><b itemprop='author'>SirSickSik</b></a>
           
           <time datetime='2018-03-08T09:10:50Z' itemprop='datePublished'>
             2018-03-08 09:10:50 UTC
           </time>
        </span>
        <span itemprop='position'>#9</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>btw, another way to do this is by phase-lock-looping.<br>Use a comparator over the output of a sine oscillator and your original signal. Then put a lowpass filter over this comparator and use this to control the pitch of the sine oscillator (feedback path).<br>As long a the original signal is higher then the sine oscillator, it will increase it's frequency and vice versa. Thanks to the lowpass filter, the avaraged frequency/pitch outcome will end up being a integer division/multiplication of the original signal's frequency.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Replace any audio cycle with a sign wave object'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/Gavin.html'><b itemprop='author'>Gavin</b></a>
           
           <time datetime='2018-03-08T09:58:46Z' itemprop='datePublished'>
             2018-03-08 09:58:46 UTC
           </time>
        </span>
        <span itemprop='position'>#10</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Thanks for tips <a class="mention" href="../../u/drjustice.html">@DrJustice</a> &amp; <a class="mention" href="../../u/sirsicksik-2.html">@SirSickSik</a>, !!<img src="http://community.axoloti.com/images/emoji/twitter/grin.png?v=5" title=":grin:" class="emoji" alt=":grin:"> <br>I'm working on it.. The doorways a bit tight, but i'll get through it.. <img src="http://community.axoloti.com/images/emoji/twitter/persevere.png?v=5" title=":persevere:" class="emoji" alt=":persevere:"> I hope..</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Replace any audio cycle with a sign wave object'>
      <hr>
  </div>






    </div>
    <footer class="container">
      <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <a href='../../index.html'>Home</a>
        <a href="../../categories.html">Categories</a>
        <a href="../../guidelines.html">FAQ/Guidelines</a>
        <a href="../../tos.html">Terms of Service</a>
        <a href="../../privacy.html">Privacy Policy</a>
      </nav>
      <p>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  

<!-- Mirrored from community.axoloti.com/t/replace-any-audio-cycle-with-a-sign-wave-object/4325 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 16 Jul 2023 18:40:46 GMT -->
</html>
