<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from community.axoloti.com/t/midi-thru-with-filters-i-have-it-working-as-script-but-want-to-make-an-object/5927/5 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 19 Jul 2023 03:14:43 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Midi Thru with filters...I have it working as script but want to make an object - AxoObject coding - Axoloti Community</title>
    <meta name="description" content="Beginner questions. 

My new midi keyboard doesn&amp;#39;t have zones, so I looked into getting the Ax to do that for me. I&amp;#39;ve done a lot of coding, but nothing on the Ax before. 

Here&amp;#39;s the script, modded from a simple thru fo&amp;hellip;">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.9.0.beta3 - https://github.com/discourse/discourse version 13f3de4bf673802eb8ec595d36587b4524773209">
<link rel="icon" type="image/png" href="../../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="../../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="../5927.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://sebiik.github.io/community.axoloti.com.backup","potentialAction":{"@type":"SearchAction","target":"https://sebiik.github.io/community.axoloti.com.backup/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="Axoloti Community Search">

        <link href="../../../stylesheets/desktop_d93a33ca8617326fe353f80e6ab865188244d48c8e0b.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop"/>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','../../../../www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Midi Thru with filters...I have it working as script but want to make an object&#39;" href="../5927.rss" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://sebiik.github.io/community.axoloti.com.backup/user_avatar/community.axoloti.com/mattilynmattroe/200/7160_1.png" />
<meta property="og:image" content="https://sebiik.github.io/community.axoloti.com.backup/user_avatar/community.axoloti.com/mattilynmattroe/200/7160_1.png" />
<meta property="og:url" content="https://sebiik.github.io/community.axoloti.com.backup/t/midi-thru-with-filters-i-have-it-working-as-script-but-want-to-make-an-object/5927/5" />
<meta name="twitter:url" content="https://sebiik.github.io/community.axoloti.com.backup/t/midi-thru-with-filters-i-have-it-working-as-script-but-want-to-make-an-object/5927/5" />
<meta property="og:title" content="Midi Thru with filters...I have it working as script but want to make an object" />
<meta name="twitter:title" content="Midi Thru with filters...I have it working as script but want to make an object" />
<meta property="og:description" content="Check this out for making new objects, etc." />
<meta name="twitter:description" content="Check this out for making new objects, etc." />


  </head>
  <body class="crawler">
    
    <header>
      <a href="../../../index.html"><img src="../../../uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo" style="max-width: 150px;"></a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1>
  <a href="../5927.html">Midi Thru with filters...I have it working as script but want to make an object</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../../c/axoobject-code.html" itemprop="url">
        <span itemprop="title">AxoObject coding</span>
      </a>
    </div>
</div>

    <div class='tags-list' itemscope itemtype='http://schema.org/ItemList'>
        <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
          <meta itemprop='url' content='../../../tags/midi.html'>
          <a href='../../../tags/midi.html' itemprop='item'>
            <span itemprop='name'>midi</span>
          </a>
        </div>
    </div>




<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/andybutler.html'><b itemprop='author'>andybutler</b></a>
           
           <time datetime='2019-08-17T15:27:46Z' itemprop='datePublished'>
             2019-08-17 15:27:46 UTC
           </time>
        </span>
        <span itemprop='position'>#1</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Beginner questions.</p>

<p>My new midi keyboard doesn't have zones, so I looked into getting the Ax to do that for me.<br>I've done a lot of coding, but nothing on the Ax before.</p>

<p>Here's the script, modded from a simple thru found on the forum ( I've looked for a MidiThru object, seen mention of it but can't find the actual file)</p>

<p>if (dev == MIDI_DEVICE_USB_HOST) {<br>  uint8_t status_type = status &amp; 0xF0;<br>  uint8_t midi_ch     = status &amp; 0x0F;<br>  uint8_t split_note  = 0x3F;<br>  uint8_t left_zone_ch= 0x01;<br>  uint8_t right_zone_ch= 0x00;</p>

<p>  if ((status_type == MIDI_CONTROL_CHANGE) ||<br>      (status_type == MIDI_POLY_PRESSURE) ||<br>      (status_type == MIDI_PITCH_BEND)) {<br>    MidiSend3(MIDI_DEVICE_DIN,0,status,data1,data2);<br>  } else if ((status_type == MIDI_PROGRAM_CHANGE) ||<br>      (status_type == MIDI_CHANNEL_PRESSURE)) {<br>    MidiSend2(MIDI_DEVICE_DIN,0,status,data1);<br>  } else if ((status_type == MIDI_NOTE_OFF) ||<br>      (status_type == MIDI_NOTE_ON)){<br>    uint8_t status_ch = status;<br>    if ( data1&lt;split_note ) {<br>    	 status_ch = status_type | left_zone_ch;<br>    } else {<br>    	 status_ch = status_type | right_zone_ch;<br>    }<br>    MidiSend3(MIDI_DEVICE_DIN,0,status_ch,data1,data2);  	<br>  }<br>}</p>

<p>So it just sends the top half of the keyboard to Ch1, bottom half to Ch2. Any commands other than Notes keep their channel.</p>

<p>To some extent I can just work on the script do whatever want as regards octave shifts or whatever, but I'd like to make it configurable by midi Prog Ch for performance.</p>

<p>I read that the script obj is deprecated, and I want to be able to write to persistent variables.</p>

<p>So any pointers as to how to take the next step, which is presumably to move that code over to an object?</p>

<p>Where can I look at the functions and variables that will be in scope for the code in the objects?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Midi Thru with filters...I have it working as script but want to make an object'>
      <hr>
            <a href="../../need-a-bit-of-help-with-midi-forwarding/5942/7.html">Need a bit of help with MIDI forwarding</a>
            <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/lokki.html'><b itemprop='author'>lokki</b></a>
           
           <time datetime='2019-08-17T16:50:16Z' itemprop='datePublished'>
             2019-08-17 16:50:16 UTC
           </time>
        </span>
        <span itemprop='position'>#2</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>just create a new object in the patcher and paste your code into the midi tab after opening the edit portion of the object. i think that should just work...</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Midi Thru with filters...I have it working as script but want to make an object'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/andybutler.html'><b itemprop='author'>andybutler</b></a>
           
           <time datetime='2019-08-17T17:30:48Z' itemprop='datePublished'>
             2019-08-17 17:30:48 UTC
           </time>
        </span>
        <span itemprop='position'>#3</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>thanks, I still need help with that though ;-(</p>

<p>Edit&gt;New Object only seems to let me load existing objects</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:2'>
      <meta itemprop='headline' content='Midi Thru with filters...I have it working as script but want to make an object'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/lokki.html'><b itemprop='author'>lokki</b></a>
           
           <time datetime='2019-08-17T17:58:28Z' itemprop='datePublished'>
             2019-08-17 17:58:28 UTC
           </time>
        </span>
        <span itemprop='position'>#4</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>try typing object in the search field, it should give you an empty object.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Midi Thru with filters...I have it working as script but want to make an object'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/MattilynMattroe.html'><b itemprop='author'>MattilynMattroe</b></a>
           
           <time datetime='2019-08-17T17:58:49Z' itemprop='datePublished'>
             2019-08-17 17:58:49 UTC
           </time>
        </span>
        <span itemprop='position'>#5</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Check this out for making new objects, etc.</p>

<aside class="quote" data-post="1" data-topic="2606">
  <div class="title">
    <div class="quote-controls"></div>
    <img alt="" width="20" height="20" src="../../../user_avatar/community.axoloti.com/sputnki/40/175_1.png" class="avatar">
    <a href="../../coding-axoloti-objects/26066c64.html?source_topic_id=5927" rel="nofollow noopener">Coding axoloti objects</a> <a class="badge-wrapper  bullet" href="../../../c/user-guide.html"><span class="badge-category-bg" style="background-color: #3AB54A;"></span><span style="color: #FFFFFF;" class="badge-category clear-badge" title="This category contains posts to help users use Axoloti, a dynamic user guide.">User Guide</span></a>
  </div>
  <blockquote>
    A pretty big subject, but i think it might be useful to shed some light for newbies: 

Contents


<a href="#needtoknow">What do you need to know to code objects</a>
<a href="#startcoding">How do you start coding an object?</a>
<a href="#editlibrary">How do you edit a library object?</a>
<a href="#codeinout">Coding with input/output (and parameters)</a>
<a href="#localdata">Local data</a>
<a href="#initcode">Init code</a>
<a href="#kratesrate">K-rate and S-rate cycles</a>
<a href="#inletsoutlets">Inlets/Outlets</a>
<a href="#parameters">Parameters</a>
<a href="#rangeformat">Normal range and number format</a>
<a href="#elementarymath">Elementary math in axoloti</a>
<a href="#32bitvar">32bit variables</a>
<a href="#bitshifts">Bitshifts</a>
<a href="#fixedpointmath">Fixed point math</a>
<a href="#functions">Functions</a>
<a href="#assembly">Assembly functions</a>
<a href="#bitwise">Bitwise operations</a>





<a name="needtoknow" href="#"></a>What do you need to know…
  </blockquote>
</aside>

      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Midi Thru with filters...I have it working as script but want to make an object'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/andybutler.html'><b itemprop='author'>andybutler</b></a>
           
           <time datetime='2019-08-17T18:56:19Z' itemprop='datePublished'>
             2019-08-17 18:56:19 UTC
           </time>
        </span>
        <span itemprop='position'>#6</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p><img src="../../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"><br>OK. Thanks for advice, I'm not quite there though.</p>

<p>"typing object in search field" always seems to find an object, not a blank canvas.<br>(otoh I now found a midi-thru object by a773...it's all learning)</p>

<p>The "Coding axoloti Objects" text has "create a patch/object object"....doesn't say how.</p>

<p>Doesn't seem to be a "Save As" option available if starting from an existing object.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Midi Thru with filters...I have it working as script but want to make an object'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/MattilynMattroe.html'><b itemprop='author'>MattilynMattroe</b></a>
           
           <time datetime='2019-08-17T21:40:08Z' itemprop='datePublished'>
             2019-08-17 21:40:08 UTC
           </time>
        </span>
        <span itemprop='position'>#7</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>You create the the patch/object by typing object into the search bar... The object that loads IS the blank canvas. It's basically an empty object. Click the edit button to edit it with your code.</p>

<p>Good luck!</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Midi Thru with filters...I have it working as script but want to make an object'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/andybutler.html'><b itemprop='author'>andybutler</b></a>
           
           <time datetime='2019-08-18T09:03:48Z' itemprop='datePublished'>
             2019-08-18 09:03:48 UTC
           </time>
        </span>
        <span itemprop='position'>#8</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>hi Mattilyn,<br>thanks for helping.<br> I already followed lokki's instruction.<br>When I type into the search bar the editor loads an existing object.<br>e.g. <br>as soon as i type 'a' it loads a "logic AND' object.</p>

<p>So is that a bug? does it work for you?</p>

<p>....and there's no "save as" option, which would allow to create a new  (copy) object without overwriting the original</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Midi Thru with filters...I have it working as script but want to make an object'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/MattilynMattroe.html'><b itemprop='author'>MattilynMattroe</b></a>
           
           <time datetime='2019-08-18T09:27:22Z' itemprop='datePublished'>
             2019-08-18 09:27:22 UTC
           </time>
        </span>
        <span itemprop='position'>#9</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Something doesn't sound right, so try this:</p>

<p>Open a new patch and double click the background, type object into the search bar and you should see this:</p>

<p><div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/6cdad5ed1cd8e0baf4fbb539d3e9e9b5d5eaeecd" href="../../../uploads/default/original/2X/6/6cdad5ed1cd8e0baf4fbb539d3e9e9b5d5eaeecd.jpg" class="lightbox" title="20190818_102029.jpg"><img src="../../../uploads/default/optimized/2X/6/6cdad5ed1cd8e0baf4fbb539d3e9e9b5d5eaeecd_1_666x500.jpg" width="666" height="500"><div class="meta">
<span class="filename">20190818_102029.jpg</span><span class="informations">2015x1511 1.51 MB</span><span class="expand"></span>
</div></a></div></p>

<p>Double click the highlighted patch/object and it should load the empty object and look like this:</p>

<p><div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/36d8447d45490fe605da2352ea2f156abcc63376" href="../../../uploads/default/original/2X/3/36d8447d45490fe605da2352ea2f156abcc63376.jpg" class="lightbox" title="20190818_102037.jpg"><img src="../../../uploads/default/optimized/2X/3/36d8447d45490fe605da2352ea2f156abcc63376_1_666x500.jpg" width="666" height="500"><div class="meta">
<span class="filename">20190818_102037.jpg</span><span class="informations">2851x2138 2.81 MB</span><span class="expand"></span>
</div></a></div></p>

<p>Click the edit button on the object and that's where you put the code. Should look like this:</p>

<p><div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/d4b215ca25dee3c7749f7ade9f3c8a77a34b66a7" href="../../../uploads/default/original/2X/d/d4b215ca25dee3c7749f7ade9f3c8a77a34b66a7.jpg" class="lightbox" title="20190818_102047.jpg"><img src="../../../uploads/default/optimized/2X/d/d4b215ca25dee3c7749f7ade9f3c8a77a34b66a7_1_666x500.jpg" width="666" height="500"><div class="meta">
<span class="filename">20190818_102047.jpg</span><span class="informations">2015x1511 1.55 MB</span><span class="expand"></span>
</div></a></div></p>

<p>Use the tabs on the left to see where you can put the code, you'll prob want the midi tab.</p>

<p>Put your code in, close the object editor and test...<br>At this point your object is saved in the patch, not the library.<br>When it's working open the object editor and then from the top menu file/copy to library. Choose 'home' as the library, give it a name and save it. Now it should show in the object library for use in other patches.</p>

<p>Hope that works!</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Midi Thru with filters...I have it working as script but want to make an object'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/andybutler.html'><b itemprop='author'>andybutler</b></a>
           
           <time datetime='2019-08-18T09:36:24Z' itemprop='datePublished'>
             2019-08-18 09:36:24 UTC
           </time>
        </span>
        <span itemprop='position'>#10</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Ahhh!<br>type "object", not object.<br>I was typing in the name of the object.</p>

<p>thankyou</p>

<p>Now how do I save it?<br>"Save as" doesn't exist.<br>"Save" is greyed out, although I don't in any case want to</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Midi Thru with filters...I have it working as script but want to make an object'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/MattilynMattroe.html'><b itemprop='author'>MattilynMattroe</b></a>
           
           <time datetime='2019-08-18T09:39:30Z' itemprop='datePublished'>
             2019-08-18 09:39:30 UTC
           </time>
        </span>
        <span itemprop='position'>#11</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>It automatically saves with the patch when you close the editor and save the patch. To save the object in the library for other patches, use 'copy to library' from the file menu in the object editor...</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Midi Thru with filters...I have it working as script but want to make an object'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/andybutler.html'><b itemprop='author'>andybutler</b></a>
           
           <time datetime='2019-08-18T10:59:32Z' itemprop='datePublished'>
             2019-08-18 10:59:32 UTC
           </time>
        </span>
        <span itemprop='position'>#12</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Excellent.<br>Thankyou.</p>

<p>so if I save in 'contrib' will that be shared?</p>

<p>If so I won't put stuff 'under construction' in there.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Midi Thru with filters...I have it working as script but want to make an object'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/MattilynMattroe.html'><b itemprop='author'>MattilynMattroe</b></a>
           
           <time datetime='2019-08-18T11:19:24Z' itemprop='datePublished'>
             2019-08-18 11:19:24 UTC
           </time>
        </span>
        <span itemprop='position'>#13</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>It won't be shared unless you set up stuff on github I think.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Midi Thru with filters...I have it working as script but want to make an object'>
      <hr>
  </div>






    </div>
    <footer class="container">
      <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <a href='../../../index.html'>Home</a>
        <a href="../../../categories.html">Categories</a>
        <a href="../../../guidelines.html">FAQ/Guidelines</a>
        <a href="../../../tos.html">Terms of Service</a>
        <a href="../../../privacy.html">Privacy Policy</a>
      </nav>
      <p>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  

<!-- Mirrored from community.axoloti.com/t/midi-thru-with-filters-i-have-it-working-as-script-but-want-to-make-an-object/5927/5 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 19 Jul 2023 03:14:49 GMT -->
</html>
