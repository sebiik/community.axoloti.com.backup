<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from community.axoloti.com/t/how-to-execute-tanf-from-math-h/7070 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 19 Jul 2023 03:03:18 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>How to execute tanf from math.h? - AxoObject coding - Axoloti Community</title>
    <meta name="description" content="Hey! 

I am trying to port some filters from faust to axoloti and I am having some trouble executing a standard function. What is the correct way to get tanf to work? 

Generate code complete
Start compiling patch
Compil&amp;hellip;">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.9.0.beta3 - https://github.com/discourse/discourse version 13f3de4bf673802eb8ec595d36587b4524773209">
<link rel="icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="7070.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://sebiik.github.io/community.axoloti.com.backup","potentialAction":{"@type":"SearchAction","target":"https://sebiik.github.io/community.axoloti.com.backup/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Axoloti Community Search">

        <link href="../../stylesheets/desktop_d93a33ca8617326fe353f80e6ab865188244d48c8e0b.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop"/>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','../../../www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;How to execute tanf from math.h?&#39;" href="7070.rss" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://sebiik.github.io/community.axoloti.com.backup/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:image" content="https://sebiik.github.io/community.axoloti.com.backup/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:url" content="https://sebiik.github.io/community.axoloti.com.backup/t/how-to-execute-tanf-from-math-h/7070" />
<meta name="twitter:url" content="https://sebiik.github.io/community.axoloti.com.backup/t/how-to-execute-tanf-from-math-h/7070" />
<meta property="og:title" content="How to execute tanf from math.h?" />
<meta name="twitter:title" content="How to execute tanf from math.h?" />
<meta property="og:description" content="Hey!   I am trying to port some filters from faust to axoloti and I am having some trouble executing a standard function. What is the correct way to get tanf to work?   Generate code complete Start compiling patch Compiling patch... with /Applications/Axoloti.app/Contents/Java/firmware BDIR = /Users/logsol/Documents/axoloti/build FIRMWARE = . RM APP ! /Users/logsol/Documents/axoloti/build/xpatch.h.gch . /Applications/axoloti_runtime/platform_osx/arm-none-eabi/include/math.h . /Applications/axolo..." />
<meta name="twitter:description" content="Hey!   I am trying to port some filters from faust to axoloti and I am having some trouble executing a standard function. What is the correct way to get tanf to work?   Generate code complete Start compiling patch Compiling patch... with /Applications/Axoloti.app/Contents/Java/firmware BDIR = /Users/logsol/Documents/axoloti/build FIRMWARE = . RM APP ! /Users/logsol/Documents/axoloti/build/xpatch.h.gch . /Applications/axoloti_runtime/platform_osx/arm-none-eabi/include/math.h . /Applications/axolo..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins ðŸ•‘" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="2 â¤" />


  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html"><img src="../../uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo" style="max-width: 150px;"></a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1>
  <a href="7070.html">How to execute tanf from math.h?</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/axoobject-code.html" itemprop="url">
        <span itemprop="title">AxoObject coding</span>
      </a>
    </div>
</div>

    <div class='tags-list' itemscope itemtype='http://schema.org/ItemList'>
        <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
          <meta itemprop='url' content='../../tags/dsp.html'>
          <a href='../../tags/dsp.html' itemprop='item'>
            <span itemprop='name'>dsp</span>
          </a>
        </div>
        <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
          <meta itemprop='url' content='../../tags/faust.html'>
          <a href='../../tags/faust.html' itemprop='item'>
            <span itemprop='name'>faust</span>
          </a>
        </div>
        <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
          <meta itemprop='url' content='../../tags/math.html'>
          <a href='../../tags/math.html' itemprop='item'>
            <span itemprop='name'>math</span>
          </a>
        </div>
    </div>




<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/logsol.html'><b itemprop='author'>logsol</b></a>
           
           <time datetime='2021-01-17T22:20:47Z' itemprop='datePublished'>
             2021-01-17 22:20:47 UTC
           </time>
        </span>
        <span itemprop='position'>#1</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hey!</p>

<p>I am trying to port some filters from faust to axoloti and I am having some trouble executing a standard function. What is the correct way to get <strong>tanf</strong> to work?</p>

<pre><code>Generate code complete
Start compiling patch
Compiling patch... with /Applications/Axoloti.app/Contents/Java/firmware
BDIR = /Users/logsol/Documents/axoloti/build
FIRMWARE = .
RM
APP
! /Users/logsol/Documents/axoloti/build/xpatch.h.gch
. /Applications/axoloti_runtime/platform_osx/arm-none-eabi/include/math.h
. /Applications/axoloti_runtime/platform_osx/lib/gcc/arm-none-eabi/4.9.3/include/stdint.h
. /Applications/axoloti_runtime/platform_osx/arm-none-eabi/include/stdlib.h
LINK
/Users/logsol/Documents/axoloti/build/xpatch.o: In function `PatchProcess(long*, long*)':
xpatch.cpp:(.text+0xc0): undefined reference to `tanf'</code></pre>

<p>In the output log I see that math.h is being included and when I search this file, I do see a reference to tanf in it:</p>

<pre><code>...
/* Single precision versions of ANSI functions.  */

extern float atanf _PARAMS((float));
extern float cosf _PARAMS((float));
extern float sinf _PARAMS((float));
extern float tanf _PARAMS((float));
extern float tanhf _PARAMS((float));
extern float frexpf _PARAMS((float, int *));
extern float modff _PARAMS((float, float *));
extern float ceilf _PARAMS((float));
extern float fabsf _PARAMS((float));
extern float floorf _PARAMS((float));
...</code></pre>

<p>Can anybody shine some light on this? Or maybe I should be using another tangent implementation altogether?</p>

<p>Cheers!</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='How to execute tanf from math.h?'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/jaffasplaffa.html'><b itemprop='author'>jaffasplaffa</b></a>
           
           <time datetime='2021-01-18T13:10:58Z' itemprop='datePublished'>
             2021-01-18 13:10:58 UTC
           </time>
        </span>
        <span itemprop='position'>#2</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Not sure how to get it working, by importing libraries, but I checked the Faust documentation:<br><aside class="onebox pdf">
  <header class="source">
    <a href="https://hal.archives-ouvertes.fr/hal-02158934/file/faust-quick-reference.pdf" target="_blank" rel="nofollow noopener">hal.archives-ouvertes.fr</a>
  </header>
  <article class="onebox-body">
    <a href="https://hal.archives-ouvertes.fr/hal-02158934/file/faust-quick-reference.pdf" target="_blank" rel="nofollow noopener"><span class="pdf-onebox-logo"></span></a>
<h3><a href="https://hal.archives-ouvertes.fr/hal-02158934/file/faust-quick-reference.pdf" target="_blank" rel="nofollow noopener">faust-quick-reference.pdf</a></h3>

<p class="filesize">458.55 KB</p>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
</p>

<p>It seems like it's the same as tanh/atan functions, but at signal rate. So if it's not too complicated, maybe you can just replace it with a tanh approximation?</p>

<p>I made a tanh approximation object for axoloti, you can find it in the community library : jaffa/sat/tanh</p>

<p>PS.<br>Sounds interesting about the filters. Is it something that might be added to the community library? <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='How to execute tanf from math.h?'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/Nosnibor-2.html'><b itemprop='author'>Nosnibor</b></a>
           
           <time datetime='2021-01-18T21:23:13Z' itemprop='datePublished'>
             2021-01-18 21:23:13 UTC
           </time>
        </span>
        <span itemprop='position'>#3</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Including the header file is not enough. The header file only tells the compiler that such a function exits and not to worry about it, the linker will add it later. But the linker wants to be told explicitly which libraries to pull additional functions from. Usually you'd just add an option ( -lm for the math library) to the command line that starts the compiler, but as the Axoloti software calls the compiler automatically I don't know if it is possible to add such options somewhere.<br>It's probably easier to just copy'n'paste the source for this function from somewhere into your own code.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='How to execute tanf from math.h?'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/logsol.html'><b itemprop='author'>logsol</b></a>
           
           <time datetime='2021-01-18T21:57:14Z' itemprop='datePublished'>
             2021-01-18 21:57:14 UTC
           </time>
        </span>
        <span itemprop='position'>#4</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="3" data-topic="7070"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v2/letter/n/51bf81/40.html" class="avatar">Nosnibor:</div>
<blockquote><p>Usually you'd just add an option ( -lm for the math library) to the command line that starts the compiler, but as the Axoloti software calls the compiler automatically</p></blockquote></aside>

<p>Ahh that is why! Makes sense, thanks!</p>

<p>Luckily I found out that <code>tan(x)</code> is equivalent to <code>sin(x) / cos(x)</code> so I am using <code>sinf(x) / cosf(x)</code> as a workaround, which seems to work fine!</p>

<p>Would be interesting to find out though if it is somehow possible to make a patch add such compiler options..</p>

<aside class="quote" data-post="2" data-topic="7070"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/community.axoloti.com/jaffasplaffa/40/5808_1.png" class="avatar">jaffasplaffa:</div>
<blockquote><p>Is it something that might be added to the community library? <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p></blockquote></aside>

<p>Yes, if I get it to work, I'd be happy to share <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='How to execute tanf from math.h?'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/scjurgen.html'><b itemprop='author'>scjurgen</b></a>
           
           <time datetime='2021-11-24T12:36:26Z' itemprop='datePublished'>
             2021-11-24 12:36:26 UTC
           </time>
        </span>
        <span itemprop='position'>#5</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>It is an old topic, but let's shed some light on tweaking axoloti firmware. </p>

<p>Firstly, I guess for a tanf function it is better to checkout the dsp/filter.h of the stmlib instead of going with sinx/cosx. <a href="https://github.com/pichenettes/stmlib/blob/master/dsp/filter.h" rel="nofollow noopener">https://github.com/pichenettes/stmlib/blob/master/dsp/filter.h</a> <br>Many functions are left out of the axoloti, this is to preserve space and to remove expensive functions (like tan).</p>

<p>However, if you like going down the rabbit hole <img src="../../images/emoji/twitter/rabbit2ae52.png?v=5" title=":rabbit2:" class="emoji" alt=":rabbit2:">, you can add lot's of stuff (like adding useful arm algorithms, optimizations, dsp algorithms) by tweaking the firmware build. In the firmware folder of your installation you will find a compile_firmware_{platform} file, tweak the Makefile to add stuff to the firmware, run the build script and you should be good to go. I needed this once for some arm related libraries (CMSIS DSP) and for adding USB SysEx support. </p>

<p>Once you compiled the firmware, the Axoloti IDE will notice the changed firmware CRC and asks you to flash your board with the new version. All previously compiled patches need to be recompiled to make them work and obviously your new patches will not be compatible with the 'standard' axoloti software.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='How to execute tanf from math.h?'>
      <hr>
  </div>






    </div>
    <footer class="container">
      <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <a href='../../index.html'>Home</a>
        <a href="../../categories.html">Categories</a>
        <a href="../../guidelines.html">FAQ/Guidelines</a>
        <a href="../../tos.html">Terms of Service</a>
        <a href="../../privacy.html">Privacy Policy</a>
      </nav>
      <p>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  

<!-- Mirrored from community.axoloti.com/t/how-to-execute-tanf-from-math-h/7070 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 19 Jul 2023 03:03:21 GMT -->
</html>
