<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Wave sample piano with 4 velocity layers - Patching - Axoloti Community</title>
    <meta name="description" content="wave sample piano with 4 velocity layers (but without the release samples) 

Hello Community, 

I&amp;#39;ve had an axoloti for a few days now and I think it&amp;#39;s great. Actually I only wanted to test it for Midi Din to USB and bac&amp;hellip;">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.9.0.beta3 - https://github.com/discourse/discourse version 13f3de4bf673802eb8ec595d36587b4524773209">
<link rel="icon" type="image/png" href="/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="https://sebiik.github.io/community.axoloti.com.backup/t/wave-sample-piano-with-4-velocity-layers/4219" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"http://community.axoloti.com","potentialAction":{"@type":"SearchAction","target":"http://community.axoloti.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="https://sebiik.github.io/community.axoloti.com.backup/opensearch.xml" title="Axoloti Community Search">

        <link href="/stylesheets/desktop_d93a33ca8617326fe353f80e6ab865188244d48c.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop"/>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Wave sample piano with 4 velocity layers&#39;" href="https://sebiik.github.io/community.axoloti.com.backup/t/wave-sample-piano-with-4-velocity-layers/4219.rss" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:url" content="http://community.axoloti.com/t/wave-sample-piano-with-4-velocity-layers/4219" />
<meta name="twitter:url" content="http://community.axoloti.com/t/wave-sample-piano-with-4-velocity-layers/4219" />
<meta property="og:title" content="Wave sample piano with 4 velocity layers" />
<meta name="twitter:title" content="Wave sample piano with 4 velocity layers" />
<meta property="og:description" content="wave sample piano with 4 velocity layers (but without the release samples)   Hello Community,   I&#39;ve had an axoloti for a few days now and I think it&#39;s great. Actually I only wanted to test it for Midi Din to USB and back. But I think the patches and their possibilities are great.  I also like the independence from the PC. For a long time I&#39;m looking for a piece of hardware to play my own sound files (SF2) without a PC. I don&#39;t seem to be the only one looking for something like this. Now that I ..." />
<meta name="twitter:description" content="wave sample piano with 4 velocity layers (but without the release samples)   Hello Community,   I&#39;ve had an axoloti for a few days now and I think it&#39;s great. Actually I only wanted to test it for Midi Din to USB and back. But I think the patches and their possibilities are great.  I also like the independence from the PC. For a long time I&#39;m looking for a piece of hardware to play my own sound files (SF2) without a PC. I don&#39;t seem to be the only one looking for something like this. Now that I ..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins ðŸ•‘" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="6 â¤" />


  </head>
  <body class="crawler">
    
    <header>
      <a href="/"><img src="/uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo" style="max-width: 150px;"></a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1>
  <a href="/t/wave-sample-piano-with-4-velocity-layers/4219">Wave sample piano with 4 velocity layers</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="/c/patching" itemprop="url">
        <span itemprop="title">Patching</span>
      </a>
    </div>
</div>





<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/homa'><b itemprop='author'>homa</b></a>
           
           <time datetime='2018-02-11T17:03:08Z' itemprop='datePublished'>
             2018-02-11 17:03:08 UTC
           </time>
        </span>
        <span itemprop='position'>#1</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p><strong>wave sample piano with 4 velocity layers (but without the release samples)</strong></p>

<p>Hello Community,</p>

<p>I've had an axoloti for a few days now and I think it's great. Actually I only wanted to test it for Midi Din to USB and back. But I think the patches and their possibilities are great. <br>I also like the independence from the PC. For a long time I'm looking for a piece of hardware to play my own sound files (SF2) without a PC. I don't seem to be the only one looking for something like this. Now that I wanted to know how powerful the Axoloti is, I searched for samples for a piano under this link: </p>

<aside class="onebox whitelistedgeneric">
  <header class="source">
    <a href="http://bigcatinstruments.blogspot.nl/2015/09/all-keyboard-instruments.html" target="_blank" rel="nofollow noopener">bigcatinstruments.blogspot.nl</a>
  </header>
  <article class="onebox-body">
    <img src="https://4.bp.blogspot.com/-LjqJyyoFEbU/UvxB0zYJM8I/AAAAAAAAACo/2e_12Y2s6AY/w1200-h630-p-k-no-nu/city+piano+joe's+version.jpg" width="" height="" class="thumbnail">

<h3><a href="http://bigcatinstruments.blogspot.nl/2015/09/all-keyboard-instruments.html" target="_blank" rel="nofollow noopener">All Keyboard Instruments</a></h3>

<p>Rounding up all the Pianos, Electric Pianos and Organs in one post. A work in progress. Â      The Grand PianosÂ      The  City Piano  is a f...</p>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>


<p>The City Piano is a fully sampled Baldwin Baby Grand with 4 velocity layers and release samples. It is free and public domain. Do anything you like with it.<br><a href="http://www.mediafire.com/download/4vmjle2acsy1xd2/City_Piano_Close_Samples.zip" class="onebox" target="_blank" rel="nofollow noopener">http://www.mediafire.com/download/4vmjle2acsy1xd2/City_Piano_Close_Samples.zip</a></p>

<p>Now I've run into some trouble. First of all, I converted the samples from stereo to mono and at the right rate. In stereo, I use too much resources on the Axoloti. Here I used the software sox.</p>

<p><a href="http://sox.sourceforge.net/" class="onebox" target="_blank" rel="nofollow noopener">http://sox.sourceforge.net/</a><br>I used sox with the following parameters: -t raw -e signed-integer -b 16 -c 1 -r 48000</p>

<p>The notes were then renamed. Note and velocity response. Example Grade: 21<br>Quiet: 21 = <strong>021</strong><br>Average: 21 + 127 = <strong>148</strong><br>Strong: 21 + 127 + 127 + 127 = <strong>275</strong><br>Loud: 21 + 127 + 127 + 127 +127 = <strong>402</strong></p>

<p>These 4 files result in the 4 velocity layers for the Midi-Note 21. <br>Then I have to evaluate the velocity dynamics to play back the correct file.</p>

<p>See my patch:  <a class="attachment" href="//community.axoloti.com/uploads/default/original/2X/0/038f0c6cf9c9c25da4daff33f9e107802a5e7501.axp">homaMidiKeyV1.axp</a> (12.3 KB)</p>

<p>The samples (in the required format) are available here: <a href="https://1drv.ms/u/s!Am2OR1KBwBangbkIFsnSAlsd2n6Mog" rel="nofollow noopener">https://1drv.ms/u/s!Am2OR1KBwBangbkIFsnSAlsd2n6Mog</a></p>

<p>Currently, the patch can play up to 14 notes. That's enough for Elise, but other pieces are getting cramped. Especially if Sustain is used. Then errors occur. <br>Here is also my question if it is possible to discard the first (oldest) notes and play back the current (new) ones when reaching the limit of 14 under "poly"?<br><strong><em>How would that be possible?</em></strong></p>

<p>Another problem is cracking with very fast playing. I already use a fast SD card here. <br>SD-Card SanDisk Ultra with the specification: A1 Minimum random read 1500 IOPS<br><aside class="onebox wikipedia">
  <header class="source">
    <a href="https://en.wikipedia.org/wiki/Secure_Digital#Speed_class_rating" target="_blank" rel="nofollow noopener">en.wikipedia.org</a>
  </header>
  <article class="onebox-body">
    <img src="//upload.wikimedia.org/wikipedia/commons/thumb/c/cd/SD-Logo.svg/220px-SD-Logo.svg.png" class="thumbnail">

<h3><a href="https://en.wikipedia.org/wiki/Secure_Digital#Speed_class_rating" target="_blank" rel="nofollow noopener">Secure Digital | Speed class rating</a></h3>

<p>The SD Association defines standard speed classes for SDHC/SDXC cards indicating minimum performance (minimum serial data writing speed). Both read and write speeds must exceed the specified value. The specification defines these classes in terms of performance curves that translate into the following minimum read-write performance levels on an empty card and suitability for different applications:</p>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
</p>

<p>I also recommend the virtual keyboard for testing, as it changes the velocity/volume with the mouse depending on the click position: <a href="http://www.tobias-erichsen.de/software/virtualkeys.html" rel="nofollow noopener">http://www.tobias-erichsen.de/software/virtualkeys.html</a></p>

<p>Or play some piano midi files with a midiplayer like <a href="http://falcosoft.hu/softwares.html" rel="nofollow noopener">http://falcosoft.hu/softwares.html</a> </p>

<p><em>To try creating directory on sdcard: /homaMidiKeyV1</em><br><em>and copy all 353 files noteXXX.raw from noteXXX.7z to your SD-Card!</em></p>

<p>Have fun!</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:6'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Wave sample piano with 4 velocity layers'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/watamacha'><b itemprop='author'>watamacha</b></a>
           
           <time datetime='2018-02-18T10:10:07Z' itemprop='datePublished'>
             2018-02-18 10:10:07 UTC
           </time>
        </span>
        <span itemprop='position'>#2</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>regarding issues with fast playing you might want to read some of the more recently used samples into memory so that playing a note over and over wont load it each time. Effectively use the ram as an sd cache, though designing caches isnt necessarily easy. </p>

<p>regarding poly allocation, you might need to roll your own voice handler that allocates voices in a fifo stack.</p>

<p>I actually wanted to start working on a soundfont player for axoloti using tinysoundfont, you seem a lot farther in that direction than I am at the moment but I can catch up pretty fast, if you'd like to work together on it feel free to pm me</p>

<p>on another note, I looked at your patcher and noticed that instead of velocity crossfading you used velocity to scale the output, which might sound better if you used different volume adjustments depending on which sample is used, since your current setup will probably scale the low velocities down too much in volume. in other words, scale the velocity vca in such a way that the volume difference between two adjacent velocity levels (e.g. 88 and 89) is always consistent. Traditionally velocity layers are implemented with a crossfade between the velocity level below the actual velocity and the one above it, but your system is probably better for the hardware if the vca adjustments are made. I'll try the edits myself if I have time later today.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Wave sample piano with 4 velocity layers'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/waraukaeru'><b itemprop='author'>waraukaeru</b></a>
           
           <time datetime='2019-11-29T15:51:04Z' itemprop='datePublished'>
             2019-11-29 15:51:04 UTC
           </time>
        </span>
        <span itemprop='position'>#3</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>This is really nice, just tried it out right now. homa, did you ever develop this further? watamacha?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Wave sample piano with 4 velocity layers'>
      <hr>
  </div>






    </div>
    <footer class="container">
      <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <a href='/'>Home</a>
        <a href="/categories">Categories</a>
        <a href="/guidelines">FAQ/Guidelines</a>
        <a href="/tos">Terms of Service</a>
        <a href="/privacy">Privacy Policy</a>
      </nav>
      <p>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
