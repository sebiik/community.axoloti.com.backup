<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from community.axoloti.com/t/connecting-the-lkm1638-board/1242 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 19 Jul 2023 03:22:43 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Connecting the LKM1638 board - Hardware - Axoloti Community</title>
    <meta name="description" content="Now that I&amp;#39;ve finished writing my book, it&amp;#39;s time for me to build some actual instruments with Axoloti. I&amp;#39;ll use this topic to document the process of connecting the LKM1638 board, so you have a starting point if you are&amp;hellip;">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.9.0.beta3 - https://github.com/discourse/discourse version 13f3de4bf673802eb8ec595d36587b4524773209">
<link rel="icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="1242.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://sebiik.github.io/community.axoloti.com.backup","potentialAction":{"@type":"SearchAction","target":"https://sebiik.github.io/community.axoloti.com.backup/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Axoloti Community Search">

        <link href="../../stylesheets/desktop_d93a33ca8617326fe353f80e6ab865188244d48c8e0b.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop"/>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','../../../www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Connecting the LKM1638 board&#39;" href="1242.rss" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://sebiik.github.io/community.axoloti.com.backup/uploads/default/optimized/2X/8/876579da82dd1aca7a708a908bcb1f1cdbeecc4c_1_690x328.jpg" />
<meta property="og:image" content="https://sebiik.github.io/community.axoloti.com.backup/uploads/default/optimized/2X/8/876579da82dd1aca7a708a908bcb1f1cdbeecc4c_1_690x328.jpg" />
<meta property="og:url" content="https://sebiik.github.io/community.axoloti.com.backup/t/connecting-the-lkm1638-board/1242" />
<meta name="twitter:url" content="https://sebiik.github.io/community.axoloti.com.backup/t/connecting-the-lkm1638-board/1242" />
<meta property="og:title" content="Connecting the LKM1638 board" />
<meta name="twitter:title" content="Connecting the LKM1638 board" />
<meta property="og:description" content="Now that I&#39;ve finished writing my book, it&#39;s time for me to build some actual instruments with Axoloti. I&#39;ll use this topic to document the process of connecting the LKM1638 board, so you have a starting point if you are interested in building an instrument with it.    You can buy these boards for around â‚¬7 at DealExtreme. The specs of these boards:    8x 7-segment display 8x double-color green/red LED 8x button   A great thing is that the boards can be chained, so you could use two of them to c..." />
<meta name="twitter:description" content="Now that I&#39;ve finished writing my book, it&#39;s time for me to build some actual instruments with Axoloti. I&#39;ll use this topic to document the process of connecting the LKM1638 board, so you have a starting point if you are interested in building an instrument with it.    You can buy these boards for around â‚¬7 at DealExtreme. The specs of these boards:    8x 7-segment display 8x double-color green/red LED 8x button   A great thing is that the boards can be chained, so you could use two of them to c..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="5 mins ðŸ•‘" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="22 â¤" />

      <link rel="next" href="12424658.html?page=2">

  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html"><img src="../../uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo" style="max-width: 150px;"></a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1>
  <a href="1242.html">Connecting the LKM1638 board</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/hardware.html" itemprop="url">
        <span itemprop="title">Hardware</span>
      </a>
    </div>
</div>





<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/janvantomme.html'><b itemprop='author'>janvantomme</b></a>
           
           <time datetime='2016-03-09T20:14:20Z' itemprop='datePublished'>
             2016-03-09 20:14:20 UTC
           </time>
        </span>
        <span itemprop='position'>#1</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Now that I've finished writing my book, it's time for me to build some actual instruments with Axoloti. I'll use this topic to document the process of connecting the LKM1638 board, so you have a starting point if you are interested in building an instrument with it. </p>

<p>You can buy these boards for around â‚¬7 at <a href="http://www.dx.com/p/8x-digital-tube-8x-key-8x-double-color-led-module-81873" rel="nofollow">DealExtreme</a>. The specs of these boards:</p>

<ul>
<li>8x 7-segment display</li>
<li>8x double-color green/red LED</li>
<li>8x button</li>
</ul>

<p>A great thing is that the boards can be chained, so you could use two of them to create a 16-step sequencer. The boards use the SPI bus on the Axoloti, so you will only need 4 GPIO ports.</p>

<p><div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/876579da82dd1aca7a708a908bcb1f1cdbeecc4c" href="../../uploads/default/original/2X/8/876579da82dd1aca7a708a908bcb1f1cdbeecc4c.jpg" class="lightbox" title="lkm1638-chain.jpg"><img src="../../uploads/default/optimized/2X/8/876579da82dd1aca7a708a908bcb1f1cdbeecc4c_1_690x328.jpg" width="690" height="328"><div class="meta">
<span class="filename">lkm1638-chain.jpg</span><span class="informations">1000x476 132 KB</span><span class="expand"></span>
</div></a></div></p>

<p><strong>Creating Objects</strong><br>My goal is to develop some objects to work with this board. Some ideas:</p>

<ul>
<li>Send text to the 7-segment display</li>
<li>Use the buttons as toggles, LEDs will show which toggle is on/off</li>
<li>Use the buttons as a mini keyboard to play notes</li>
<li>Use the buttons to toggle notes on/off in a sequencer.</li>
</ul>

<p>A good starting point to work with this board, and create objects is this old test patch made by <a class="mention" href="../../users/johannes.html">@johannes</a>.</p>

<aside class="onebox githubblob">
  <header class="source">
    <a href="https://github.com/axoloti/axoloti/blob/master/archive/tests/io/spi_lkm1638.axh">
      
      github.com
    </a>
  </header>
  <article class="onebox-body">
    <h4><a href="https://github.com/axoloti/axoloti/blob/master/archive/tests/io/spi_lkm1638.axh" target="_blank">axoloti/axoloti/blob/master/archive/tests/io/spi_lkm1638.axh</a></h4>
<pre><code class="lang-axh">&lt;patch-1.0&gt;
   &lt;comment type="patch/comment" name="connect PA4 to STB0" x="28" y="14"/&gt;
   &lt;comment type="patch/comment" name="PA5 to CLK" x="70" y="28"/&gt;
   &lt;comment type="patch/comment" name="PA6 and PA7 to DIO" x="70" y="42"/&gt;
   &lt;comment type="patch/comment" name="VDD to VCC" x="70" y="56"/&gt;
   &lt;comment type="patch/comment" name="GND to GND" x="70" y="70"/&gt;
   &lt;obj type="gpio/spi/config" sha="8491453740b6fc6b2fcf5de6e9eb65baa370f6e4" name="spi.begin_1" x="28" y="98"&gt;
      &lt;params/&gt;
      &lt;attribs&gt;
         &lt;combo attributeName="clock_polarity" selection="0 when idle"/&gt;
         &lt;combo attributeName="clock_phase" selection="first clock transition is the first data capture edge"/&gt;
         &lt;combo attributeName="baudrate" selection="FPCLK/128"/&gt;
         &lt;combo attributeName="format" selection="LSB first"/&gt;
      &lt;/attribs&gt;
   &lt;/obj&gt;
   &lt;obj type="script/script2" sha="1478c410b77725959c034de4a2456dd1198e9080" name="script2_1" x="168" y="98"&gt;
      &lt;params/&gt;
      &lt;attribs&gt;
         &lt;text attributeName="script"&gt;
            &lt;sText&gt;&lt;![CDATA[uint8_t *txbuf;
</code></pre>

  This file has been truncated. <a href="https://github.com/axoloti/axoloti/blob/master/archive/tests/io/spi_lkm1638.axh" target="_blank">show original</a>

  </article>
  <div style="clear: both"></div>
</aside>


<p>If you connect the board to the Axoloti Core and run the patch, you'll get something like the photo below. The sel/sel b 16 objects reflect the state of the LEDs. Buttons can be used to cycle through the LED colors.</p>

<p><div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/66a7eb48d6ca526d17a15ddfe88b4721aeab88a5" href="../../uploads/default/original/2X/6/66a7eb48d6ca526d17a15ddfe88b4721aeab88a5.jpg" class="lightbox" title="circuit-and-patch.jpg"><img src="../../uploads/default/optimized/2X/6/66a7eb48d6ca526d17a15ddfe88b4721aeab88a5_1_690x366.jpg" width="690" height="366"><div class="meta">
<span class="filename">circuit-and-patch.jpg</span><span class="informations">1785x948 299 KB</span><span class="expand"></span>
</div></a></div></p>

<p><strong>Circuit Diagram</strong></p>

<ul>
<li>Connect VCC to VDD (RED)</li>
<li>Connect GND to GND (Black)</li>
<li>Connect STBO to PA4 (Blue)</li>
<li>Connect CLK to PA5 (Green)</li>
<li>Connect DIO to both PA6 and PA7 (Yellow)</li>
</ul>

<p><div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/df8d298227e85db5f8a53bfdb57ed25657358c08" href="../../uploads/default/original/2X/d/df8d298227e85db5f8a53bfdb57ed25657358c08.png" class="lightbox" title="axoloti-lkm1638-circuit-diagram.png"><img src="../../uploads/default/optimized/2X/d/df8d298227e85db5f8a53bfdb57ed25657358c08_1_583x500.png" width="583" height="500"><div class="meta">
<span class="filename">axoloti-lkm1638-circuit-diagram.png</span><span class="informations">595x510 31.5 KB</span><span class="expand"></span>
</div></a></div></p>

<p><strong>Patches</strong></p>

<p>You'll need to add a gpio/spi/config object to every patch you want to use with this board. These are the settings for the object:</p>

<ul>
<li>clock_polarity: CPOL=0</li>
<li>clock_phase: CPHA=0</li>
<li>baudrate: FPCLK/128</li>
<li>format: LSB first</li>
</ul>

<p><strong>Toggle Object</strong></p>

<p>The first object I'm working on is a toggle object. The object will output booleans so you can use the 8 buttons on the board as toggles. The LEDs on the board will also reflect the state (on/off) of the toggle. A basic patch for the object looks like the screenshot below, I'll post the object once I'm finished writing code + testing.</p>

<p><div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/0e3d1786b92387caa2a7eb82b547b328b073e6ad" href="../../uploads/default/original/2X/0/0e3d1786b92387caa2a7eb82b547b328b073e6ad.png" class="lightbox" title="lkm1638-toggle.png"><img src="../../uploads/default/optimized/2X/0/0e3d1786b92387caa2a7eb82b547b328b073e6ad_1_520x500.png" width="520" height="500"><div class="meta">
<span class="filename">lkm1638-toggle.png</span><span class="informations">972x934 31.7 KB</span><span class="expand"></span>
</div></a></div></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:9'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Connecting the LKM1638 board'>
      <hr>
            <a href="../axoloti-control/201/10.html">Axoloti Control</a>
            <hr>
            <a href="../volca-type-drum-sequencer/2149/5.html">Volca type drum sequencer</a>
            <hr>
            <a href="../janvantomme-contributions/1045/4.html">Janvantomme contributions</a>
            <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/alifeinbinary.html'><b itemprop='author'>alifeinbinary</b></a>
           
           <time datetime='2016-03-09T21:35:32Z' itemprop='datePublished'>
             2016-03-09 21:35:32 UTC
           </time>
        </span>
        <span itemprop='position'>#2</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I ordered two LKM1638 just now and will test with the Axoloti once they arrive. I'm not the best C programmer, just the little bit I've done with Arduinos. I'm much better with Python and MaxMSP. If I can help in any way, please let me know.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Connecting the LKM1638 board'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/janvantomme.html'><b itemprop='author'>janvantomme</b></a>
           
           <time datetime='2016-03-09T22:52:21Z' itemprop='datePublished'>
             2016-03-09 22:52:21 UTC
           </time>
        </span>
        <span itemprop='position'>#3</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I only know the basics of C programming as well. The hardest thing now will be figuring out what functions to use to talk to the board via the SPI port.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Connecting the LKM1638 board'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/alifeinbinary.html'><b itemprop='author'>alifeinbinary</b></a>
           
           <time datetime='2016-04-24T23:13:00Z' itemprop='datePublished'>
             2016-04-24 23:13:00 UTC
           </time>
        </span>
        <span itemprop='position'>#4</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hi Jan, just received the LKM1638 (x2) modules. I played with the .axh file you linked to above and managed to get IO working back and forth between the buttons and LEDS but as you mentioned daisy chaining doesn't work yet. I tried amending the code to extend daisy chaining capability but didn't have any luck, will dig through <a href="http://mjoldfield.github.io/pi-tm1638/tm1638_8h.html" rel="nofollow">http://mjoldfield.github.io/pi-tm1638/tm1638_8h.html</a>. I see great potential, especially if we can utilize the displays as well. Have you experimented more with these modules and Axoloti since?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Connecting the LKM1638 board'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/janvantomme.html'><b itemprop='author'>janvantomme</b></a>
           
           <time datetime='2016-04-28T19:41:30Z' itemprop='datePublished'>
             2016-04-28 19:41:30 UTC
           </time>
        </span>
        <span itemprop='position'>#5</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Haven't had the chance to do a lot of programming on the objects lately. Currently building a new dedicated synth with Axoloti that will use one of the LKM1638 boards as a control. When the synth is finished, I'll start programming again.</p>

<p>I'll stick with using one board for now, my second one got damaged while desoldering the connectors. If you want to solder the LKM board directly to the Axoloti, it's better to remove the black plastic part, end solder the wires directly to the pins and bend them over so you can mount it inside a case.</p>

<p>I did some tests with a lasercut top plate and 3D printed buttons as well.</p>

<p><div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/4434b142e99dd635353fbb41b8161edda564b5dd" href="../../uploads/default/original/2X/4/4434b142e99dd635353fbb41b8161edda564b5dd.jpg" class="lightbox" title="CeZXG2JXIAQnTFF.jpg"><img src="../../uploads/default/optimized/2X/4/4434b142e99dd635353fbb41b8161edda564b5dd_1_666x500.jpg" width="666" height="500"><div class="meta">
<span class="filename">CeZXG2JXIAQnTFF.jpg</span><span class="informations">960x720 86.7 KB</span><span class="expand"></span>
</div></a></div></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:2'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Connecting the LKM1638 board'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/alifeinbinary.html'><b itemprop='author'>alifeinbinary</b></a>
           
           <time datetime='2016-04-28T20:33:21Z' itemprop='datePublished'>
             2016-04-28 20:33:21 UTC
           </time>
        </span>
        <span itemprop='position'>#6</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>That looks fantastic, bravo! I'm going to take a stab at developing the object to accommodate two LKM1638 boards because my intention is to have a functional 16 step sequencer. Getting both displays working would be overkill, for me at least. I will prioritise the functionality of the LEDs and buttons first. Where did you get your white buttons from? I see what you mean regarding the removal of the 10 pin connector, will try to not fry my second board <img src="../../images/emoji/emoji_one/stuck_out_tongue5e1f.png?v=2" title=":stuck_out_tongue:" class="emoji" alt=":stuck_out_tongue:"></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Connecting the LKM1638 board'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/janvantomme.html'><b itemprop='author'>janvantomme</b></a>
           
           <time datetime='2016-04-30T13:09:57Z' itemprop='datePublished'>
             2016-04-30 13:09:57 UTC
           </time>
        </span>
        <span itemprop='position'>#7</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I designed the white buttons myself, and printed them on my 3D printer. Just a plastic prototype for now, will print them in elastic material when I finish the synth.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Connecting the LKM1638 board'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/janvantomme.html'><b itemprop='author'>janvantomme</b></a>
           
           <time datetime='2016-07-08T16:47:53Z' itemprop='datePublished'>
             2016-07-08 16:47:53 UTC
           </time>
        </span>
        <span itemprop='position'>#8</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Now that I've finished building my synth, I had some time to develop some objects to work with the LKM1638 board. I'll need to clean up the code and document everything a bit better, and then I'll publish them to the community library. This is what I've got so far:</p>

<ul>
<li>Read when buttons are pressed, no LED output.</li>
<li>Read when buttons are pressed, LED output.</li>
<li>LED output, no button interaction.</li>
<li>Use buttons and LEDs as toggles.</li>
</ul>

<p>The 7-segment display doesn't work yet, but I hope to make that work soon.</p>

<p>Here's some videos of the objects in action.</p>

<iframe src="https://player.vimeo.com/video/173932174" width="640" height="360" frameborder="0" title="Axoloti + LKM1638: Set LEDs Individually" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>

<iframe src="https://player.vimeo.com/video/173932173" width="640" height="360" frameborder="0" title="Axoloti + LKM1638: Light Organ" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>

<iframe src="https://player.vimeo.com/video/173932171" width="640" height="360" frameborder="0" title="Axoloti + LKM1638: Light up LED when button is pressed" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>

<iframe src="https://player.vimeo.com/video/173932172" width="640" height="360" frameborder="0" title="Axoloti + LKM1638: Toggle Leds" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:4'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Connecting the LKM1638 board'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/janvantomme.html'><b itemprop='author'>janvantomme</b></a>
           
           <time datetime='2016-08-10T18:57:08Z' itemprop='datePublished'>
             2016-08-10 18:57:08 UTC
           </time>
        </span>
        <span itemprop='position'>#9</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I've just posted some objects to work with the LKM1638 board to the community library. Feedback is welcome.</p>

<aside class="quote" data-topic="1045" data-slug="janvantomme-contributions" data-post="4"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/community.axoloti.com/janvantomme/40/10_1.png" class="avatar"><a href="../janvantomme-contributions/1045/4.html">Janvantomme contributions</a>
</div>
<blockquote><p>jv/lkm1638  Some objects to work with the <a href="1242.html">LKM1638 board</a>.   Status  there may be small bugsâ€¦    Version  1.0.10   Description  Constrains a value to not exceed a maximum and minimum value.     jv/lkm1636/lkm1638-buttons: Reads the state of the buttons of the LKM1638 board.  jv/lkm1636/lkm1638-leds: Set the LEDs of the LKM1638 board individually.  jv/lkm1636/lkm1638-buttons-leds: Reads the state of the buttons of the LKM1638 board, and lights up the corresponding LED when the button is pressed.  jâ€¦</p></blockquote></aside>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Connecting the LKM1638 board'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/janvantomme.html'><b itemprop='author'>janvantomme</b></a>
           
           <time datetime='2016-08-10T19:25:54Z' itemprop='datePublished'>
             2016-08-10 19:25:54 UTC
           </time>
        </span>
        <span itemprop='position'>#10</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>A bit hard to see in this smartphone picture, but I've got the display working tonight. Only thing I need to do now is creating a dedicated object to set the text.</p>

<p><div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/b4b87f86be6556d49ff7bcb32a3c6a71c140b03c" href="../../uploads/default/original/2X/b/b4b87f86be6556d49ff7bcb32a3c6a71c140b03c.jpg" class="lightbox" title="CphWaoyWIAEY4ts.jpg"><img src="../../uploads/default/optimized/2X/b/b4b87f86be6556d49ff7bcb32a3c6a71c140b03c_1_666x500.jpg" width="666" height="500"><div class="meta">
<span class="filename">CphWaoyWIAEY4ts.jpg</span><span class="informations">960x720 102 KB</span><span class="expand"></span>
</div></a></div></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:2'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Connecting the LKM1638 board'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/alifeinbinary.html'><b itemprop='author'>alifeinbinary</b></a>
           
           <time datetime='2016-08-10T22:12:35Z' itemprop='datePublished'>
             2016-08-10 22:12:35 UTC
           </time>
        </span>
        <span itemprop='position'>#11</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Brilliant stuff, Jan! At this point I might be of some help. I'd like to think I'm good at testing and debugging after years of doing web development <img src="../../images/emoji/emoji_one/wink5e1f.png?v=2" title=":wink:" class="emoji" alt=":wink:"> Super excited to try this out! You haven't mentioned whether two LKM1638 boards can be daisy chained together yet so I assume there isn't that capability yet. Do you know what's involved to make two units "talk" to one another? I could work on that part. I'm aiming to build a polysynth with built-in 64 step sequencer so 16 toggles would be ideal.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Connecting the LKM1638 board'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/janvantomme.html'><b itemprop='author'>janvantomme</b></a>
           
           <time datetime='2016-08-12T14:29:34Z' itemprop='datePublished'>
             2016-08-12 14:29:34 UTC
           </time>
        </span>
        <span itemprop='position'>#12</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>There's no way to control two boards at the same time for now. And I don't plan on developing that since I don't need it for my synth. But I think you can adapt my code if you want to chain two boards.</p>

<p>This is a piece of code from my objects.</p>

<pre><code>void tm1638_send_command(uint8_t x){
	SPID1.spi-&gt;CR1 |= SPI_CR1_BIDIOE;
	spiSelect(&amp;SPID1);
	txbuf[0] = x;
	spiSend(&amp;SPID1,1,&amp;txbuf[0]);
	spiUnselect(&amp;SPID1);
}</code></pre>

<p>And this is the same function from this Raspberry PI library. ( <a href="https://github.com/mjoldfield/pi-tm1638/blob/master/src/tm1638.c" rel="nofollow">https://github.com/mjoldfield/pi-tm1638/blob/master/src/tm1638.c</a> ) You'll notice that the first parameter in this function, the variable <code>t</code> is a reference to a single board when they are chained together.</p>

<pre><code>static void tm1638_send_command(const tm1638_p t, uint8_t x)
{
	bcm2835_gpio_write(t-&gt;strobe, LOW);
	delayMicroseconds(1);

	tm1638_send_raw(t, x);
	bcm2835_gpio_write(t-&gt;strobe, HIGH);

	delayMicroseconds(1);
}</code></pre>

<p>My code uses the SPI API from the Axoloti firmware, the other code uses a BCM2835 GPIO library for the Raspberry PI that does something similar. You'll probably find a lot of Arduino code to work with the LKM1638 boards online that might help you figure things out.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Connecting the LKM1638 board'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/aslanov.html'><b itemprop='author'>aslanov</b></a>
           
           <time datetime='2018-01-14T15:48:08Z' itemprop='datePublished'>
             2018-01-14 15:48:08 UTC
           </time>
        </span>
        <span itemprop='position'>#13</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hi Jan, I am trying to get the LEDs and the display to work with the objects provided by you. I finally managed to hook this unit up to my axoloti and while the buttons are working, I get no response from neither the LEDS nor the  7-segment displays. I checked the unit with an arduino and it is just working fine. </p>

<p>I am using the example patches together with the exact same unit as shown in the photos, sourced from deal extreme a while ago. Any ideas?  Any input appreciated, thanks, Christian</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Connecting the LKM1638 board'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/janvantomme.html'><b itemprop='author'>janvantomme</b></a>
           
           <time datetime='2018-01-17T09:06:46Z' itemprop='datePublished'>
             2018-01-17 09:06:46 UTC
           </time>
        </span>
        <span itemprop='position'>#14</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Can you try with this patch Johannes made? I sometimes had to run that one first in order for things to work.</p>

<aside class="onebox githubblob">
  <header class="source">
    <a href="https://github.com/axoloti/axoloti/blob/master/archive/tests/io/spi_lkm1638.axh" target="_blank" rel="nofollow noopener">github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="https://github.com/axoloti/axoloti/blob/master/archive/tests/io/spi_lkm1638.axh" target="_blank" rel="nofollow noopener">axoloti/axoloti/blob/master/archive/tests/io/spi_lkm1638.axh</a></h4>
<pre><code class="lang-axh">&lt;patch-1.0&gt;
   &lt;comment type="patch/comment" name="connect PA4 to STB0" x="28" y="14"/&gt;
   &lt;comment type="patch/comment" name="PA5 to CLK" x="70" y="28"/&gt;
   &lt;comment type="patch/comment" name="PA6 and PA7 to DIO" x="70" y="42"/&gt;
   &lt;comment type="patch/comment" name="VDD to VCC" x="70" y="56"/&gt;
   &lt;comment type="patch/comment" name="GND to GND" x="70" y="70"/&gt;
   &lt;obj type="gpio/spi/config" sha="8491453740b6fc6b2fcf5de6e9eb65baa370f6e4" name="spi.begin_1" x="28" y="98"&gt;
      &lt;params/&gt;
      &lt;attribs&gt;
         &lt;combo attributeName="clock_polarity" selection="0 when idle"/&gt;
         &lt;combo attributeName="clock_phase" selection="first clock transition is the first data capture edge"/&gt;
         &lt;combo attributeName="baudrate" selection="FPCLK/128"/&gt;
         &lt;combo attributeName="format" selection="LSB first"/&gt;
      &lt;/attribs&gt;
   &lt;/obj&gt;
   &lt;obj type="script/script2" sha="1478c410b77725959c034de4a2456dd1198e9080" name="script2_1" x="168" y="98"&gt;
      &lt;params/&gt;
      &lt;attribs&gt;
         &lt;text attributeName="script"&gt;
            &lt;sText&gt;&lt;![CDATA[uint8_t *txbuf;
</code></pre>

  This file has been truncated. <a href="https://github.com/axoloti/axoloti/blob/master/archive/tests/io/spi_lkm1638.axh" target="_blank" rel="nofollow noopener">show original</a>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:2'>
      <meta itemprop='headline' content='Connecting the LKM1638 board'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/aslanov.html'><b itemprop='author'>aslanov</b></a>
           
           <time datetime='2018-01-17T20:30:35Z' itemprop='datePublished'>
             2018-01-17 20:30:35 UTC
           </time>
        </span>
        <span itemprop='position'>#15</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>That worked, thanks a lot!</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Connecting the LKM1638 board'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/aslanov.html'><b itemprop='author'>aslanov</b></a>
           
           <time datetime='2018-03-24T10:41:00Z' itemprop='datePublished'>
             2018-03-24 10:41:00 UTC
           </time>
        </span>
        <span itemprop='position'>#16</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hi, I put some work into the original objects provided by <a class="mention" href="../../u/janvantomme.html">@janvantomme</a>. It is now possible to update the text display while the object is live. I am using this with a string mux object to display the name of the currently selected patch. I have also added inputs for both LED colors and an inlet to clear the text display. </p>

<p><div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/d62c1686b0dadbf7c282f2ae8ff2339e405395d2" href="../../uploads/default/original/2X/d/d62c1686b0dadbf7c282f2ae8ff2339e405395d2.png" class="lightbox" title="image.png"><img src="../../uploads/default/optimized/2X/d/d62c1686b0dadbf7c282f2ae8ff2339e405395d2_1_647x500.png" width="647" height="500"><div class="meta">
<span class="filename">image.png</span><span class="informations">904x698 52.7 KB</span><span class="expand"></span>
</div></a></div></p>

<p>What I did not manage to solve is that the patch will crash if you update the display too frequently/quickly. I was able to make it more tolerant by adding sleep-commands in a couple of places, this is for sure not the right way to do it. However, this is not a problem for me since I am triggering the patches with a midi floorboard, my feet are slow enough not to exceed the max frequency <img src="../../images/emoji/twitter/winkae52.png?v=5" title=":wink:" class="emoji" alt=":wink:"> if anybody is interested in using this object and is more fund of programming, this can certainly be solved. <br>Here are the links to the object and an example patch:</p>

<p><a href="https://drive.google.com/open?id=1guf-pVEfgmgyP35_5G2FVB0M0Rj-FdoU" rel="nofollow noopener">lkm 1638 object</a><br><a href="https://drive.google.com/open?id=1guf-pVEfgmgyP35_5G2FVB0M0Rj-FdoU" rel="nofollow noopener">lkm 1638 example patch</a></p>

<p>Thanks to <a class="mention" href="../../u/janvantomme.html">@janvantomme</a> for his work with this display module!</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:2'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Connecting the LKM1638 board'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/tibosizz.html'><b itemprop='author'>tibosizz</b></a>
           
           <time datetime='2018-12-18T07:22:28Z' itemprop='datePublished'>
             2018-12-18 07:22:28 UTC
           </time>
        </span>
        <span itemprop='position'>#17</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I only know the basics of C programming as well. The hardest thing now will be figuring out what functions to use to talk to the board via the SPI port<a href="http://www.allicdata.com/" rel="nofollow noopener">.</a></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Connecting the LKM1638 board'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/Mindsetup.html'><b itemprop='author'>Mindsetup</b></a>
           
           <time datetime='2019-01-23T13:19:39Z' itemprop='datePublished'>
             2019-01-23 13:19:39 UTC
           </time>
        </span>
        <span itemprop='position'>#18</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Is it possible yet to chain two LKM1638 boards to get 16 steps and get the both displays to work also? I can't write my own objects. How many gpios would it use?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Connecting the LKM1638 board'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/janvantomme.html'><b itemprop='author'>janvantomme</b></a>
           
           <time datetime='2019-01-24T13:05:11Z' itemprop='datePublished'>
             2019-01-24 13:05:11 UTC
           </time>
        </span>
        <span itemprop='position'>#19</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>It's not possible with these objects. Two chained boards will only take up 4 gpio. Code will need some changes to be able to send data to, or read from two boards.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Connecting the LKM1638 board'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/Mindsetup.html'><b itemprop='author'>Mindsetup</b></a>
           
           <time datetime='2019-01-24T13:31:09Z' itemprop='datePublished'>
             2019-01-24 13:31:09 UTC
           </time>
        </span>
        <span itemprop='position'>#20</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>But it is possible to use two of these boards when theyre not chained? How many gpios would they use that way?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Connecting the LKM1638 board'>
      <hr>
  </div>

  <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement'>
      <span itemprop='url'><b><a rel="next" itemprop="name" href="12424658.html?page=2">next page â†’</a></b></span>
  </div>





    </div>
    <footer class="container">
      <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <a href='../../index.html'>Home</a>
        <a href="../../categories.html">Categories</a>
        <a href="../../guidelines.html">FAQ/Guidelines</a>
        <a href="../../tos.html">Terms of Service</a>
        <a href="../../privacy.html">Privacy Policy</a>
      </nav>
      <p>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  

<!-- Mirrored from community.axoloti.com/t/connecting-the-lkm1638-board/1242 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 19 Jul 2023 03:22:53 GMT -->
</html>
