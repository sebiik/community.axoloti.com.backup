<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from community.axoloti.com/t/ricard-contributions/4311?page=2 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 19 Jul 2023 02:52:52 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Ricard contributions - Community Library - Axoloti Community</title>
    <meta name="description" content="I&amp;#39;ve uploaded some non-audio objects which I&amp;#39;ve devised while porting the Axoloti to run on the Audiothingies P6 . 

The P6 has 6 rotary encoders, which together with 9 push buttons (and 6 push buttons in the encoders) a&amp;hellip;">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.9.0.beta3 - https://github.com/discourse/discourse version 13f3de4bf673802eb8ec595d36587b4524773209">
<link rel="icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="43114658.html?page=2" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"http://community.axoloti.com","potentialAction":{"@type":"SearchAction","target":"http://community.axoloti.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Axoloti Community Search">

        <link href="../../stylesheets/desktop_d93a33ca8617326fe353f80e6ab865188244d48c8e0b.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop"/>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','../../../www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Ricard contributions&#39;" href="4311.rss" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:url" content="http://community.axoloti.com/t/ricard-contributions/4311?page=2" />
<meta name="twitter:url" content="http://community.axoloti.com/t/ricard-contributions/4311?page=2" />
<meta property="og:title" content="Ricard contributions" />
<meta name="twitter:title" content="Ricard contributions" />
<meta property="og:description" content="Hello @ricard !   I have a couple of these:  https://www.sparkfun.com/products/retired/11733   Seems like a pretty simple matter of just making the connections from buttons to breakout, and breakout to axo, yes?  On your control object I see &quot;data, clock, latch, inh&quot; -- do these equate to &quot;serial out, clk, ce, and sh/ld&quot; on the breakout?    Which of those need to be connected to the serial enabled pins on Axo?     Thanks for the help!" />
<meta name="twitter:description" content="Hello @ricard !   I have a couple of these:  https://www.sparkfun.com/products/retired/11733   Seems like a pretty simple matter of just making the connections from buttons to breakout, and breakout to axo, yes?  On your control object I see &quot;data, clock, latch, inh&quot; -- do these equate to &quot;serial out, clk, ce, and sh/ld&quot; on the breakout?    Which of those need to be connected to the serial enabled pins on Axo?     Thanks for the help!" />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="9 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="15 ❤" />

      <link rel="prev" href="4311.html">

  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html"><img src="../../uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo" style="max-width: 150px;"></a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1>
  <a href="4311.html">Ricard contributions</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/community-library.html" itemprop="url">
        <span itemprop="title">Community Library</span>
      </a>
    </div>
</div>





<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/spacelordmother.html'><b itemprop='author'>spacelordmother</b></a>
           
           <time datetime='2018-06-01T01:27:29Z' itemprop='datePublished'>
             2018-06-01 01:27:29 UTC
           </time>
        </span>
        <span itemprop='position'>#21</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hello <a class="mention" href="../../u/ricard.html">@ricard</a> !</p>

<p>I have a couple of these:  <a href="https://www.sparkfun.com/products/retired/11733" rel="nofollow noopener">https://www.sparkfun.com/products/retired/11733</a></p>

<p>Seems like a pretty simple matter of just making the connections from buttons to breakout, and breakout to axo, yes?  On your control object I see "data, clock, latch, inh" -- do these equate to "serial out, clk, ce, and sh/ld" on the breakout? </p>

<p>Which of those need to be connected to the serial enabled pins on Axo?  </p>

<p>Thanks for the help!</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Ricard contributions'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/ricard.html'><b itemprop='author'>ricard</b></a>
           
           <time datetime='2018-06-01T22:15:31Z' itemprop='datePublished'>
             2018-06-01 22:15:31 UTC
           </time>
        </span>
        <span itemprop='position'>#22</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="21" data-topic="4311" data-full="true"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/community.axoloti.com/spacelordmother/40/6042_1.jpg" class="avatar">spacelordmother:</div>
<blockquote><p>Seems like a pretty simple matter of just making the connections from buttons to breakout, and breakout to axo, yes?</p></blockquote></aside>

<p>Yes, that should work fine.<br></p>

<p><aside class="quote"><blockquote><p>On your control object I see "data, clock, latch, inh" -- do these equate to "serial out, clk, ce, and sh/ld" on the breakout? </p></blockquote></aside></p>

<p>Almost. 'latch' on the object goes to shift/load (sh/ld), and 'inh' on the object goes to clock enable (ce).</p>

<p>You actually don't have to connect anything to the clock enable line, as it defaults to the clock being enabled, and the object just pulls it low at init time and never changes it. The reason it's there at all is because the P6 hardware which I've used the object with has the line connected.</p>

<p><aside class="quote"><blockquote><p>Which of those need to be connected to the serial enabled pins on Axo?  </p></blockquote></aside></p>

<p>If you mean that you need to connect the data output from the 'HC165 to a pin which has a serial receiver, no, that's not necessary, you can use any I/O pin on the Axoloti. The object uses simple bitbanging (i.e. manipulates the I/O bits directly) rather than utilizing for instance an SPI interface in the STM32F427 chip.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:2'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Ricard contributions'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/spacelordmother.html'><b itemprop='author'>spacelordmother</b></a>
           
           <time datetime='2018-06-02T02:28:58Z' itemprop='datePublished'>
             2018-06-02 02:28:58 UTC
           </time>
        </span>
        <span itemprop='position'>#23</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>If I were to not hook that up so I could use the pin for other I/O would it cause problems?  Like -- won't the object be scanning whatever pin I select in the drop down?  </p>

<p>I noticed in your P6 patch that you had some different bit values in your 165 read objects -- were they device specific, or required?  I am trying to get 8 bool inputs like this:</p>

<p><div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/eef70c0b1d08b4f8a113f0387fa9b115f9edf9ba" href="../../uploads/default/original/2X/e/eef70c0b1d08b4f8a113f0387fa9b115f9edf9ba.html" class="lightbox" title="Capture.JPG"><img src="../../uploads/default/optimized/2X/e/eef70c0b1d08b4f8a113f0387fa9b115f9edf9ba_1_403x500.jpg" width="403" height="500"><div class="meta">
<span class="filename">Capture.JPG</span><span class="informations">630x781 48.7 KB</span><span class="expand"></span>
</div></a></div></p>

<p>Seems correct?  I'll test it out more tomorrow with the hookups you noted.  Thanks!</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Ricard contributions'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/ricard.html'><b itemprop='author'>ricard</b></a>
           
           <time datetime='2018-06-02T04:17:44Z' itemprop='datePublished'>
             2018-06-02 04:17:44 UTC
           </time>
        </span>
        <span itemprop='position'>#24</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="23" data-topic="4311" data-full="true"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/community.axoloti.com/spacelordmother/40/6042_1.jpg" class="avatar">spacelordmother:</div>
<blockquote><p>If I were to not hook that up so I could use the pin for other I/O would it cause problems?  Like -- won't the object be scanning whatever pin I select in the drop down?  </p></blockquote></aside>

<p>Yes, to use the Axoloti I/O pin for other purposes you need to remove the corresponding code from the object, i.e. the following two lines from the Init section:</p>

<pre><code>palSetPadMode(attr_inh,PAL_MODE_OUTPUT_PUSHPULL);
palWritePad(attr_inh,0); // inhibit, leave 0 at all times to enable clock</code></pre>

<p>and then for clarity also remove the corresponding inh attribute. (I suppose I should have added "don't use" value to the list of pins in the drop down list so the object could handle this without modification).<br></p>

<p><aside class="quote"><blockquote><p>I noticed in your P6 patch that you had some different bit values in your 165 read objects -- were they device specific, or required?</p></blockquote></aside></p>

<p>Although principally not necessary for the 165 chips, one of the pins for the 595 chips in the P6 is connected to a port which is not available for general I/O in Axoloti. So I added it (PA8) to the dropdown (attribute) list for the 595 controller object and then re-used the list for the 165 objects even though it's not strictly necessary, as the P6 uses PA0-3 for the 165 chips which are available as standard Axoloti pins.<br></p>

<p><aside class="quote"><blockquote><p>I am trying to get 8 bool inputs [... ].</p></blockquote></aside></p>

<p>That looks fine, except that the output bits are numbered from 0 and upwards, i.e. 0 to 7, rather than 1 to 8. Actually, since the output register from which the bits are fetched is  shifted when the bits are read in and never cleared, the patch as it stands will work as the bit numbers wrap after 'count' bits, but the bit numbering will be a bit confusing as the first bit will be 8 in the patch, followed by 1, 2, 3 etc.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Ricard contributions'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/weasel79.html'><b itemprop='author'>weasel79</b></a>
           
           <time datetime='2019-05-27T02:30:42Z' itemprop='datePublished'>
             2019-05-27 02:30:42 UTC
           </time>
        </span>
        <span itemprop='position'>#25</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>you're such an OG for these, i was getting worried cause i need the SPI pins for ws2812 and thought i'm out of luck with my 165s...</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Ricard contributions'>
      <hr>
  </div>

  <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement'>
      <span itemprop='url'><a rel="prev" itemprop="name" href="4311.html">← previous page</a></span>
  </div>





    </div>
    <footer class="container">
      <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <a href='../../index.html'>Home</a>
        <a href="../../categories.html">Categories</a>
        <a href="../../guidelines.html">FAQ/Guidelines</a>
        <a href="../../tos.html">Terms of Service</a>
        <a href="../../privacy.html">Privacy Policy</a>
      </nav>
      <p>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  

<!-- Mirrored from community.axoloti.com/t/ricard-contributions/4311?page=2 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 19 Jul 2023 02:52:54 GMT -->
</html>
