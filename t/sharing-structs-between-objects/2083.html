<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from community.axoloti.com/t/sharing-structs-between-objects/2083 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 10 Jul 2023 16:58:13 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Sharing Structs Between Objects - AxoObject coding - Axoloti Community</title>
    <meta name="description" content="Is it possible to do the following? 

In Object A 


define a data struct in Local Data

define and populate an instance of struct with data (preferably in SDRAM) in Init Code



In Object B 

Access data stored in struc&amp;hellip;">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.9.0.beta3 - https://github.com/discourse/discourse version 13f3de4bf673802eb8ec595d36587b4524773209">
<link rel="icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="2083.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"http://community.axoloti.com","potentialAction":{"@type":"SearchAction","target":"http://community.axoloti.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Axoloti Community Search">

        <link href="../../stylesheets/desktop_d93a33ca8617326fe353f80e6ab865188244d48c8e0b.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop"/>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','../../../www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Sharing Structs Between Objects&#39;" href="2083.rss" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:url" content="http://community.axoloti.com/t/sharing-structs-between-objects/2083" />
<meta name="twitter:url" content="http://community.axoloti.com/t/sharing-structs-between-objects/2083" />
<meta property="og:title" content="Sharing Structs Between Objects" />
<meta name="twitter:title" content="Sharing Structs Between Objects" />
<meta property="og:description" content="Is it possible to do the following?   In Object A    define a data struct in Local Data  define and populate an instance of struct with data (preferably in SDRAM) in Init Code    In Object B   Access data stored in struct in Object A using object-name-reference stored in ObjRef attribute and standard struct-access .syntax  I know this is an obscure thing to want to do, but I have a good reason (I think).   a|x" />
<meta name="twitter:description" content="Is it possible to do the following?   In Object A    define a data struct in Local Data  define and populate an instance of struct with data (preferably in SDRAM) in Init Code    In Object B   Access data stored in struct in Object A using object-name-reference stored in ObjRef attribute and standard struct-access .syntax  I know this is an obscure thing to want to do, but I have a good reason (I think).   a|x" />


  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html"><img src="../../uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo" style="max-width: 150px;"></a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1>
  <a href="2083.html">Sharing Structs Between Objects</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/axoobject-code.html" itemprop="url">
        <span itemprop="title">AxoObject coding</span>
      </a>
    </div>
</div>





<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/toneburst.html'><b itemprop='author'>toneburst</b></a>
           
           <time datetime='2016-08-05T13:47:57Z' itemprop='datePublished'>
             2016-08-05 13:47:57 UTC
           </time>
        </span>
        <span itemprop='position'>#1</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Is it possible to do the following?</p>

<p><strong>In Object A</strong></p>

<ul>
<li>define a data struct in <em>Local Data</em>
</li>
<li>define and populate an instance of struct with data (preferably in SDRAM) in <em>Init Code</em>
</li>
</ul>

<p><strong>In Object B</strong></p>

<ul><li>Access data stored in struct in <strong>Object A</strong> using object-name-reference stored in <em>ObjRef</em> attribute and standard struct-access .syntax</li></ul>

<p>I know this is an obscure thing to want to do, but I have a good reason (I think).</p>

<p>a|x</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Sharing Structs Between Objects'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/toneburst.html'><b itemprop='author'>toneburst</b></a>
           
           <time datetime='2016-08-05T15:30:49Z' itemprop='datePublished'>
             2016-08-05 15:30:49 UTC
           </time>
        </span>
        <span itemprop='position'>#2</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>It does seem to be possible, but not to put the struct into SDRAM. I guess that's only for unstructured arrays.</p>

<p><a class="attachment" href="../../uploads/default/original/2X/c/struct_send_test.axp">struct_send_test.axp</a> (2.1 KB)</p>

<p>I'd like to know if this would work properly with polyphonic patches, though, or if it could be tweaked to store the struct in SDRAM.</p>

<p>a|x</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:2'>
      <meta itemprop='headline' content='Sharing Structs Between Objects'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/thetechnobear.html'><b itemprop='author'>thetechnobear</b></a>
           
           <time datetime='2016-08-05T16:13:57Z' itemprop='datePublished'>
             2016-08-05 16:13:57 UTC
           </time>
        </span>
        <span itemprop='position'>#3</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>yes its possible , but your syntax is incorrect.</p>

<p>try<br></p>

<p></p><pre><code>static  const _myStructDef _myStruct __attribute__ ((section (".sdram"))) = {.myBool = true, .myInt = 345} ;</code></pre>

<p>your mixing up declaration and initialisation, so this is probably worth you reading up about.</p>

<p>also _myStructDef is not a good naming convention (in C) as its a type name, its a good practice to use different naming styles for types and instances, otherwise things get confusing fast <img src="../../images/emoji/emoji_one/wink5e1f.png?v=2" title=":wink:" class="emoji" alt=":wink:">  (if you want other programmers to look at it)</p>

<p>your next issue, is about const, you have to initialise constants, you cannot just assign them (so your pointer assignment will fail)... again, lots of stuff on the net and in C/C++ books about this.</p>

<p>EDIT: <a href="http://stackoverflow.com/" rel="nofollow">http://stackoverflow.com</a> is a great resource for searching for syntax errors and fixing, actually just a great programming resource full stop.  every programming question ever asked, has been answered there.... ok, slight exaggeration, but you'll be amazed at its coverage <img src="../../images/emoji/emoji_one/slight_smile5e1f.png?v=2" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:2'>
      <meta itemprop='headline' content='Sharing Structs Between Objects'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/toneburst.html'><b itemprop='author'>toneburst</b></a>
           
           <time datetime='2016-08-05T16:29:53Z' itemprop='datePublished'>
             2016-08-05 16:29:53 UTC
           </time>
        </span>
        <span itemprop='position'>#4</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Thanks very much for the tips.</p>

<p>I must admit, I have been confused about declaration and initialisation for a while now. I really should have read up on it earlier. I'll probably have to go through all the objects I've made and change things to make more sense (though they do appear all to be working, somehow).</p>

<p>Re. naming conventions:<br>I know what you mean. I did try adding the underscore to the type name, but then I stupidly added it also to the name of the struct, to make it look different to the pointer that points to it, as I've seen this done in the factory file-read object.</p>

<p>Is there a 'standard' or common convention for type definition naming? ALL_CAPS for type definition names, perhaps?</p>

<p>Re. stackoverflow:<br>I know it well. I've spend a LOT of time on there over the years, believe me...<br>I'm not a noob programmer, just new to C (or at least building on a very limited knowledge of it, from many years ago, which more-or-less amount to the same thing).<br>Having said that, I'm 100% self-taught, so don't have a strong grasp on some of the basics, to my shame.</p>

<p>a|x</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Sharing Structs Between Objects'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/johannes.html'><b itemprop='author'>johannes</b></a>
           
           <time datetime='2016-08-05T16:39:05Z' itemprop='datePublished'>
             2016-08-05 16:39:05 UTC
           </time>
        </span>
        <span itemprop='position'>#5</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="2" data-topic="2083"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v2/letter/t/b9e5f3/40.png" class="avatar">toneburst:</div>
<blockquote><p>It does seem to be possible, but not to put the struct into SDRAM. I guess that's only for unstructured arrays.</p></blockquote></aside>

<p>I believe the problem is not the struct in sdram, but the initializer, assigning initial data for something in sdram.</p>

<aside class="quote" data-post="2" data-topic="2083"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v2/letter/t/b9e5f3/40.png" class="avatar">toneburst:</div>
<blockquote><p>I'd like to know if this would work properly with polyphonic patches, though, or if it could be tweaked to store the struct in SDRAM.</p></blockquote></aside>

<p>A <code>static</code> variable means its contents will be shared in a polyphonic context. The static keyword is required to be able to specify alternate memory segments, required for sdram and DMA. To use sdram <em>without</em> sharing data across all voices, a static array can be used with an element per voice. The table and delay objects use this approach.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Sharing Structs Between Objects'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/thetechnobear.html'><b itemprop='author'>thetechnobear</b></a>
           
           <time datetime='2016-08-05T16:46:21Z' itemprop='datePublished'>
             2016-08-05 16:46:21 UTC
           </time>
        </span>
        <span itemprop='position'>#6</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>there are lots of naming conventions <img src="../../images/emoji/emoji_one/slight_smile5e1f.png?v=2" title=":slight_smile:" class="emoji" alt=":slight_smile:"> <br>I guess today, many use the google style guide, so thats as good as any.</p>

<p>one tip, look at the xpatch.cpp, and find the instance of the object you have created, it can be important at times to see what the generated C++ class looks like, and how your code is inserted.<br>also if you turn on expert mode (axoloti prefs), you can even edit the xpatch.cpp directly and compile it, can be useful for trying things out.<br>if you do look at the xpatch.cpp, Id recommend a code formatter , like astyle,  to reformat it first, it makes it much easier to read.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Sharing Structs Between Objects'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/toneburst.html'><b itemprop='author'>toneburst</b></a>
           
           <time datetime='2016-08-05T22:19:03Z' itemprop='datePublished'>
             2016-08-05 22:19:03 UTC
           </time>
        </span>
        <span itemprop='position'>#7</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="3" data-topic="2083"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/community.axoloti.com/thetechnobear/40/6_1.html" class="avatar">thetechnobear:</div>
<blockquote><p>your next issue, is about const, you have to initialise constants, you cannot just assign them (so your pointer assignment will fail)... again, lots of stuff on the net and in C/C++ books about this.</p></blockquote></aside>

<p>This does seem to work though, with the constant declared and initialised (isnt that what the <em>{true, 345}</em> does?) in the <em>Init Code</em> section of the sender object.</p>

<p>a|x</p>

<p><a class="attachment" href="../../uploads/default/original/2X/a/struct_send_test.axp">struct_send_test.axp</a> (2.0 KB)</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Sharing Structs Between Objects'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/toneburst.html'><b itemprop='author'>toneburst</b></a>
           
           <time datetime='2016-08-06T00:38:21Z' itemprop='datePublished'>
             2016-08-06 00:38:21 UTC
           </time>
        </span>
        <span itemprop='position'>#8</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Is it possible for one object to allocate multiple items in SDRAM?</p>

<p>I'm trying to allocate an array and a struct (as above) as two separate chunks of data in SDRAM.</p>

<p>If I make the struct (and the pointer pointing to it) constant, as above, I get an error:</p>

<p><code>/Users/alx/Documents/axoloti/build/xpatch.cpp:815:16: error: vsm_rom_data_sdram causes a section type conflict with lpc_tables_sdram<br> static uint8_t vsm_rom_data_sdram[1][LENGTH] __attribute__ ((section (".sdram")));<br>                ^<br>/Users/alx/Documents/axoloti/build/xpatch.cpp:1014:28: note: 'lpc_tables_sdram' was declared here<br> static const Tms5100Coeffs lpc_tables_sdram[1] __attribute__ ((section (".sdram"))) = T0280B_0281A_coeff<br>                            ^</code><br>If I make the struct in SDRAM non-constant, it doesn't generate an error, but the values retrieved by the receiver objects are garbage.</p>

<p>It works fine if I allocate the struct in SRAM.</p>

<p>a|x</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Sharing Structs Between Objects'>
      <hr>
  </div>






    </div>
    <footer class="container">
      <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <a href='../../index.html'>Home</a>
        <a href="../../categories.html">Categories</a>
        <a href="../../guidelines.html">FAQ/Guidelines</a>
        <a href="../../tos.html">Terms of Service</a>
        <a href="../../privacy.html">Privacy Policy</a>
      </nav>
      <p>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  

<!-- Mirrored from community.axoloti.com/t/sharing-structs-between-objects/2083 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 10 Jul 2023 16:58:16 GMT -->
</html>
