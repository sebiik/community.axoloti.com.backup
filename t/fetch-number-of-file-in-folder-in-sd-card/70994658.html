<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from community.axoloti.com/t/fetch-number-of-file-in-folder-in-sd-card/7099?page=2 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 19 Jul 2023 03:30:31 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Fetch number of file in folder in SD card - Patching - Axoloti Community</title>
    <meta name="description" content="Hi all! 

I&amp;#39;m working on a kind of rhythm machine based mainly on sample. I would like to be able to load Raw samples on different folders and not having to go inside the patch to mention the program how much raw file th&amp;hellip;">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.9.0.beta3 - https://github.com/discourse/discourse version 13f3de4bf673802eb8ec595d36587b4524773209">
<link rel="icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="70994658.html?page=2" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"http://community.axoloti.com","potentialAction":{"@type":"SearchAction","target":"http://community.axoloti.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Axoloti Community Search">

        <link href="../../stylesheets/desktop_d93a33ca8617326fe353f80e6ab865188244d48c8e0b.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop"/>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','../../../www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Fetch number of file in folder in SD card&#39;" href="7099.rss" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:url" content="http://community.axoloti.com/t/fetch-number-of-file-in-folder-in-sd-card/7099?page=2" />
<meta name="twitter:url" content="http://community.axoloti.com/t/fetch-number-of-file-in-folder-in-sd-card/7099?page=2" />
<meta property="og:title" content="Fetch number of file in folder in SD card" />
<meta name="twitter:title" content="Fetch number of file in folder in SD card" />
<meta property="og:description" content="Yup, that did the trick, I added an inlet and the following code: if ((inlet_reset&gt;0) &amp;&amp; !ntrig) { 	ntrig = 1; cnt = 0; }   So basically each time I press the &quot;change folder path&quot; button, it triggers the reset, then a delayed pulse object triggers the Findfree inlet.   It seems to work well like this but it seems to need at least 100ms of delay beatween the triggers, otherwise it stays stuck at cnt=0.   Thanks a lot!   @tele_player Oh great, I&#39;m only reverse engineering the objects so coding fro..." />
<meta name="twitter:description" content="Yup, that did the trick, I added an inlet and the following code: if ((inlet_reset&gt;0) &amp;&amp; !ntrig) { 	ntrig = 1; cnt = 0; }   So basically each time I press the &quot;change folder path&quot; button, it triggers the reset, then a delayed pulse object triggers the Findfree inlet.   It seems to work well like this but it seems to need at least 100ms of delay beatween the triggers, otherwise it stays stuck at cnt=0.   Thanks a lot!   @tele_player Oh great, I&#39;m only reverse engineering the objects so coding fro..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="4 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="2 ❤" />

      <link rel="prev" href="7099.html">

  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html"><img src="../../uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo" style="max-width: 150px;"></a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1>
  <a href="7099.html">Fetch number of file in folder in SD card</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/patching.html" itemprop="url">
        <span itemprop="title">Patching</span>
      </a>
    </div>
</div>





<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/Paulus.html'><b itemprop='author'>Paulus</b></a>
           
           <time datetime='2021-12-13T18:29:04Z' itemprop='datePublished'>
             2021-12-13 18:29:04 UTC
           </time>
        </span>
        <span itemprop='position'>#21</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Yup, that did the trick, I added an inlet and the following code:<br>if ((inlet_reset&gt;0) &amp;&amp; !ntrig) {<br>	ntrig = 1;<br>cnt = 0;<br>}</p>

<p>So basically each time I press the "change folder path" button, it triggers the reset, then a delayed pulse object triggers the Findfree inlet.</p>

<p>It seems to work well like this but it seems to need at least 100ms of delay beatween the triggers, otherwise it stays stuck at cnt=0.</p>

<p>Thanks a lot!</p>

<p><a class="mention" href="../../u/tele_player.html">@tele_player</a><br>Oh great, I'm only reverse engineering the objects so coding from scratch is still out of reach at the moment, but i'll look into the commands you are refering to!</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Fetch number of file in folder in SD card'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/AndrewChi.html'><b itemprop='author'>AndrewChi</b></a>
           
           <time datetime='2021-12-13T18:46:06Z' itemprop='datePublished'>
             2021-12-13 18:46:06 UTC
           </time>
        </span>
        <span itemprop='position'>#22</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Great to read that it works!!<br>Are you planning to share the object?<br>Sounds like a very useful thing <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Fetch number of file in folder in SD card'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/Paulus.html'><b itemprop='author'>Paulus</b></a>
           
           <time datetime='2021-12-13T21:34:50Z' itemprop='datePublished'>
             2021-12-13 21:34:50 UTC
           </time>
        </span>
        <span itemprop='position'>#23</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hey, yes, I could share it here once I'm done cleaning the object.</p>

<p>At the moment it is working but I still need to resolve some trouble in my patch: I'm actually using it in some kind of drum machine. When I press a button, my patch is looking for a sample folder and the samples inside this folder are played/streamed directly to the output of the AXO. <br>But it seems that the Axo does not like having different operations on the SD card at the same time: when i change the folder and the custom object is browsing the files, there is a digital blip/glitch if a sample is being played at the same time.</p>

<p>I might have to ask the object to browse every folder at the start of the patch, before playing samples, and store the values of the number of files in each folder in tables so I can recall it while playing.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Fetch number of file in folder in SD card'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/SirSickSik.html'><b itemprop='author'>SirSickSik</b></a>
           
           <time datetime='2021-12-14T11:56:33Z' itemprop='datePublished'>
             2021-12-14 11:56:33 UTC
           </time>
        </span>
        <span itemprop='position'>#24</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>if teleplayer is right about the  f_opendir() and f_readdir() working on the axoloti, I'ld go that way...<br>my way was a work around as I didn't know these codes either, but they should be waaay faster.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Fetch number of file in folder in SD card'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/tele_player.html'><b itemprop='author'>tele_player</b></a>
           
           <time datetime='2021-12-14T17:26:43Z' itemprop='datePublished'>
             2021-12-14 17:26:43 UTC
           </time>
        </span>
        <span itemprop='position'>#25</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Try this:</p>

<p><a class="attachment" href="../../uploads/default/original/2X/0/filecount2.axp">filecount2.axp</a> (1.8 KB)</p>

<p>The embedded object has an edit button, use it to enter the folder name; be sure to include the leading /    .</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:2'>
      <meta itemprop='headline' content='Fetch number of file in folder in SD card'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/Paulus.html'><b itemprop='author'>Paulus</b></a>
           
           <time datetime='2021-12-14T20:27:48Z' itemprop='datePublished'>
             2021-12-14 20:27:48 UTC
           </time>
        </span>
        <span itemprop='position'>#26</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hey great thanks a lot!<br>I'm away from my axo for a week, I'll test your object as soon as I get back.<br>For my use, i would need to have the folder directory as a string inlet.<br>I guess if I replace the attr_folder with an charptr32 inlet it would work?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Fetch number of file in folder in SD card'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/tele_player.html'><b itemprop='author'>tele_player</b></a>
           
           <time datetime='2021-12-15T04:43:16Z' itemprop='datePublished'>
             2021-12-15 04:43:16 UTC
           </time>
        </span>
        <span itemprop='position'>#27</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Yes, that’s a simple change. I just wanted to demonstrate the use of  opendir and readdir, and how to use Init Code to do something just once.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:2'>
      <meta itemprop='headline' content='Fetch number of file in folder in SD card'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/Paulus.html'><b itemprop='author'>Paulus</b></a>
           
           <time datetime='2021-12-15T10:53:10Z' itemprop='datePublished'>
             2021-12-15 10:53:10 UTC
           </time>
        </span>
        <span itemprop='position'>#28</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Yes, and it is of great help, I understand how it works now!</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Fetch number of file in folder in SD card'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/AndrewChi.html'><b itemprop='author'>AndrewChi</b></a>
           
           <time datetime='2021-12-16T13:58:12Z' itemprop='datePublished'>
             2021-12-16 13:58:12 UTC
           </time>
        </span>
        <span itemprop='position'>#29</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Thanks so much!!! This is brilliant!! <img src="../../images/emoji/twitter/prayae52.png?v=5" title=":pray:" class="emoji" alt=":pray:"></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Fetch number of file in folder in SD card'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/Paulus.html'><b itemprop='author'>Paulus</b></a>
           
           <time datetime='2021-12-25T16:57:57Z' itemprop='datePublished'>
             2021-12-25 16:57:57 UTC
           </time>
        </span>
        <span itemprop='position'>#30</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>So I'm back at my Axoloti.<br>I can't seem to make your object work with a string inlet.<br>I believe your code is in the Init part so it will only run once?<br>What I would like to do is be able to read the number of file in a folder while being able to change the folder path dynamically.</p>

<p>I tried to fiddle with the code but i'm not good enough to make it work yet I guess.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Fetch number of file in folder in SD card'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/tele_player.html'><b itemprop='author'>tele_player</b></a>
           
           <time datetime='2021-12-25T17:33:11Z' itemprop='datePublished'>
             2021-12-25 17:33:11 UTC
           </time>
        </span>
        <span itemprop='position'>#31</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Specifically, how will user enter the folder name? Select from a list? A fixed list, or one that is generated at run time according the contents of the SD?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Fetch number of file in folder in SD card'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/Paulus.html'><b itemprop='author'>Paulus</b></a>
           
           <time datetime='2021-12-25T17:59:50Z' itemprop='datePublished'>
             2021-12-25 17:59:50 UTC
           </time>
        </span>
        <span itemprop='position'>#32</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p><a class="mention" href="../../u/tele_player.html">@tele_player</a> <br>I use the object from rbrt "choose" that outputs a constant string based on an input index. Basically, everytime I push a button, the path of a folder changes.<br>I'd like to take this path as a string and feed your object with it, that will in turn give me the number of file present in this folder.<br>Maybe I need a trigger input to tell your object to search the folder only once when a trigger is present?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Fetch number of file in folder in SD card'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/ivofx.html'><b itemprop='author'>ivofx</b></a>
           
           <time datetime='2022-01-02T17:52:48Z' itemprop='datePublished'>
             2022-01-02 17:52:48 UTC
           </time>
        </span>
        <span itemprop='position'>#33</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I found this function and remembered this question, just pasting here without having read the full thread - please excuse my ignorance. Hope it helps.</p>

<p></p><pre><code class="lang-auto">uint16_t getNumFilesInDir (char* path)
{
	FRESULT res;
	FILINFO fno;
	DIR dir;
	char *fn;
	static char lfn[_MAX_LFN + 1];
	fno.lfname = lfn;
	fno.lfsize = sizeof(lfn);
	int i = 0;

	res = f_opendir(&amp;dir, path);                       /* Open the directory */
	if (res == FR_OK) {
		for (;;) {
			res = f_readdir(&amp;dir, &amp;fno);                   /* Read a directory item */
			if (res != FR_OK || fno.fname[0] == 0) break;  /* Break on error or end of dir */
			fn = *fno.lfname ? fno.lfname : fno.fname;

			if (!(fno.fattrib &amp; AM_DIR))                   /* It is a file. */
				i++;
		}
	}
	return i;
}</code></pre>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Fetch number of file in folder in SD card'>
      <hr>
  </div>

  <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement'>
      <span itemprop='url'><a rel="prev" itemprop="name" href="7099.html">← previous page</a></span>
  </div>





    </div>
    <footer class="container">
      <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <a href='../../index.html'>Home</a>
        <a href="../../categories.html">Categories</a>
        <a href="../../guidelines.html">FAQ/Guidelines</a>
        <a href="../../tos.html">Terms of Service</a>
        <a href="../../privacy.html">Privacy Policy</a>
      </nav>
      <p>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  

<!-- Mirrored from community.axoloti.com/t/fetch-number-of-file-in-folder-in-sd-card/7099?page=2 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 19 Jul 2023 03:30:31 GMT -->
</html>
