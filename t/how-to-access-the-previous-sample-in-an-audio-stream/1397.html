<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from community.axoloti.com/t/how-to-access-the-previous-sample-in-an-audio-stream/1397 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 10 Jul 2023 16:49:22 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>How to access the &#39;previous sample&#39; in an audio stream? - Software - Axoloti Community</title>
    <meta name="description" content="Hi, I am trying to create a zero-crossing detector, that is, as soon as the audio value crosses the 0 axis to output a value (e.g. 1) for 1 sample only. I could do this by comparing the previous audio sample with the cur&amp;hellip;">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.9.0.beta3 - https://github.com/discourse/discourse version 13f3de4bf673802eb8ec595d36587b4524773209">
<link rel="icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="1397.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"http://community.axoloti.com","potentialAction":{"@type":"SearchAction","target":"http://community.axoloti.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Axoloti Community Search">

        <link href="../../stylesheets/desktop_d93a33ca8617326fe353f80e6ab865188244d48c8e0b.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop"/>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','../../../www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;How to access the &#39;previous sample&#39; in an audio stream?&#39;" href="1397.rss" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:url" content="http://community.axoloti.com/t/how-to-access-the-previous-sample-in-an-audio-stream/1397" />
<meta name="twitter:url" content="http://community.axoloti.com/t/how-to-access-the-previous-sample-in-an-audio-stream/1397" />
<meta property="og:title" content="How to access the &#39;previous sample&#39; in an audio stream?" />
<meta name="twitter:title" content="How to access the &#39;previous sample&#39; in an audio stream?" />
<meta property="og:description" content="Hi, I am trying to create a zero-crossing detector, that is, as soon as the audio value crosses the 0 axis to output a value (e.g. 1) for 1 sample only. I could do this by comparing the previous audio sample with the current sample, but how do I access the previous value? In a soft synth I used before there was a &quot;z^-1&quot; module that did exactly that (kept the previous sample value).  Any suggestions? Thanks." />
<meta name="twitter:description" content="Hi, I am trying to create a zero-crossing detector, that is, as soon as the audio value crosses the 0 axis to output a value (e.g. 1) for 1 sample only. I could do this by comparing the previous audio sample with the current sample, but how do I access the previous value? In a soft synth I used before there was a &quot;z^-1&quot; module that did exactly that (kept the previous sample value).  Any suggestions? Thanks." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins ðŸ•‘" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="1 â¤" />


  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html"><img src="../../uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo" style="max-width: 150px;"></a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1>
  <a href="1397.html">How to access the &#39;previous sample&#39; in an audio stream?</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/software.html" itemprop="url">
        <span itemprop="title">Software</span>
      </a>
    </div>
</div>





<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/gabriel.html'><b itemprop='author'>gabriel</b></a>
           
           <time datetime='2016-03-29T09:23:44Z' itemprop='datePublished'>
             2016-03-29 09:23:44 UTC
           </time>
        </span>
        <span itemprop='position'>#1</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hi,<br>I am trying to create a zero-crossing detector, that is, as soon as the audio value crosses the 0 axis to output a value (e.g. 1) for 1 sample only. I could do this by comparing the previous audio sample with the current sample, but how do I access the previous value?<br>In a soft synth I used before there was a "z^-1" module that did exactly that (kept the previous sample value). <br>Any suggestions? Thanks.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='How to access the &#39;previous sample&#39; in an audio stream?'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/SirPrimalform.html'><b itemprop='author'>SirPrimalform</b></a>
           
           <time datetime='2016-03-29T13:45:05Z' itemprop='datePublished'>
             2016-03-29 13:45:05 UTC
           </time>
        </span>
        <span itemprop='position'>#2</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Store the current sample in a variable at some point in your code and then access it earlier in the code so that when it's accessed it's what was stored the last time round. I doubt there's a pre-defined global variable for 'previous sample', so just store it at some point and then check it next time round before it's overwritten.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='How to access the &#39;previous sample&#39; in an audio stream?'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/gabriel.html'><b itemprop='author'>gabriel</b></a>
           
           <time datetime='2016-03-29T14:47:03Z' itemprop='datePublished'>
             2016-03-29 14:47:03 UTC
           </time>
        </span>
        <span itemprop='position'>#3</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Thanks very much for your reply. Unfortunately the lack of documentation is killing me, so please bear with me.<br>I am unsure how this can be done in the S-rate Code of an object. <br>Each time I call (let's say) inlet_in1, do I get an updated value of the current audio stream every time it is called?  Or better, how do I get an updated value of the stream?<br>Thanks.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='How to access the &#39;previous sample&#39; in an audio stream?'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/SirPrimalform.html'><b itemprop='author'>SirPrimalform</b></a>
           
           <time datetime='2016-03-29T14:55:53Z' itemprop='datePublished'>
             2016-03-29 14:55:53 UTC
           </time>
        </span>
        <span itemprop='position'>#4</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I'm not sure myself, I'm just trying to apply common sense here so I also need you to bear with me. <img src="../../images/emoji/emoji_one/smilea4f0.png?v=0" title=":smile:" class="emoji" alt=":smile:"> </p>

<p>I would think that the s-rate code block is run in its entirety once per sample. So when you call inlet_in1 you get the sample currently being evaluated... so calling that several times within the block will get you the same sample several times until the s-rate code reaches its end at which point it starts all over again for the next sample. So to refer to the previous sample, you have to have stored it somewhere in the previous run of the s-rate code. So if right at the end of your s-rate code you store  'inlet_in1' in 'prev' or whatever, then I would think you can then check 'prev' earlier in the s-rate code to see what the previous sample was.</p>

<p>So to answer the question of how you get an updated value, the answer would be wait until the next pass of the s-rate code.</p>

<p>I hope that makes sense (and is in fact correct, I'm hoping someone will confirm this for both of our sakes).</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='How to access the &#39;previous sample&#39; in an audio stream?'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/thetechnobear.html'><b itemprop='author'>thetechnobear</b></a>
           
           <time datetime='2016-03-29T17:20:56Z' itemprop='datePublished'>
             2016-03-29 17:20:56 UTC
           </time>
        </span>
        <span itemprop='position'>#5</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>is it not possible to just use a delay line?<br>e.g. <br>table size 2<br>delay permanently set at 50% (32) </p>

<p>if your are writing  custom objects, theres a few ways to do it... either in s-rate, or the k-rate code has access to an entire buffers (16 samples). also both have access to both inlet and (previous) outlet data.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='How to access the &#39;previous sample&#39; in an audio stream?'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/gabriel.html'><b itemprop='author'>gabriel</b></a>
           
           <time datetime='2016-03-29T17:26:24Z' itemprop='datePublished'>
             2016-03-29 17:26:24 UTC
           </time>
        </span>
        <span itemprop='position'>#6</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Thanks for the pointers! Will investigate these.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='How to access the &#39;previous sample&#39; in an audio stream?'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/SirPrimalform.html'><b itemprop='author'>SirPrimalform</b></a>
           
           <time datetime='2016-03-29T17:40:50Z' itemprop='datePublished'>
             2016-03-29 17:40:50 UTC
           </time>
        </span>
        <span itemprop='position'>#7</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Delay lines didn't occur to me as I assumed the OP was talking about within an object's code.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='How to access the &#39;previous sample&#39; in an audio stream?'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/gabriel.html'><b itemprop='author'>gabriel</b></a>
           
           <time datetime='2016-03-29T18:13:02Z' itemprop='datePublished'>
             2016-03-29 18:13:02 UTC
           </time>
        </span>
        <span itemprop='position'>#8</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Sorry to ask again, but I must be looking in the wrong place.<br>The delay/echo module allows me to delay by 33 samples (?)<br>How do I delay by 1 sample (<a class="mention" href="../../users/thetechnobear.html">@thetechnobear</a> mentioned table size 2).</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='How to access the &#39;previous sample&#39; in an audio stream?'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/thetechnobear.html'><b itemprop='author'>thetechnobear</b></a>
           
           <time datetime='2016-03-29T19:43:17Z' itemprop='datePublished'>
             2016-03-29 19:43:17 UTC
           </time>
        </span>
        <span itemprop='position'>#9</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>sorry, mixing my tables and delays up... (they are pretty similar <img src="../../images/emoji/emoji_one/winka4f0.png?v=0" title=":wink:" class="emoji" alt=":wink:"> ) <br>ok so with table write, you have a minimum of 256 samples, so one sample would be 64/256...</p>

<p>its a pity delay/echo doesnt go down to 1... only 32</p>

<p>my only 'fear' with all this, is working at this individual sample level is not very efficient, it would perhaps be worth considering doing this on the sample buffer (16 samples), and then incorporating your further logic.</p>

<p>the concern here is once you solve the Z-1, your then going to have to do a lot of other processing, potentially at sample level, so whilst the initial problem is solved, your just heading for bigger ones down the line e.g. you'll fine many objects that dont work at this level, for this reason.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='How to access the &#39;previous sample&#39; in an audio stream?'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/gabriel.html'><b itemprop='author'>gabriel</b></a>
           
           <time datetime='2016-03-29T20:56:12Z' itemprop='datePublished'>
             2016-03-29 20:56:12 UTC
           </time>
        </span>
        <span itemprop='position'>#10</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Thank you for the follow up! I learned something new about the tables.<br>In the mean time I found the <strong>filter/delta</strong>, which in combination with the relay object I managed to come up with, do exactly what I needed. Now I have a pitch follower driving a sine oscillator from the microphone input (takes 6% of the CPU load)  It is very sensitive and difficult to tune, but if anybody is interested I can post it. Probably it has several questionable and inefficient choices, but this is the first thing I could do with the new board. <img src="../../images/emoji/emoji_one/smilea4f0.png?v=0" title=":smile:" class="emoji" alt=":smile:"></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='How to access the &#39;previous sample&#39; in an audio stream?'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/lokki.html'><b itemprop='author'>lokki</b></a>
           
           <time datetime='2016-09-27T20:28:35Z' itemprop='datePublished'>
             2016-09-27 20:28:35 UTC
           </time>
        </span>
        <span itemprop='position'>#11</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>yeah please post it, i'm interested!</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='How to access the &#39;previous sample&#39; in an audio stream?'>
      <hr>
  </div>






    </div>
    <footer class="container">
      <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <a href='../../index.html'>Home</a>
        <a href="../../categories.html">Categories</a>
        <a href="../../guidelines.html">FAQ/Guidelines</a>
        <a href="../../tos.html">Terms of Service</a>
        <a href="../../privacy.html">Privacy Policy</a>
      </nav>
      <p>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  

<!-- Mirrored from community.axoloti.com/t/how-to-access-the-previous-sample-in-an-audio-stream/1397 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 10 Jul 2023 16:49:23 GMT -->
</html>
