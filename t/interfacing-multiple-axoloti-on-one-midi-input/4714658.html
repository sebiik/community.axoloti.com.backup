<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from community.axoloti.com/t/interfacing-multiple-axoloti-on-one-midi-input/471?page=2 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 16 Jul 2023 18:19:07 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Interfacing multiple axoloti on one midi input - Hardware - Axoloti Community</title>
    <meta name="description" content="i wonder if itt is possible to have multiple axoloti on one midi input (hard wired together)? 

so it&amp;#39;ll turn out like this:  midi in port &amp;gt; optocoupler &amp;gt; split opto-coupled midi signal for the required boards &amp;gt; every ax&amp;hellip;">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.9.0.beta3 - https://github.com/discourse/discourse version 13f3de4bf673802eb8ec595d36587b4524773209">
<link rel="icon" type="image/png" href="https://sebiik.github.io/community.axoloti.com.backup/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="https://sebiik.github.io/community.axoloti.com.backup/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="https://sebiik.github.io/community.axoloti.com.backup/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="4714658.html?page=2" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"http://community.axoloti.com","potentialAction":{"@type":"SearchAction","target":"http://community.axoloti.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Axoloti Community Search">

        <link href="../../stylesheets/desktop_d93a33ca8617326fe353f80e6ab865188244d48c8e0b.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop"/>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Interfacing multiple axoloti on one midi input&#39;" href="471.rss" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:url" content="http://community.axoloti.com/t/interfacing-multiple-axoloti-on-one-midi-input/471?page=2" />
<meta name="twitter:url" content="http://community.axoloti.com/t/interfacing-multiple-axoloti-on-one-midi-input/471?page=2" />
<meta property="og:title" content="Interfacing multiple axoloti on one midi input" />
<meta name="twitter:title" content="Interfacing multiple axoloti on one midi input" />
<meta property="og:description" content="haven&#39;t been tested between axoloti&#39;s, but I&#39;ve got sort of a bundle of modules working together in this patch (see below for patch). It consists of 3 parts: 1- control/note encoding modules (2 modules for controls: 8x 16 bit single and 8x 8bit dual X/Y controls into a 32bit single pulse message)  2- data combiner combines the 32bit single pulse message of up to 8 encoder modules into one serial stream to be connected to a GPIO. 3- serial decoding receive modules for notes and controls (all list..." />
<meta name="twitter:description" content="haven&#39;t been tested between axoloti&#39;s, but I&#39;ve got sort of a bundle of modules working together in this patch (see below for patch). It consists of 3 parts: 1- control/note encoding modules (2 modules for controls: 8x 16 bit single and 8x 8bit dual X/Y controls into a 32bit single pulse message)  2- data combiner combines the 32bit single pulse message of up to 8 encoder modules into one serial stream to be connected to a GPIO. 3- serial decoding receive modules for notes and controls (all list..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="6 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="6 ❤" />

      <link rel="prev" href="471.html">

  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html"><img src="http://community.axoloti.com/uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo" style="max-width: 150px;"></a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1>
  <a href="471.html">Interfacing multiple axoloti on one midi input</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/hardware.html" itemprop="url">
        <span itemprop="title">Hardware</span>
      </a>
    </div>
</div>





<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/SirSickSik.html'><b itemprop='author'>SirSickSik</b></a>
           
           <time datetime='2019-07-18T16:05:54Z' itemprop='datePublished'>
             2019-07-18 16:05:54 UTC
           </time>
        </span>
        <span itemprop='position'>#21</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>haven't been tested between axoloti's, but I've got sort of a bundle of modules working together in this patch (see below for patch).<br>It consists of 3 parts:<br>1- control/note encoding modules (2 modules for controls: 8x 16 bit single and 8x 8bit dual X/Y controls into a 32bit single pulse message) <br>2- data combiner combines the 32bit single pulse message of up to 8 encoder modules into one serial stream to be connected to a GPIO.<br>3- serial decoding receive modules for notes and controls (all listen to a single data stream, multiple streams can be used to divide up the data to reduce latency. eg. seperate the note and control messages over two seperate GPIO's)</p>

<p>1 <br>the control encoding modules come in two options.<br>-the first one excepts 8 controls and encodes these in 16 bits resolution, each having their own controller CC, all having the same channel<br>the second one excepts 8 controls and encodes these as 8bit XY pairs, each pair having their own controller CC, all having the same channel</p>

<p>the note encoding module comes in one option, just a single "mono" trigger. To play polyphonic, just add multiple of these as the normal cv2midi module and connect them all to the same datacombiner.</p>

<p>all this encoded data is being send as single 32bit pulses whenever a control changes. This pulse contains all the channel, type, control and value data in 32bits.</p>

<p>2<br>The data combiner takes in the 32bit pulses of the connected control/note modules, put them in a buffer and play the bits of the buffer serially until the buffer is empty again. Up to 64 pulses can go into the memory, if this is not enough, it could be set higher inside the code (enlarge the buffer array and change the values of the "wp" and "rp" (write and read position) where it says "&amp;63"-&gt;use powers of two and use the lengthmask to keep read and write positions between the boundries.<br>The output of this module should be connected to a GPIO.<br>As the data of the controller module can "run a bit out of hand", it's recommended to use seperate modules for note and control data.</p>

<p>3<br>All the receive modules just listen to the same data stream.<br>Whenever the input goes high for the first time, it starts reading out the message, which will always be 32bit, and send it to one of the outputs in case the channel, type and control number correspond with the selected channel/control number set on the module and whether the module is of the same type (note/16b control/dual 8bit control)</p>

<p>The control receive modules have 8 outputs that output the last decoded values from the serial stream.<br>An attribute spinner sets which channel the module will listen to. 2 modules to decode the 16bit and dual 8bit codes.</p>

<p>For the note receiving, I've got 3 modules:<br>-a simple mono receiver, it was my first try to get the values out of the stream<br>-a simple 4 voice receiver with a top to bottom note priority: it will always try to fill the first outputs, last one only gets filled when there are actually 4 notes playinh</p>

<p>-a converter module to decode the stream into data and then encode it into midi, so it can be internally used in the normal sense.</p>

<p>and a nice pattern generator to test the polyphony <img src="http://community.axoloti.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>

<p><a class="attachment" href="../../uploads/default/original/2X/6/serial%20data%20connection.axp">serial data connection.axp</a> (115.0 KB)</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Interfacing multiple axoloti on one midi input'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/SirSickSik.html'><b itemprop='author'>SirSickSik</b></a>
           
           <time datetime='2019-07-18T16:13:32Z' itemprop='datePublished'>
             2019-07-18 16:13:32 UTC
           </time>
        </span>
        <span itemprop='position'>#22</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>oh, as for the syncing... this is a first try.<br>I will probably need a second trigger signal running alongside to sync things. At the moment I did it simple by just sending one high bit to start the stream. From that first trigger, the receiving modules will start reading until they've read 32bits (whatever the sending axoloti does, so this might get out of sync). Then they start waiting on the next incoming stream.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Interfacing multiple axoloti on one midi input'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/SirSickSik.html'><b itemprop='author'>SirSickSik</b></a>
           
           <time datetime='2019-07-18T16:31:30Z' itemprop='datePublished'>
             2019-07-18 16:31:30 UTC
           </time>
        </span>
        <span itemprop='position'>#23</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>whahahahhahahahahahahahaha<br>it works over GPIO LOLOLOLOLOL</p>

<p>too soon.. got hanging notes every once in a while<br>though controls seem to work ok..</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Interfacing multiple axoloti on one midi input'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/tele_player.html'><b itemprop='author'>tele_player</b></a>
           
           <time datetime='2019-07-18T17:24:37Z' itemprop='datePublished'>
             2019-07-18 17:24:37 UTC
           </time>
        </span>
        <span itemprop='position'>#24</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>No offense intended, but do you understand the meanings of synchronous, asynchronous and isochronous?</p>

<p>There’s a good reason for the existence of UARTs and USARTs. Even if you get something working, it’s likely to be slow, and CPU-intensive, at least on the receiving side.</p>

<p>Again, no offense intended, but this is tricky stuff.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Interfacing multiple axoloti on one midi input'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/SirSickSik.html'><b itemprop='author'>SirSickSik</b></a>
           
           <time datetime='2019-07-18T17:32:53Z' itemprop='datePublished'>
             2019-07-18 17:32:53 UTC
           </time>
        </span>
        <span itemprop='position'>#25</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I understand, it's my first try out.<br>it's kinda working, though not optimal.<br>It's also the first time I've hooked up those gpio's of two axoloti together.<br>Gonna test some more this week, I guess . As I'm not using those gpio's anyways, I might as well just abuse them for communication between axoloti's, to have one control module and the rest for drums, synths and fx</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Interfacing multiple axoloti on one midi input'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/weasel79.html'><b itemprop='author'>weasel79</b></a>
           
           <time datetime='2019-09-14T14:07:19Z' itemprop='datePublished'>
             2019-09-14 14:07:19 UTC
           </time>
        </span>
        <span itemprop='position'>#26</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>fwiw yesterday i finally got around to testing the GPIO serial comm with <a class="mention" href="../../u/hugo-2.html">@Hugo</a>'s extra midi io project, and it works like a charm. just connected one axos TX to the others RX. i was able to change the baudrate to 250000 and it still was working fine. now i just have to get my midibox to send at high rates too...</p>

<p>now, a rather general question, can i just split serial data wires physically? ie. one TX pin to 3 RX pins? or do i need to involve voltage buffers? i read up on that a million times but still fail to understand it, i guess it depends on the GPIO RX pins impedance? if they don't draw a lot, it could work w/o buffers? anybody with experience here? put a small R infront of every RX? edit: according to arduino forum posts it should be no issues this way. one rx to several TX needs resistors, but this way around just conenct and go. i'll report.</p>

<p>also, quick forum search didn't yield anything, can i just open several serial conenctions on unique pins?</p>

<p>__<br>update:<br>i managed to forward/channel split midi data incoming from one "control" axoloti's DIN input to two "slave" axolotis with a serial connection, using only the control boards TX pin and both slaves RX pin, with some objects based around hugos work. it runs nice on 250000 baud but i think i do lose some packets or get the LSB MSB shuffled... working with a lot of NRPN 4x cc messages to be deserialized, so its either my parsing being shit or the unprotocolled bitbanging. same parsing algos on the control board yield much better results than on the slave ones. but i think so far the rate of value skips/jumps is not high enough for me to look into it any further...</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Interfacing multiple axoloti on one midi input'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/tele_player.html'><b itemprop='author'>tele_player</b></a>
           
           <time datetime='2019-09-16T03:55:34Z' itemprop='datePublished'>
             2019-09-16 03:55:34 UTC
           </time>
        </span>
        <span itemprop='position'>#27</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Where can I find details on 'extra midi io project'? <br>Are you literally bitbanging - or is a UART being used?</p>

<p>edit: ahh, I found it. Not bitbanging. Nevermind.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Interfacing multiple axoloti on one midi input'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/weasel79.html'><b itemprop='author'>weasel79</b></a>
           
           <time datetime='2019-09-16T11:13:31Z' itemprop='datePublished'>
             2019-09-16 11:13:31 UTC
           </time>
        </span>
        <span itemprop='position'>#28</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>yeah no bits involved i just used that term carelessly for describing i am sending single bytes via uart..</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Interfacing multiple axoloti on one midi input'>
      <hr>
  </div>

  <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement'>
      <span itemprop='url'><a rel="prev" itemprop="name" href="471.html">← previous page</a></span>
  </div>





    </div>
    <footer class="container">
      <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <a href='../../index.html'>Home</a>
        <a href="../../categories.html">Categories</a>
        <a href="../../guidelines.html">FAQ/Guidelines</a>
        <a href="../../tos.html">Terms of Service</a>
        <a href="../../privacy.html">Privacy Policy</a>
      </nav>
      <p>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  

<!-- Mirrored from community.axoloti.com/t/interfacing-multiple-axoloti-on-one-midi-input/471?page=2 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 16 Jul 2023 18:19:08 GMT -->
</html>
