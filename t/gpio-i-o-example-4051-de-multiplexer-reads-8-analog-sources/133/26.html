<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from community.axoloti.com/t/gpio-i-o-example-4051-de-multiplexer-reads-8-analog-sources/133/26 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 10 Jul 2023 17:20:44 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>[GPIO I/O] Example 4051 de/multiplexer reads 8 analog sources - Patching - Axoloti Community</title>
    <meta name="description" content="Hi everyone, 

here is a short example for a 4051 de/multiplexer. The 4051 can be used for extra 8 analog outputs or inputs. The Y0-7 pins are choosen by HIGH/LOW state of the S0-2 pins. It&amp;#39;s not the fastest way to expan&amp;hellip;">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.9.0.beta3 - https://github.com/discourse/discourse version 13f3de4bf673802eb8ec595d36587b4524773209">
<link rel="icon" type="image/png" href="../../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="../../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="../1334658.html?page=2" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://sebiik.github.io/community.axoloti.com.backup","potentialAction":{"@type":"SearchAction","target":"https://sebiik.github.io/community.axoloti.com.backup/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="Axoloti Community Search">

        <link href="../../../stylesheets/desktop_d93a33ca8617326fe353f80e6ab865188244d48c8e0b.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop"/>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','../../../../www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;[GPIO I/O] Example 4051 de/multiplexer reads 8 analog sources&#39;" href="../133.rss" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://sebiik.github.io/community.axoloti.com.backup/user_avatar/community.axoloti.com/paul/200/53_1.png" />
<meta property="og:image" content="https://sebiik.github.io/community.axoloti.com.backup/user_avatar/community.axoloti.com/paul/200/53_1.png" />
<meta property="og:url" content="https://sebiik.github.io/community.axoloti.com.backup/t/gpio-i-o-example-4051-de-multiplexer-reads-8-analog-sources/133/26" />
<meta name="twitter:url" content="https://sebiik.github.io/community.axoloti.com.backup/t/gpio-i-o-example-4051-de-multiplexer-reads-8-analog-sources/133/26" />
<meta property="og:title" content="[GPIO I/O] Example 4051 de/multiplexer reads 8 analog sources" />
<meta name="twitter:title" content="[GPIO I/O] Example 4051 de/multiplexer reads 8 analog sources" />
<meta property="og:description" content="ok, there were some errors. I haven&#39;t checked, if the following code is working correctly:  [image]   http://pastebin.com/YVnng4bf   4051_multiplexer.axo (2.6 KB)   but you will need a hardware S&amp;H circuit to buffer each voltage of 4051 outputs?  rvense works on a similr project." />
<meta name="twitter:description" content="ok, there were some errors. I haven&#39;t checked, if the following code is working correctly:  [image]   http://pastebin.com/YVnng4bf   4051_multiplexer.axo (2.6 KB)   but you will need a hardware S&amp;H circuit to buffer each voltage of 4051 outputs?  rvense works on a similr project." />


  </head>
  <body class="crawler">
    
    <header>
      <a href="../../../index.html"><img src="../../../uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo" style="max-width: 150px;"></a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1>
  <a href="../133.html">[GPIO I/O] Example 4051 de/multiplexer reads 8 analog sources</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../../c/patching.html" itemprop="url">
        <span itemprop="title">Patching</span>
      </a>
    </div>
</div>





<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/rbrt.html'><b itemprop='author'>rbrt</b></a>
           
           <time datetime='2016-02-04T17:07:45Z' itemprop='datePublished'>
             2016-02-04 17:07:45 UTC
           </time>
        </span>
        <span itemprop='position'>#21</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hi Paul,<br>could you sketch up an example how to write to the 4051's pins,<br>instead of reading them?<br>I want to multiplex the Axoloti's 2 analog outputs (PA4 + PA5),<br>in order to create a simple control-rate patching matrix...</p>

<p>I'm all new to the Axoloti and c-scripting as well,I understand some parts <br>of your script but not enough...</p>

<p>cheers</p>

<p>Robert</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='[GPIO I/O] Example 4051 de/multiplexer reads 8 analog sources'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/paul.html'><b itemprop='author'>paul</b></a>
           
           <time datetime='2016-02-09T09:56:40Z' itemprop='datePublished'>
             2016-02-09 09:56:40 UTC
           </time>
        </span>
        <span itemprop='position'>#22</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>hi <a class="mention" href="../../../users/rbrt.html">@rbrt</a> ,</p>

<p>sorry, I'm not at home so I can't test the following code example.</p>

<p>You want to route the DAC1 output to any Y output pin of the 4051 like this:<br><div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/fc93f4a2ebc96d99491089c3f3e5dcde892fdcfd" href="../../../uploads/default/original/2X/f/fc93f4a2ebc96d99491089c3f3e5dcde892fdcfd.png" class="lightbox" title="4051-axoloti-dac-out.png"><img src="../../../uploads/default/optimized/2X/f/fc93f4a2ebc96d99491089c3f3e5dcde892fdcfd_1_690x213.png" width="690" height="213"><div class="meta">
<span class="filename">4051-axoloti-dac-out.png</span><span class="informations">981x303 6.44 KB</span><span class="expand"></span>
</div></a></div></p>

<p>axoloti Patch: <a class="attachment" href="../../../uploads/default/original/2X/b/4051%20DAC%20out%20PA4%2c5.axp">4051 DAC out PA4,5.axp</a> (2.8 KB)<br><img src="../../../uploads/default/original/2X/1/134b26fbcfe181105cb1cdbb4833d9570a0c90c9.png" width="393" height="338"></p>

<p>some parts of the code are from the "./out/analog.axo" object. An other solution will be to use a separate "./out/analog.axo" object and the script object only controls the Y pins of the 4051.</p>

<p><strong>SCRIPT OBJECT CODE:</strong></p>

<blockquote>
<p>/*<br>marked comments with "*" are from axoloti "script" object<br>code isn't tested<br>*/</p>
<p>int i;   // select y-input</p>
<p>void setup(void){<br>	palSetPadMode(GPIOA,0,PAL_MODE_OUTPUT_PUSHPULL);	// s0 Pin of 4051<br>	palSetPadMode(GPIOA,1,PAL_MODE_OUTPUT_PUSHPULL);	// S1 Pin of 4051<br>	palSetPadMode(GPIOA,2,PAL_MODE_OUTPUT_PUSHPULL);	// s2 Pin of 4051</p>
<pre><code>palSetPadMode(GPIOA, 4, PAL_MODE_INPUT_ANALOG);		// DAC OUTPUT PA4*
palSetPadMode(GPIOA, 5, PAL_MODE_INPUT_ANALOG);		// DAC OUTPUT PA5*</code></pre>
<p>RCC-&gt;APB1ENR |= 0x20000000;	// *<br>	DAC-&gt;CR |= 0x00030003;	// *</p>
<pre><code>i = 0;</code></pre>
<p>}</p>
<p>void loop(void){</p>
<pre><code>i = in1;		//script object in1 controls 4051's Y output selection
if (i == 8) {
	i = 0;
}



palWritePad(GPIOA,0,((i&amp; 0x01) &gt; 0));		// write s0
palWritePad(GPIOA,1,(((i&gt;&gt;1)&amp; 0x01) &gt; 0));	// write s1
palWritePad(GPIOA,2,(((i&gt;&gt;2)&amp; 0x01) &gt; 0));	// write s2


// select pin of the 4051 and route the DAC output value to it.
switch (i){
	case 0: 	
		DAC-&gt;DHR12R1 = in2&gt;&gt;15;				// check "input 1" of the "script" object and control DAC PA4 *
		/*DAC-&gt;DHR12R2 = in2&gt;&gt;15;				// check "input 2" of the "script" object and control DAC PA5* */
	break;
}


chThdSleepMilliseconds(5);	// short delay</code></pre>
<p>}</p>
</blockquote>

<p>I hope this may help you.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='[GPIO I/O] Example 4051 de/multiplexer reads 8 analog sources'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/rbrt.html'><b itemprop='author'>rbrt</b></a>
           
           <time datetime='2016-02-19T10:59:14Z' itemprop='datePublished'>
             2016-02-19 10:59:14 UTC
           </time>
        </span>
        <span itemprop='position'>#23</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hi Paul,<br>thanks a lot for the inspiration!<br>looks like right now I'm rather stuck with my little project:</p>

<p>My intention is to build a 'hardware' patching-matrix using REAL WIRES,<br>something like 4-8 analog outputs and inputs..</p>

<p>so, I've been attempting to multiplex the axo's A4 analog output with the 4051.<br>I actually got there, but I need to sample and hold the 4051's outputs somehow.<br>right now this is done inside the custom object I wrote <br>(you need the 1.07 release version to run the patch!!)</p>

<p>but once I rearrange them WIRES in the REAL WORLD, it's all loosing sync...<br>so, do you have any idea about how to sample and hold the 4051's outputs?</p>

<p><div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/7233c6c8919b3f9167497f916ce4b1a2046c50ab" href="../../../uploads/default/original/2X/7/7233c6c8919b3f9167497f916ce4b1a2046c50ab.png" class="lightbox" title="4051_multiplexing.PNG"><img src="../../../uploads/default/optimized/2X/7/7233c6c8919b3f9167497f916ce4b1a2046c50ab_1_690x369.png" width="690" height="369"><div class="meta">
<span class="filename">4051_multiplexing.PNG</span><span class="informations">1263x677 45.4 KB</span><span class="expand"></span>
</div></a></div><br>ah,you have to wire things up like this:<br>(I'm referring to your first post)<br>z = A4<br>y0 = A6<br>y1= A7<br>y2=B0<br>y3 =B1</p>

<p><a class="attachment" href="../../../uploads/default/original/2X/d/4051%20multiplexing.axp">4051 multiplexing.axp</a> (7.3 KB)</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='[GPIO I/O] Example 4051 de/multiplexer reads 8 analog sources'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/paul.html'><b itemprop='author'>paul</b></a>
           
           <time datetime='2016-02-19T14:09:14Z' itemprop='datePublished'>
             2016-02-19 14:09:14 UTC
           </time>
        </span>
        <span itemprop='position'>#24</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I deleted the axoloti 1.0.7 version and I'm using the stable version 1.0.6. Can you upload your axo object here, so I can watch your object code.<br>do you have used an array to store/recall PA4 write values?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='[GPIO I/O] Example 4051 de/multiplexer reads 8 analog sources'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/rbrt.html'><b itemprop='author'>rbrt</b></a>
           
           <time datetime='2016-02-19T14:26:58Z' itemprop='datePublished'>
             2016-02-19 14:26:58 UTC
           </time>
        </span>
        <span itemprop='position'>#25</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Here you go with the object!</p>

<p><a class="attachment" href="../../../uploads/default/original/2X/d/4051_multiplexer.axo">4051_multiplexer.axo</a> (2.2 KB)</p>

<p>it gives me some errors because of incorrect HASH (?!) and other weird things...</p>

<p>no,it's not using an array..it's simply muxing/demuxing..</p>

<p>but hey,an array might be a good idea for a totally diffrent (kind of fake..) approach...<br>where the wires wouldn't actually transmitting anything but merely act as switches..<br>of course,then it's not possible to connect multiple devices..</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='[GPIO I/O] Example 4051 de/multiplexer reads 8 analog sources'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/paul.html'><b itemprop='author'>paul</b></a>
           
           <time datetime='2016-02-19T16:24:24Z' itemprop='datePublished'>
             2016-02-19 16:24:24 UTC
           </time>
        </span>
        <span itemprop='position'>#26</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>ok, there were some errors. I haven't checked, if the following code is working correctly:<br><div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/c7ed69925158f300fd5b2b429209013a6bd2430b" href="../../../uploads/default/original/2X/c/c7ed69925158f300fd5b2b429209013a6bd2430b.png" class="lightbox" title="4051 patch.png"><img src="../../../uploads/default/optimized/2X/c/c7ed69925158f300fd5b2b429209013a6bd2430b_1_522x500.png" width="522" height="500"><div class="meta">
<span class="filename">4051 patch.png</span><span class="informations">757x724 28 KB</span><span class="expand"></span>
</div></a></div></p>

<p> <a href="http://pastebin.com/YVnng4bf" rel="nofollow">http://pastebin.com/YVnng4bf</a></p>

<p><a class="attachment" href="../../../uploads/default/original/2X/5/4051_multiplexer.axo">4051_multiplexer.axo</a> (2.6 KB)</p>

<p>but you will need a hardware S&amp;H circuit to buffer each voltage of 4051 outputs? <a href="../../gpio-i-o-example-dac-mcp4x22-spi/134/5ea84.html?u=paul"> rvense works on a similr project</a>.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='[GPIO I/O] Example 4051 de/multiplexer reads 8 analog sources'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/the19thbear.html'><b itemprop='author'>the19thbear</b></a>
           
           <time datetime='2016-03-14T07:56:42Z' itemprop='datePublished'>
             2016-03-14 07:56:42 UTC
           </time>
        </span>
        <span itemprop='position'>#27</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Did you have any success with this? I would like to use the axoloti as  brain for a 64 input midi controller, but i dont want to order any board until people actually are having succes with multiplexers/multiple inputs. And most importantly: I need a blueprint i can follow, since i dont know how to do any coding!<br>Thanks:)</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='[GPIO I/O] Example 4051 de/multiplexer reads 8 analog sources'>
      <hr>
            <a href="../../using-axoloti-as-a-midi-controller-brain/1272/3.html">Using axoloti as a midi controller brain?</a>
            <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/paul.html'><b itemprop='author'>paul</b></a>
           
           <time datetime='2016-03-14T08:22:06Z' itemprop='datePublished'>
             2016-03-14 08:22:06 UTC
           </time>
        </span>
        <span itemprop='position'>#28</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>hi <a class="mention" href="../../../users/the19thbear.html">@the19thbear</a><br>the 4051 example from the first post is working. I didn't know, if the last thing for rbrt is also working. He didn't post a feedback. </p>

<p>Do you know the "<a href="http://ucapps.de/mbhp_ainser64.html" rel="nofollow">ainser64</a>" module from the ucapps site? It only needs a trace mod for one CS pin and a 3,3V vreg instead of the 5V vreg…It's maybe possible do use the "ainser64" without the CS mod but I didn't get it working. One of their <a href="http://ucapps.de/mbhp_core_stm32f4.html" rel="nofollow">main core</a> is based on stm32 disco board. So it also should work with axoloti.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='[GPIO I/O] Example 4051 de/multiplexer reads 8 analog sources'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/the19thbear.html'><b itemprop='author'>the19thbear</b></a>
           
           <time datetime='2016-03-14T09:42:30Z' itemprop='datePublished'>
             2016-03-14 09:42:30 UTC
           </time>
        </span>
        <span itemprop='position'>#29</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Thanks. So do i only need the ainser64 module? or do i need any other modules? And you are saying that i can connect that to axoloti? Sorry im new to all this:) I know about soldering/reparing analog synths, but coding/the inside parts of midi is new to me:)</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='[GPIO I/O] Example 4051 de/multiplexer reads 8 analog sources'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/rvense.html'><b itemprop='author'>rvense</b></a>
           
           <time datetime='2016-03-14T11:13:42Z' itemprop='datePublished'>
             2016-03-14 11:13:42 UTC
           </time>
        </span>
        <span itemprop='position'>#30</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Anything's possible with a little code!</p>

<p>Look at the schematic:</p>

<p>The AINSER uses an SPI 8-channel ADC from Microchip (MCP3208). It then connects to each of the inputs on that 8-way multiplexers, 4051, like in the example above. The multiplexers allow you to route one of eight sources to a single input by setting three pins on the chip. Using some software to control the multiplexers, you can select which eight pots go to the inputs of the ADC. So you need to write a scanning routine that counts from 0-7 to select an input on the multiplexer, reading from the ADC at each count. There's another thread here that shows how to use that exact same ADC, actually.</p>

<p>Due to the flexible design of MIDIBox, the AINSER module uses a shift register for the control signals but this is not strictly necessary. You could just connect three GPIO from 'loti to where the outputs from the shift register would go and set those GPIO directly.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='[GPIO I/O] Example 4051 de/multiplexer reads 8 analog sources'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/the19thbear.html'><b itemprop='author'>the19thbear</b></a>
           
           <time datetime='2016-03-14T14:55:22Z' itemprop='datePublished'>
             2016-03-14 14:55:22 UTC
           </time>
        </span>
        <span itemprop='position'>#31</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Sorry again, but what schematic are you referring to?<img src="../../../images/emoji/emoji_one/smilea4f0.png?v=0" title=":smile:" class="emoji" alt=":smile:"></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='[GPIO I/O] Example 4051 de/multiplexer reads 8 analog sources'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/paul.html'><b itemprop='author'>paul</b></a>
           
           <time datetime='2016-03-14T17:43:32Z' itemprop='datePublished'>
             2016-03-14 17:43:32 UTC
           </time>
        </span>
        <span itemprop='position'>#32</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>thanks <a class="mention" href="../../../users/rvense.html">@rvense</a> for detail explanation. <br><a class="mention" href="../../../users/the19thbear.html">@the19thbear</a>  I think rvense talked about the <a href="http://ucapps.de/mbhp/mbhp_ainser64.pdf" rel="nofollow">ainser64 schematc here</a>.<br>the MCP3208 and 595 are sharing the same CS pin… the following examples need a single CS for each SPI IC…<br><a href="../../gpio-i-o-example-adc-mcp3208-spi/304.html">MCP3208 example</a><br><a href="../../gpio-i-o-example-74hc595-shift-register-spi/index.html">74HC595 example</a></p>

<p>To get single CS, you have to do a trace cut and route to a new header on J2 or J3.</p>

<p>Hope this helps a bit.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='[GPIO I/O] Example 4051 de/multiplexer reads 8 analog sources'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/the19thbear.html'><b itemprop='author'>the19thbear</b></a>
           
           <time datetime='2016-03-15T13:26:31Z' itemprop='datePublished'>
             2016-03-15 13:26:31 UTC
           </time>
        </span>
        <span itemprop='position'>#33</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Thanks:) I'll look into it.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='[GPIO I/O] Example 4051 de/multiplexer reads 8 analog sources'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/kashis.html'><b itemprop='author'>kashis</b></a>
           
           <time datetime='2016-07-23T15:47:13Z' itemprop='datePublished'>
             2016-07-23 15:47:13 UTC
           </time>
        </span>
        <span itemprop='position'>#34</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hello there,</p>

<p>Im still a noob especially with electronics,i just received some 4051's and I see in the first picture, that if you use the 4051 you loose 3 gpio's,pa0,pa1,pa2.<br>Is it possible to use only one gpio?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:2'>
      <meta itemprop='headline' content='[GPIO I/O] Example 4051 de/multiplexer reads 8 analog sources'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/hellcore.html'><b itemprop='author'>hellcore</b></a>
           
           <time datetime='2016-07-23T16:10:49Z' itemprop='datePublished'>
             2016-07-23 16:10:49 UTC
           </time>
        </span>
        <span itemprop='position'>#35</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="34" data-topic="133"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v2/letter/k/aeb1de/40.png" class="avatar">kashis:</div>
<blockquote><p>Is it possible to use only one gpio?</p></blockquote></aside>

<p>You need 3 bits to count to from 0 - 7..  to designate the input source, then you need a pin to read the value.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='[GPIO I/O] Example 4051 de/multiplexer reads 8 analog sources'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/kashis.html'><b itemprop='author'>kashis</b></a>
           
           <time datetime='2016-07-24T07:37:28Z' itemprop='datePublished'>
             2016-07-24 07:37:28 UTC
           </time>
        </span>
        <span itemprop='position'>#36</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hmmm i think i understand, so you use more gpio's , thats a bummer! Then I'm most likely still many gpio's short. Maybe i must think of a teensy board to make around 32 extra midi buttons.<br>I need to have 10 pot meters hooked up straight to the axoloti.some rotary switches (with resistors) , and then a lot of demuxed pot meters.i see this is not possible if you need 4gpio's for one 4051.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='[GPIO I/O] Example 4051 de/multiplexer reads 8 analog sources'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/rvense.html'><b itemprop='author'>rvense</b></a>
           
           <time datetime='2016-07-24T11:44:58Z' itemprop='datePublished'>
             2016-07-24 11:44:58 UTC
           </time>
        </span>
        <span itemprop='position'>#37</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>You can connect the same GPIOs to the select signals of several 4051s. Just connect their outputs to different ADC inputs. A single eight channel ADC like the MCP3208 would allow you to scan 64 pots.</p>

<p>With one extra GPIO for an additional SPI chip select signal, you should be able to use a second ADC. So that's 128 analogue inputs with the SPI lines and six GPIO <img src="../../../images/emoji/emoji_one/slight_smile5e1f.png?v=2" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>

<p>There's some more info here on this approach as used in the MIDIBox project: <a href="http://ucapps.de/mbhp_ainser64.html" rel="nofollow">http://ucapps.de/mbhp_ainser64.html</a></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='[GPIO I/O] Example 4051 de/multiplexer reads 8 analog sources'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/kashis.html'><b itemprop='author'>kashis</b></a>
           
           <time datetime='2016-07-24T14:40:03Z' itemprop='datePublished'>
             2016-07-24 14:40:03 UTC
           </time>
        </span>
        <span itemprop='position'>#38</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Ok,i will try this approach if i get it correct. I still have some soldering to do and have to compile the patch, mostly cut and paste from other patches so that's is ok. I will be back!<img src="../../../images/emoji/emoji_one/grinning5e1f.png?v=2" title=":grinning:" class="emoji" alt=":grinning:"></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='[GPIO I/O] Example 4051 de/multiplexer reads 8 analog sources'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/C0dexter.html'><b itemprop='author'>C0dexter</b></a>
           
           <time datetime='2016-08-30T09:49:40Z' itemprop='datePublished'>
             2016-08-30 09:49:40 UTC
           </time>
        </span>
        <span itemprop='position'>#39</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>You could use a counter IC (4520?).. <a href="http://electronicsclub.info/cmos.htm#counters" rel="nofollow">http://electronicsclub.info/cmos.htm#counters</a></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='[GPIO I/O] Example 4051 de/multiplexer reads 8 analog sources'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/Androoclops.html'><b itemprop='author'>Androoclops</b></a>
           
           <time datetime='2017-09-29T16:22:48Z' itemprop='datePublished'>
             2017-09-29 16:22:48 UTC
           </time>
        </span>
        <span itemprop='position'>#40</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Sorry bout the bump.<br>Would you happen to have an example patch for a 16 input multiplexer?<br>I own a couple of these <a href="https://www.sparkfun.com/products/9056" rel="nofollow noopener">https://www.sparkfun.com/products/9056</a> and really want to use them to add some inputs to my axoloti. Your example is super similar to what im trying to accomplish but I have an extra S pin on my breakout board and I'm not sure if the script needs to be modified to work with this multiplexer.</p>

<p>Edit: Nevermind, I've started a new thread on the matter, sorry all!</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='[GPIO I/O] Example 4051 de/multiplexer reads 8 analog sources'>
      <hr>
  </div>






    </div>
    <footer class="container">
      <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <a href='../../../index.html'>Home</a>
        <a href="../../../categories.html">Categories</a>
        <a href="../../../guidelines.html">FAQ/Guidelines</a>
        <a href="../../../tos.html">Terms of Service</a>
        <a href="../../../privacy.html">Privacy Policy</a>
      </nav>
      <p>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  

<!-- Mirrored from community.axoloti.com/t/gpio-i-o-example-4051-de-multiplexer-reads-8-analog-sources/133/26 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 10 Jul 2023 17:20:44 GMT -->
</html>
