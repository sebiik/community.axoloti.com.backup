<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from community.axoloti.com/t/cortex-code-profiler/3025 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 10 Jul 2023 16:39:14 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Cortex code profiler? - Software - Axoloti Community</title>
    <meta name="description" content="is there a profiler? I&amp;#39;d like to get a better understanding of what parts of my patches are expensive, and where there might be optimization opportunities.">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.9.0.beta3 - https://github.com/discourse/discourse version 13f3de4bf673802eb8ec595d36587b4524773209">
<link rel="icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="3025.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://sebiik.github.io/community.axoloti.com.backup","potentialAction":{"@type":"SearchAction","target":"https://sebiik.github.io/community.axoloti.com.backup/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Axoloti Community Search">

        <link href="../../stylesheets/desktop_d93a33ca8617326fe353f80e6ab865188244d48c8e0b.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop"/>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','../../../www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Cortex code profiler?&#39;" href="3025.rss" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://sebiik.github.io/community.axoloti.com.backup/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:image" content="https://sebiik.github.io/community.axoloti.com.backup/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:url" content="https://sebiik.github.io/community.axoloti.com.backup/t/cortex-code-profiler/3025" />
<meta name="twitter:url" content="https://sebiik.github.io/community.axoloti.com.backup/t/cortex-code-profiler/3025" />
<meta property="og:title" content="Cortex code profiler?" />
<meta name="twitter:title" content="Cortex code profiler?" />
<meta property="og:description" content="is there a profiler? I&#39;d like to get a better understanding of what parts of my patches are expensive, and where there might be optimization opportunities." />
<meta name="twitter:description" content="is there a profiler? I&#39;d like to get a better understanding of what parts of my patches are expensive, and where there might be optimization opportunities." />


  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html"><img src="../../uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo" style="max-width: 150px;"></a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1>
  <a href="3025.html">Cortex code profiler?</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/software.html" itemprop="url">
        <span itemprop="title">Software</span>
      </a>
    </div>
</div>





<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/evan.html'><b itemprop='author'>evan</b></a>
           
           <time datetime='2017-03-09T03:14:26Z' itemprop='datePublished'>
             2017-03-09 03:14:26 UTC
           </time>
        </span>
        <span itemprop='position'>#1</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>is there a profiler? I'd like to get a better understanding of what parts of my patches are expensive, and where there might be optimization opportunities.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Cortex code profiler?'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/TheSlowGrowth.html'><b itemprop='author'>TheSlowGrowth</b></a>
           
           <time datetime='2017-03-09T08:57:42Z' itemprop='datePublished'>
             2017-03-09 08:57:42 UTC
           </time>
        </span>
        <span itemprop='position'>#2</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I don't think there is. Especially since axoloti isn't one big binary.</p>

<p>Your best bet is to look at the assembly code that is generated by the compiler. As the relevant code is executed at fixed intervals and in most cases doesn't branch a lot, it is possible to directly correlate the number of instructions/cycles to the CPU-time required. S rate code is executed 16times as often as k rate code, so take that into account.</p>

<p>If that is too technical and tedious, you can always simply remove some objects and see the effect on CPU usage.</p>

<p>Also note that with the current execution scheme, you can shave off some CPU usage by making sure that connections between objects always go down and to the right, never up or left. The latter will add a 16 sample delay in the processing chain and that adds CPU time (and memory footprint) as well.<br>In some of my polyphonic patches I was able to shave off 3% or more, just by dragging object around to make sure the connections go down and to the right.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Cortex code profiler?'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/thetechnobear.html'><b itemprop='author'>thetechnobear</b></a>
           
           <time datetime='2017-03-09T10:20:11Z' itemprop='datePublished'>
             2017-03-09 10:20:11 UTC
           </time>
        </span>
        <span itemprop='position'>#3</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>look at patch/cyclecounter (and its associated help)</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Cortex code profiler?'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/johannes.html'><b itemprop='author'>johannes</b></a>
           
           <time datetime='2017-03-09T14:20:59Z' itemprop='datePublished'>
             2017-03-09 14:20:59 UTC
           </time>
        </span>
        <span itemprop='position'>#4</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p><em>(developer talk, assuming familiarity with embedded development tools)</em></p>

<p>It may be possible to do unobtrusive statistical real-time profiling without debugger, by programming a timer at random intervals, peeking at the program counter on the stack, and building a histogram of relevant program counter values, say, in sdram. Associating the program counter values to the C++ code may give a distorted view due to compiler optimizations, but I can imagine that this approach would be useful.<br>Instrumenting functions for function call counting would hurt performance a lot, and the results would be boring for the dsp code. <br><a href="https://mcuoneclipse.com/2015/08/23/tutorial-using-gnu-profiling-gprof-with-arm-cortex-m/">Here</a> is a tutorial about profiling, but I have not done this. </p>

<p>On the RTOS side, ChibiOS can be configured to keep per-thread <a href="http://www.chibios.org/dokuwiki/doku.php?id=chibios:book:kernel_debug">statistics</a>, and after firmware recompilation and flashing, those could be read out using an st-link debugger, or self-reported by an object similar to the <code>jt/debug_threads</code> object.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Cortex code profiler?'>
      <hr>
  </div>






    </div>
    <footer class="container">
      <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <a href='../../index.html'>Home</a>
        <a href="../../categories.html">Categories</a>
        <a href="../../guidelines.html">FAQ/Guidelines</a>
        <a href="../../tos.html">Terms of Service</a>
        <a href="../../privacy.html">Privacy Policy</a>
      </nav>
      <p>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  

<!-- Mirrored from community.axoloti.com/t/cortex-code-profiler/3025 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 10 Jul 2023 16:39:17 GMT -->
</html>
