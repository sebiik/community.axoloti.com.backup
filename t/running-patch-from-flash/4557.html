<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from community.axoloti.com/t/running-patch-from-flash/4557 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 19 Jul 2023 03:10:45 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Running patch from flash - Developer - Axoloti Community</title>
    <meta name="description" content="Normally the Axoloti runs the uploaded patch from the internal RAM, a large portion of which is reserved for this purpose. Even when &amp;#39;Upload to internal flash&amp;#39; is selected in a patch, if I understand correctly it the pat&amp;hellip;">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.9.0.beta3 - https://github.com/discourse/discourse version 13f3de4bf673802eb8ec595d36587b4524773209">
<link rel="icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="4557.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://sebiik.github.io/community.axoloti.com.backup","potentialAction":{"@type":"SearchAction","target":"https://sebiik.github.io/community.axoloti.com.backup/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Axoloti Community Search">

        <link href="../../stylesheets/desktop_d93a33ca8617326fe353f80e6ab865188244d48c8e0b.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop"/>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','../../../www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Running patch from flash&#39;" href="4557.rss" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://sebiik.github.io/community.axoloti.com.backup/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:image" content="https://sebiik.github.io/community.axoloti.com.backup/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:url" content="https://sebiik.github.io/community.axoloti.com.backup/t/running-patch-from-flash/4557" />
<meta name="twitter:url" content="https://sebiik.github.io/community.axoloti.com.backup/t/running-patch-from-flash/4557" />
<meta property="og:title" content="Running patch from flash" />
<meta name="twitter:title" content="Running patch from flash" />
<meta property="og:description" content="Normally the Axoloti runs the uploaded patch from the internal RAM, a large portion of which is reserved for this purpose. Even when &#39;Upload to internal flash&#39; is selected in a patch, if I understand correctly it the patch is stored in flash, but runtime is executed RAM just as usual, i.e. the flash is just used for the actual storage.   I had an idea: how hard would it be to run the patch directly from flash. I.e. something along the lines of reserving an area of the flash for the executable pa..." />
<meta name="twitter:description" content="Normally the Axoloti runs the uploaded patch from the internal RAM, a large portion of which is reserved for this purpose. Even when &#39;Upload to internal flash&#39; is selected in a patch, if I understand correctly it the patch is stored in flash, but runtime is executed RAM just as usual, i.e. the flash is just used for the actual storage.   I had an idea: how hard would it be to run the patch directly from flash. I.e. something along the lines of reserving an area of the flash for the executable pa..." />


  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html"><img src="../../uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo" style="max-width: 150px;"></a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1>
  <a href="4557.html">Running patch from flash</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/developer.html" itemprop="url">
        <span itemprop="title">Developer</span>
      </a>
    </div>
</div>





<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/ricard.html'><b itemprop='author'>ricard</b></a>
           
           <time datetime='2018-05-12T13:15:24Z' itemprop='datePublished'>
             2018-05-12 13:15:24 UTC
           </time>
        </span>
        <span itemprop='position'>#1</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Normally the Axoloti runs the uploaded patch from the internal RAM, a large portion of which is reserved for this purpose. Even when 'Upload to internal flash' is selected in a patch, if I understand correctly it the patch is stored in flash, but runtime is executed RAM just as usual, i.e. the flash is just used for the actual storage.</p>

<p>I had an idea: how hard would it be to run the patch directly from flash. I.e. something along the lines of reserving an area of the flash for the executable patch, and flashing it there when uplaoding, and actually run it from there. The advantage would be that more (fast) RAM would be available for longer delay lines etc, if one doesn't want to use DRAM for whatever reason. The downside of course is that it takes longer write to the flash than write to RAM, and also writing to the flash causes wear on the flash, so it's probably not for everyday use.</p>

<p>The Axoloti very obviously can runtime write to the flash, as it can store a patch there, so it would mostly seem to be an adjustment of the linker control file for where things are stored, and also a portion of the flash must be reserved for the runtime patch and uploading a patch must cause a write to that area. Is there anything else I'm missing?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Running patch from flash'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/SmashedTransistors.html'><b itemprop='author'>SmashedTransistors</b></a>
           
           <time datetime='2018-05-12T20:25:43Z' itemprop='datePublished'>
             2018-05-12 20:25:43 UTC
           </time>
        </span>
        <span itemprop='position'>#2</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I don't think that flash ram is fast enough to operate at 168MHz</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Running patch from flash'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/ricard.html'><b itemprop='author'>ricard</b></a>
           
           <time datetime='2018-05-12T23:44:42Z' itemprop='datePublished'>
             2018-05-12 23:44:42 UTC
           </time>
        </span>
        <span itemprop='position'>#3</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>On the contrary, the STM32F4 is intended to run code directly from flash at its maximum clock rate, there's a special cache on the chip plus an extra wide flash memory bus to accomplish this. Another way of looking at it is that it's only the actual patch code that runs in RAM, the rest of the OS, for instance the interrupt routines which handle the D/A and A/D conversion, run in flash.</p>

<p>So I'm convinced the reason patches are run in RAM on the Axoloti is not for execution speed, but for quick upload and also to avoid wearing out the flash every time the 'Live' button is clicked in th UI.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Running patch from flash'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/lokki.html'><b itemprop='author'>lokki</b></a>
           
           <time datetime='2018-05-13T20:26:02Z' itemprop='datePublished'>
             2018-05-13 20:26:02 UTC
           </time>
        </span>
        <span itemprop='position'>#4</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>hehe i see where this comes from and where it tries to go <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"> would be nice for the p6 indeed!!</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Running patch from flash'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/ricard.html'><b itemprop='author'>ricard</b></a>
           
           <time datetime='2018-05-13T20:38:36Z' itemprop='datePublished'>
             2018-05-13 20:38:36 UTC
           </time>
        </span>
        <span itemprop='position'>#5</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Yes, exactly... But I thought it might be useful too on a real Axoloti, if there is a need for a lot of RAM and DRAM turns out to be too slow.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Running patch from flash'>
      <hr>
  </div>






    </div>
    <footer class="container">
      <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <a href='../../index.html'>Home</a>
        <a href="../../categories.html">Categories</a>
        <a href="../../guidelines.html">FAQ/Guidelines</a>
        <a href="../../tos.html">Terms of Service</a>
        <a href="../../privacy.html">Privacy Policy</a>
      </nav>
      <p>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  

<!-- Mirrored from community.axoloti.com/t/running-patch-from-flash/4557 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 19 Jul 2023 03:10:45 GMT -->
</html>
