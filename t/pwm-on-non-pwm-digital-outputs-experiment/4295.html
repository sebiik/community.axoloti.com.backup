<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from community.axoloti.com/t/pwm-on-non-pwm-digital-outputs-experiment/4295 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 10 Jul 2023 16:05:55 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>PWM on non-PWM digital outputs experiment - Software - Axoloti Community</title>
    <meta name="description" content="Hi, I need more analogue outputs, and am already using the 10 PWM outputs converted to analogue voltage. So I was thinking of using some of the digital outputs PC0 to PC5  and doing the PWM with the osc/pwm object in the&amp;hellip;">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.9.0.beta3 - https://github.com/discourse/discourse version 13f3de4bf673802eb8ec595d36587b4524773209">
<link rel="icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="4295.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"http://community.axoloti.com","potentialAction":{"@type":"SearchAction","target":"http://community.axoloti.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Axoloti Community Search">

        <link href="../../stylesheets/desktop_d93a33ca8617326fe353f80e6ab865188244d48c8e0b.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop"/>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','../../../www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;PWM on non-PWM digital outputs experiment&#39;" href="4295.rss" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:url" content="http://community.axoloti.com/t/pwm-on-non-pwm-digital-outputs-experiment/4295" />
<meta name="twitter:url" content="http://community.axoloti.com/t/pwm-on-non-pwm-digital-outputs-experiment/4295" />
<meta property="og:title" content="PWM on non-PWM digital outputs experiment" />
<meta name="twitter:title" content="PWM on non-PWM digital outputs experiment" />
<meta property="og:description" content="Hi, I need more analogue outputs, and am already using the 10 PWM outputs converted to analogue voltage. So I was thinking of using some of the digital outputs PC0 to PC5  and doing the PWM with the osc/pwm object in the patch, and applying a RC filter on the output to convert to analogue voltage (as I already did on the PWM outputs). I adapted the values resistances to match the 3kHz max rate of the PC0 to PC5 outputs, It works but there are still a lot of artifacts. I suppose it comes from the..." />
<meta name="twitter:description" content="Hi, I need more analogue outputs, and am already using the 10 PWM outputs converted to analogue voltage. So I was thinking of using some of the digital outputs PC0 to PC5  and doing the PWM with the osc/pwm object in the patch, and applying a RC filter on the output to convert to analogue voltage (as I already did on the PWM outputs). I adapted the values resistances to match the 3kHz max rate of the PC0 to PC5 outputs, It works but there are still a lot of artifacts. I suppose it comes from the..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="3 ❤" />


  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html"><img src="../../uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo" style="max-width: 150px;"></a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1>
  <a href="4295.html">PWM on non-PWM digital outputs experiment</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/software.html" itemprop="url">
        <span itemprop="title">Software</span>
      </a>
    </div>
</div>





<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/berzelius.html'><b itemprop='author'>berzelius</b></a>
           
           <time datetime='2018-03-01T13:53:33Z' itemprop='datePublished'>
             2018-03-01 13:53:33 UTC
           </time>
        </span>
        <span itemprop='position'>#1</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hi,<br>I need more analogue outputs, and am already using the 10 PWM outputs converted to analogue voltage. So I was thinking of using some of the digital outputs PC0 to PC5  and doing the PWM with the osc/pwm object in the patch, and applying a RC filter on the output to convert to analogue voltage (as I already did on the PWM outputs). I adapted the values resistances to match the 3kHz max rate of the PC0 to PC5 outputs, It works but there are still a lot of artifacts. I suppose it comes from the conversion from output of osc/pwm object (audio signal) to gpio/out/digital object (logic signal).Maybe the logic input of the gpio object can not sample  properly the  audio output of  osc/pwm object. <br>So my question is: is there a way to toggle properly logic states at 3kHz? or : Is there a way to output digital states at more than 3kHz (for exemple modifying the gpio object as I did on the pwm objects to have a higher pmw rate)?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='PWM on non-PWM digital outputs experiment'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/lokki.html'><b itemprop='author'>lokki</b></a>
           
           <time datetime='2018-03-01T14:53:58Z' itemprop='datePublished'>
             2018-03-01 14:53:58 UTC
           </time>
        </span>
        <span itemprop='position'>#2</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>toggling the digital pin at 3khz does not give you pwm as such. you will have to vary the duty cycle, basically you need much higher then 3khz to get something similar to pwm with a simple toggle. maybe it would be easier to add some sort of external dac that you connect via i2c?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='PWM on non-PWM digital outputs experiment'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/berzelius.html'><b itemprop='author'>berzelius</b></a>
           
           <time datetime='2018-03-01T15:06:56Z' itemprop='datePublished'>
             2018-03-01 15:06:56 UTC
           </time>
        </span>
        <span itemprop='position'>#3</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>the duty cycle is changed by the pwm object. And yes this is my question: how to make it higher than 3kHz?<br>Sorry if it was not clear in my first message.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='PWM on non-PWM digital outputs experiment'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/Sebo.html'><b itemprop='author'>Sebo</b></a>
           
           <time datetime='2018-03-01T19:14:13Z' itemprop='datePublished'>
             2018-03-01 19:14:13 UTC
           </time>
        </span>
        <span itemprop='position'>#4</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>You are trying to do more or less what I'm doing, just I'm using the digital out as a square/pwm audio oscillator.<br>Check my post (and the reply by Johannes) here:<br><aside class="quote" data-topic="4229" data-slug="axoloti-as-a-5u-module" data-post="25"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/community.axoloti.com/sebo/40/4466_1.jpg" class="avatar"><a href="../axoloti-as-a-5u-module/4229/25.html" rel="nofollow noopener">Axoloti as a 5U Module</a>
</div>
<blockquote><p><a class="mention" href="../../u/johannes.html"></a><a class="mention" href="../../u/johannes.html">@johannes</a> Thanks for the answer. I suspected it wasn't easy <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:">  By the way I'm doing another strange thing that almost works OK. I'm using a digital output as a Square/PWM oscillator by sending the output of a PWM oscillator objet to PC0. I get about 3 octaves of an  usable Square/PWM signal. It's a bit unstable, but it works (I'm using it as second VCO in companion of my Yusynth VCO). Is there a (easy) way to improve stability and octave range, or it's a case like the audio to PWM …</p></blockquote></aside></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='PWM on non-PWM digital outputs experiment'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/Gavin.html'><b itemprop='author'>Gavin</b></a>
           
           <time datetime='2018-03-01T21:29:13Z' itemprop='datePublished'>
             2018-03-01 21:29:13 UTC
           </time>
        </span>
        <span itemprop='position'>#5</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Not sure why 3khz is not sufficient, an arduino PWM time period cycle is 500hz, is not 3khz more than sufficient to achieve the same and result in a analogue signal post filtering..<br>Just need an object to control the outputs.,.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='PWM on non-PWM digital outputs experiment'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/Sebo.html'><b itemprop='author'>Sebo</b></a>
           
           <time datetime='2018-03-01T22:19:38Z' itemprop='datePublished'>
             2018-03-01 22:19:38 UTC
           </time>
        </span>
        <span itemprop='position'>#6</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>In Arduino I normally use a PWM frequency of 31KHz for audio with a cutoff frequency of the filter at 16 KHz, the signal is not very clean, but the carrier is above the hearing limit.<br>Depending on the type of filtering and how clean you want the signal, 3KHz will be enough or not...<br>For clean CV signals (pitch CV control) I normally use a PWM frequency 3 or 4 times the cutoff frequency of the filter, and a 4 pole filter... being the cutoff frequency of the filter the higher frequency you will have in the signal.<br>For pitch CV I want at least 1KHz for the cutoff frequency (less than tha and you hear a lag or portamento all time), so 3KHz is in the limit...</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='PWM on non-PWM digital outputs experiment'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/berzelius.html'><b itemprop='author'>berzelius</b></a>
           
           <time datetime='2018-03-02T16:03:33Z' itemprop='datePublished'>
             2018-03-02 16:03:33 UTC
           </time>
        </span>
        <span itemprop='position'>#7</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I had a look on the RM0900 manual, but as I expected it's way beyond my programmation skills. Nevertheless I'm going to try to hack a pwm object using the timer 8  (since the other timers are used by the "oficial" pwm outputs) and  asigning to the  PC0 to PC5 outputs....</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='PWM on non-PWM digital outputs experiment'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/Sebo.html'><b itemprop='author'>Sebo</b></a>
           
           <time datetime='2018-03-02T20:16:07Z' itemprop='datePublished'>
             2018-03-02 20:16:07 UTC
           </time>
        </span>
        <span itemprop='position'>#8</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Tell me if you get it to work, I'm very intereted in the results...</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='PWM on non-PWM digital outputs experiment'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/lokki.html'><b itemprop='author'>lokki</b></a>
           
           <time datetime='2018-03-02T21:19:54Z' itemprop='datePublished'>
             2018-03-02 21:19:54 UTC
           </time>
        </span>
        <span itemprop='position'>#9</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>me too! this is interesting.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='PWM on non-PWM digital outputs experiment'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/berzelius.html'><b itemprop='author'>berzelius</b></a>
           
           <time datetime='2018-03-04T19:16:08Z' itemprop='datePublished'>
             2018-03-04 19:16:08 UTC
           </time>
        </span>
        <span itemprop='position'>#10</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Tried to modify the pwm object but without any result, I fear one have to modify the core code. On another side I modified the digital output object to accept signal instead of logic. And it is a lot more stable when using it with the osc/pwm object. however it is not perfect since the max frequency is 3khz so only 1.5khz usable. Maybe <a class="mention" href="../../u/johannes.html">@johannes</a> can let us know how to modify digital out object to a higher rate...</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='PWM on non-PWM digital outputs experiment'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/johannes.html'><b itemprop='author'>johannes</b></a>
           
           <time datetime='2018-03-05T21:40:30Z' itemprop='datePublished'>
             2018-03-05 21:40:30 UTC
           </time>
        </span>
        <span itemprop='position'>#11</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>The <code>gpio/out/pwm ...</code> objects make use of specific hardware timers, and they're only routable to a limited selection of GPIO's.<br>Without the use of hardware timers: Axoloti audio object code is scheduled to execute 3000 times per second. Trying to achieve finer-grained control over code execution timing is unlikely to cooperate well with the rest of the firmware.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='PWM on non-PWM digital outputs experiment'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/berzelius.html'><b itemprop='author'>berzelius</b></a>
           
           <time datetime='2018-03-11T03:25:56Z' itemprop='datePublished'>
             2018-03-11 03:25:56 UTC
           </time>
        </span>
        <span itemprop='position'>#12</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Thanks, finaly I kept the osc/pwm with digital outputs solution, despite the small instability it is not crucial for the cv it controls.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='PWM on non-PWM digital outputs experiment'>
      <hr>
  </div>






    </div>
    <footer class="container">
      <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <a href='../../index.html'>Home</a>
        <a href="../../categories.html">Categories</a>
        <a href="../../guidelines.html">FAQ/Guidelines</a>
        <a href="../../tos.html">Terms of Service</a>
        <a href="../../privacy.html">Privacy Policy</a>
      </nav>
      <p>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  

<!-- Mirrored from community.axoloti.com/t/pwm-on-non-pwm-digital-outputs-experiment/4295 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 10 Jul 2023 16:05:55 GMT -->
</html>
