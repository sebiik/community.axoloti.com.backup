<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Fastest way to convert to/from int32 and float in 0-1 range</title>
    <link>https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679</link>
    <description>The question is in the title, really. I&#39;d like it be able to convert an inlet value (int32) to a floating-point number in the range 0 &gt; 1, then convert that back to an int32 in the correct range.

Sorry if it&#39;s a naive question.

a|x</description>
    
    <lastBuildDate>Fri, 13 May 2016 20:47:06 +0000</lastBuildDate>
    <category>AxoObject coding</category>
    <atom:link href="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Fastest way to convert to/from int32 and float in 0-1 range</title>
        <dc:creator><![CDATA[@toneburst alx]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/u/toneburst">@toneburst</a> wrote:</p>
          <blockquote>
              <p>Cool. I will publish them, then.</p>

<p>a|x</p>
          </blockquote>
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/57">Read full topic</a></p>
        ]]></description>
        <link>https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/57</link>
        <pubDate>Fri, 13 May 2016 20:47:06 +0000</pubDate>
        <guid isPermaLink="false">community.axoloti.com-post-1679-57</guid>
        <source url="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679.rss">Fastest way to convert to/from int32 and float in 0-1 range</source>
      </item>
      <item>
        <title>Fastest way to convert to/from int32 and float in 0-1 range</title>
        <dc:creator><![CDATA[@thetechnobear Mark Harris]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/u/thetechnobear">@thetechnobear</a> wrote:</p>
          <blockquote>
              <p>Cool. Tbh im more interested in the cycling behavior , so these could be complementary for what I have in mind <img src="/images/emoji/emoji_one/slight_smile.png?v=2" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
          </blockquote>
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/56">Read full topic</a></p>
        ]]></description>
        <link>https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/56</link>
        <pubDate>Fri, 13 May 2016 20:32:06 +0000</pubDate>
        <guid isPermaLink="false">community.axoloti.com-post-1679-56</guid>
        <source url="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679.rss">Fastest way to convert to/from int32 and float in 0-1 range</source>
      </item>
      <item>
        <title>Fastest way to convert to/from int32 and float in 0-1 range</title>
        <dc:creator><![CDATA[@toneburst alx]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/u/toneburst">@toneburst</a> wrote:</p>
          <blockquote>
              <p>I see.</p>

<p>I've made interpolation objects for:</p>

<ul>
<li>Pow4</li>
<li>Quadratic Bezier</li>
<li>Cubic Bezier</li>
</ul>

<p><div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/474904efa7a5de429edf8d54e434c8b0741e4962" href="//community.axoloti.com/uploads/default/original/2X/4/474904efa7a5de429edf8d54e434c8b0741e4962.png" class="lightbox" title="Screen Shot 2016-05-13 at 21.16.11.png"><img src="//community.axoloti.com/uploads/default/optimized/2X/4/474904efa7a5de429edf8d54e434c8b0741e4962_1_690x366.png" width="690" height="366"><div class="meta">
<span class="filename">Screen Shot 2016-05-13 at 21.16.11.png</span><span class="informations">1276x678 80.3 KB</span><span class="expand"></span>
</div></a></div></p>

<p><a class="mention" href="/users/thetechnobear">@thetechnobear</a> I did these for my own entertainment. Don't want to step on your toes, if you wanted to publish something similar (but probably better) to the Contrib library.</p>

<p>a|x</p>

<p><a class="attachment" href="//community.axoloti.com/uploads/default/original/2X/6/63b19af70155e53176e0c4f885e41b7ab68cef20.axp">Kick Interpolations.axp</a> (10.8 KB)</p>
          </blockquote>
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/55">Read full topic</a></p>
        ]]></description>
        <link>https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/55</link>
        <pubDate>Fri, 13 May 2016 20:23:16 +0000</pubDate>
        <guid isPermaLink="false">community.axoloti.com-post-1679-55</guid>
        <source url="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679.rss">Fastest way to convert to/from int32 and float in 0-1 range</source>
      </item>
      <item>
        <title>Fastest way to convert to/from int32 and float in 0-1 range</title>
        <dc:creator><![CDATA[@johannes johannes]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/u/johannes">@johannes</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="53" data-topic="1679"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//community.axoloti.com/letter_avatar_proxy/v2/letter/t/b9e5f3/40.png" class="avatar">toneburst:</div>
<blockquote><p>Unless the number of cycles is being misreported.</p></blockquote></aside>

<p>There was some discussion about this earlier in this thread, I have now added <br><code>asm volatile("mov r0, r0");</code><br>barriers to patch/cyclecounter (sync libraries)<br>That should fix cyclecounter inconsistencies.</p>
          </blockquote>
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/54">Read full topic</a></p>
        ]]></description>
        <link>https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/54</link>
        <pubDate>Fri, 13 May 2016 20:05:08 +0000</pubDate>
        <guid isPermaLink="false">community.axoloti.com-post-1679-54</guid>
        <source url="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679.rss">Fastest way to convert to/from int32 and float in 0-1 range</source>
      </item>
      <item>
        <title>Fastest way to convert to/from int32 and float in 0-1 range</title>
        <dc:creator><![CDATA[@toneburst alx]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/u/toneburst">@toneburst</a> wrote:</p>
          <blockquote>
              <p>That's odd...<br>I tried copying the float&lt;&gt;int conversion functions from your floats_workbench.axp into my object, and the number of cycles reported jumped from 4 before, using</p>

<pre><code>float int2f(int32_t val) {
	return val * (float)(1.0f / (1 &lt;&lt; 27));
}

int32_t f2int(float val) {
	return (int)(val * (float)(1 &lt;&lt; 27));
}</code></pre>

<p>to 27, using</p>

<pre><code>__attribute__ ( ( always_inline ) ) __STATIC_INLINE float Q27ToF(int32_t op1) {
  float fop1 = *(float*)(&amp;op1);
  __ASM volatile ("VCVT.F32.S32 %0, %0, 27" : "+w" (fop1) );
  return(fop1);
}

__attribute__ ( ( always_inline ) ) __STATIC_INLINE int32_t FToQ27(float fop1) {
  __ASM volatile ("VCVT.S32.F32 %0, %0, 27" : "+w" (fop1) );
  int32_t r = *(int32_t*)(&amp;fop1);
  return(r);
}</code></pre>

<p>..which was a bit of a surprise.</p>

<p>I think I'll stick with method 1. Unless the number of cycles is being misreported.</p>

<p>a|x</p>
          </blockquote>
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/53">Read full topic</a></p>
        ]]></description>
        <link>https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/53</link>
        <pubDate>Fri, 13 May 2016 18:52:03 +0000</pubDate>
        <guid isPermaLink="false">community.axoloti.com-post-1679-53</guid>
        <source url="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679.rss">Fastest way to convert to/from int32 and float in 0-1 range</source>
      </item>
      <item>
        <title>Fastest way to convert to/from int32 and float in 0-1 range</title>
        <dc:creator><![CDATA[@toneburst alx]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/u/toneburst">@toneburst</a> wrote:</p>
          <blockquote>
              <p>Ah, OK. I'll make my own functions to do the conversion, then. I can just edit that by substituting a call to your functions later.</p>

<p>Just to be clear re. prefixing my object functions:<br>You recommend doing that in every case?</p>

<p>If you have time, could you briefly explain what the compiler instructions do? I have a feeling it's to do with no re-defining the same function more than once, but I may be wrong..</p>

<p>a|x</p>
          </blockquote>
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/52">Read full topic</a></p>
        ]]></description>
        <link>https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/52</link>
        <pubDate>Fri, 13 May 2016 18:26:29 +0000</pubDate>
        <guid isPermaLink="false">community.axoloti.com-post-1679-52</guid>
        <source url="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679.rss">Fastest way to convert to/from int32 and float in 0-1 range</source>
      </item>
      <item>
        <title>Fastest way to convert to/from int32 and float in 0-1 range</title>
        <dc:creator><![CDATA[@johannes johannes]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/u/johannes">@johannes</a> wrote:</p>
          <blockquote>
              <p>Will end up there in the next release, but don't rely on this in 1.0.10 patches and objects, as that will fail to compile.<br>Prefix with <br><code>__attribute__ ( ( always_inline ) ) __STATIC_INLINE</code><br>(your post doesn't show the correct underscores, I guess due to forum markup)</p>
          </blockquote>
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/51">Read full topic</a></p>
        ]]></description>
        <link>https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/51</link>
        <pubDate>Fri, 13 May 2016 18:21:01 +0000</pubDate>
        <guid isPermaLink="false">community.axoloti.com-post-1679-51</guid>
        <source url="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679.rss">Fastest way to convert to/from int32 and float in 0-1 range</source>
      </item>
      <item>
        <title>Fastest way to convert to/from int32 and float in 0-1 range</title>
        <dc:creator><![CDATA[@toneburst alx]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/u/toneburst">@toneburst</a> wrote:</p>
          <blockquote>
              <p><a class="mention" href="/users/johannes">@johannes</a> Would you recommend I use your more recent int &lt;&gt; float  conversion functions, or the earlier version you posted in my object?</p>

<p>I'm a bit unclear if your test code is intended to end up in the Axoloti Maths library, to be called from custom objects, or if you envisage it being used as-is in individual objects.</p>

<p>Also, should I be prefixing functions I create in the Local Data section of my object's XML code with the compiler instruction</p>

<p><code>attribute ((always_inline)) _STATICINLINE</code></p>

<p>a|x</p>
          </blockquote>
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/50">Read full topic</a></p>
        ]]></description>
        <link>https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/50</link>
        <pubDate>Fri, 13 May 2016 18:05:35 +0000</pubDate>
        <guid isPermaLink="false">community.axoloti.com-post-1679-50</guid>
        <source url="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679.rss">Fastest way to convert to/from int32 and float in 0-1 range</source>
      </item>
      <item>
        <title>Fastest way to convert to/from int32 and float in 0-1 range</title>
        <dc:creator><![CDATA[@toneburst alx]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/u/toneburst">@toneburst</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="45" data-topic="1679"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//community.axoloti.com/user_avatar/community.axoloti.com/johannes/40/8_1.png" class="avatar">johannes:</div>
<blockquote><p>May I suggest to try "env/d lin" rather than "env/d" to feed into the 1dbezier? A regular "env/d" already has an exponential decay curve...</p></blockquote></aside>

<p>Ah, I didn't realise that...<br>Will try that when I get home (have the Axo software here, but not the Axoloti Core hardware).</p>

<p>a|x</p>
          </blockquote>
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/49">Read full topic</a></p>
        ]]></description>
        <link>https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/49</link>
        <pubDate>Fri, 13 May 2016 09:00:15 +0000</pubDate>
        <guid isPermaLink="false">community.axoloti.com-post-1679-49</guid>
        <source url="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679.rss">Fastest way to convert to/from int32 and float in 0-1 range</source>
      </item>
      <item>
        <title>Fastest way to convert to/from int32 and float in 0-1 range</title>
        <dc:creator><![CDATA[@toneburst alx]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/u/toneburst">@toneburst</a> wrote:</p>
          <blockquote>
              <p>Here's the 1D Quadratic Bezier (from the same <a href="http://blog.demofox.org/2014/08/28/one-dimensional-bezier-curves/" rel="nofollow">source</a>), by the way.</p>

<p><code>y=a*2*(1-x)*x+(x*x)</code></p>

<p><div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/0b18cba285e0532b166246e7e1e89e53b592564c" href="//community.axoloti.com/uploads/default/original/2X/0/0b18cba285e0532b166246e7e1e89e53b592564c.png" class="lightbox" title="Screen Shot 2016-05-13 at 09.33.31.png"><img src="//community.axoloti.com/uploads/default/optimized/2X/0/0b18cba285e0532b166246e7e1e89e53b592564c_1_570x500.png" width="570" height="500"><div class="meta">
<span class="filename">Screen Shot 2016-05-13 at 09.33.31.png</span><span class="informations">2400x2102 411 KB</span><span class="expand"></span>
</div></a></div></p>

<p>Makes a nice straight line at <code>a=0.5</code>, unlike the Cubic Bezier, but it's a bit subtle for my porpoises, I think.</p>

<p>a|x</p>
          </blockquote>
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/48">Read full topic</a></p>
        ]]></description>
        <link>https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/48</link>
        <pubDate>Fri, 13 May 2016 08:36:21 +0000</pubDate>
        <guid isPermaLink="false">community.axoloti.com-post-1679-48</guid>
        <source url="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679.rss">Fastest way to convert to/from int32 and float in 0-1 range</source>
      </item>
      <item>
        <title>Fastest way to convert to/from int32 and float in 0-1 range</title>
        <dc:creator><![CDATA[@toneburst alx]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/u/toneburst">@toneburst</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="45" data-topic="1679"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//community.axoloti.com/user_avatar/community.axoloti.com/johannes/40/8_1.png" class="avatar">johannes:</div>
<blockquote><p>a is the slope at x=0b is the slope at x=1</p></blockquote></aside>

<p>Yep, I realise that.</p>

<p>I meant it might be hard to explain to 'the average user'. I'm a technical adviser at a university here in the UK, and I've often struggled to explain bezier curves in drawing and DTP packages. My usual line is "it's harder to explain than it is to do". That only holds when you can see what's going on, though. It's a bit less obvious when you can't.</p>

<p>Grapher is great, by the way! I've not used it much before, but I'm learning how useful it is, now</p>

<p>a|x</p>
          </blockquote>
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/47">Read full topic</a></p>
        ]]></description>
        <link>https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/47</link>
        <pubDate>Fri, 13 May 2016 08:13:26 +0000</pubDate>
        <guid isPermaLink="false">community.axoloti.com-post-1679-47</guid>
        <source url="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679.rss">Fastest way to convert to/from int32 and float in 0-1 range</source>
      </item>
      <item>
        <title>Fastest way to convert to/from int32 and float in 0-1 range</title>
        <dc:creator><![CDATA[@johannes johannes]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/u/johannes">@johannes</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="44" data-topic="1679"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//community.axoloti.com/letter_avatar_proxy/v2/letter/t/b9e5f3/40.png" class="avatar">toneburst:</div>
<blockquote><p>Does this convert int32_t to float 0 &gt; 1 and back?Is it faster than the first method you suggested?</p></blockquote></aside>

<p>Yes and yes. The speedup is very tiny compared to things like replacing <code>pow(x,4)</code> with <code>(x*x)*(x*x)</code>.</p>
          </blockquote>
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/46">Read full topic</a></p>
        ]]></description>
        <link>https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/46</link>
        <pubDate>Thu, 12 May 2016 23:54:19 +0000</pubDate>
        <guid isPermaLink="false">community.axoloti.com-post-1679-46</guid>
        <source url="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679.rss">Fastest way to convert to/from int32 and float in 0-1 range</source>
      </item>
      <item>
        <title>Fastest way to convert to/from int32 and float in 0-1 range</title>
        <dc:creator><![CDATA[@johannes johannes]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/u/johannes">@johannes</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="43" data-topic="1679"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//community.axoloti.com/letter_avatar_proxy/v2/letter/t/b9e5f3/40.png" class="avatar">toneburst:</div>
<blockquote><p>it's not 100% intuitive what the a and b values actually do.</p></blockquote></aside>

<p>a is the slope at x=0<br>b is the slope at x=1</p>

<p>if you look at my grapher screenshot, you see all the 25 plots bundle at the origin into 5 bundles, each is one setting of <code>a</code>. Similar bundles shape up at x=1, they're different settings of <code>b</code>.</p>

<p>May I suggest to try "env/d lin" rather than "env/d" to feed into the 1dbezier? A regular "env/d" already has an exponential decay curve...</p>
          </blockquote>
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/45">Read full topic</a></p>
        ]]></description>
        <link>https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/45</link>
        <pubDate>Thu, 12 May 2016 23:50:23 +0000</pubDate>
        <guid isPermaLink="false">community.axoloti.com-post-1679-45</guid>
        <source url="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679.rss">Fastest way to convert to/from int32 and float in 0-1 range</source>
      </item>
      <item>
        <title>Fastest way to convert to/from int32 and float in 0-1 range</title>
        <dc:creator><![CDATA[@toneburst alx]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/u/toneburst">@toneburst</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="33" data-topic="1679"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//community.axoloti.com/user_avatar/community.axoloti.com/johannes/40/8_1.png" class="avatar">johannes:</div>
<blockquote>
<p><strong>attribute</strong> ( ( always_inline ) ) <em>_STATIC</em>INLINE float Q27ToF(int32_t op1) {<br>  float fop1 = <em>(float</em>)(&amp;op1);<br>  __ASM volatile ("VCVT.F32.S32 %0, %0, 27" : "+w" (fop1) );<br>  return(fop1);<br>}</p>
<p><strong>attribute</strong> ( ( always_inline ) ) <em>_STATIC</em>INLINE int32_t FToQ27(float fop1) {<br>  __ASM volatile ("VCVT.S32.F32 %0, %0, 27" : "+w" (fop1) );<br>  int32_t r = <em>(int32_t</em>)(&amp;fop1);<br>  return(r);<br>}</p>
</blockquote></aside>

<p>Does this convert int32_t to float 0 &gt; 1 and back?<br>Is it faster than the first method you suggested?</p>

<p>a|x</p>
          </blockquote>
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/44">Read full topic</a></p>
        ]]></description>
        <link>https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/44</link>
        <pubDate>Thu, 12 May 2016 23:47:45 +0000</pubDate>
        <guid isPermaLink="false">community.axoloti.com-post-1679-44</guid>
        <source url="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679.rss">Fastest way to convert to/from int32 and float in 0-1 range</source>
      </item>
      <item>
        <title>Fastest way to convert to/from int32 and float in 0-1 range</title>
        <dc:creator><![CDATA[@toneburst alx]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/u/toneburst">@toneburst</a> wrote:</p>
          <blockquote>
              <p>Without the pow()s:</p>

<p><code>y=3*((1-x)*(1-x))*x*a+3*(1-x)*(x*x)*b+(x*x*x)</code></p>

<p>The only downside is it's not 100% intuitive what the a and b values actually do.</p>

<p>If this is reasonably efficient, it looks to be a good way for create a wide variety of interpolation curves.</p>

<p>Great work!</p>

<p>Time for bed...</p>

<p>a|x</p>
          </blockquote>
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/43">Read full topic</a></p>
        ]]></description>
        <link>https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/43</link>
        <pubDate>Thu, 12 May 2016 23:36:13 +0000</pubDate>
        <guid isPermaLink="false">community.axoloti.com-post-1679-43</guid>
        <source url="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679.rss">Fastest way to convert to/from int32 and float in 0-1 range</source>
      </item>
      <item>
        <title>Fastest way to convert to/from int32 and float in 0-1 range</title>
        <dc:creator><![CDATA[@toneburst alx]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/u/toneburst">@toneburst</a> wrote:</p>
          <blockquote>
              <p>Poyfect!</p>

<p>Different solution to the same problem.</p>

<p>I don't know much about maths, and have no formal background in computer-science, but I used to do quite a lot of work in realtime graphics and video (using Quartz Composer, which is why I keep mentioning it), and I worked on a JavaScript Cubic Bezier implementation for a commercial client, a few years ago.</p>

<p>It's nice to be able to make a suggestion that proves useful, even when much of the discussion goes over my head, to my shame.</p>

<p>a|x</p>
          </blockquote>
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/42">Read full topic</a></p>
        ]]></description>
        <link>https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/42</link>
        <pubDate>Thu, 12 May 2016 23:19:18 +0000</pubDate>
        <guid isPermaLink="false">community.axoloti.com-post-1679-42</guid>
        <source url="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679.rss">Fastest way to convert to/from int32 and float in 0-1 range</source>
      </item>
      <item>
        <title>Fastest way to convert to/from int32 and float in 0-1 range</title>
        <dc:creator><![CDATA[@johannes johannes]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/u/johannes">@johannes</a> wrote:</p>
          <blockquote>
              <p>Ok, 1D bezier, that looks suitable - and is also the solution to two parameters controlling the derivative at origin and endpoint (1;1) <img src="/images/emoji/emoji_one/slight_smile.png?v=2" title=":slight_smile:" class="emoji" alt=":slight_smile:"> <br><div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/f29c6c780b388081866a47e4088c404559e75963" href="//community.axoloti.com/uploads/default/original/2X/f/f29c6c780b388081866a47e4088c404559e75963.png" class="lightbox" title="Pasted image"><img src="//community.axoloti.com/uploads/default/optimized/2X/f/f29c6c780b388081866a47e4088c404559e75963_1_690x486.png" width="690" height="486"><div class="meta">
<span class="filename">Pasted image</span><span class="informations">1377x971 421 KB</span><span class="expand"></span>
</div></a></div></p>
          </blockquote>
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/41">Read full topic</a></p>
        ]]></description>
        <link>https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/41</link>
        <pubDate>Thu, 12 May 2016 23:16:23 +0000</pubDate>
        <guid isPermaLink="false">community.axoloti.com-post-1679-41</guid>
        <source url="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679.rss">Fastest way to convert to/from int32 and float in 0-1 range</source>
      </item>
      <item>
        <title>Fastest way to convert to/from int32 and float in 0-1 range</title>
        <dc:creator><![CDATA[@johannes johannes]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/u/johannes">@johannes</a> wrote:</p>
          <blockquote>
              <p>Ah I missed op2 in your code, I'm surprised it is possible to export that opcode field to a generic C function!<br>Certainly considering inclusion in axoloti_math.h, still I feel it needs a bit more testing to be confident...</p>
          </blockquote>
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/40">Read full topic</a></p>
        ]]></description>
        <link>https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/40</link>
        <pubDate>Thu, 12 May 2016 23:11:55 +0000</pubDate>
        <guid isPermaLink="false">community.axoloti.com-post-1679-40</guid>
        <source url="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679.rss">Fastest way to convert to/from int32 and float in 0-1 range</source>
      </item>
      <item>
        <title>Fastest way to convert to/from int32 and float in 0-1 range</title>
        <dc:creator><![CDATA[@DrJustice]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/u/drjustice">@DrJustice</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="33" data-topic="1679"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//community.axoloti.com/user_avatar/community.axoloti.com/johannes/40/8_1.png" class="avatar">johannes:</div>
<blockquote><p>This includes the Q27 scaling for free.I left the data move to the freedom of the compiler, the M4 can also move two core registers to two fpu registers in one instruction.</p></blockquote></aside>

<p>I agree that it's better to let the compiler do the data move. It's still useful be able to pass in the scaling since one does not always want Q27 - the passing of the scaling as an immediate operand is also free in the sense of needing no extra cycles.</p>

<p>Perhaps it would be good to make both  Q27ToF(int32_t op1) and FixToFloat ( int32_t op1, int32_t scale ) variants available in firmware/axoloti_math.h?</p>
          </blockquote>
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/39">Read full topic</a></p>
        ]]></description>
        <link>https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/39</link>
        <pubDate>Thu, 12 May 2016 23:00:14 +0000</pubDate>
        <guid isPermaLink="false">community.axoloti.com-post-1679-39</guid>
        <source url="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679.rss">Fastest way to convert to/from int32 and float in 0-1 range</source>
      </item>
      <item>
        <title>Fastest way to convert to/from int32 and float in 0-1 range</title>
        <dc:creator><![CDATA[@toneburst alx]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/u/toneburst">@toneburst</a> wrote:</p>
          <blockquote>
              <p>This works really well for kicks! Exactly what I had in mind!!</p>

<p>a|x</p>

<p><a class="attachment" href="//community.axoloti.com/uploads/default/original/2X/7/77c8cb7ecfb761a3e91e378a8831d49f4f248272.axp">Kick Interpolation.axp</a> (5.7 KB)</p>
          </blockquote>
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/38">Read full topic</a></p>
        ]]></description>
        <link>https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/38</link>
        <pubDate>Thu, 12 May 2016 22:57:53 +0000</pubDate>
        <guid isPermaLink="false">community.axoloti.com-post-1679-38</guid>
        <source url="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679.rss">Fastest way to convert to/from int32 and float in 0-1 range</source>
      </item>
      <item>
        <title>Fastest way to convert to/from int32 and float in 0-1 range</title>
        <dc:creator><![CDATA[@toneburst alx]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/u/toneburst">@toneburst</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="28" data-topic="1679"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//community.axoloti.com/user_avatar/community.axoloti.com/johannes/40/8_1.png" class="avatar">johannes:</div>
<blockquote><p>Beziers do not express nicely as an y=f(x) function, they're not strictly single valued.</p></blockquote></aside>

<p>They <a href="http://blog.demofox.org/2014/08/28/one-dimensional-bezier-curves/" rel="nofollow">can do</a>, apparently...</p>

<p>a|x</p>
          </blockquote>
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/37">Read full topic</a></p>
        ]]></description>
        <link>https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/37</link>
        <pubDate>Thu, 12 May 2016 22:50:15 +0000</pubDate>
        <guid isPermaLink="false">community.axoloti.com-post-1679-37</guid>
        <source url="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679.rss">Fastest way to convert to/from int32 and float in 0-1 range</source>
      </item>
      <item>
        <title>Fastest way to convert to/from int32 and float in 0-1 range</title>
        <dc:creator><![CDATA[@toneburst alx]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/u/toneburst">@toneburst</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="35" data-topic="1679"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//community.axoloti.com/user_avatar/community.axoloti.com/johannes/40/8_1.png" class="avatar">johannes:</div>
<blockquote><p>y=f(x) ?</p></blockquote></aside>

<p>I'm waaaay out of my depth here, but isn't 't' (time/curve-completion) the value that would be your input, rather than x?</p>

<p>You should be able to simplify the function down to 1D, in which case, you'd only need two parameters for the handles, since start/end points are fixed at 0/[maxvalue].</p>

<p>a|x</p>
          </blockquote>
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/36">Read full topic</a></p>
        ]]></description>
        <link>https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/36</link>
        <pubDate>Thu, 12 May 2016 22:38:19 +0000</pubDate>
        <guid isPermaLink="false">community.axoloti.com-post-1679-36</guid>
        <source url="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679.rss">Fastest way to convert to/from int32 and float in 0-1 range</source>
      </item>
      <item>
        <title>Fastest way to convert to/from int32 and float in 0-1 range</title>
        <dc:creator><![CDATA[@johannes johannes]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/u/johannes">@johannes</a> wrote:</p>
          <blockquote>
              <p>The Bezier function:</p>

<pre><code>x(t) = (1 - t)^3*x1 + 3*(1 -  t)^2*t*x2 + 3*(1 -  t)*t^2*x3 + t^3*x4
y(t) = (1 - t)^3*y1 + 3*(1 -  t)^2*t*y2 + 3*(1 -  t)*t^2*y3 + t^3*y4</code></pre>

<p>can you convert that to <br>y=f(x) ?</p>

<p>I believe a solution to <br>"two parameters one for the derivative at x=0 and one for the derivative at x=1?"<br>should exist that is way less complex than bezier.</p>
          </blockquote>
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/35">Read full topic</a></p>
        ]]></description>
        <link>https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/35</link>
        <pubDate>Thu, 12 May 2016 22:28:23 +0000</pubDate>
        <guid isPermaLink="false">community.axoloti.com-post-1679-35</guid>
        <source url="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679.rss">Fastest way to convert to/from int32 and float in 0-1 range</source>
      </item>
      <item>
        <title>Fastest way to convert to/from int32 and float in 0-1 range</title>
        <dc:creator><![CDATA[@toneburst alx]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/u/toneburst">@toneburst</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="28" data-topic="1679"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//community.axoloti.com/user_avatar/community.axoloti.com/johannes/40/8_1.png" class="avatar">johannes:</div>
<blockquote><p>Beziers do not express nicely as an y=f(x) function, they're not strictly single valued.</p></blockquote></aside>

<p>There may be fixed-point/integer implementations though, and you can set the Y coordinate of your end point to an arbitrary number, so you don't need to scale afterwards.</p>

<p>a|x</p>
          </blockquote>
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/34">Read full topic</a></p>
        ]]></description>
        <link>https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/34</link>
        <pubDate>Thu, 12 May 2016 22:10:20 +0000</pubDate>
        <guid isPermaLink="false">community.axoloti.com-post-1679-34</guid>
        <source url="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679.rss">Fastest way to convert to/from int32 and float in 0-1 range</source>
      </item>
      <item>
        <title>Fastest way to convert to/from int32 and float in 0-1 range</title>
        <dc:creator><![CDATA[@johannes johannes]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/u/johannes">@johannes</a> wrote:</p>
          <blockquote>
              <p>This is my variant (in axoloti-contrib/patches/jt/devel/float_workbench.axp):</p>

<pre><code>__attribute__ ( ( always_inline ) ) __STATIC_INLINE float Q27ToF(int32_t op1) {
  float fop1 = *(float*)(&amp;op1);
  __ASM volatile ("VCVT.F32.S32 %0, %0, 27" : "+w" (fop1) );
  return(fop1);
}

__attribute__ ( ( always_inline ) ) __STATIC_INLINE int32_t FToQ27(float fop1) {
  __ASM volatile ("VCVT.S32.F32 %0, %0, 27" : "+w" (fop1) );
  int32_t r = *(int32_t*)(&amp;fop1);
  return(r);
}</code></pre>

<p>This includes the Q27 scaling for free.<br>I left the data move to the freedom of the compiler, the M4 can also move two core registers to two fpu registers in one <a href="http://infocenter.arm.com/help/topic/com.arm.doc.dui0553a/CHDICEHB.html" rel="nofollow">instruction</a>.</p>
          </blockquote>
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/33">Read full topic</a></p>
        ]]></description>
        <link>https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679/33</link>
        <pubDate>Thu, 12 May 2016 22:09:51 +0000</pubDate>
        <guid isPermaLink="false">community.axoloti.com-post-1679-33</guid>
        <source url="https://sebiik.github.io/community.axoloti.com.backup/t/fastest-way-to-convert-to-from-int32-and-float-in-0-1-range/1679.rss">Fastest way to convert to/from int32 and float in 0-1 range</source>
      </item>
  </channel>
</rss>
