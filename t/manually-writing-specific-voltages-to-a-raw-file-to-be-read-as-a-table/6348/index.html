<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Manually writing specific voltages to a raw file to be read as a table - Patching - Axoloti Community</title>
    <meta name="description" content="Hell all, I have searched around and found a few similar posts (http://community.axoloti.com/t/types-conversion-bit-shifting-and-friends/2329), but I couldn&amp;#39;t find anything that clarified things for me, so I&amp;#39;m starting a&amp;hellip;">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.9.0.beta3 - https://github.com/discourse/discourse version 13f3de4bf673802eb8ec595d36587b4524773209">
<link rel="icon" type="image/png" href="/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="http://community.axoloti.com/t/manually-writing-specific-voltages-to-a-raw-file-to-be-read-as-a-table/6348" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"http://community.axoloti.com","potentialAction":{"@type":"SearchAction","target":"http://community.axoloti.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="http://community.axoloti.com/opensearch.xml" title="Axoloti Community Search">

        <link href="/stylesheets/desktop_d93a33ca8617326fe353f80e6ab865188244d48c.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop"/>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Manually writing specific voltages to a raw file to be read as a table&#39;" href="http://community.axoloti.com/t/manually-writing-specific-voltages-to-a-raw-file-to-be-read-as-a-table/6348.rss" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:url" content="http://community.axoloti.com/t/manually-writing-specific-voltages-to-a-raw-file-to-be-read-as-a-table/6348" />
<meta name="twitter:url" content="http://community.axoloti.com/t/manually-writing-specific-voltages-to-a-raw-file-to-be-read-as-a-table/6348" />
<meta property="og:title" content="Manually writing specific voltages to a raw file to be read as a table" />
<meta name="twitter:title" content="Manually writing specific voltages to a raw file to be read as a table" />
<meta property="og:description" content="Hell all, I have searched around and found a few similar posts (http://community.axoloti.com/t/types-conversion-bit-shifting-and-friends/2329), but I couldn&#39;t find anything that clarified things for me, so I&#39;m starting a new thread.   I am working on a granular audio freezer. I am using jt/granular/graintable. I am hoping to feed a value from a table into the bipolar &quot;pos&quot; input on graintable. I want this to be very precise so I can play grains from a very specific position in the audio table. I..." />
<meta name="twitter:description" content="Hell all, I have searched around and found a few similar posts (http://community.axoloti.com/t/types-conversion-bit-shifting-and-friends/2329), but I couldn&#39;t find anything that clarified things for me, so I&#39;m starting a new thread.   I am working on a granular audio freezer. I am using jt/granular/graintable. I am hoping to feed a value from a table into the bipolar &quot;pos&quot; input on graintable. I want this to be very precise so I can play grains from a very specific position in the audio table. I..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins ðŸ•‘" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="2 â¤" />


  </head>
  <body class="crawler">
    
    <header>
      <a href="/"><img src="/uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo" style="max-width: 150px;"></a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1>
  <a href="/t/manually-writing-specific-voltages-to-a-raw-file-to-be-read-as-a-table/6348">Manually writing specific voltages to a raw file to be read as a table</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="/c/patching" itemprop="url">
        <span itemprop="title">Patching</span>
      </a>
    </div>
</div>





<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/Rotexo'><b itemprop='author'>Rotexo</b></a>
           
           <time datetime='2020-01-25T23:46:16Z' itemprop='datePublished'>
             2020-01-25 23:46:16 UTC
           </time>
        </span>
        <span itemprop='position'>#1</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hell all,<br>I have searched around and found a few similar posts (<a href="//community.axoloti.com/t/types-conversion-bit-shifting-and-friends/2329">http://community.axoloti.com/t/types-conversion-bit-shifting-and-friends/2329</a>), but I couldn't find anything that clarified things for me, so I'm starting a new thread.</p>

<p>I am working on a granular audio freezer. I am using jt/granular/graintable.<br>I am hoping to feed a value from a table into the bipolar "pos" input on graintable. I want this to be very precise so I can play grains from a very specific position in the audio table. I am using a similar granular synth in supercollider (where I have more programming ability) to "explore" the sound file using my mouse x position. In the SuperCollider synth, the pointer into the sound file is a value from 0 to 1.0. So I need to translate this value into a very precise bipolar Axoloti voltage. (The reason I am using SuperCollider is because I like the pitch detectors in SC, and I am trying to "freeze" the granular sample player on regions of the audio file that have a clear pitch.)</p>

<p>I have been on a bit of a journey to try to figure out how to do this. I wrote a table with some bipolar values in axoloti, saved that tabel to a raw file, and then inspected it with a hex editor. As far as I can tell, these are the rules for writing values which can be loaded into a table to read on the axoloti to provide the bipolar voltage values:</p>

<p> pointer from 0..1<br>   [0.0-0.5) corresponds to negatives on a bipolar dial<br>   in hex string, F in first place (0xFXXXX) indicates negative<br>      0 in pointer is (-)0, or 0xF0000 in hex string<br>      0.5 in pointer is (-)65536, or 0xFFFFF in hex string<br>      so take integer (0 to 65536) as Hex String + 0xF0000 to get number<br>      take that number and write it to the binary file as a 16 bit Little Endian integer<br>   [0.5-1.0] corresponds to positives on bipolar dial<br>      this is simply (0-65536) as Hex String written to a binary file as a 16 bit Little Endian integer</p>

<p>However, when I tested my mental model in Supercollider, trying to go from values read on a bipolar dial display in Axoloti to the hex values to write in the raw file, I didn't get the expected behavior.</p>

<p>//testing my ability to go from desired place on bipolar knob to raw binary hex file<br>//test numbers: -26.70, 5.64, -4.70, 56.10<br>//-26.7:<br>64-26.7; // 37.3<br>(37.3/64.0)*65536; // ~38195<br>(38195 + 0xF0000).asHexString; // 0xF9533 or<br>0xF9533; // 1021235<br>// BUT this is actually -53.4 on the axoloti dial</p>

<p>(5.64/128.0)*65536; // ~5775, simpler because positive<br>5775.asHexString; // 0x0168F<br>0x0168F; //5775<br>// BUT this is actually 11.28 on the axoloti dial</p>

<p>64-4.7; // 59.3<br>(59.3/128.0)*65536; // ~60723<br>(60723+0xF0000).asHexString; // 0xFED33<br>0xFED33; // 1043763<br>// BUT this is actually -9.4 on the axoloti dial</p>

<p>(56.10/128.0)*65536; // ~57446<br>57446.asHexString; // 0x0000E066<br>0x0000E066; // 57446<br>// BUT this is actually -15.8 on the axoloti dial</p>

<p>Can anyone help me understand what I'm getting wrong in trying to write data to a file manually to be read into a table in the Axoloti and produce a desired voltage? Thanks!</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Manually writing specific voltages to a raw file to be read as a table'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/Rotexo'><b itemprop='author'>Rotexo</b></a>
           
           <time datetime='2020-01-25T23:51:15Z' itemprop='datePublished'>
             2020-01-25 23:51:15 UTC
           </time>
        </span>
        <span itemprop='position'>#2</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="1" data-topic="6348"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//community.axoloti.com/letter_avatar_proxy/v2/letter/r/dfb087/40.png" class="avatar">Rotexo:</div>
<blockquote><p>0x0000E066</p></blockquote></aside>

<p>My apologies, this should read 0x0E066</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Manually writing specific voltages to a raw file to be read as a table'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/tele_player'><b itemprop='author'>tele_player</b></a>
           
           <time datetime='2020-01-26T03:10:01Z' itemprop='datePublished'>
             2020-01-26 03:10:01 UTC
           </time>
        </span>
        <span itemprop='position'>#3</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I can't understand what you have written, but maybe you don't understand twos-complement representation of negative numbers?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Manually writing specific voltages to a raw file to be read as a table'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/Rotexo'><b itemprop='author'>Rotexo</b></a>
           
           <time datetime='2020-01-26T06:29:25Z' itemprop='datePublished'>
             2020-01-26 06:29:25 UTC
           </time>
        </span>
        <span itemprop='position'>#4</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I do not. That term can inform my googling, thanks!</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Manually writing specific voltages to a raw file to be read as a table'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/tele_player'><b itemprop='author'>tele_player</b></a>
           
           <time datetime='2020-01-26T07:19:16Z' itemprop='datePublished'>
             2020-01-26 07:19:16 UTC
           </time>
        </span>
        <span itemprop='position'>#5</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Note: my previous reply wasnâ€™t meant as a solution, but :<br>â€œ  F in first place (0xFXXXX) indicates negative â€œ <br>is incorrect.</p>

<p>Also investigate fixed-point arithmetic.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Manually writing specific voltages to a raw file to be read as a table'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/Rotexo'><b itemprop='author'>Rotexo</b></a>
           
           <time datetime='2020-01-26T16:38:20Z' itemprop='datePublished'>
             2020-01-26 16:38:20 UTC
           </time>
        </span>
        <span itemprop='position'>#6</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Definitely, after reading about twos complement I see that what I had written is incorrect. I donâ€™t have much of any experience with these lower-level representations of numbers, so finding out what to google is in fact the solution, thanks!</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Manually writing specific voltages to a raw file to be read as a table'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/Rotexo'><b itemprop='author'>Rotexo</b></a>
           
           <time datetime='2020-01-26T20:05:26Z' itemprop='datePublished'>
             2020-01-26 20:05:26 UTC
           </time>
        </span>
        <span itemprop='position'>#7</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>OK, I understand now. In case anyone else finds this thread in their google result and is confused by my incoherent rambling earlier:</p>

<p>What I didn't fully understand about handling 16 bit representations of bipolar signals is how exactly one of the 16 bits is sacrificed to represent the negative sign. So instead of having 65536 (2 to the 16) possible values, you have 32768 (2 to the 15) possible values. So if you want to go from the number on a bipolar dial in the axoloti patcher (say, 27.0) to a hex representation, the math is:</p>

<p>(27.0/64.0)*32768 = 13824<br>13824 as hex string is 0x03600000</p>

<p>If instead you want to get the hex string representation of -27.0 on the dial, and for some reason you are trying to get there from (27.0/64,0) like I was, add one to the bitwise not representation of 13824.</p>

<p>If any of that is inaccurate or unclear, someone let me know so I can correct the record.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Manually writing specific voltages to a raw file to be read as a table'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/tele_player'><b itemprop='author'>tele_player</b></a>
           
           <time datetime='2020-01-27T17:15:19Z' itemprop='datePublished'>
             2020-01-27 17:15:19 UTC
           </time>
        </span>
        <span itemprop='position'>#8</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>13824 (decimal) in hex is 0x3600 . The extra zeroes on the right  in 0x3600000 are for the fractional part.</p>

<p><aside class="onebox wikipedia">
  <header class="source">
    <a href="https://en.wikipedia.org/wiki/Q_(number_format)" target="_blank" rel="nofollow noopener">en.wikipedia.org</a>
  </header>
  <article class="onebox-body">
    

<h3><a href="https://en.wikipedia.org/wiki/Q_(number_format)" target="_blank" rel="nofollow noopener">Q (number format)</a></h3>

<p>
Q is binary a fixed point number format where the number of fractional bits (and optionally the number of integer bits) is specified. For example, a Q15 number has 15 fractional bits; a Q1.14 number has 1 integer bit and 14 fractional bits. Q format is often used in hardware that does not have a floating-point unit and in applications that require constant resolution.
 Q format numbers are notionally fixed point numbers, that is, they are stored and operated upon as regular binary signed integer...</p>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
<br>'ctrl/dial b' outputs a value in Q11.21 format. Meaning, integer part of the number is in the high 11 bits, the fractional part is in the low 21 bits.</p>

<p>Example:<br>So, if  'ctrl/dial b' is set to 27.0:<br>27 is the integer portion <br>0 is the fractional portion<br>The integer portion needs to be shifted left 21 bits to create the space for the 21 bit fractional part.</p>

<p>Decimal 27 is 0x1B<br>0x1B &lt;&lt; 21 = 0x03600000<br>In binary, that's 0b00000011011000000000000000000000</p>

<p>(above, the 0x prefix denotes a hex number, 0b prefix denote a binary number)</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Manually writing specific voltages to a raw file to be read as a table'>
      <hr>
  </div>






    </div>
    <footer class="container">
      <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <a href='/'>Home</a>
        <a href="/categories">Categories</a>
        <a href="/guidelines">FAQ/Guidelines</a>
        <a href="/tos">Terms of Service</a>
        <a href="/privacy">Privacy Policy</a>
      </nav>
      <p>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
