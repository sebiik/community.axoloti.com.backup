<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>USB hub support - Hardware - Axoloti Community</title>
    <meta name="description" content="Axoloti user community">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.7.0.beta5 - https://github.com/discourse/discourse version 843c7a21c990f118722bdab1778ab91e16e7b835">
<link rel="icon" type="image/png" href="/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="https://sebiik.github.io/community.axoloti.com.backup/t/usb-hub-support/2082" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"http://community.axoloti.com","potentialAction":{"@type":"SearchAction","target":"http://community.axoloti.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="https://sebiik.github.io/community.axoloti.com.backup/opensearch.xml" title="Axoloti Community Search">

      
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;USB hub support&#39;" href="https://sebiik.github.io/community.axoloti.com.backup/t/usb-hub-support/2082.rss" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://community.axoloti.com/user_avatar/community.axoloti.com/thetechnobear/100/6_1.png" />
<meta property="og:image" content="http://community.axoloti.com/user_avatar/community.axoloti.com/thetechnobear/100/6_1.png" />
<meta property="og:url" content="http://community.axoloti.com/t/usb-hub-support/2082/2" />
<meta name="twitter:url" content="http://community.axoloti.com/t/usb-hub-support/2082/2" />
<meta property="og:title" content="USB hub support" />
<meta name="twitter:title" content="USB hub support" />
<meta property="og:description" content="@hwk  Ive moved this to its own topic as this comes up occasionally (also the USB Midi Controllers thread, is not a place for &#39;requests&#39;)   as a side note... hub support not only requires firmware changes to support the hub. but also for axoloti to support multiple devices... e.g. current midi targets are fixed to DIN, usb device,usb host... but adding a hub means N devices could be attached to the host. this raises some &#39;interesting&#39; questions about configuration, since the UI does not currentl..." />
<meta name="twitter:description" content="@hwk  Ive moved this to its own topic as this comes up occasionally (also the USB Midi Controllers thread, is not a place for &#39;requests&#39;)   as a side note... hub support not only requires firmware changes to support the hub. but also for axoloti to support multiple devices... e.g. current midi targets are fixed to DIN, usb device,usb host... but adding a hub means N devices could be attached to the host. this raises some &#39;interesting&#39; questions about configuration, since the UI does not currentl..." />

    <style>
      header img {
        max-width: 90% !important;
        padding-bottom: 10px;
      }

      img { max-width: 100%; width: auto; height: auto; }

      #main-outlet > div {
        margin-bottom: 15px;
      }

      footer nav a {
        margin-right: 15px;
      }

      footer nav {
        line-height: 30px;
      }

      body {
        max-width: 98%;
        padding-left: 1%;
      }
      .topic-list > div > a {
        margin-right: 10px;
      }
      .topic-list > div .posts {
          margin-left: 10px;
      }
      .topic-list > div {
        margin-bottom: 15px;
      }

    </style>
  </head>
  <body>
      
    <header>
      <a href="/"><img src="/uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo" style="max-width: 400px;"></a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1>
  <a href="/t/usb-hub-support/2082">USB hub support</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="/c/hardware" itemprop="url">
        <span itemprop="title">Hardware</span>
      </a>
    </div>
</div>




<hr>


  <div itemscope itemtype='http://schema.org/Article'>
      <div class='creator'>
        <span>
          <a href='/users/hwk'><b itemprop='author'>hwk</b></a>
           
           <time datetime='2016-08-05T08:24:09Z' itemprop='datePublished'>
             2016-08-05 08:24:09 UTC
           </time>
        </span>
        <span itemprop='position'>#1</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>hello, <br>following up on usb hubs, it seems the last message from johannes (feb 12 2016) (re)states, that usb hubs currently are not supported by the axoloti core and that its low priority.<br>as i would find it <em>extremely</em> useful to connect several midicontrollers, how about sponsoring someone with the skills to implement it? i don´t have the skills and time to do it myself, but would be willing to chip in some money, if someone wants to pick up. if more people find this idea attractive, then we could raise the pay and more likely find someone?<br>what do the others think?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/Article'>
      <div class='creator'>
        <span>
          <a href='/users/thetechnobear'><b itemprop='author'>thetechnobear</b></a>
           
           <time datetime='2016-08-05T09:34:50Z' itemprop='datePublished'>
             2016-08-05 09:34:50 UTC
           </time>
        </span>
        <span itemprop='position'>#2</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p><a class="mention" href="/users/hwk">@hwk</a>  Ive moved this to its own topic as this comes up occasionally<br>(also the USB Midi Controllers thread, is not a place for 'requests')</p>

<p>as a side note... hub support not only requires firmware changes to support the hub. but also for axoloti to support multiple devices... e.g. current midi targets are fixed to DIN, usb device,usb host... but adding a hub means N devices could be attached to the host.<br>this raises some 'interesting' questions about configuration, since the UI does not currently know about the device connected to the axoloti... and even if it did, the devices you attach to axoloti could be different when you 'build' the patch vs when you run it.<br>so how you would configure it, becomes an interesting question.</p>

<p>(there are some existing cases, where this is already interesting - but multiple devices support via hubs would make it a more 'pressing' issue)</p>

<p>also... its worth highlighting, some midi hubs may already be supported....<br>these are hubs that present themselves as multiple midi ports, rather than multiple usb devices.<br>(I suspect dedicated midi hubs fall into this category, e.g. midi man midisport 2x2 but I don't have any to test with)</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:2'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/Article'>
      <div class='creator'>
        <span>
          <a href='/users/hellcore'><b itemprop='author'>hellcore</b></a>
           
           <time datetime='2016-08-05T11:02:39Z' itemprop='datePublished'>
             2016-08-05 11:02:39 UTC
           </time>
        </span>
        <span itemprop='position'>#3</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="2" data-topic="2082"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//community.axoloti.com/user_avatar/community.axoloti.com/thetechnobear/40/6_1.png" class="avatar">thetechnobear:</div>
<blockquote><p>also... its worth highlighting, some midi hubs may already be supported....these are hubs that present themselves as multiple midi ports, rather than multiple usb devices.(I suspect dedicated midi hubs fall into this category, e.g. midi man midisport 2x2 but I don't have any to test with)</p></blockquote></aside>

<p>FWIW this is how it works with an iCON 3 port box that I just tested.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/Article'>
      <div class='creator'>
        <span>
          <a href='/users/johannes'><b itemprop='author'>johannes</b></a>
           
           <time datetime='2016-08-05T11:12:39Z' itemprop='datePublished'>
             2016-08-05 11:12:39 UTC
           </time>
        </span>
        <span itemprop='position'>#4</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hubs are not supported by the firmware framework sourcecode from STMicro, while there are commercial libraries for the chip that support hubs. But I did a search again, and found open source code that adds hub support to the STMicro framework: <a href="https://github.com/mori-br/STM32F4HUB" rel="nofollow">https://github.com/mori-br/STM32F4HUB</a><br>Still a substantial adventure to implement and test, but this code appears to make the effort quite a bit more realistic. </p>

<p>As <a class="mention" href="/users/thetechnobear">@thetechnobear</a> say, this also challenges the model of how midi is exposed to patches. Probably needs some sort of MIDI routing configuration that is independent of patches.<br>In some cases you may just want to merge all incoming midi data. But some Midi controller devices could have overlapping messages. If you connect 2 NanoControls with identical midi mapping, they need to be recognized separately not merged. This can also be solved by programming the NanoControl to use a different map, but not all controllers can do this, for example, a Launchpad.<br>The right balance need to be found between keeping simple things simple and bumping into hard limitations because of simplistic routing assumptions.</p>

<aside class="quote" data-post="2" data-topic="2082"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//community.axoloti.com/user_avatar/community.axoloti.com/thetechnobear/40/6_1.png" class="avatar">thetechnobear:</div>
<blockquote><p>some midi hubs may already be supported</p></blockquote></aside>

<p>That 'd be multiport usb-midi devices, unrelated to usb hubs.</p>

<p>I'm open to a model where people chip in to pay someone else to do the development. I will certainly contribute to the effort of testing!</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/Article'>
      <div class='creator'>
        <span>
          <a href='/users/mnskll'><b itemprop='author'>mnskll</b></a>
           
           <time datetime='2016-08-05T13:41:02Z' itemprop='datePublished'>
             2016-08-05 13:41:02 UTC
           </time>
        </span>
        <span itemprop='position'>#5</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="4" data-topic="2082"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//community.axoloti.com/user_avatar/community.axoloti.com/johannes/40/8_1.png" class="avatar">johannes:</div>
<blockquote><p>If you connect 2 NanoControls with identical midi mapping, they need to be recognized separately not merged</p></blockquote></aside>

<p>I'm not sure you need this, isn't this what channels are for? Of course it would be nice to have 16 channels from every device without the need to remap but isn't that just being lazy? If it's easyer to implement then I'm content with just getting the midi in and managing the routing with channels and mapping myself.<br>If you have a midi-merge box, doesn't it present itself as one device that transmits on different channels, you don't see it as multiple devices, and a midi hub could work the same.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/Article'>
      <div class='creator'>
        <span>
          <a href='/users/hwk'><b itemprop='author'>hwk</b></a>
           
           <time datetime='2016-08-05T15:04:00Z' itemprop='datePublished'>
             2016-08-05 15:04:00 UTC
           </time>
        </span>
        <span itemprop='position'>#6</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>hello,<br>thanks for all the information coming up here!<br>in my case its a korg nanocontrol and an iRig midikeyboard, which i want to use simultaneously. <br>connecting both to an usb hub and that to an ipad works like a treat, but the hub doesn´t work on the axoloti for reasons i now understand better. <br>since the korg and the iRig both are usb only, i´d need a usb to midi converter to accomplish, what i want (and in fact help myself at the moment routing the keyboard thru a computer and a midi interface), but being able to connect a hub would certainly make things more portable. <br>maybe the github code for the stm, that johannes mentioned, could facilitate such an option in the future?<br>my offer to (at least partially) sponsor such a development still stands.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/Article'>
      <div class='creator'>
        <span>
          <a href='/users/johannes'><b itemprop='author'>johannes</b></a>
           
           <time datetime='2016-08-05T18:39:38Z' itemprop='datePublished'>
             2016-08-05 18:39:38 UTC
           </time>
        </span>
        <span itemprop='position'>#7</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="5" data-topic="2082"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//community.axoloti.com/letter_avatar_proxy/v2/letter/m/9fc348/40.png" class="avatar">mnskll:</div>
<blockquote><p>isn't this what channels are for?</p></blockquote></aside>

<p>Often that is a valid solution indeed, <em>if</em> the controller uses only a single channel. Another problem situation arises when dealing with Midi Polyphonic Expression, that uses all channels for one instrument.</p>

<aside class="quote" data-post="6" data-topic="2082"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//community.axoloti.com/letter_avatar_proxy/v2/letter/h/e36b37/40.png" class="avatar">hwk:</div>
<blockquote><p>maybe the github code for the stm, that johannes mentioned, could facilitate such an option in the future?</p></blockquote></aside>

<p>Yes, the main reason I have not made any effort towards hub support was the absence of usb hub handling code now found on github. Still I can't prioritize spending time on this development, but if someone develops this, I'll contribute to testing. You're absolutely welcome to organize funding and find a developer for this feature, as an independent initiative.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/Article'>
      <div class='creator'>
        <span>
          <a href='/users/mnskll'><b itemprop='author'>mnskll</b></a>
           
           <time datetime='2016-08-05T19:27:03Z' itemprop='datePublished'>
             2016-08-05 19:27:03 UTC
           </time>
        </span>
        <span itemprop='position'>#8</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="7" data-topic="2082"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//community.axoloti.com/user_avatar/community.axoloti.com/johannes/40/8_1.png" class="avatar">johannes:</div>
<blockquote><p>Another problem situation arises when dealing with Midi Polyphonic Expression, that uses all channels for one instrument.</p></blockquote></aside>

<p>My point is maybe you don't need to cover ever use-case all the way to support a feature, midi polyphonic expression is probably not the most common use so maybe it's ok to only have one usb device in that case but have the opportunity to use multiple in other cases. I'm planning on using an arduino with a usb host shield as it supposedly handles usb hubs and that way connect multiple usb midi devices to the host port, like with a hub, and to the axo it will look like a single usbdevice with multiple channels.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:2'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/Article'>
      <div class='creator'>
        <span>
          <a href='/users/johannes'><b itemprop='author'>johannes</b></a>
           
           <time datetime='2016-08-05T19:43:02Z' itemprop='datePublished'>
             2016-08-05 19:43:02 UTC
           </time>
        </span>
        <span itemprop='position'>#9</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Yes I get that point, many use cases can indeed be served without modifications in the patch/midi handling.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/Article'>
      <div class='creator'>
        <span>
          <a href='/users/thetechnobear'><b itemprop='author'>thetechnobear</b></a>
           
           <time datetime='2016-08-05T20:53:35Z' itemprop='datePublished'>
             2016-08-05 20:53:35 UTC
           </time>
        </span>
        <span itemprop='position'>#10</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>no, but sysex is a common requirement and that cannot be channelised.<br>similar, it would require quite a hack to start rewriting midi channels, as you have no idea which channels are in use or not. (both input and output) </p>

<p>this not a huge problem, since you could instead use midi ports, which are not so widely used (though, still you are messing then with some controllers which do expose multiple ports)</p>

<p>its actually not a huge issue for the patcher, just raises some questions about how controllers need to be configured.</p>

<p>(I suspect it may be as much of an  issue finding a place to implement 'workarounds' without complications for both midi, and also other HID devices plugged into a hub)</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <hr>
  </div>





    </div>
    <footer class="container">
      <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <a href='/'>Home</a>
        <a href="/categories">Categories</a>
        <a href="/guidelines">FAQ/Guidelines</a>
        <a href="/tos">Terms of Service</a>
        <a href="/privacy">Privacy Policy</a>
      </nav>
      <p>Powered by <a href="http://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
      
  </body>
</html>
