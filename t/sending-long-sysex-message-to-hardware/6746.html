<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from community.axoloti.com/t/sending-long-sysex-message-to-hardware/6746 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 16 Jul 2023 17:59:57 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Sending long SYSEX message to hardware - Hardware - Axoloti Community</title>
    <meta name="description" content="Hi folks, 

I would like to send a long SYSEX message to a USB controller.  The array is 451 characters long. If I send it in one shot, I obviously get a  &amp;quot;usb host midi output ringbuffer overflow&amp;quot; 

Do you know a simple&amp;hellip;">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.9.0.beta3 - https://github.com/discourse/discourse version 13f3de4bf673802eb8ec595d36587b4524773209">
<link rel="icon" type="image/png" href="https://sebiik.github.io/community.axoloti.com.backup/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="https://sebiik.github.io/community.axoloti.com.backup/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="https://sebiik.github.io/community.axoloti.com.backup/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="6746.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"http://community.axoloti.com","potentialAction":{"@type":"SearchAction","target":"http://community.axoloti.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Axoloti Community Search">

        <link href="../../stylesheets/desktop_d93a33ca8617326fe353f80e6ab865188244d48c8e0b.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop"/>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Sending long SYSEX message to hardware&#39;" href="6746.rss" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:url" content="http://community.axoloti.com/t/sending-long-sysex-message-to-hardware/6746" />
<meta name="twitter:url" content="http://community.axoloti.com/t/sending-long-sysex-message-to-hardware/6746" />
<meta property="og:title" content="Sending long SYSEX message to hardware" />
<meta name="twitter:title" content="Sending long SYSEX message to hardware" />
<meta property="og:description" content="Hi folks,   I would like to send a long SYSEX message to a USB controller.  The array is 451 characters long. If I send it in one shot, I obviously get a  &quot;usb host midi output ringbuffer overflow&quot;   Do you know a simple way to &quot;split&quot; it in some way.   I&#39;m not a big C coder so I just tested by splitting the entire array manually with multiples arrays of 20 with a 10 ms pause between each send. It works but it&#39;s too long to code.   Is there a way I can code a pause every 20 characters of the arr..." />
<meta name="twitter:description" content="Hi folks,   I would like to send a long SYSEX message to a USB controller.  The array is 451 characters long. If I send it in one shot, I obviously get a  &quot;usb host midi output ringbuffer overflow&quot;   Do you know a simple way to &quot;split&quot; it in some way.   I&#39;m not a big C coder so I just tested by splitting the entire array manually with multiples arrays of 20 with a 10 ms pause between each send. It works but it&#39;s too long to code.   Is there a way I can code a pause every 20 characters of the arr..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="3 mins ðŸ•‘" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="6 â¤" />


  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html"><img src="http://community.axoloti.com/uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo" style="max-width: 150px;"></a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1>
  <a href="6746.html">Sending long SYSEX message to hardware</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/hardware.html" itemprop="url">
        <span itemprop="title">Hardware</span>
      </a>
    </div>
</div>





<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/Yot.html'><b itemprop='author'>Yot</b></a>
           
           <time datetime='2020-07-22T21:33:24Z' itemprop='datePublished'>
             2020-07-22 21:33:24 UTC
           </time>
        </span>
        <span itemprop='position'>#1</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hi folks,</p>

<p>I would like to send a long SYSEX message to a USB controller. <br>The array is 451 characters long. If I send it in one shot, I obviously get a <br>"usb host midi output ringbuffer overflow"</p>

<p>Do you know a simple way to "split" it in some way.</p>

<p>I'm not a big C coder so I just tested by splitting the entire array manually with multiples arrays of 20 with a 10 ms pause between each send. It works but it's too long to code.</p>

<p>Is there a way I can code a pause every 20 characters of the array basically?</p>

<p>Thanks for your help.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Sending long SYSEX message to hardware'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/tele_player.html'><b itemprop='author'>tele_player</b></a>
           
           <time datetime='2020-07-22T23:15:02Z' itemprop='datePublished'>
             2020-07-22 23:15:02 UTC
           </time>
        </span>
        <span itemprop='position'>#2</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>What have you got so far?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Sending long SYSEX message to hardware'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/Yot.html'><b itemprop='author'>Yot</b></a>
           
           <time datetime='2020-07-22T23:42:47Z' itemprop='datePublished'>
             2020-07-22 23:42:47 UTC
           </time>
        </span>
        <span itemprop='position'>#3</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>What do you mean? Here's my very "dirty" piece of code ...<br><div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/afdf864edcea54a73011c9378c5cc44d4f0ddfff" href="https://sebiik.github.io/community.axoloti.com.backup/uploads/default/original/2X/a/afdf864edcea54a73011c9378c5cc44d4f0ddfff.png" class="lightbox" title="Screen Shot 2020-07-22 at 4.48.45 PM.png"><img src="http://community.axoloti.com/uploads/default/optimized/2X/a/afdf864edcea54a73011c9378c5cc44d4f0ddfff_1_591x500.png" width="591" height="500"><div class="meta">
<span class="filename">Screen Shot 2020-07-22 at 4.48.45 PM.png</span><span class="informations">1986x1680 595 KB</span><span class="expand"></span>
</div></a></div></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Sending long SYSEX message to hardware'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/ivofx.html'><b itemprop='author'>ivofx</b></a>
           
           <time datetime='2020-07-23T06:50:14Z' itemprop='datePublished'>
             2020-07-23 06:50:14 UTC
           </time>
        </span>
        <span itemprop='position'>#4</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I was thinking about this problem yesterday, as I want to program my Novation Zero SL MK2.<br>Calling sleep is likely to cause audio dropouts.<br>I think what we need is some kind of ringbuffer that stores the individual bytes and in the control-rate call you would only send byte-chunks of a fixed size at a fixed rate (probably on every 50th out of the 3000 times per second or so).<br>I did not implement any of this yet and am wondering whether we can simply reuse an existing ring-buffer code from some existing object, like a delay.<br>The method could also be applied to regular midi messages or NRPNs (as when controlling many LEDs)</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Sending long SYSEX message to hardware'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/jaffasplaffa.html'><b itemprop='author'>jaffasplaffa</b></a>
           
           <time datetime='2020-07-23T07:56:59Z' itemprop='datePublished'>
             2020-07-23 07:56:59 UTC
           </time>
        </span>
        <span itemprop='position'>#5</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I had success sending shorter strings to Blofeld, like parameter systes strings.</p>

<p>But when I tried to send sound dumos, which is longer strings, it failed on me. So very interested in seeing that you have something working for longer strings <img src="http://community.axoloti.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Sending long SYSEX message to hardware'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/tele_player.html'><b itemprop='author'>tele_player</b></a>
           
           <time datetime='2020-07-23T18:14:33Z' itemprop='datePublished'>
             2020-07-23 18:14:33 UTC
           </time>
        </span>
        <span itemprop='position'>#6</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Was that code sending to a USB controller? Maybe Iâ€™m mistaken, but isnâ€™t sdWrite for serial device? Or also for USB?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Sending long SYSEX message to hardware'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/Yot.html'><b itemprop='author'>Yot</b></a>
           
           <time datetime='2020-07-23T23:15:15Z' itemprop='datePublished'>
             2020-07-23 23:15:15 UTC
           </time>
        </span>
        <span itemprop='position'>#7</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>It works also for a USB controller.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Sending long SYSEX message to hardware'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/tele_player.html'><b itemprop='author'>tele_player</b></a>
           
           <time datetime='2020-07-24T01:22:37Z' itemprop='datePublished'>
             2020-07-24 01:22:37 UTC
           </time>
        </span>
        <span itemprop='position'>#8</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>There isn't any need to break the data into multiple arrays.<br>You use variables to store your position in the array, and the number of bytes remaining. That's simple.</p>

<p>What isn't clear , does Axoloti firmware provide a mechanism for querying the amount of space in the send buffer? Without that, you'll only be quessing how many bytes to send, and when, which wil be different for DIN MIDI, and USB MIDI.</p>

<p>Added later:<br>This might be useful:<br>int MidiGetOutputBufferPending(midi_device_t dev);<br>And this, but it's only implemented for MIDI_DEVICE_USB_HOST:<br>int MidiGetOutputBufferAvailable</p>

<p>For more details, look in firmware/midi.c (after downloading the Axoloti source code)</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Sending long SYSEX message to hardware'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/ivofx.html'><b itemprop='author'>ivofx</b></a>
           
           <time datetime='2020-07-25T07:23:41Z' itemprop='datePublished'>
             2020-07-25 07:23:41 UTC
           </time>
        </span>
        <span itemprop='position'>#9</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I was reading about ring-buffers and made a python prototype that could be translated to c/c++ (disclaimer, the implementation might be naive/messy).<br>I saw that the Axoloti delay objects brilliantly use bit-masking to make the indexing wrap around sizes multiples of two and adapted that. So if you want the size to be 4kb you would set it to 1 &lt;&lt; 12 for example.<br>If / when I create an axo object, I would allocate an sdram-table for the storage inside the object.<br>Then, in every 50th control-rate call or so I would read say 32 bytes and send them as a sysex message. I assume sending a single sysex message in multiple chunks is possible (?)</p>

<pre><code># Python 2.7
class ByteRingBuffer(object):
    head = 0
    tail = 0
    size = 1 &lt;&lt; 12
    mask = size-1
    length = 0
    full = False

    def __init__(self):
        self.buffer = [0] * self.size

    def write(self, value):
        if self.length &gt; self.mask:
            self.full = True
            print "FULL!"
            return
        self.buffer[self.tail] = value
        self.tail = (self.tail + 1) &amp; self.mask
        self.length += 1

    def read(self):
        if self.empty():
            return -1
        result = self.buffer[self.head]
        self.head = (self.head + 1) &amp; self.mask
        self.length = max(self.length-1, 0)
        self.full = False
        return result

    def empty(self):
        return self.length &lt;= 0

    def full(self):
        return self.full</code></pre>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Sending long SYSEX message to hardware'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/ivofx.html'><b itemprop='author'>ivofx</b></a>
           
           <time datetime='2020-07-25T12:36:18Z' itemprop='datePublished'>
             2020-07-25 12:36:18 UTC
           </time>
        </span>
        <span itemprop='position'>#10</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I turned it into an work-in-progress axo object. The only problem is defining the sysex strings conveniently in the UI.<br>Because strings are null-terminated and you cannot enter hex-values in the GUI widgets.</p>

<p><aside class="onebox whitelistedgeneric">
  <header class="source">
    <a href="https://github.com/ivogrig/axoloti-contrib/tree/1.0.12/objects/ivofx" target="_blank" rel="nofollow noopener">github.com</a>
  </header>
  <article class="onebox-body">
    <img src="https://avatars1.githubusercontent.com/u/10848442?s=400&amp;v=4" width="" height="" class="thumbnail">

<h3><a href="https://github.com/ivogrig/axoloti-contrib/tree/1.0.12/objects/ivofx" target="_blank" rel="nofollow noopener">ivogrig/axoloti-contrib</a></h3>

<p>User contributed objects and patches for Axoloti. Contribute to ivogrig/axoloti-contrib development by creating an account on GitHub.</p>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>
<br>You load the sysexbuffer object, then you can right-click and select "Help" to load the help-patch.</p>

<p>At the moment you need to define the sysex-data inside the code.</p>

<p>I have a vision to make defining the data more user-friendly.<br>You would save each sysex-string as a file in a certain directory and prefix the file with a number.<br>The object would load all files from the directory into a table and keep track of the start-offsets.<br>You would have an inlet to choose the sysex-string by index and an inlet to trigger the transmission.<br>On top of that one could setup a substitution-syntax to replace certain bytes with a variable value.<br>However, I have different plans for the weekend so it will take some more time.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Sending long SYSEX message to hardware'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/tele_player.html'><b itemprop='author'>tele_player</b></a>
           
           <time datetime='2020-07-25T12:59:00Z' itemprop='datePublished'>
             2020-07-25 12:59:00 UTC
           </time>
        </span>
        <span itemprop='position'>#11</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>A ring buffer doesn't solve the problem of output buffer overrun, that is solved by  checking the amount of space in the ring buffer before doing a send. </p>

<p>Agreed, for a long sysex message, you'll need to do it over several  control-rate calls to your object. BUT, while you have a sysex message in progress, you also need to stop sending any other MIDI. For instance, if you send a NOTE ON or NOTE OFF, while your sysex is only partially complete, the sysex message will be corrupted.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Sending long SYSEX message to hardware'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/ivofx.html'><b itemprop='author'>ivofx</b></a>
           
           <time datetime='2020-07-25T13:03:17Z' itemprop='datePublished'>
             2020-07-25 13:03:17 UTC
           </time>
        </span>
        <span itemprop='position'>#12</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>True, I did not think of these aspects <img src="http://community.axoloti.com/images/emoji/twitter/frowning.png?v=5" title=":frowning:" class="emoji" alt=":frowning:"><br>The code is not keeping track of the individual message lengths as of yet.<br>I seems quite tricky to ensure no other midi is transmitted when sending sysex in split chunks, I have no idea for that.<br>Still, a ringbuffer seems handy for storing and keeping track of the chunks.</p>

<p>Theoretically speaking, if it would be possible to grab data from <code>MidiGetOutputBufferPending</code> end erase the pending buffer somehow to resend it later, that would help.</p>

<p>Actually, the buffer appears to be exposed in the <code>_MIDI_Process</code> struct (looking at the USB one)</p>

<pre><code>  uint8_t buff_in[USBH_MIDI_EPS_IN_SIZE];
  uint8_t buff_out[USBH_MIDI_EPS_OUT_SIZE];
  uint8_t buff_out_len;</code></pre>

<p>Still, one does not know where in the order of objects the own call happens, probably in the middle, so no certainty gained.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Sending long SYSEX message to hardware'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/tele_player.html'><b itemprop='author'>tele_player</b></a>
           
           <time datetime='2020-07-25T13:31:00Z' itemprop='datePublished'>
             2020-07-25 13:31:00 UTC
           </time>
        </span>
        <span itemprop='position'>#13</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Assuming MidiGetOutputBufferPending() returns the number of bytes currently in the buffer, and goes down as bytes actually go out on the wire, your wouldn't want to erase pending bytes. Just let them fly.</p>

<p>Yes, up at the object level, blocking MIDI sends while a SYSEX message is in progress would require cooperation between objects used for sending normal MIDI and objects used for sending SYSEX. Sending long messages should really be handled in the firmware.</p>

<p>A ringbuffer is useful for queuing multiple messages. Not needed when your code is handling one message at a time. That's why the output buffer is implemented as a ringbuffer. At the level of your objects, you can send MIDI events asynchronously, without concern about other messages 'in flight'.</p>

<p>All of this stuff is very common in data communications software and  file system software.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Sending long SYSEX message to hardware'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/ivofx.html'><b itemprop='author'>ivofx</b></a>
           
           <time datetime='2020-07-25T13:38:06Z' itemprop='datePublished'>
             2020-07-25 13:38:06 UTC
           </time>
        </span>
        <span itemprop='position'>#14</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>OK I give up then. Hopefully the USB buffer size will be large enough for my needs, I think I will be fine.<br>I made the ring buffer because I want to allow my code to queue multiple messages at once and not be limited to one at a time.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Sending long SYSEX message to hardware'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/ivofx.html'><b itemprop='author'>ivofx</b></a>
           
           <time datetime='2020-07-26T07:19:50Z' itemprop='datePublished'>
             2020-07-26 07:19:50 UTC
           </time>
        </span>
        <span itemprop='position'>#15</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>The output-buffer size USBH_MIDI_EPS_OUT_SIZE is defined as 64, but calling <code>MidiGetOutputBufferAvailable</code> will return 63 if nothing has been sent yet.</p>

<p>However, I can send more than that without getting the <code>usb host midi output ringbuffer overflow</code> error.</p>

<p>From observation, the maximum of sysex bytes that I was able to send without getting the error and nothing else going on was 185. 186 would error.</p>

<pre><code>int available = MidiGetOutputBufferAvailable(MIDI_DEVICE_USB_HOST);
int pending = MidiGetOutputBufferPending(MIDI_DEVICE_USB_HOST);</code></pre>

<p>EDIT:<br>Oh, I get it. The buffer might be for 3-byte messages. If we subtract one, we get 62*3=186 (?)<br>In fact, if I send a note-on and then call <code>MidiGetOutputBufferAvailable</code>, it returns 62.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Sending long SYSEX message to hardware'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/tele_player.html'><b itemprop='author'>tele_player</b></a>
           
           <time datetime='2020-07-27T14:59:53Z' itemprop='datePublished'>
             2020-07-27 14:59:53 UTC
           </time>
        </span>
        <span itemprop='position'>#16</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>(I wrote something here, which I now think is wrong, but a correct answer needs more study than I can do right now)</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:3'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Sending long SYSEX message to hardware'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/Yot.html'><b itemprop='author'>Yot</b></a>
           
           <time datetime='2020-07-27T17:21:51Z' itemprop='datePublished'>
             2020-07-27 17:21:51 UTC
           </time>
        </span>
        <span itemprop='position'>#17</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Thanks ivofx. That's good to know.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Sending long SYSEX message to hardware'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/ivofx.html'><b itemprop='author'>ivofx</b></a>
           
           <time datetime='2020-07-27T17:34:30Z' itemprop='datePublished'>
             2020-07-27 17:34:30 UTC
           </time>
        </span>
        <span itemprop='position'>#18</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I wonder whether we can simply change <code>USBH_MIDI_EPS_OUT_SIZE</code> in the firmware, what would the consequences be. Is it a hardware limitation?<br>It's a bit of uncharted territory for me.</p>

<p>My own first goal ist just to write something like a patch editor where you only send short messages for indivdual synth-parameters, for that the current size limit is not a problem.<br>Sending longer patches would be a nice cherry to have on top. <br>Given that even receiving sysex is not easily done either, being only able to send long patches without receiving them seems not even that useful to me.<br>It would be cool to have the Axoloti be a sysex librarian though, I have several devices that couldbenefit from it.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Sending long SYSEX message to hardware'>
      <hr>
  </div>






    </div>
    <footer class="container">
      <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <a href='../../index.html'>Home</a>
        <a href="../../categories.html">Categories</a>
        <a href="../../guidelines.html">FAQ/Guidelines</a>
        <a href="../../tos.html">Terms of Service</a>
        <a href="../../privacy.html">Privacy Policy</a>
      </nav>
      <p>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  

<!-- Mirrored from community.axoloti.com/t/sending-long-sysex-message-to-hardware/6746 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 16 Jul 2023 17:59:58 GMT -->
</html>
