<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from community.axoloti.com/t/74hc595-object-and-high-dsp-load/1764/12 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 10 Jul 2023 17:29:23 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>74HC595 object and high DSP load - AxoObject coding - Axoloti Community</title>
    <meta name="description" content="Hello!  

I&amp;#39;m a beginner in C coding, I learn it to do some Axoloti objects. 

Actually I&amp;#39;m driving 4 74HC595 like this:  [image] 

It&amp;#39;s a big mess but it&amp;#39;s working. 

So I made an object to simplify that: 

[image] 

It&amp;hellip;">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.9.0.beta3 - https://github.com/discourse/discourse version 13f3de4bf673802eb8ec595d36587b4524773209">
<link rel="icon" type="image/png" href="../../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="../../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="../1764.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"http://community.axoloti.com","potentialAction":{"@type":"SearchAction","target":"http://community.axoloti.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="Axoloti Community Search">

        <link href="../../../stylesheets/desktop_d93a33ca8617326fe353f80e6ab865188244d48c8e0b.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop"/>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','../../../../www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;74HC595 object and high DSP load&#39;" href="../1764.rss" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://community.axoloti.com/letter_avatar_proxy/v2/letter/d/90db22/200.png" />
<meta property="og:image" content="http://community.axoloti.com/letter_avatar_proxy/v2/letter/d/90db22/200.png" />
<meta property="og:url" content="http://community.axoloti.com/t/74hc595-object-and-high-dsp-load/1764/12" />
<meta name="twitter:url" content="http://community.axoloti.com/t/74hc595-object-and-high-dsp-load/1764/12" />
<meta property="og:title" content="74HC595 object and high DSP load" />
<meta name="twitter:title" content="74HC595 object and high DSP load" />
<meta property="og:description" content="I had some issues with this code, here is the solution:" />
<meta name="twitter:description" content="I had some issues with this code, here is the solution:" />


  </head>
  <body class="crawler">
    
    <header>
      <a href="../../../index.html"><img src="../../../uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo" style="max-width: 150px;"></a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1>
  <a href="../1764.html">74HC595 object and high DSP load</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../../c/axoobject-code.html" itemprop="url">
        <span itemprop="title">AxoObject coding</span>
      </a>
    </div>
</div>





<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/Djeremaille.html'><b itemprop='author'>Djeremaille</b></a>
           
           <time datetime='2016-05-27T17:27:40Z' itemprop='datePublished'>
             2016-05-27 17:27:40 UTC
           </time>
        </span>
        <span itemprop='position'>#1</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hello! </p>

<p>I'm a beginner in C coding, I learn it to do some Axoloti objects.</p>

<p>Actually I'm driving 4 74HC595 like this:<br> <div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/441ed8b943b729f241f2a37b6f18a2de29c8750c" href="../../../uploads/default/original/2X/4/441ed8b943b729f241f2a37b6f18a2de29c8750c.png" class="lightbox" title="Pasted image"><img src="../../../uploads/default/optimized/2X/4/441ed8b943b729f241f2a37b6f18a2de29c8750c_1_668x500.png" width="668" height="500"><div class="meta">
<span class="filename">Pasted image</span><span class="informations">1081x809 133 KB</span><span class="expand"></span>
</div></a></div></p>

<p>It's a big mess but it's working.</p>

<p>So I made an object to simplify that:</p>

<p><div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/4f4e96fb4a606a5bcddb6ef5023ef0d89868c95b" href="../../../uploads/default/original/2X/4/4f4e96fb4a606a5bcddb6ef5023ef0d89868c95b.png" class="lightbox" title="Pasted image"><img src="../../../uploads/default/optimized/2X/4/4f4e96fb4a606a5bcddb6ef5023ef0d89868c95b_1_606x500.png" width="606" height="500"><div class="meta">
<span class="filename">Pasted image</span><span class="informations">869x716 80.6 KB</span><span class="expand"></span>
</div></a></div></p>

<p>It's working exept 2 things:</p>

<p>1 - For the first 3 leds it's ok but each next eat 10% of DSP load.</p>

<p>2 - If I hit the led n°32, all the other lit on exept the 32.</p>

<p>I use pow() function, maybe the cause of the high DSP load...</p>

<p><a class="attachment" href="../../../uploads/default/original/2X/e/74HC.axo">74HC.axo</a> (1.9 KB)</p>

<p>A patch whith 32 disp bool to test<br><a class="attachment" href="../../../uploads/default/original/2X/0/74HC.axp">74HC.axp</a> (22.6 KB)</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='74HC595 object and high DSP load'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/toneburst.html'><b itemprop='author'>toneburst</b></a>
           
           <time datetime='2016-05-27T18:10:24Z' itemprop='datePublished'>
             2016-05-27 18:10:24 UTC
           </time>
        </span>
        <span itemprop='position'>#2</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>pow() is very expensive. If you're doing X to the power of a whole number, why not just do X * X * X etc. instead?</p>

<p>a|x</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='74HC595 object and high DSP load'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/Djeremaille.html'><b itemprop='author'>Djeremaille</b></a>
           
           <time datetime='2016-05-27T18:26:23Z' itemprop='datePublished'>
             2016-05-27 18:26:23 UTC
           </time>
        </span>
        <span itemprop='position'>#3</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I will try to do it without pow()... It was easy to code like this.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='74HC595 object and high DSP load'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/Djeremaille.html'><b itemprop='author'>Djeremaille</b></a>
           
           <time datetime='2016-05-27T22:06:31Z' itemprop='datePublished'>
             2016-05-27 22:06:31 UTC
           </time>
        </span>
        <span itemprop='position'>#4</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Solved.</p>

<p>Code is ugly but it's working good!</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:2'>
      <meta itemprop='headline' content='74HC595 object and high DSP load'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/toneburst.html'><b itemprop='author'>toneburst</b></a>
           
           <time datetime='2016-05-27T22:31:43Z' itemprop='datePublished'>
             2016-05-27 22:31:43 UTC
           </time>
        </span>
        <span itemprop='position'>#5</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Excellent! Good to hear it's now working as it should.</p>

<p>a|x</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='74HC595 object and high DSP load'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/mnskll.html'><b itemprop='author'>mnskll</b></a>
           
           <time datetime='2016-05-28T10:48:33Z' itemprop='datePublished'>
             2016-05-28 10:48:33 UTC
           </time>
        </span>
        <span itemprop='position'>#6</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hi, don't know how you solved it, so I can only comment on the object you shared (with the pow() function) what I see is a very complicated way of solving a simple problem. there is no need to use if- statements, you already have the values in the led parameters. just bit-shift to the right position and OR them together, bitshifting and boolean math is how the processor works internally so these operations are much faster.</p>

<p>your entire code in the 74HC object can be replaced by a single line of code, like this</p>

<p><code>outlet_out=(inlet_led1|(inlet_led2&lt;&lt;1)|(inlet_led3&lt;&lt;2)|(inlet_led4&lt;&lt;3)|(inlet_led5&lt;&lt;4)|(inlet_led6&lt;&lt;5)|(inlet_led7&lt;&lt;6)|(inlet_led8&lt;&lt;7))&lt;&lt;(param_0to3 * 8);</code></p>

<p>try it, you'll like it <img src="../../../images/emoji/emoji_one/sunglasses5e1f.png?v=2" title=":sunglasses:" class="emoji" alt=":sunglasses:"></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='74HC595 object and high DSP load'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/Djeremaille.html'><b itemprop='author'>Djeremaille</b></a>
           
           <time datetime='2016-05-28T11:38:57Z' itemprop='datePublished'>
             2016-05-28 11:38:57 UTC
           </time>
        </span>
        <span itemprop='position'>#7</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Thanks I will try this even if I don't understand <img src="../../../images/emoji/emoji_one/slight_smile5e1f.png?v=2" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>

<p>As I said I'm a complete beginner in coding.</p>

<p>My actual object output i values: if 0to3 = 0 :1, 2, 4, 8.... , if 0to3=1 : 256, 512,.....   2147483648!</p>

<p>Very annoying to write <img src="../../../images/emoji/emoji_one/smile5e1f.png?v=2" title=":smile:" class="emoji" alt=":smile:"></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='74HC595 object and high DSP load'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/Djeremaille.html'><b itemprop='author'>Djeremaille</b></a>
           
           <time datetime='2016-05-28T11:47:54Z' itemprop='datePublished'>
             2016-05-28 11:47:54 UTC
           </time>
        </span>
        <span itemprop='position'>#8</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Okay it's working! </p>

<p>That would be cool if you explain me the code a little bit...</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='74HC595 object and high DSP load'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/mnskll.html'><b itemprop='author'>mnskll</b></a>
           
           <time datetime='2016-05-28T12:53:51Z' itemprop='datePublished'>
             2016-05-28 12:53:51 UTC
           </time>
        </span>
        <span itemprop='position'>#9</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>it's all 0's and1's..just like the shift register<br>you don't have to test the led-input because you already have the answer in the inputs, an "on" is a 1, an "off" is a 0, you so you don't need the internal int's for storing the inputs. all you have to do is then to place the 1's ond 0's in the right place. you do so by "bitshifting" to the left.<br>for instance led 3, if it's "on" the parameter (inlet_led3) is a 1(00000001), then you want to send the 595 a bit in the third place, (00000100). "<code>inlet_led3&lt;&lt;2</code>" does that, it gives you the value bit shifted 2 steps to the left (<code>&gt;&gt;</code> bit sifts to the right). every bit shift to the left doubles the value so <code>x&lt;&lt;2</code>  is actually the same as <code>x*4</code> and <code>x&lt;&lt;3</code>  is the same as <code>x*8</code>, only much faster because this is how computers work internally so the compiler doesn't have to do any complicated stuff, only pass the values.<br>right<br>then you add it up, say you enable led 1, 2, and 5, then you get 00000001, 00000010, and 00010000, add them together and you get 00010011 to send to the shift register<br>you can add by a simple + of course, but the "|" (bit OR) is simpler in this case and, same as bit shift, how the processor works.<br>last you bit shift the whole thing 0,8,16 or 24 steps to the left depending on which of the 4 shift registers is set in the "0to3" parameter.</p>

<p>actually, I realise my code was a little sloppy, the <code>param_0to3 * 8</code> should of course be <code>param_0to3&lt;&lt;3</code>, same thing but faster</p>

<p><code>outlet_out=(inlet_led1|(inlet_led2&lt;&lt;1)|(inlet_led3&lt;&lt;2)|(inlet_led4&lt;&lt;3)|(inlet_led5&lt;&lt;4)|(inlet_led6&lt;&lt;5)|(inlet_led7&lt;&lt;6)|(inlet_led8&lt;&lt;7))&lt;&lt;(param_0to3 &lt;&lt;3);</code></p>

<p>hope it's a little clearer now</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='74HC595 object and high DSP load'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/Djeremaille.html'><b itemprop='author'>Djeremaille</b></a>
           
           <time datetime='2016-05-28T14:21:44Z' itemprop='datePublished'>
             2016-05-28 14:21:44 UTC
           </time>
        </span>
        <span itemprop='position'>#10</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Yeah thanks it is much clearer but I realize that I have a lot of things to learn <img src="../../../images/emoji/emoji_one/slight_smile5e1f.png?v=2" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>

<p>But it's exciting!  </p>

<p>I always wanted to learn C, arduino .... but without a project it's difficult to be motivated. Now with Axoloti I have a good reason to do it!</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='74HC595 object and high DSP load'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/toneburst.html'><b itemprop='author'>toneburst</b></a>
           
           <time datetime='2016-05-28T14:35:33Z' itemprop='datePublished'>
             2016-05-28 14:35:33 UTC
           </time>
        </span>
        <span itemprop='position'>#11</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Same! And with the Axoloti, you can hear the results immediately. Plus the factory and other objects provide a great learning resource.</p>

<p>Having said that, it's a shame there aren't more comments in library objects. Sometimes, when you're generally clueless like me, it's nice to be given some pointers about how things work.</p>

<p>a|x</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='74HC595 object and high DSP load'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/Djeremaille.html'><b itemprop='author'>Djeremaille</b></a>
           
           <time datetime='2016-06-02T20:03:26Z' itemprop='datePublished'>
             2016-06-02 20:03:26 UTC
           </time>
        </span>
        <span itemprop='position'>#12</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I had some issues with this code, here is the solution:</p>

<aside class="quote" data-topic="1768" data-slug="problem-with-flipflop-toggle-object" data-post="4"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../user_avatar/community.axoloti.com/johannes/40/8_1.html" class="avatar"><a href="../../problem-with-flipflop-toggle-object/1768/4.html">Problem with flipflop toggle object</a>
</div>
<blockquote><p>Ok, identified the issue, the problem is the not-very-clearly-defined semantics of boolean inlets. The "74HC595inputsX4" object code assumes a value of 1 corresponds to true, but the correct assumption to make now is that value 0 is false and all other values correspond to true. I suggest to change the code in your object from outlet_outi=(inlet_led1|(inlet_led2&lt;&lt;1)|(inlet_led3&lt;&lt;2)|(inlet_led4&lt;&lt;3)... to outlet_outi=(inlet_led1?1:0)|(inlet_led2?1&lt;&lt;1:0)|(inlet_led3?1&lt;&lt;2:0)|(inlet_led4?1&lt;&lt;3:0)...   …</p></blockquote></aside>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='74HC595 object and high DSP load'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/mnskll.html'><b itemprop='author'>mnskll</b></a>
           
           <time datetime='2016-06-03T22:34:38Z' itemprop='datePublished'>
             2016-06-03 22:34:38 UTC
           </time>
        </span>
        <span itemprop='position'>#13</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>in the original example my example did the trick but if the input is not true true/false boolean, then my code won't work, I realise that. (but 32 bit boolean is kind of overkill for a yes/no true/false, isn't it?) so then we're back to the "if" statement in the form of ?:. <br>I didn't know about that expression, so at least <a class="mention" href="../../../users/johannes.html">@johannes</a>  code is still just one line of code and we all learnt something <img src="../../../images/emoji/emoji_one/slight_smile5e1f.png?v=2" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='74HC595 object and high DSP load'>
      <hr>
  </div>






    </div>
    <footer class="container">
      <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <a href='../../../index.html'>Home</a>
        <a href="../../../categories.html">Categories</a>
        <a href="../../../guidelines.html">FAQ/Guidelines</a>
        <a href="../../../tos.html">Terms of Service</a>
        <a href="../../../privacy.html">Privacy Policy</a>
      </nav>
      <p>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  

<!-- Mirrored from community.axoloti.com/t/74hc595-object-and-high-dsp-load/1764/12 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 10 Jul 2023 17:29:23 GMT -->
</html>
