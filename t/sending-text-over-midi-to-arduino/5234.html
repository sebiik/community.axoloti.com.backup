<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from community.axoloti.com/t/sending-text-over-midi-to-arduino/5234 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 16 Jul 2023 18:28:42 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Sending text over MIDI (to Arduino) - Hardware - Axoloti Community</title>
    <meta name="description" content="Hello all, my project uses an Arduino (Adafruit Feather M0 Express) to power a control control surface and an Axoloti as a sound module.  

The Arduino sends MIDI note data to the Axoloti over USB. I would also like for &amp;hellip;">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.9.0.beta3 - https://github.com/discourse/discourse version 13f3de4bf673802eb8ec595d36587b4524773209">
<link rel="icon" type="image/png" href="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="5234.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"http://community.axoloti.com","potentialAction":{"@type":"SearchAction","target":"http://community.axoloti.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Axoloti Community Search">

        <link href="../../stylesheets/desktop_d93a33ca8617326fe353f80e6ab865188244d48c8e0b.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop"/>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Sending text over MIDI (to Arduino)&#39;" href="5234.rss" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:url" content="http://community.axoloti.com/t/sending-text-over-midi-to-arduino/5234" />
<meta name="twitter:url" content="http://community.axoloti.com/t/sending-text-over-midi-to-arduino/5234" />
<meta property="og:title" content="Sending text over MIDI (to Arduino)" />
<meta name="twitter:title" content="Sending text over MIDI (to Arduino)" />
<meta property="og:description" content="Hello all, my project uses an Arduino (Adafruit Feather M0 Express) to power a control control surface and an Axoloti as a sound module.    The Arduino sends MIDI note data to the Axoloti over USB. I would also like for the Axoloti to send text back to the Arduino for display on a connected OLED screen. The text would consist of short patch names and numerical values.    Could this text be formatted as MIDI-out data, perhaps using SysEx? Has anyone attempted this? Might SPI be a better fit for t..." />
<meta name="twitter:description" content="Hello all, my project uses an Arduino (Adafruit Feather M0 Express) to power a control control surface and an Axoloti as a sound module.    The Arduino sends MIDI note data to the Axoloti over USB. I would also like for the Axoloti to send text back to the Arduino for display on a connected OLED screen. The text would consist of short patch names and numerical values.    Could this text be formatted as MIDI-out data, perhaps using SysEx? Has anyone attempted this? Might SPI be a better fit for t..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="2 mins ðŸ•‘" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="12 â¤" />


  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html"><img src="http://community.axoloti.com/uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo" style="max-width: 150px;"></a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1>
  <a href="5234.html">Sending text over MIDI (to Arduino)</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/hardware.html" itemprop="url">
        <span itemprop="title">Hardware</span>
      </a>
    </div>
</div>





<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/alspacka.html'><b itemprop='author'>alspacka</b></a>
           
           <time datetime='2018-12-09T20:15:15Z' itemprop='datePublished'>
             2018-12-09 20:15:15 UTC
           </time>
        </span>
        <span itemprop='position'>#1</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hello all, my project uses an Arduino (Adafruit Feather M0 Express) to power a control control surface and an Axoloti as a sound module. </p>

<p>The Arduino sends MIDI note data to the Axoloti over USB. I would also like for the Axoloti to send text back to the Arduino for display on a connected OLED screen. The text would consist of short patch names and numerical values. </p>

<p>Could this text be formatted as MIDI-out data, perhaps using SysEx? Has anyone attempted this? Might SPI be a better fit for the text data? </p>

<p>Thanks for any responses.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Sending text over MIDI (to Arduino)'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/lokki.html'><b itemprop='author'>lokki</b></a>
           
           <time datetime='2018-12-09T21:43:36Z' itemprop='datePublished'>
             2018-12-09 21:43:36 UTC
           </time>
        </span>
        <span itemprop='position'>#2</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>if i were to do such a project i would consider the following:</p>

<p>-connect the OLED to the axoloti, since there is nice support from <a class="mention" href="../../u/smashedtransistors-2.html">@SmashedTransistors</a> for those 1.3 inch OLEDs.</p>

<p>or, if the OLED has to stay on the arduino</p>

<p>-send a midi cc or program change to the arduino and let it display the names directly (you will have to save the names in the arduino sketch, which makes it static.</p>

<p>implementing it via sysex can be done of course, but it will be a bit of a pain i think. (formatting the text in axoloti to sysex format, send it over, convert it back to a string to then display on the arduino)</p>

<p>so the questions are really, do the names have to be dynamic, do they change? or can you just put them into the arduino sketch and select them via an incoming midi cc or program change?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Sending text over MIDI (to Arduino)'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/alspacka.html'><b itemprop='author'>alspacka</b></a>
           
           <time datetime='2018-12-09T22:13:47Z' itemprop='datePublished'>
             2018-12-09 22:13:47 UTC
           </time>
        </span>
        <span itemprop='position'>#3</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I came across the thread regarding the OLED screens, which prompted me to consider whether I could get away with connecting the screen to the Axoloti instead. It might be possible, but I'll have to think about what changes to the overall software structure will be necessary. The text does have to be dynamic, unfortunately, as I want to be able to browse named audio samples stored on the Axo's SD card, with the capability to swap the samples out later. </p>

<p>I think my last resort would be to have the audio samples be numbered rather than named, so I could indeed just store the list of file numbers on the Arduino. I'd like to avoid that if possible though.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Sending text over MIDI (to Arduino)'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/KrizRoring.html'><b itemprop='author'>KrizRoring</b></a>
           
           <time datetime='2018-12-10T08:29:17Z' itemprop='datePublished'>
             2018-12-10 08:29:17 UTC
           </time>
        </span>
        <span itemprop='position'>#4</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I am currently working on a setup with a Axoloti and a Teensy, and i send data and commands over serial. I have created a small object that on demand reads the SD card of the Axoloti and sends the patch names to the Teensy. Is this something like what you are trying to achieve?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:3'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Sending text over MIDI (to Arduino)'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/alspacka.html'><b itemprop='author'>alspacka</b></a>
           
           <time datetime='2018-12-10T12:28:54Z' itemprop='datePublished'>
             2018-12-10 12:28:54 UTC
           </time>
        </span>
        <span itemprop='position'>#5</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>That's exactly what I'm trying to achieve! Do you mind sharing your code?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Sending text over MIDI (to Arduino)'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/KrizRoring.html'><b itemprop='author'>KrizRoring</b></a>
           
           <time datetime='2018-12-10T12:44:27Z' itemprop='datePublished'>
             2018-12-10 12:44:27 UTC
           </time>
        </span>
        <span itemprop='position'>#6</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I will see if can get it on Github tonight after work.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:2'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Sending text over MIDI (to Arduino)'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/alspacka.html'><b itemprop='author'>alspacka</b></a>
           
           <time datetime='2018-12-10T14:54:39Z' itemprop='datePublished'>
             2018-12-10 14:54:39 UTC
           </time>
        </span>
        <span itemprop='position'>#7</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>That would be fantastic, thank you. Just generally speaking, is it written in such a way that allows for commands to be sent from the Arduino to the Axoloti in real time (ie, press a key connected to Arduino, Axoloti plays a note)?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Sending text over MIDI (to Arduino)'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/KrizRoring.html'><b itemprop='author'>KrizRoring</b></a>
           
           <time datetime='2018-12-12T08:21:29Z' itemprop='datePublished'>
             2018-12-12 08:21:29 UTC
           </time>
        </span>
        <span itemprop='position'>#8</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I have looked to see if i could find the files, but i think they are in my archive, so it will take some time.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:2'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Sending text over MIDI (to Arduino)'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/Suburb_Animal.html'><b itemprop='author'>Suburb_Animal</b></a>
           
           <time datetime='2018-12-20T08:24:53Z' itemprop='datePublished'>
             2018-12-20 08:24:53 UTC
           </time>
        </span>
        <span itemprop='position'>#9</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p><a class="mention" href="../../u/krizroring-2.html">@Krizroring</a> I'm really interested aswell, mostly to see how you made your Serial Communication<br>I bought a NodeMCU in order to integrate OSC to Axoloti.</p>

<p>I use Liine Lemur a lot and being to customize interfaces would be a blessing.</p>

<p>The NodeMCU would: <br>* create an adhoc connection<br>* convert OSC messages to Serial and Serial to OSC<br>* and maybe convert 2 analog signal inputs into OSC to monitor the Signal on Lemur (using the oscilloscope) </p>

<p>I also need to make an Axoloti object that sends a list of every parameters to tweak when a patch is loaded or on request and their current value: an OSCQuery if you want</p>

<p>I going to start by using that simple code :<br><a href="http://www.deadpixel.ca/arduino-osc/" class="onebox" target="_blank" rel="nofollow noopener">http://www.deadpixel.ca/arduino-osc/</a></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Sending text over MIDI (to Arduino)'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/KrizRoring.html'><b itemprop='author'>KrizRoring</b></a>
           
           <time datetime='2018-12-20T09:32:14Z' itemprop='datePublished'>
             2018-12-20 09:32:14 UTC
           </time>
        </span>
        <span itemprop='position'>#10</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Over the Christmas holiday i will see what i can dig up form my archive</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:2'>
      <meta itemprop='interactionCount' content='UserComments:2'>
      <meta itemprop='headline' content='Sending text over MIDI (to Arduino)'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/Suburb_Animal.html'><b itemprop='author'>Suburb_Animal</b></a>
           
           <time datetime='2018-12-20T09:58:02Z' itemprop='datePublished'>
             2018-12-20 09:58:02 UTC
           </time>
        </span>
        <span itemprop='position'>#11</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p><a class="mention" href="../../u/krizroring-2.html">@KrizRoring</a> Cool, I will receive my NodeMCUs (along with a couple of OLED screens) after the holidays <img src="http://community.axoloti.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"> <br><a class="mention" href="../../u/alspacka.html">@alspacka</a> I looked into Axoloti sources, just so you know; SYSEX is only implemented for the USB Host output port. </p>

<p>That's why I'm moving from SYSEX and considering OSC through Serial in order to get a bilateral communication system.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Sending text over MIDI (to Arduino)'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/alspacka.html'><b itemprop='author'>alspacka</b></a>
           
           <time datetime='2018-12-20T13:40:48Z' itemprop='datePublished'>
             2018-12-20 13:40:48 UTC
           </time>
        </span>
        <span itemprop='position'>#12</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p><a class="mention" href="../../u/krizroring-2.html">@KrizRoring</a> Looking forward to it. </p>

<p>Thanks <a class="mention" href="../../u/suburb_animal-2.html">@Suburb_Animal</a>, I had actually just come across that info regarding sysex myself. </p>

<p>The commands I want to send from Ard to Axo lend themselves well to the unmodified midi standard, so that's what I plan to use for that piece. However, I learned that if I'm using the Ard's serial port for midi, it can't be used for anything else simultaneously unless you write your own muxing, which I don't want to do, and I'd also rather not have to try to modify midi code to be able to send ASCII from Axo to Ard. </p>

<p>So I think what I'm going to do is use midi for the Arduino to send commands to the Axoloti, and i2c for the Axoloti to send text to the Arduino. I'm guessing it will be mostly straightforward to send short strings over i2c.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Sending text over MIDI (to Arduino)'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/Suburb_Animal.html'><b itemprop='author'>Suburb_Animal</b></a>
           
           <time datetime='2018-12-20T14:21:55Z' itemprop='datePublished'>
             2018-12-20 14:21:55 UTC
           </time>
        </span>
        <span itemprop='position'>#13</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p><a class="mention" href="../../u/alspacka.html">@alspacka</a><br>I2C could be a good idea since it's bilateral.<br>Now the question is what's Axoloti baud rate for those IO<br>I'm guessing it depends of the clock pin (SCL) (GPIO PB8)</p>

<p>I looked have but I didn't manage to know what FAST_DUTY_CYCLE stand exactly for:</p>

<pre><code>static const I2CConfig i2cfg2 = {OPMODE_I2C, 400000, FAST_DUTY_CYCLE_2, };

    static uint8_t i2crxbuf[8];
    static uint8_t i2ctxbuf[8];
    static systime_t tmo;</code></pre>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Sending text over MIDI (to Arduino)'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/alspacka.html'><b itemprop='author'>alspacka</b></a>
           
           <time datetime='2018-12-20T16:55:44Z' itemprop='datePublished'>
             2018-12-20 16:55:44 UTC
           </time>
        </span>
        <span itemprop='position'>#14</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>That's just the duty cycle mode for the clock. <a href="http://www.playembedded.org/blog/stm32-i2c-chibios/" rel="nofollow noopener">See this guide.</a></p>

<p>One item from this guide that I find concerning: "The current ChibiOS I2C driver allows only master mode offering a simple interface to use I2C in synchronous way only." -- But I'm already using the Arduino as a master device to communicate with my i2c control interface.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Sending text over MIDI (to Arduino)'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/Suburb_Animal.html'><b itemprop='author'>Suburb_Animal</b></a>
           
           <time datetime='2018-12-22T19:59:42Z' itemprop='datePublished'>
             2018-12-22 19:59:42 UTC
           </time>
        </span>
        <span itemprop='position'>#15</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p><a class="mention" href="../../u/alspacka.html">@alspacka</a><br>Btw Arduino Mega has 4 Serial IOs (you can find copies for 10â‚¬ on aliexpress) and Arduino Uno has only 1 Serial but! you can use the SoftwareSerial Library to get an extra serial using digital IO (or even analog on the Mega)<br>You can find the information here<br><a href="https://www.arduino.cc/en/Reference/SoftwareSerial" class="onebox" target="_blank" rel="nofollow noopener">https://www.arduino.cc/en/Reference/SoftwareSerial</a><br><a href="http://arduiniana.org/libraries/newsoftserial/" class="onebox" target="_blank" rel="nofollow noopener">http://arduiniana.org/libraries/newsoftserial/</a><br>Newsoftserial is now named SoftwareSerial in Arduino IDE</p>

<p>or even using Altsoftserial (wich seems to work better if you add only one serial)<br><a href="https://www.pjrc.com/teensy/td_libs_AltSoftSerial.html" class="onebox" target="_blank" rel="nofollow noopener">https://www.pjrc.com/teensy/td_libs_AltSoftSerial.html</a><br>Just know that it works but costs quite a lot to the Arduino compared to an actual hardware serial</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Sending text over MIDI (to Arduino)'>
      <hr>
  </div>






    </div>
    <footer class="container">
      <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <a href='../../index.html'>Home</a>
        <a href="../../categories.html">Categories</a>
        <a href="../../guidelines.html">FAQ/Guidelines</a>
        <a href="../../tos.html">Terms of Service</a>
        <a href="../../privacy.html">Privacy Policy</a>
      </nav>
      <p>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  

<!-- Mirrored from community.axoloti.com/t/sending-text-over-midi-to-arduino/5234 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 16 Jul 2023 18:28:45 GMT -->
</html>
