<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from community.axoloti.com/t/memory-mapping-options/5795 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 10 Jul 2023 16:03:37 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Memory mapping options - Developer - Axoloti Community</title>
    <meta name="description" content="I&amp;#39;ve been working on an axoloti patch with a lot of custom code (including code to display text on a character LCD, draw waveforms on a graphical LCD, and interface with 8 rotary encoders and 64 switches on my custom-des&amp;hellip;">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.9.0.beta3 - https://github.com/discourse/discourse version 13f3de4bf673802eb8ec595d36587b4524773209">
<link rel="icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="5795.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"http://community.axoloti.com","potentialAction":{"@type":"SearchAction","target":"http://community.axoloti.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Axoloti Community Search">

        <link href="../../stylesheets/desktop_d93a33ca8617326fe353f80e6ab865188244d48c8e0b.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop"/>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','../../../www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Memory mapping options&#39;" href="5795.rss" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://community.axoloti.com/uploads/default/optimized/2X/6/6043b6faabc846c31619b42ad0cb748ff55431e2_1_680x500.jpg" />
<meta property="og:image" content="http://community.axoloti.com/uploads/default/optimized/2X/6/6043b6faabc846c31619b42ad0cb748ff55431e2_1_680x500.jpg" />
<meta property="og:url" content="http://community.axoloti.com/t/memory-mapping-options/5795" />
<meta name="twitter:url" content="http://community.axoloti.com/t/memory-mapping-options/5795" />
<meta property="og:title" content="Memory mapping options" />
<meta name="twitter:title" content="Memory mapping options" />
<meta property="og:description" content="I&#39;ve been working on an axoloti patch with a lot of custom code (including code to display text on a character LCD, draw waveforms on a graphical LCD, and interface with 8 rotary encoders and 64 switches on my custom-designed board).    It&#39;s all working well but I keep running into problems with memory limits for the size of my compiled code. I&#39;ve scoured these forums and done as much in-lining of my functions as possible to reduce code size, but I&#39;m continually right at the limit, often getting..." />
<meta name="twitter:description" content="I&#39;ve been working on an axoloti patch with a lot of custom code (including code to display text on a character LCD, draw waveforms on a graphical LCD, and interface with 8 rotary encoders and 64 switches on my custom-designed board).    It&#39;s all working well but I keep running into problems with memory limits for the size of my compiled code. I&#39;ve scoured these forums and done as much in-lining of my functions as possible to reduce code size, but I&#39;m continually right at the limit, often getting..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="2 mins ðŸ•‘" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="3 â¤" />


  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html"><img src="../../uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo" style="max-width: 150px;"></a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1>
  <a href="5795.html">Memory mapping options</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/developer.html" itemprop="url">
        <span itemprop="title">Developer</span>
      </a>
    </div>
</div>





<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/dantron.html'><b itemprop='author'>dantron</b></a>
           
           <time datetime='2019-06-16T18:45:33Z' itemprop='datePublished'>
             2019-06-16 18:45:33 UTC
           </time>
        </span>
        <span itemprop='position'>#1</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I've been working on an axoloti patch with a lot of custom code (including code to display text on a character LCD, draw waveforms on a graphical LCD, and interface with 8 rotary encoders and 64 switches on my custom-designed board). </p>

<p>It's all working well but I keep running into problems with memory limits for the size of my compiled code. I've scoured these forums and done as much in-lining of my functions as possible to reduce code size, but I'm continually right at the limit, often getting this error when adding new code:</p>

<p>(x86)/axoloti_runtime/platform_win/bin/../lib/gcc/arm-none-eabi/4.9.3/../../../../arm-none-eabi/bin/ld.exe: region `SRAM' overflowed by 120 bytes<br>collect2.exe: error: ld returned 1 exit status<br>make: *** [C:\Users\dan\DOCUME~1\axoloti/build/xpatch.bin] Error 1<br>shell task failed, exit value: 1</p>

<p> I've noticed I have extra memory available for variables (about 2000 bytes), so I was wondering: is there is any way to reduce the memory allocated for variables and increase the memory allocated for compiled code?</p>

<p> <div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/6043b6faabc846c31619b42ad0cb748ff55431e2" href="../../uploads/default/original/2X/6/6043b6faabc846c31619b42ad0cb748ff55431e2.jpg" class="lightbox" title="synth new.jpg"><img src="../../uploads/default/optimized/2X/6/6043b6faabc846c31619b42ad0cb748ff55431e2_1_680x500.jpg" width="680" height="500"><div class="meta">
<span class="filename">synth new.jpg</span><span class="informations">3264x2399 315 KB</span><span class="expand"></span>
</div></a></div></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:2'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Memory mapping options'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/weasel79.html'><b itemprop='author'>weasel79</b></a>
           
           <time datetime='2019-06-17T13:15:59Z' itemprop='datePublished'>
             2019-06-17 13:15:59 UTC
           </time>
        </span>
        <span itemprop='position'>#2</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Amazing build man! Love the color scheme and the immediate subconscious visual grouping you achieve.</p>

<p>as for memory, i can't help you much here with inline optimisation... but if you're already scrambling for single bytes i would seriously consider splitting up the whole thing on two boards though. either 2 axolotis or just add a little arduino to do the screen and encoder handlig, send data both ways via serial com.</p>

<p>edit: zoomed in on the keys, looks like an amazing concept. care to shed some light on what it does? controls only or does it do audio at the same time?</p>

<p>edit2: personally i use midibox for the controls and send midi to the axo synth. very convenient. but there might be better options for you.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Memory mapping options'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/jaffasplaffa.html'><b itemprop='author'>jaffasplaffa</b></a>
           
           <time datetime='2019-06-17T21:05:15Z' itemprop='datePublished'>
             2019-06-17 21:05:15 UTC
           </time>
        </span>
        <span itemprop='position'>#3</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Yeah, that is an issue with Axoloti. If you build a really advanced controller like yours, you will end up with no memory left for the patch itself.</p>

<p>As <a class="mention" href="../../u/weasel79.html">@weasel79</a> says, it is probably a good idea to split it up for 2 axos instead of 1.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Memory mapping options'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/Sonofawhatsherface.html'><b itemprop='author'>Sonofawhatsherface</b></a>
           
           <time datetime='2019-06-18T15:20:11Z' itemprop='datePublished'>
             2019-06-18 15:20:11 UTC
           </time>
        </span>
        <span itemprop='position'>#4</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>wowzah this is the best axo project I've seen so far can't wait to hear it</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Memory mapping options'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/Sonofawhatsherface.html'><b itemprop='author'>Sonofawhatsherface</b></a>
           
           <time datetime='2019-06-18T15:20:48Z' itemprop='datePublished'>
             2019-06-18 15:20:48 UTC
           </time>
        </span>
        <span itemprop='position'>#5</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>do you have a youtube/vlog for this project/your projects in general?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Memory mapping options'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/dantron.html'><b itemprop='author'>dantron</b></a>
           
           <time datetime='2019-06-18T16:50:53Z' itemprop='datePublished'>
             2019-06-18 16:50:53 UTC
           </time>
        </span>
        <span itemprop='position'>#6</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Thanks for the positive feedback. I'll probably go the route of offloading the screen/inputs to an arduino. It's just frustrating because I'm so close to being able to do everything with just the axo.</p>

<p>As far as my build goes, it's a 6 oscillator wavetable synth. Two of those are 8-note polyphonic (the top two light gray rows), and the other four are monophonic (the darker gray rows). Each oscillator can be toggled as either a wavetable or noise source. Each has its own filter and a 64-note arpeggiator, as well as amp, pitch, and filter envelopes. I also recently added a pretty basic additive harmonics feature to build up interesting waves. </p>

<p>I designed it so that each oscillator can be used as either an output voice or a mod source for any of the others (vibrato, tremolo, gate, filter freq, filter res, and arp rate). I used extended frequency ranges so each oscillator can be set anywhere from .1hz to 22khz (from LFO up to anywhere in the audible range). Most of the buttons are used to quickly toggle things on and off (envelopes, tracking, wave/noise, etc). I can also set different midi channels for each oscillator as well as different key ranges (to do split keyboard patches). My latest goal was to dual-purpose the main block of buttons to also function like a drum sequencer. I have it working but had to comment some other stuff to reduce the size of my compiled code (hence my original post).</p>

<p>To create wavetables I made a separate web app where I can open up an audio file, zoom in on a specific section, and copy the data out to load onto my sd card.  </p>

<p>I haven't recorded a demo of it yet, but I definitely plan to. I was hoping to finish my next build first (this build was designed before I added the graphic LCD, and I'm also adding a few more buttons and possibly some built-in speakers). <br>. <br><div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/632567fe8616244506dd2134ab4e71426c701130" href="../../uploads/default/original/2X/6/632567fe8616244506dd2134ab4e71426c701130.jpg" class="lightbox" title="IMG_4648.JPG"><img src="../../uploads/default/optimized/2X/6/632567fe8616244506dd2134ab4e71426c701130_1_666x500.jpg" width="666" height="500"><div class="meta">
<span class="filename">IMG_4648.JPG</span><span class="informations">3264x2448 1.6 MB</span><span class="expand"></span>
</div></a></div></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:2'>
      <meta itemprop='headline' content='Memory mapping options'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/lokki.html'><b itemprop='author'>lokki</b></a>
           
           <time datetime='2019-06-18T18:49:44Z' itemprop='datePublished'>
             2019-06-18 18:49:44 UTC
           </time>
        </span>
        <span itemprop='position'>#7</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>very nice!</p>

<p>so do i read this correctly, you are not just using objects to patch but you mostly write the code directly? are you using the patcher at all? do you drive the OLED with the objects by <a class="mention" href="../../u/smashedtransistors-2.html">@SmashedTransistors</a>? or did you write your own? if you use the one by <a class="mention" href="../../u/smashedtransistors-2.html">@SmashedTransistors</a> you can probably gain quite some sram by commenting stuff out that you don't need (all the letters for example, so you could leave out the include file altogether if you only need the scope)  what about the LCD, is there an object that you could share? (i have the same...)</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Memory mapping options'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/weasel79.html'><b itemprop='author'>weasel79</b></a>
           
           <time datetime='2019-06-30T22:31:38Z' itemprop='datePublished'>
             2019-06-30 22:31:38 UTC
           </time>
        </span>
        <span itemprop='position'>#8</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Oh, 100% go with built in speakers! I made a temp enclosure for the tangband 3" and 4" i got recently and it's endless fun, not only to build but also to be able to play your thing standalone with it's own sound character.</p>

<p>oh and a random thought, i think you could improve the LCD readability a lot if you delete leading zeros, ie. " A:  56" still keep them right-aligned of course.</p>

<p>and i can recommend offloading stuff to other platforms, my project has a midibox STM32F4 for all keyboard, button and encoder inputs as well as preset management, axolotis purely for the sound engine and some OLEDs, and then an arduino for the rest of the screens and LED-rings. why kill yourself trying to optimize the last bit of code when you can just throw in a 15$ arduino...</p>

<p>i really like what i understood from your architecture and signal flow, would love to learn more about it at some point.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Memory mapping options'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/Sonofawhatsherface.html'><b itemprop='author'>Sonofawhatsherface</b></a>
           
           <time datetime='2019-07-16T20:25:31Z' itemprop='datePublished'>
             2019-07-16 20:25:31 UTC
           </time>
        </span>
        <span itemprop='position'>#9</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>how much time did you spend making this?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Memory mapping options'>
      <hr>
  </div>






    </div>
    <footer class="container">
      <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <a href='../../index.html'>Home</a>
        <a href="../../categories.html">Categories</a>
        <a href="../../guidelines.html">FAQ/Guidelines</a>
        <a href="../../tos.html">Terms of Service</a>
        <a href="../../privacy.html">Privacy Policy</a>
      </nav>
      <p>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  

<!-- Mirrored from community.axoloti.com/t/memory-mapping-options/5795 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 10 Jul 2023 16:03:37 GMT -->
</html>
