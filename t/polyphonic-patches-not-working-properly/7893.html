<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from community.axoloti.com/t/polyphonic-patches-not-working-properly/7893 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 19 Jul 2023 02:53:59 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Polyphonic patches not working properly - Patching - Axoloti Community</title>
    <meta name="description" content="After few years I just got back to designing my patches. I didn&amp;#39;t remember how awesome this device is :smiley: 

Now to the problem. I can&amp;#39;t get the polyphonic patches work properly. Always the previous note plays one ti&amp;hellip;">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.9.0.beta3 - https://github.com/discourse/discourse version 13f3de4bf673802eb8ec595d36587b4524773209">
<link rel="icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="7893.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"http://community.axoloti.com","potentialAction":{"@type":"SearchAction","target":"http://community.axoloti.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Axoloti Community Search">

        <link href="../../stylesheets/desktop_d93a33ca8617326fe353f80e6ab865188244d48c8e0b.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop"/>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','../../../www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Polyphonic patches not working properly&#39;" href="7893.rss" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://community.axoloti.com/uploads/default/optimized/2X/7/72aff13bc60e0b12e62449f32b8a1c542a1b0c3f_1_690x378.png" />
<meta property="og:image" content="http://community.axoloti.com/uploads/default/optimized/2X/7/72aff13bc60e0b12e62449f32b8a1c542a1b0c3f_1_690x378.png" />
<meta property="og:url" content="http://community.axoloti.com/t/polyphonic-patches-not-working-properly/7893" />
<meta name="twitter:url" content="http://community.axoloti.com/t/polyphonic-patches-not-working-properly/7893" />
<meta property="og:title" content="Polyphonic patches not working properly" />
<meta name="twitter:title" content="Polyphonic patches not working properly" />
<meta property="og:description" content="After few years I just got back to designing my patches. I didn&#39;t remember how awesome this device is 😃   Now to the problem. I can&#39;t get the polyphonic patches work properly. Always the previous note plays one time simultaneously when I play new notes   Btw I have multiple polyphonic subpatches in the main patch.   The polyphonic demo patches work though, I just don&#39;t understand what is the difference between demo patches and my patches 😕   This is the subpatch  [image]  This is..." />
<meta name="twitter:description" content="After few years I just got back to designing my patches. I didn&#39;t remember how awesome this device is 😃   Now to the problem. I can&#39;t get the polyphonic patches work properly. Always the previous note plays one time simultaneously when I play new notes   Btw I have multiple polyphonic subpatches in the main patch.   The polyphonic demo patches work though, I just don&#39;t understand what is the difference between demo patches and my patches 😕   This is the subpatch  [image]  This is..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="1 ❤" />


  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html"><img src="../../uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo" style="max-width: 150px;"></a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1>
  <a href="7893.html">Polyphonic patches not working properly</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/patching.html" itemprop="url">
        <span itemprop="title">Patching</span>
      </a>
    </div>
</div>

    <div class='tags-list' itemscope itemtype='http://schema.org/ItemList'>
        <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
          <meta itemprop='url' content='../../tags/midi.html'>
          <a href='../../tags/midi.html' itemprop='item'>
            <span itemprop='name'>midi</span>
          </a>
        </div>
    </div>




<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/Mindsetup.html'><b itemprop='author'>Mindsetup</b></a>
           
           <time datetime='2023-01-18T09:38:20Z' itemprop='datePublished'>
             2023-01-18 09:38:20 UTC
           </time>
        </span>
        <span itemprop='position'>#1</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>After few years I just got back to designing my patches. I didn't remember how awesome this device is <img src="../../images/emoji/twitter/smileyae52.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"></p>

<p>Now to the problem. I can't get the polyphonic patches work properly. Always the previous note plays one time simultaneously when I play new notes</p>

<p>Btw I have multiple polyphonic subpatches in the main patch.</p>

<p>The polyphonic demo patches work though, I just don't understand what is the difference between demo patches and my patches <img src="../../images/emoji/twitter/confusedae52.png?v=5" title=":confused:" class="emoji" alt=":confused:"></p>

<p>This is the subpatch<br><div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/72aff13bc60e0b12e62449f32b8a1c542a1b0c3f" href="../../uploads/default/original/2X/7/72aff13bc60e0b12e62449f32b8a1c542a1b0c3f.png" class="lightbox" title="image.png"><img src="../../uploads/default/optimized/2X/7/72aff13bc60e0b12e62449f32b8a1c542a1b0c3f_1_690x378.png" width="690" height="378"><div class="meta">
<span class="filename">image.png</span><span class="informations">1981x1087 47.1 KB</span><span class="expand"></span>
</div></a></div></p>

<p>This is the masterpatch.<br><div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/84ffe4de2878e5d0a8c07c9e4e9a5b29d58d0e07" href="../../uploads/default/original/2X/8/84ffe4de2878e5d0a8c07c9e4e9a5b29d58d0e07.png" class="lightbox" title="image.png"><img src="../../uploads/default/optimized/2X/8/84ffe4de2878e5d0a8c07c9e4e9a5b29d58d0e07_1_690x342.png" width="690" height="342"><div class="meta">
<span class="filename">image.png</span><span class="informations">3769x1870 194 KB</span><span class="expand"></span>
</div></a></div></p>

<p>The sustain object was just left there accidently, dont mind it.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Polyphonic patches not working properly'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/Mindsetup.html'><b itemprop='author'>Mindsetup</b></a>
           
           <time datetime='2023-01-18T11:17:46Z' itemprop='datePublished'>
             2023-01-18 11:17:46 UTC
           </time>
        </span>
        <span itemprop='position'>#2</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I think I found the problem. My envelope is supposed to be inside the subpatches. At least it fixes the problem <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"> Only minus is that it takes more computing to have 4 separate envelopes when I kinda could get away with one <img src="../../images/emoji/twitter/confusedae52.png?v=5" title=":confused:" class="emoji" alt=":confused:"></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Polyphonic patches not working properly'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/SirSickSik.html'><b itemprop='author'>SirSickSik</b></a>
           
           <time datetime='2023-01-18T11:44:30Z' itemprop='datePublished'>
             2023-01-18 11:44:30 UTC
           </time>
        </span>
        <span itemprop='position'>#3</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Yes, you'll need to add an envelope for each voice, as otherwise it will always sum all the voices (velocity stays at the same value after gate goes down). But as you seem to use an ADSR afterwards too, you might use a more simpler envelope inside the sub-patches like an AHR (so no decay and sustain-level stage, just an attack, then a sustain on full level and release when gate goes off. You could also use a glide/smooth-module for this too, connected to the gate signal, then multiply this one with the velocity).</p>

<p>But also:<br>have you edited the settings of the sub-patch?<br>Go to view-&gt;settings in the top-bar of the patcher.<br>Here you can set the settings of the sub-patch.</p>

<p>There are a couple of important things you can setup here:<br>-first one I would try (in relation to your problem): check the box "has midi selector" and set the subpatch entry to "poly".<br>This allows for more settings of the sub-patch in the front-panel-controls.<br>-but also important are the settings for preset and modulation. If you don't use them, ALWAYS set these to 0 as it saves you a ton of space and allows you to build bigger patches.</p>

<p>Apart from these settings, it's always a good idea to add a c* (multiply)  module at the end so you can attenuate the output. The output is initially set to clip/saturate at "64" (you can also un-set this in the above mentioned sub-patch settings, but this also allows the output to go tóo high for modules after your sub-patch), but if you play 4 voices, the chance is pretty high you go over the clipping value. That's why the outgoing signal should be attenuated (1/4 in this case if the source signal goes from -64 to 64, like the sine oscillator) to make sure it cannot go beyond the clipping level. If the source only goes from -32 to 32, you could just do with 1/2 for 4 voices.</p>

<p>I also see some patch-cables go from modules that are positioned lower then the modules they go to. This should be avoided as this puts the code of the module áfter the code of the module it goes to, so leaving you with a 1 sample-buffer delay (which cán be made use of if some signal needs to be delayed by 1 buffer though).<br>In case of control voltages which do not change, it isn't that big of a problem (although it does add an extra "memory", taking up memory resources), but when they change, they always fall behind 1 sample-buffer (which is 16 audio-rate samples). Especially triggers/envelope signals should not be going up, as then your triggers/envelopes will always be 1-sample-buffer too late.<br>eg. this is happening with your envelope-signal in the main patch going down to the inverse module for the bottom voice and then up again to the filter. Also the filters themselves are 1 line above the summing stage, so also these are 1 buffer behind-&gt;together the envelope response will be lagging 32 audio-rate samples by now on the other voices.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Polyphonic patches not working properly'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/SirSickSik.html'><b itemprop='author'>SirSickSik</b></a>
           
           <time datetime='2023-01-18T11:47:43Z' itemprop='datePublished'>
             2023-01-18 11:47:43 UTC
           </time>
        </span>
        <span itemprop='position'>#4</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>ps. keeping the adsr outside the sub-patch will always make the adsr work monophonically. I kinda assumed you wanted this, but if you want to control the volume envelope of each voice seperately, they'll still need their own envelope module inside the sub-patch..</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Polyphonic patches not working properly'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/Mindsetup.html'><b itemprop='author'>Mindsetup</b></a>
           
           <time datetime='2023-01-18T12:03:56Z' itemprop='datePublished'>
             2023-01-18 12:03:56 UTC
           </time>
        </span>
        <span itemprop='position'>#5</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Thank you very much for answering. I'm looking into it right now. First issue now is that I cant find any AHR envelope.</p>

<p>Second, what is the difference between Maximum number of modulation targets vs sources?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Polyphonic patches not working properly'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/SirSickSik.html'><b itemprop='author'>SirSickSik</b></a>
           
           <time datetime='2023-01-18T12:25:48Z' itemprop='datePublished'>
             2023-01-18 12:25:48 UTC
           </time>
        </span>
        <span itemprop='position'>#6</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>in the patch-folder you have modules to assign modulation to modulation-sources, this will be the stack of modulations that you can assign controls to (right-click a knob-&gt;modulation).<br>The modulation targets are the amount of knobs that you could assign modulation to.<br>So if you have 4 sources and 8 targets, you can see this as having a matrix-mixer where you can control the width of all 4 modulations sources for each of the 8 target controls independently.</p>

<p>As for the AHR envelope, just use the smooth2 module (math).But you could also alter the code of the ADSR by removing the part:<br>if(stage==2)<br>{<br>....<br>code<br>....<br>} .<br>Now it doesn't do the decay stage and the envelope remains at it's peak level after the attack has finished.<br>You can now also remove the decay and sustain controls from the list.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Polyphonic patches not working properly'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/Mindsetup.html'><b itemprop='author'>Mindsetup</b></a>
           
           <time datetime='2023-01-18T14:26:02Z' itemprop='datePublished'>
             2023-01-18 14:26:02 UTC
           </time>
        </span>
        <span itemprop='position'>#7</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Nice the smooth2 node works great! This works great now. And thanks for the optimizing tips!</p>

<p>"Apart from these settings, it's always a good idea to add a c* (multiply) module at the end so you can attenuate the output."</p>

<p>I have c* in the mainpatch for each oscillatorpatch.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Polyphonic patches not working properly'>
      <hr>
  </div>






    </div>
    <footer class="container">
      <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <a href='../../index.html'>Home</a>
        <a href="../../categories.html">Categories</a>
        <a href="../../guidelines.html">FAQ/Guidelines</a>
        <a href="../../tos.html">Terms of Service</a>
        <a href="../../privacy.html">Privacy Policy</a>
      </nav>
      <p>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  

<!-- Mirrored from community.axoloti.com/t/polyphonic-patches-not-working-properly/7893 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 19 Jul 2023 02:54:01 GMT -->
</html>
