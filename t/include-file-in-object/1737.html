<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from community.axoloti.com/t/include-file-in-object/1737 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 19 Jul 2023 03:38:42 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Include File in Object - AxoObject coding - Axoloti Community</title>
    <meta name="description" content="Another stupid noob question, I&amp;#39;m afraid. 

I have a load of data tables stored as constant arrays, and I&amp;#39;d like dump them into an external file and include them in several custom objects I&amp;#39;m working on. 

I&amp;#39;ve tried add&amp;hellip;">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.9.0.beta3 - https://github.com/discourse/discourse version 13f3de4bf673802eb8ec595d36587b4524773209">
<link rel="icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="1737.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"http://community.axoloti.com","potentialAction":{"@type":"SearchAction","target":"http://community.axoloti.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Axoloti Community Search">

        <link href="../../stylesheets/desktop_d93a33ca8617326fe353f80e6ab865188244d48c8e0b.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop"/>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','../../../www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Include File in Object&#39;" href="1737-2.html" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:url" content="http://community.axoloti.com/t/include-file-in-object/1737" />
<meta name="twitter:url" content="http://community.axoloti.com/t/include-file-in-object/1737" />
<meta property="og:title" content="Include File in Object" />
<meta name="twitter:title" content="Include File in Object" />
<meta property="og:description" content="Another stupid noob question, I&#39;m afraid.   I have a load of data tables stored as constant arrays, and I&#39;d like dump them into an external file and include them in several custom objects I&#39;m working on.   I&#39;ve tried adding a reference to the file in the [relative path] section of the objects XML, but this doesn&#39;t seem to work, sadly.   I can tell the file is being brought in when the object is compiled, as if I also define any of the same constants in Local Data section of the XML of the object..." />
<meta name="twitter:description" content="Another stupid noob question, I&#39;m afraid.   I have a load of data tables stored as constant arrays, and I&#39;d like dump them into an external file and include them in several custom objects I&#39;m working on.   I&#39;ve tried adding a reference to the file in the [relative path] section of the objects XML, but this doesn&#39;t seem to work, sadly.   I can tell the file is being brought in when the object is compiled, as if I also define any of the same constants in Local Data section of the XML of the object..." />


  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html"><img src="../../uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo" style="max-width: 150px;"></a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1>
  <a href="1737.html">Include File in Object</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/axoobject-code.html" itemprop="url">
        <span itemprop="title">AxoObject coding</span>
      </a>
    </div>
</div>





<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/toneburst.html'><b itemprop='author'>toneburst</b></a>
           
           <time datetime='2016-05-23T08:17:54Z' itemprop='datePublished'>
             2016-05-23 08:17:54 UTC
           </time>
        </span>
        <span itemprop='position'>#1</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Another stupid noob question, I'm afraid.</p>

<p>I have a load of data tables stored as constant arrays, and I'd like dump them into an external file and include them in several custom objects I'm working on.</p>

<p>I've tried adding a reference to the file in the [relative path] section of the objects XML, but this doesn't seem to work, sadly.</p>

<p>I can tell the file is being brought in when the object is compiled, as if I also define any of the same constants in Local Data section of the XML of the object itself, I get an error about the redefinition.</p>

<p>However, I can't seem to access the data in the included file from my code in the K-Rate Code section of my object code. I get no error in the console, but every request for data from the included file returns zero.</p>

<p>I suspect this is a scope issue, but there must be a way to get it to work.</p>

<p>Incidentally, I don't seem to be able to enter any text in the Includes (or Dependencies) field in the Overview tab of the Object Editor. Is this a known issue?</p>

<p>a|x</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Include File in Object'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/toneburst.html'><b itemprop='author'>toneburst</b></a>
           
           <time datetime='2016-05-23T09:00:58Z' itemprop='datePublished'>
             2016-05-23 09:00:58 UTC
           </time>
        </span>
        <span itemprop='position'>#2</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Doing a bit of reading around this, it looks like adding 'extern' to the variable declaration in the external file might help, but there are warnings about doing this because it makes the variable global.</p>

<p>Global variables seem to be used all the time in Factory objects, but I'm not sure they are actually global. Maybe their scope is limited in some way.</p>

<p>There's also advice about using a .h header file, but I don't know if this is possible in the Axoloti object environment.</p>

<p>I'd love to know what is the right way to do this.</p>

<p>a|x</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Include File in Object'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/hellcore.html'><b itemprop='author'>hellcore</b></a>
           
           <time datetime='2016-05-23T09:32:24Z' itemprop='datePublished'>
             2016-05-23 09:32:24 UTC
           </time>
        </span>
        <span itemprop='position'>#3</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Take a look at <a class="mention" href="../../users/thetechnobear.html">@thetechnobear</a>'s Push object? It has a bunch of includes, I was nosing around at it yesterday to find out some info on sysex.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Include File in Object'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/toneburst.html'><b itemprop='author'>toneburst</b></a>
           
           <time datetime='2016-05-23T12:56:02Z' itemprop='datePublished'>
             2016-05-23 12:56:02 UTC
           </time>
        </span>
        <span itemprop='position'>#4</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Good call. I will have a look.</p>

<p>Cheers,</p>

<p>a|x</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Include File in Object'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/toneburst.html'><b itemprop='author'>toneburst</b></a>
           
           <time datetime='2016-05-25T10:29:52Z' itemprop='datePublished'>
             2016-05-25 10:29:52 UTC
           </time>
        </span>
        <span itemprop='position'>#5</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>So, this seems to work. But, is it the <em>right</em> way to do it?</p>

<p>This is my header file, tables.h:</p>

<pre><code>#ifndef CANTO_TABLES_H
#define CANTO_TABLES_H

// Sinewave table
extern const int8_t sinCalc[];

// Squarewave table
extern const int8_t sqrCalc[];

// Formant table
extern const int8_t formantTable[][7];

// Vowel indices
extern const int8_t vowels[];

// Sample-rate reduction divisor table
extern const int8_t srateTable[];

#include "tables.c"

#endif</code></pre>

<p>and an excerpt from tables.c:</p>

<pre><code>const int8_t sinCalc[256] = {
    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
    0,2,2,3,3,4,5,6,7,8,10,12,14,17,20,24,
    0,4,4,5,6,7,9,11,13,15,18,22,26,31,37,45,
    0,5,6,7,8,10,12,14,17,20,24,28,34,41,49,58,
    0,5,6,7,9,10,12,15,18,21,26,31,37,44,53,63,
    0,5,6,7,8,10,12,14,17,20,24,28,34,41,49,58,
    0,4,4,5,6,7,9,11,13,15,18,22,26,31,37,45,
    0,2,2,3,3,4,5,6,7,8,10,12,14,17,20,24,
    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
    0,-2,-2,-3,-3,-4,-5,-6,-7,-8,-10,-12,-14,-17,-20,-24,
    0,-4,-4,-5,-6,-7,-9,-11,-13,-15,-18,-22,-26,-31,-37,-45,
    0,-5,-6,-7,-8,-10,-12,-14,-17,-20,-24,-28,-34,-41,-49,-58,
    0,-5,-6,-7,-9,-10,-12,-15,-18,-21,-26,-31,-37,-44,-53,-63,
    0,-5,-6,-7,-8,-10,-12,-14,-17,-20,-24,-28,-34,-41,-49,-58,
    0,-4,-4,-5,-6,-7,-9,-11,-13,-15,-18,-22,-26,-31,-37,-45,
    0,-2,-2,-3,-3,-4,-5,-6,-7,-8,-10,-12,-14,-17,-20,-24
};</code></pre>

<p>However, having read a little about the evils of global variables in the past (and I understand declaring a variable as 'extern' makes it global), I have a feeling this is the wrong way to do thing.</p>

<p>I have two goals in putting the the tables in an external file:</p>

<ol>
<li>So that I can use them in multiple objects</li>
<li>So that if I do the above, the same variables will not be declared multiple times, if I use more than one instance of the objects that use the external file.</li>
</ol>

<p>I don't know if this method fulfils either of these criteria.</p>

<p>Incidentally, if I can do the same thing with a single, rather than 2 files, that might be cool.</p>

<p>Any advice gratefully accepted.</p>

<p>a|x</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Include File in Object'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/toneburst.html'><b itemprop='author'>toneburst</b></a>
           
           <time datetime='2016-05-25T15:12:19Z' itemprop='datePublished'>
             2016-05-25 15:12:19 UTC
           </time>
        </span>
        <span itemprop='position'>#6</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I've discovered that I can just dump the whole of my .c file into the header file, and declare and assign values to my constant arrays there, without the need for the .c file at all.</p>

<p>I don't think this is how header files are supposed to be used, though. My understanding is that you're supposed to declare variables in the header, but not assign them, and you're actually supposed to assign values to them in a .c file that's included by the header.</p>

<p>Here's a cut-down version of what's in my header file, included by my object:</p>

<pre><code>#ifndef CANTO_TABLES_H
	
	#define CANTO_TABLES_H

	// All audible phonemes (73)
	const int8_t phonemes[] = {
		5, 6, 7, 8, 9,10,11,12,13,14,15,16,17,18,19,20,
		21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,
		37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,
		53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,
		69,70,71,72,73,74,75,76,77,	
	};

#endif</code></pre>

<p>It seems to work fine like this.</p>

<p>a|x</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Include File in Object'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/toneburst.html'><b itemprop='author'>toneburst</b></a>
           
           <time datetime='2016-05-26T11:39:34Z' itemprop='datePublished'>
             2016-05-26 11:39:34 UTC
           </time>
        </span>
        <span itemprop='position'>#7</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>A gentle bump.<br>Would be great if someone could tell me if I'm doing this right.<br>I'm pretty sure I'm not, but it does seem to work, at least...</p>

<p>a|x</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Include File in Object'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/jaffasplaffa.html'><b itemprop='author'>jaffasplaffa</b></a>
           
           <time datetime='2019-10-21T22:24:44Z' itemprop='datePublished'>
             2019-10-21 22:24:44 UTC
           </time>
        </span>
        <span itemprop='position'>#8</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hey <a class="mention" href="../../u/toneburst.html">@toneburst</a></p>

<p>Was wondering if you would show me how you include the headerfile in the Axo object?</p>

<p>I tried this:<br>- I put the headerfile, called "functions.h", that I created in Xcode, into the same folder as the axo object, in this case called "sum.axo". I included the headerfile using include, as shown on the picture:</p>

<p><img src="../../uploads/default/original/2X/8/88652008e6ca78e929705901844b07ed134ddb17.png" width="558" height="381"></p>

<p>But when I try to go live I get this error:<br><div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/0496bb9e609e915418ebc0d3fdaf60fd44b6bbf6" href="../../uploads/default/original/2X/0/0496bb9e609e915418ebc0d3fdaf60fd44b6bbf6.png" class="lightbox" title="Screen Shot 2019-10-22 at 00.31.22.png"><img src="../../uploads/default/optimized/2X/0/0496bb9e609e915418ebc0d3fdaf60fd44b6bbf6_1_690x79.png" width="690" height="79"><div class="meta">
<span class="filename">Screen Shot 2019-10-22 at 00.31.22.png</span><span class="informations">754x87 8.21 KB</span><span class="expand"></span>
</div></a></div></p>

<p>Can you tell me what I am doing wrong here? </p>

<p>The header file has to be in the same folder as the object, right?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Include File in Object'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/lokki.html'><b itemprop='author'>lokki</b></a>
           
           <time datetime='2019-10-22T06:08:55Z' itemprop='datePublished'>
             2019-10-22 06:08:55 UTC
           </time>
        </span>
        <span itemprop='position'>#9</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>you have to edit the objects file directly with another editor. you will see an "include" section at the beginning of the file (if not, create one) and put your filename there.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Include File in Object'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/jaffasplaffa.html'><b itemprop='author'>jaffasplaffa</b></a>
           
           <time datetime='2019-10-22T07:36:53Z' itemprop='datePublished'>
             2019-10-22 07:36:53 UTC
           </time>
        </span>
        <span itemprop='position'>#10</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Ahh found it, will try that today.</p>

<p>Thanks <img src="../../images/emoji/twitter/winkae52.png?v=5" title=":wink:" class="emoji" alt=":wink:"></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Include File in Object'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/ivofx.html'><b itemprop='author'>ivofx</b></a>
           
           <time datetime='2020-06-20T08:49:25Z' itemprop='datePublished'>
             2020-06-20 08:49:25 UTC
           </time>
        </span>
        <span itemprop='position'>#11</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I had trouble with this at first, then I noticed that you also need to populate the helpPatch field, otherwise the editor clears the include tag from the xml when loading:</p>

<p></p><pre><code class="lang-auto">   &lt;helpPatch&gt;myheader.axh&lt;/helpPatch&gt;
   ...
   &lt;includes&gt;
      &lt;include&gt;./myheader.h&lt;/include&gt;
   &lt;/includes&gt;</code></pre>

<p>(same name as your header file but with .axh extension)<br>The header file is located in the same directory as the .axo file.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Include File in Object'>
      <hr>
  </div>






    </div>
    <footer class="container">
      <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <a href='../../index.html'>Home</a>
        <a href="../../categories.html">Categories</a>
        <a href="../../guidelines.html">FAQ/Guidelines</a>
        <a href="../../tos.html">Terms of Service</a>
        <a href="../../privacy.html">Privacy Policy</a>
      </nav>
      <p>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  

<!-- Mirrored from community.axoloti.com/t/include-file-in-object/1737 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 19 Jul 2023 03:38:44 GMT -->
</html>
