<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Allpass filters and comb filters - Lounge - Axoloti Community</title>
    <meta name="description" content="What&amp;#39;s the difference? I can&amp;#39;t really get it.. They both involve a delay line, but the comb filter can be configured to have feedback. But isn&amp;#39;t a comb filter in feed forward mode the same thing as an allpass? I don&amp;#39;t un&amp;hellip;">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.9.0.beta3 - https://github.com/discourse/discourse version 13f3de4bf673802eb8ec595d36587b4524773209">
<link rel="icon" type="image/png" href="/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="http://community.axoloti.com/t/allpass-filters-and-comb-filters/3222" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"http://community.axoloti.com","potentialAction":{"@type":"SearchAction","target":"http://community.axoloti.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="http://community.axoloti.com/opensearch.xml" title="Axoloti Community Search">

        <link href="/stylesheets/desktop_d93a33ca8617326fe353f80e6ab865188244d48c.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop"/>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Allpass filters and comb filters&#39;" href="http://community.axoloti.com/t/allpass-filters-and-comb-filters/3222.rss" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://www.music.miami.edu/programs/mue/research/jfrenette/chapter_2/image028.gif" />
<meta property="og:image" content="http://www.music.miami.edu/programs/mue/research/jfrenette/chapter_2/image028.gif" />
<meta property="og:url" content="http://community.axoloti.com/t/allpass-filters-and-comb-filters/3222/3" />
<meta name="twitter:url" content="http://community.axoloti.com/t/allpass-filters-and-comb-filters/3222/3" />
<meta property="og:title" content="Allpass filters and comb filters" />
<meta name="twitter:title" content="Allpass filters and comb filters" />
<meta property="og:description" content="@SmashedTransistors already gave a good summary. Here are some additions and links. Hopefully this will be helpful:   Combs  When the first steps in artifical reverberation were taken, the basic design idea was to take a signal, delay it by some amount and play it back to the listener. The delayed signal is then fed back into the delay.                         [image]             This idea came from a very basic model of a rooms acoustics, where basically the same happens: A sound will travel th..." />
<meta name="twitter:description" content="@SmashedTransistors already gave a good summary. Here are some additions and links. Hopefully this will be helpful:   Combs  When the first steps in artifical reverberation were taken, the basic design idea was to take a signal, delay it by some amount and play it back to the listener. The delayed signal is then fed back into the delay.                         [image]             This idea came from a very basic model of a rooms acoustics, where basically the same happens: A sound will travel th..." />


  </head>
  <body class="crawler">
    
    <header>
      <a href="/"><img src="/uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo" style="max-width: 150px;"></a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1>
  <a href="/t/allpass-filters-and-comb-filters/3222">Allpass filters and comb filters</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="/c/lounge" itemprop="url">
        <span itemprop="title">Lounge</span>
      </a>
    </div>
</div>





<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/Sputnki'><b itemprop='author'>Sputnki</b></a>
           
           <time datetime='2017-04-15T18:44:58Z' itemprop='datePublished'>
             2017-04-15 18:44:58 UTC
           </time>
        </span>
        <span itemprop='position'>#1</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>What's the difference? I can't really get it.. They both involve a delay line, but the comb filter can be configured to have feedback.<br>But isn't a comb filter in feed forward mode the same thing as an allpass?<br>I don't understand <img src="//community.axoloti.com/images/emoji/emoji_one/confused.png?v=3" title=":confused:" class="emoji" alt=":confused:"></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Allpass filters and comb filters'>
      <hr>
            <a href="https://sebiik.github.io/community.axoloti.com.backup/t/reverbs-creation/1071/59">Reverbs creation</a>
            <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/SmashedTransistors'><b itemprop='author'>SmashedTransistors</b></a>
           
           <time datetime='2017-04-15T23:32:22Z' itemprop='datePublished'>
             2017-04-15 23:32:22 UTC
           </time>
        </span>
        <span itemprop='position'>#2</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>They are cousins. <br>They are almost the same in the temporal domain. They differ in the spectral domain.</p>

<p>In the spectral domain a comb filter will have multiple resonances and notches... hence the "comb" in it s name. Sonically, it will change the timbre of a sound by amplifying some frequencies and r3ducing somes others.</p>

<p>In the spectral domain an all pass filter will let pass all the frequencies. Hence it s name. All frequencies will pass through it, the spectrum will be preserved, but some frequencies will be spread in time. That s why they are a main ingredient of reverbs.</p>

<p>Even if all pass filters are theoretically "colorless" they tend to have some metallic tonalities especially when they are 50ms to 200ms long.</p>

<p>All pass filters can be used in series. In this case, use various lengths in order to obtain a smooth sound.</p>

<p>Comb filters are better use in parallel.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:4'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Allpass filters and comb filters'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/TheSlowGrowth'><b itemprop='author'>TheSlowGrowth</b></a>
           
           <time datetime='2017-04-17T20:39:12Z' itemprop='datePublished'>
             2017-04-17 20:39:12 UTC
           </time>
        </span>
        <span itemprop='position'>#3</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p><a class="mention" href="/users/smashedtransistors">@SmashedTransistors</a> already gave a good summary. Here are some additions and links. Hopefully this will be helpful:</p>

<h2>Combs</h2>

<p>When the first steps in artifical reverberation were taken, the basic design idea was to take a signal, delay it by some amount and play it back to the listener. The delayed signal is then fed back into the delay. <br>          <a href="http://www.music.miami.edu/programs/mue/research/jfrenette/chapter_2/image028.gif" rel="nofollow noopener">
            <img src="http://www.music.miami.edu/programs/mue/research/jfrenette/chapter_2/image028.gif" width="233" height="73">
          </a>
<br>This idea came from a very basic model of a rooms acoustics, where basically the same happens: A sound will travel through the room, reflect off a surface and eventually come back to the listener. The traveling through the air is modeled with the delay, the reflection is modeled with the feedback. Obviously in a real room there are a lot of reflections, so an ideal model would have a lot of delays feeding back into each other.<br>As it turns out, the frequency spectrum of this simple reverberator looks like a comb, hence it was named a comb filter. <br>          <a href="https://ccrma.stanford.edu/~jos/pasp/img510.png" rel="nofollow noopener">
            <img src="https://ccrma.stanford.edu/~jos/pasp/img510.png" width="638" height="500">
          </a>
 <br>(<a href="https://ccrma.stanford.edu/~jos/pasp/Feedback_Comb_Filter_Amplitude.html" rel="nofollow noopener">The image is taken from here, where you will also find additional information</a>)<br>As pointed out already, there are peaks in this frequency response, and those peaks sit at multiples of a fundamental frequency. That's why combs filters sound very metallic, like a ringing string.</p>

<p>If you take multiple of these filters and interconnect them, you can approach the acoustics of a real room. By adding more delays and interconnecting them, you basically add more reflective surfaces to the room model. But the result will always be a network of comb filters and they will always suffer from some ringing due to the "comb" nature of their transfer functions. Nevertheless, <a href="http://www.music.miami.edu/programs/mue/mue2003/research/jfrenette/chapter_3/chapter_3.html" rel="nofollow noopener">comb filters can be used for sophisticated reverberation</a>, if you have enough of them and take some additional precautions to avoid ringing and make the decay equal in all frequencies.</p>

<h2>Allpasses</h2>

<p>On the other hand, <a href="https://ccrma.stanford.edu/~jos/pasp/Allpass_Two_Combs.html" rel="nofollow noopener">the schroeder allpass is constructed from two comb filters</a>, one feedback comb and one feedforward comb:</p>

          <a href="https://ccrma.stanford.edu/~jos/pasp/img594.png" rel="nofollow noopener">
            <img src="https://ccrma.stanford.edu/~jos/pasp/img594.png" width="563" height="154">
          </a>


<p>If <code>b0 = -aM</code>, this filter looses its "comb" nature and will have a flat frequency response. Frequencies that go in, will come out with the same amplitude, but different frequencies will be delayed by different amounts. Basically the schroeder allpass is like a "blur" effect for audio - making it ideal for reverbs. </p>

<h2>Regarding artificial reverberation:</h2>

<p>It is important to understand that a real room has an exponential decay, but the allpass doesn't. So allpasses alone are not good as a reverb. Interestingly, the comb filter has a exponential decay so it would work as a reverb. But it has the ringing that sounds very metallic and unnatural. To resolve this issue, you can combine the two:</p>

<p>You take a single comb filter and make the delay so long that the valleys and peaks in the "comb" of the frequency response become so wide that all audible frequencies basically sit on the same peak - that means that the frequency response will be basically flat for all audible frequencies. Now the ringing is gone. Note that such a comb filter will have a delay time long enough that individual echos are audible. Basically it is nothing else than a echo delay effect. <br>However, in a reverb, you don't want to hear individual echos, so you add an allpass filter into the signal chain (considering the image of the comb from the top of my post, you would add the allpass right after the <code>z^-m</code> delay, before the signal goes to the output). The allpass will smear and blur the audio so that transients will be spread out and the individual echos become hardly noticable.<br>The resulting sound of this "allpass in a comb with a long delay time"-structure will have the exponential decay from the comb combined with the blurring of the allpass.</p>

<p>To my knowledge, many algorithmic reverbs are based on this structure. A simple delay (or a network of interconnected delays) creates the exponential decay of the room without ringing and allpasses are inserted to blur out the transients. Sometimes additional allpasses are added to the input of the reverb as well. There is a lot of creative freedom. The allpasses can be left out for a more grainy reverb - you will find this option in the form of a "diffusion" knob on many reverb processors.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:7'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Allpass filters and comb filters'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/Sputnki'><b itemprop='author'>Sputnki</b></a>
           
           <time datetime='2017-04-18T10:12:46Z' itemprop='datePublished'>
             2017-04-18 10:12:46 UTC
           </time>
        </span>
        <span itemprop='position'>#4</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Thank you guys for the explanation! Now i can look at factory objects' code with far more insight!</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Allpass filters and comb filters'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/ricard'><b itemprop='author'>ricard</b></a>
           
           <time datetime='2017-05-12T04:45:39Z' itemprop='datePublished'>
             2017-05-12 04:45:39 UTC
           </time>
        </span>
        <span itemprop='position'>#5</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Thanks <a class="mention" href="/users/theslowgrowth">@TheSlowGrowth</a> for great explanation!</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Allpass filters and comb filters'>
      <hr>
  </div>






    </div>
    <footer class="container">
      <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <a href='/'>Home</a>
        <a href="/categories">Categories</a>
        <a href="/guidelines">FAQ/Guidelines</a>
        <a href="/tos">Terms of Service</a>
        <a href="/privacy">Privacy Policy</a>
      </nav>
      <p>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
