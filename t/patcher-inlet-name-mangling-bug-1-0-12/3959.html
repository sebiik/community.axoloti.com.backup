<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from community.axoloti.com/t/patcher-inlet-name-mangling-bug-1-0-12/3959 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 10 Jul 2023 16:53:09 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Patcher inlet name mangling bug 1.0.12 - Helpdesk - Axoloti Community</title>
    <meta name="description" content="I think there might be a bug in the patcher. For the audio rate sample buffer type frac32buffer, the patcher mangles the patch source (build/xpatch.cpp) when an audio rate input has a name that ends in a number with more&amp;hellip;">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.9.0.beta3 - https://github.com/discourse/discourse version 13f3de4bf673802eb8ec595d36587b4524773209">
<link rel="icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="3959.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://sebiik.github.io/community.axoloti.com.backup","potentialAction":{"@type":"SearchAction","target":"https://sebiik.github.io/community.axoloti.com.backup/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Axoloti Community Search">

        <link href="../../stylesheets/desktop_d93a33ca8617326fe353f80e6ab865188244d48c8e0b.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop"/>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','../../../www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Patcher inlet name mangling bug 1.0.12&#39;" href="3959.rss" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://sebiik.github.io/community.axoloti.com.backup/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:image" content="https://sebiik.github.io/community.axoloti.com.backup/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:url" content="https://sebiik.github.io/community.axoloti.com.backup/t/patcher-inlet-name-mangling-bug-1-0-12/3959" />
<meta name="twitter:url" content="https://sebiik.github.io/community.axoloti.com.backup/t/patcher-inlet-name-mangling-bug-1-0-12/3959" />
<meta property="og:title" content="Patcher inlet name mangling bug 1.0.12" />
<meta name="twitter:title" content="Patcher inlet name mangling bug 1.0.12" />
<meta property="og:description" content="I think there might be a bug in the patcher. For the audio rate sample buffer type frac32buffer, the patcher mangles the patch source (build/xpatch.cpp) when an audio rate input has a name that ends in a number with more than 2 digits. Other inlet types work as expected.   In the object &quot;drj/mux/mux 12&quot; :     &lt;inlets&gt;      ...      &lt;frac32buffer name=&quot;i10&quot; description=&quot;input 10&quot;/&gt;      &lt;frac32buffer name=&quot;i11&quot; description=&quot;input 11&quot;/&gt;      ...   &lt;/inlets&gt;    &lt;code.srate&gt;&lt;![CDATA[   switch(inlet_..." />
<meta name="twitter:description" content="I think there might be a bug in the patcher. For the audio rate sample buffer type frac32buffer, the patcher mangles the patch source (build/xpatch.cpp) when an audio rate input has a name that ends in a number with more than 2 digits. Other inlet types work as expected.   In the object &quot;drj/mux/mux 12&quot; :     &lt;inlets&gt;      ...      &lt;frac32buffer name=&quot;i10&quot; description=&quot;input 10&quot;/&gt;      &lt;frac32buffer name=&quot;i11&quot; description=&quot;input 11&quot;/&gt;      ...   &lt;/inlets&gt;    &lt;code.srate&gt;&lt;![CDATA[   switch(inlet_..." />


  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html"><img src="../../uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo" style="max-width: 150px;"></a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1>
  <a href="3959.html">Patcher inlet name mangling bug 1.0.12</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/helpdesk.html" itemprop="url">
        <span itemprop="title">Helpdesk</span>
      </a>
    </div>
</div>





<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/DrJustice-2.html'><b itemprop='author'>DrJustice</b></a>
           
           <time datetime='2017-11-24T19:14:56Z' itemprop='datePublished'>
             2017-11-24 19:14:56 UTC
           </time>
        </span>
        <span itemprop='position'>#1</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I think there might be a bug in the patcher. For the audio rate sample buffer type frac32buffer, the patcher mangles the patch source (build/xpatch.cpp) when an audio rate input has a name that ends in a number with more than 2 digits. Other inlet types work as expected.</p>

<p>In the object "drj/mux/mux 12" :</p>

<pre><code>  &lt;inlets&gt;
     ...
     &lt;frac32buffer name="i10" description="input 10"/&gt;
     &lt;frac32buffer name="i11" description="input 11"/&gt;
     ...
  &lt;/inlets&gt;

  &lt;code.srate&gt;&lt;![CDATA[   switch(inlet_s&gt;0?inlet_s:0){
  ... 
// in 1.0.12 this code:

  case 10: outlet_o= inlet_i10;break;
  case 11: outlet_o= inlet_i11;break;
  default: outlet_o= inlet_i11;break;

// gets mangled to (note the breaking up of the number "10" and "11"):

  case 10: outlet_o[buffer_index]= inlet_i1[buffer_index]0;break;
  case 11: outlet_o[buffer_index]= inlet_i1[buffer_index]1;break;
  default: outlet_o[buffer_index]= inlet_i1[buffer_index]1;break;
  ...
}
]]&gt;&lt;/code.srate&gt;</code></pre>

<p>To trigger the bug, make a new patch with just the "mux 12" audio rate object and start the patch compilation. The bug manifests itself on another user's Apple system as well as on my Windows system.</p>

<p>Edit to add: The "mux 12" object was made and tested on May 5, 2016 and left alone since then, except for some testing today.</p>

<p>I made a temporary workaround for a fellow Axoloti user by making a "mux 12b" object, replacing the two digit numbering 10 and 11 with A and B. I will deprecate that object when this bug gets fixed.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:2'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Patcher inlet name mangling bug 1.0.12'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/jaffasplaffa.html'><b itemprop='author'>jaffasplaffa</b></a>
           
           <time datetime='2017-11-25T07:45:18Z' itemprop='datePublished'>
             2017-11-25 07:45:18 UTC
           </time>
        </span>
        <span itemprop='position'>#2</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="1" data-topic="3959"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/community.axoloti.com/drjustice/40/1430_1.jpg" class="avatar">DrJustice:</div>
<blockquote><p>case 10: outlet_o[buffer_index]= inlet_i1[buffer_index]0;break;</p></blockquote></aside>

<p>I get this occasionally also and was not really able to find a pattern to why it did it. But it has to do with numbers in the names of the outlets, I think I only had the issue on S-rate outputs.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Patcher inlet name mangling bug 1.0.12'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/SmashedTransistors.html'><b itemprop='author'>SmashedTransistors</b></a>
           
           <time datetime='2017-11-25T11:03:21Z' itemprop='datePublished'>
             2017-11-25 11:03:21 UTC
           </time>
        </span>
        <span itemprop='position'>#3</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>if you name the inlets with a 0 prefix it should work: i00 i01 i02 i03 ... i10</p>

<hr>

<p>I think that <a class="mention" href="../../u/thetechnobear.html">@thetechnobear</a> works on the Axoloti editor, maybe he has more information. </p>

<p>I think the problem is that "inlet_i1" is a substring of 'inlet_i10" that confuses some replace algorithm that insert the [buffer_index].<br>Maybe it is possible to fix the bug with some regex used in the String.replaceAll</p>

<pre><code>newString = oldString.replaceAll(
     "(?&lt;![a-zA-Z0-9_])"
   + "inlet_"+inletName
   + "(?![a-zA-Z0-9_])"
);</code></pre>

<p>.</p>

<pre><code>(?![a-zA-Z0-9_])</code></pre>

<p>means "not followed" by any of the a to z A to Z 0 to 9 or _ characters</p>

<pre><code>(?&lt;![a-zA-Z0-9_])</code></pre>

<p>means "not preceded" by such characters (if somebody is vicious enough to name a variable T_inlet_i1 it won't cause trouble).</p>

<hr>

<p>I tested this regex here:<br><a href="https://regex101.com/" class="onebox" target="_blank">https://regex101.com/</a></p>

<p>regex:</p>

<pre><code>  (?&lt;![a-zA-Z0-9_])inlet_i1(?![a-zA-Z0-9_])</code></pre>

<p>test string:</p>

<pre><code>int32_t x = inlet_i1&gt;&gt;5;  // found
int32_t x =inlet_i1&gt;&gt;5;   // found
int32_t y = inlet_i10&gt;&gt;5; // not found
int32_t y = Tinlet_i1&gt;&gt;5; // not found</code></pre>

<p>it found inlet_i1 only where it is intended.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Patcher inlet name mangling bug 1.0.12'>
      <hr>
  </div>






    </div>
    <footer class="container">
      <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <a href='../../index.html'>Home</a>
        <a href="../../categories.html">Categories</a>
        <a href="../../guidelines.html">FAQ/Guidelines</a>
        <a href="../../tos.html">Terms of Service</a>
        <a href="../../privacy.html">Privacy Policy</a>
      </nav>
      <p>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  

<!-- Mirrored from community.axoloti.com/t/patcher-inlet-name-mangling-bug-1-0-12/3959 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 10 Jul 2023 16:53:10 GMT -->
</html>
