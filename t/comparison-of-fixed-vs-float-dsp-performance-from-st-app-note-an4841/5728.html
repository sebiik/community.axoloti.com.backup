<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from community.axoloti.com/t/comparison-of-fixed-vs-float-dsp-performance-from-st-app-note-an4841/5728 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 19 Jul 2023 03:10:30 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Comparison of fixed vs float DSP performance from ST app note AN4841 - Developer - Axoloti Community</title>
    <meta name="description" content="Stumbled on an ST app note AN4841 today and noticed an interesting section: 

[image] 

Apologies for the weird small image, struggling with this forum app, original pdf here. Obviously it&amp;#39;s tough to draw conclusions fro&amp;hellip;">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.9.0.beta3 - https://github.com/discourse/discourse version 13f3de4bf673802eb8ec595d36587b4524773209">
<link rel="icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="5728.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://sebiik.github.io/community.axoloti.com.backup","potentialAction":{"@type":"SearchAction","target":"https://sebiik.github.io/community.axoloti.com.backup/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Axoloti Community Search">

        <link href="../../stylesheets/desktop_d93a33ca8617326fe353f80e6ab865188244d48c8e0b.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop"/>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','../../../www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Comparison of fixed vs float DSP performance from ST app note AN4841&#39;" href="5728.rss" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://sebiik.github.io/community.axoloti.com.backup/uploads/default/optimized/2X/b/b7092e3ff70acd08fbe57d4580379923f4f7be1e_1_369x500.png" />
<meta property="og:image" content="https://sebiik.github.io/community.axoloti.com.backup/uploads/default/optimized/2X/b/b7092e3ff70acd08fbe57d4580379923f4f7be1e_1_369x500.png" />
<meta property="og:url" content="https://sebiik.github.io/community.axoloti.com.backup/t/comparison-of-fixed-vs-float-dsp-performance-from-st-app-note-an4841/5728" />
<meta name="twitter:url" content="https://sebiik.github.io/community.axoloti.com.backup/t/comparison-of-fixed-vs-float-dsp-performance-from-st-app-note-an4841/5728" />
<meta property="og:title" content="Comparison of fixed vs float DSP performance from ST app note AN4841" />
<meta name="twitter:title" content="Comparison of fixed vs float DSP performance from ST app note AN4841" />
<meta property="og:description" content="Stumbled on an ST app note AN4841 today and noticed an interesting section:    [image]  Apologies for the weird small image, struggling with this forum app, original pdf here. Obviously it&#39;s tough to draw conclusions from random benchmarks. What struck me was that F32 performance seems to be roughly on par with Q31 performance if not slightly faster. This also gives a rough sense of how much additional headroom can be expected moving to an F7 over an F4. As mentioned elsewhere, I think the H7 is..." />
<meta name="twitter:description" content="Stumbled on an ST app note AN4841 today and noticed an interesting section:    [image]  Apologies for the weird small image, struggling with this forum app, original pdf here. Obviously it&#39;s tough to draw conclusions from random benchmarks. What struck me was that F32 performance seems to be roughly on par with Q31 performance if not slightly faster. This also gives a rough sense of how much additional headroom can be expected moving to an F7 over an F4. As mentioned elsewhere, I think the H7 is..." />


  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html"><img src="../../uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo" style="max-width: 150px;"></a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1>
  <a href="5728.html">Comparison of fixed vs float DSP performance from ST app note AN4841</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/developer.html" itemprop="url">
        <span itemprop="title">Developer</span>
      </a>
    </div>
</div>





<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/urklang.html'><b itemprop='author'>urklang</b></a>
           
           <time datetime='2019-05-20T23:07:19Z' itemprop='datePublished'>
             2019-05-20 23:07:19 UTC
           </time>
        </span>
        <span itemprop='position'>#1</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Stumbled on an ST app note AN4841 today and noticed an interesting section:</p>

<p><div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/b7092e3ff70acd08fbe57d4580379923f4f7be1e" href="../../uploads/default/original/2X/b/b7092e3ff70acd08fbe57d4580379923f4f7be1e.png" class="lightbox" title="fft_perf.png"><img src="../../uploads/default/optimized/2X/b/b7092e3ff70acd08fbe57d4580379923f4f7be1e_1_369x500.png" width="369" height="500"><div class="meta">
<span class="filename">fft_perf.png</span><span class="informations">1399x1895 212 KB</span><span class="expand"></span>
</div></a></div></p>

<p>Apologies for the weird small image, struggling with this forum app, original pdf <a href="https://www.st.com/content/ccc/resource/technical/document/application_note/group0/c1/ee/18/7a/f9/45/45/3b/DM00273990/files/DM00273990.pdf/jcr:content/translations/en.DM00273990.pdf" rel="nofollow noopener">here</a>. Obviously it's tough to draw conclusions from random benchmarks. What struck me was that F32 performance seems to be roughly on par with Q31 performance if not slightly faster. This also gives a rough sense of how much additional headroom can be expected moving to an F7 over an F4. As mentioned elsewhere, I think the H7 is where we want to be looking going forward which bumps the clock rate up to 480Mhz but maintains pin compatibility with the F7. Not available until Q3 2019 according to ST.</p>

<p>As an aside: in one of my own projects I haven't been able to convince myself that the extra special ARM DSP F32 routines are actually faster in practice than the vanilla ARM GCC math library; I've looked at mainly <code>sin</code> and <code>sqrt</code>. Would be interested to hear others' experiences there.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Comparison of fixed vs float DSP performance from ST app note AN4841'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/SmashedTransistors.html'><b itemprop='author'>SmashedTransistors</b></a>
           
           <time datetime='2019-05-21T17:20:48Z' itemprop='datePublished'>
             2019-05-21 17:20:48 UTC
           </time>
        </span>
        <span itemprop='position'>#2</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>One strength of the FPU is the number of available float registers (32) compared to the number of available integer register (considering that many integer registers are already used for "logistics": indexes, pointers...).</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Comparison of fixed vs float DSP performance from ST app note AN4841'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/weasel79.html'><b itemprop='author'>weasel79</b></a>
           
           <time datetime='2019-05-21T19:35:47Z' itemprop='datePublished'>
             2019-05-21 19:35:47 UTC
           </time>
        </span>
        <span itemprop='position'>#3</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I can't comment much on CPU efficiency of float vs integer but yeah this graph makes it look like a basic F7 would only be about a 50% improvement. The H7 x3 seems to be available already, which is a single core 400MHz, and two dual core models are announced for this month?<br><a href="https://www.st.com/en/microcontrollers-microprocessors/stm32h7-series.html" class="onebox" target="_blank" rel="nofollow noopener">https://www.st.com/en/microcontrollers-microprocessors/stm32h7-series.html</a></p>

<p>also this says they are fully backwards compatible to the ARM M4 instruction set.<br>and while the bare MCU is available for about 15$ the official ST evaluation boards start at over 400$ ?<br>edit: i learned about ST's EVAL/DISCO difference, DISCO boards are 50$ ish<br><a href="https://www.mouser.de/ProductDetail/STMicroelectronics/STM32H745I-DISCO" class="onebox" target="_blank" rel="nofollow noopener">https://www.mouser.de/ProductDetail/STMicroelectronics/STM32H745I-DISCO</a></p>

<p>but yeah i agree this is the level we should aim for</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Comparison of fixed vs float DSP performance from ST app note AN4841'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/urklang.html'><b itemprop='author'>urklang</b></a>
           
           <time datetime='2019-05-21T19:53:42Z' itemprop='datePublished'>
             2019-05-21 19:53:42 UTC
           </time>
        </span>
        <span itemprop='position'>#4</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>There's a version of the Nucleo board with an H7 for $23: <a href="https://www.mouser.com/ProductDetail/STMicroelectronics/NUCLEO-H743ZI?qs=5aG0NVq1C4zVqdFc0FeE%252Bw%3D%3D" rel="nofollow noopener">https://www.mouser.com/ProductDetail/STMicroelectronics/NUCLEO-H743ZI?qs=5aG0NVq1C4zVqdFc0FeE%252Bw%3D%3D</a></p>

<p>I'm a fan of the Nucleo dev boards. This is probably where I would start.</p>

<p>No stock at the moment though unfortunately; looks like they're still ramping up production.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Comparison of fixed vs float DSP performance from ST app note AN4841'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/deadsy.html'><b itemprop='author'>deadsy</b></a>
           
           <time datetime='2019-05-21T21:25:56Z' itemprop='datePublished'>
             2019-05-21 21:25:56 UTC
           </time>
        </span>
        <span itemprop='position'>#5</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>The CPU clock cycle counts for 32 bit integer operations and 32 bit float operations are about the same on a cortex M4. When you throw in a few scaling shifts for fixed point math, the float will often beat it. A few other points:</p>

<p>1) Divides are expensive (both float and integer), better to multiply by a constant.<br>2) Watch out for unintended doubles. E.g. Write "2.0f", not "2.0"</p>

<p>If in doubt - use objdump to look at the generated assembly code.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Comparison of fixed vs float DSP performance from ST app note AN4841'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/urklang.html'><b itemprop='author'>urklang</b></a>
           
           <time datetime='2019-05-21T21:35:06Z' itemprop='datePublished'>
             2019-05-21 21:35:06 UTC
           </time>
        </span>
        <span itemprop='position'>#6</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I've gotten in the habit of writing "1.0f" as well but I've been using <code>-fsingle-precision-constant</code> in my projects too which is a handy compiler flag to avoid unintended doubles. There's also <code>-Wdouble-promotion</code>.</p>

<p>It looks like some of the higher end F7/H7 models actually have hardware double support which would be interesting to explore.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Comparison of fixed vs float DSP performance from ST app note AN4841'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/SmashedTransistors.html'><b itemprop='author'>SmashedTransistors</b></a>
           
           <time datetime='2019-05-22T05:59:42Z' itemprop='datePublished'>
             2019-05-22 05:59:42 UTC
           </time>
        </span>
        <span itemprop='position'>#7</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Note that float divide and square root can run in parallel with integer operations.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Comparison of fixed vs float DSP performance from ST app note AN4841'>
      <hr>
  </div>






    </div>
    <footer class="container">
      <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <a href='../../index.html'>Home</a>
        <a href="../../categories.html">Categories</a>
        <a href="../../guidelines.html">FAQ/Guidelines</a>
        <a href="../../tos.html">Terms of Service</a>
        <a href="../../privacy.html">Privacy Policy</a>
      </nav>
      <p>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  

<!-- Mirrored from community.axoloti.com/t/comparison-of-fixed-vs-float-dsp-performance-from-st-app-note-an4841/5728 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 19 Jul 2023 03:10:31 GMT -->
</html>
