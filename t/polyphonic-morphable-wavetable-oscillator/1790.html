<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from community.axoloti.com/t/polyphonic-morphable-wavetable-oscillator/1790 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 10 Jul 2023 17:12:44 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Polyphonic morphable wavetable oscillator - Patching - Axoloti Community</title>
    <meta name="description" content="I was watching this video about a new eurorack module, it&amp;#39;s a morphable wavetable oscillator 

https://youtu.be/o2NITTPfNoc 

Has anyone tried making something like it? I understand making the wavetables is half the job.&amp;hellip;">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.9.0.beta3 - https://github.com/discourse/discourse version 13f3de4bf673802eb8ec595d36587b4524773209">
<link rel="icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="1790.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"http://community.axoloti.com","potentialAction":{"@type":"SearchAction","target":"http://community.axoloti.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Axoloti Community Search">

        <link href="../../stylesheets/desktop_d93a33ca8617326fe353f80e6ab865188244d48c8e0b.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop"/>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','../../../www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Polyphonic morphable wavetable oscillator&#39;" href="1790.rss" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:url" content="http://community.axoloti.com/t/polyphonic-morphable-wavetable-oscillator/1790" />
<meta name="twitter:url" content="http://community.axoloti.com/t/polyphonic-morphable-wavetable-oscillator/1790" />
<meta property="og:title" content="Polyphonic morphable wavetable oscillator" />
<meta name="twitter:title" content="Polyphonic morphable wavetable oscillator" />
<meta property="og:description" content="I was watching this video about a new eurorack module, it&#39;s a morphable wavetable oscillator     Has anyone tried making something like it? I understand making the wavetables is half the job.  Has anyone created something shareable that could do the same thing (with maybe just a few wavetables for the moment) ? I use single cycle wavetable synths on axoloti everyday, but I havn&#39;t found (or managed to make) a nice oscillator subpatch that includes smooth morphing along the wavetables.   P.S I kno..." />
<meta name="twitter:description" content="I was watching this video about a new eurorack module, it&#39;s a morphable wavetable oscillator     Has anyone tried making something like it? I understand making the wavetables is half the job.  Has anyone created something shareable that could do the same thing (with maybe just a few wavetables for the moment) ? I use single cycle wavetable synths on axoloti everyday, but I havn&#39;t found (or managed to make) a nice oscillator subpatch that includes smooth morphing along the wavetables.   P.S I kno..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="8 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="9 ❤" />

      <link rel="next" href="17904658.html?page=2">

  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html"><img src="../../uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo" style="max-width: 150px;"></a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1>
  <a href="1790.html">Polyphonic morphable wavetable oscillator</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/patching.html" itemprop="url">
        <span itemprop="title">Patching</span>
      </a>
    </div>
</div>

    <div class='tags-list' itemscope itemtype='http://schema.org/ItemList'>
        <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
          <meta itemprop='url' content='../../tags/wavetable.html'>
          <a href='../../tags/wavetable.html' itemprop='item'>
            <span itemprop='name'>wavetable</span>
          </a>
        </div>
    </div>




<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/mtyas.html'><b itemprop='author'>mtyas</b></a>
           
           <time datetime='2016-06-03T11:57:49Z' itemprop='datePublished'>
             2016-06-03 11:57:49 UTC
           </time>
        </span>
        <span itemprop='position'>#1</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I was watching this video about a new eurorack module, it's a morphable wavetable oscillator</p>

<div class="lazyYT" data-youtube-id="o2NITTPfNoc" data-youtube-title="Erica Synths Black Wavetable VCO demo" data-width="480" data-height="270" data-parameters="feature=oembed&amp;wmode=opaque"></div>

<p>Has anyone tried making something like it? I understand making the wavetables is half the job. <br>Has anyone created something shareable that could do the same thing (with maybe just a few wavetables for the moment) ?<br>I use single cycle wavetable synths on axoloti everyday, but I havn't found (or managed to make) a nice oscillator subpatch that includes smooth morphing along the wavetables.</p>

<p>P.S I know anon5189335 made something, but it's not online anymore (since he left) and I could have continued <a href="../proper-tablet-reading-for-wavetable-synths/499/60.html">this thread</a>, but as time and versions have gone by, I thought I'd start a new thread</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Polyphonic morphable wavetable oscillator'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/toneburst.html'><b itemprop='author'>toneburst</b></a>
           
           <time datetime='2016-06-03T14:05:17Z' itemprop='datePublished'>
             2016-06-03 14:05:17 UTC
           </time>
        </span>
        <span itemprop='position'>#2</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p><a class="mention" href="../../users/johannes.html">@johannes</a> was talking about anti-aliasing techniques the other day, and dropped a link to a technique that could work for arbitrary waves, with a bit of pre-processing of the wavetables. Maybe it's time someone had a go at applying some of the principles outlined.</p>

<p>I'd tackle it myself, but sadly I'm tied up with developing another set of custom objects at the moment.</p>

<p>Oh, and I'm stuck at primary-school level maths, sadly...</p>

<p>a|x</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Polyphonic morphable wavetable oscillator'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/thetechnobear.html'><b itemprop='author'>thetechnobear</b></a>
           
           <time datetime='2016-08-14T18:40:44Z' itemprop='datePublished'>
             2016-08-14 18:40:44 UTC
           </time>
        </span>
        <span itemprop='position'>#3</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Ive just added to the community library my wavetable objects <img src="../../images/emoji/emoji_one/slight_smile5e1f.png?v=2" title=":slight_smile:" class="emoji" alt=":slight_smile:"> <br><a href="../thetechnobear-contributions/1006.html">http://community.axoloti.com/t/thetechnobear-contributions</a></p>

<p>these make it a bit easier to load wavetables and also deals with a number of 'gotchas' for playing back wavetables, and also supports crossfading between waves.</p>

<p>Ive been having a lot of fun with these.<br>there is some 'skill' in producing decent wavetables, Ive been recently looking at Tone2 Icarus which has some really nice options for this, a lot more 'musical' than Serum.<br>I plan to do a short video showing the process of creating wavetables.</p>

<p>but in brief its pretty trivial, using audacity</p>

<ul>
<li>start audacity</li>
<li>load wave file</li>
<li>make sure its mono, or convert to mono (split stereo to mono, then delete one track)</li>
<li>now we need to ensure size is a power of 2<br>menu -&gt; effects -&gt; change speed<br>the trick here is you need to set new length (ignore the rest) <br>ensure new length is on samples (its the drop down next to it)<br>you can type in the length of the wave file you want. (remember 2^N!) <br>e.g. if your file contains 4 waves, and you want them sized at 512 samples each, then type in here 4 x 512 = 2048, in wave/wavetable load you will specify 4 and 512.</li>
<li>now to save as raw, <br>file -&gt; export audio <br>format = other uncompressed ,<br>options -&gt; header = RAW (header-less) , encoding  = signed 16 bit PCM, ok</li>
<li>save file where you want it.</li>
<li>axolotl wave/wavetable load, specify number of waves, and size of EACH, and then use choose to select raw file</li>
</ul>

<p>done <img src="../../images/emoji/emoji_one/slight_smile5e1f.png?v=2" title=":slight_smile:" class="emoji" alt=":slight_smile:"> </p>

<p>there are other options include ffmpeg (command line) and audio term (windows, very powerful but not easy  to use)</p>

<p>tips/notes:</p>

<ul>
<li>icarus, serum (and others) use 2048 for each wave, you can then set number of waves, I think for serum is 256 by default. (with icarus you can make as many as you want up to 256, but can have less) </li>
<li>size of each wave must be a power of 2, and also the number of waves is a power of 2... this is for 'efficiency' of processing.</li>
<li>forget sample rate... this is irrelevant when dealing with single cycle waves/wave tables. </li>
<li>you can use audacity (and others no doubt!) to combine wave files, just paste them on to the end , but make sure you size them first, especially if the waves are of different sizes.</li>
</ul>

<h3>anti-aliasing</h3>

<p>they will alias at high frequencies -  I looked at a technique for avoiding this, but it seems to involved re-synthesizing the wavetable for different frequencies, and from what I read that can in itself introduce artefacts. also you then need to store multiple copies of the wavetables... so memory goes really quickly.   I may give it a go when I have time, but the above actually seems to work quite nicely for me.</p>

<p>(I suspect you can do the high frequency trick 'manually' by creating high frequency forms of the wavetable in other software, and then using the appropriate wavetable in axoloti according to note number, but again, not experimented with this.)</p>

<p>Ive not looked at what <a class="mention" href="../../users/johannes.html">@johannes</a> suggested, it may or may not be the same... and also couple be outside my current DSP knowledge <img src="../../images/emoji/emoji_one/slight_smile5e1f.png?v=2" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:2'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Polyphonic morphable wavetable oscillator'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/toneburst.html'><b itemprop='author'>toneburst</b></a>
           
           <time datetime='2016-08-15T07:53:02Z' itemprop='datePublished'>
             2016-08-15 07:53:02 UTC
           </time>
        </span>
        <span itemprop='position'>#4</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I think the antialiasing technique <a class="mention" href="../../users/johannes.html">@johannes</a> mentioned doesn't involve multiple waveform versions, but does require pre-processing of the waves, and extra code to decide them when playing them back.</p>

<p>I do t know if there is a builtin function in Audacity to do the required pre-processing (but suspect not).</p>

<p>a|x</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Polyphonic morphable wavetable oscillator'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/thetechnobear.html'><b itemprop='author'>thetechnobear</b></a>
           
           <time datetime='2016-08-15T09:06:50Z' itemprop='datePublished'>
             2016-08-15 09:06:50 UTC
           </time>
        </span>
        <span itemprop='position'>#5</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="4" data-topic="1790"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v2/letter/t/b9e5f3/40.png" class="avatar">toneburst:</div>
<blockquote><p>PI think the antialiasing technique <a class="mention" href="../../users/johannes.html">@johannes</a> mentioned doesn't involve multiple waveform versions, but does require pre-processing of the waves, and extra code to decide them when playing them back.</p></blockquote></aside>

<p>do you have a link for this? <br>... the only method I found was FFT-&gt;strip harmonics -&gt; IFFT, repeat for different frequencies. this could be preprocessed, but then you are required to store the resulting waveforms from the IFFT... you wouldn't need that many i guess. but the FFTs are needed to be with large number of bins to retain any resemblance to the original source.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Polyphonic morphable wavetable oscillator'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/toneburst.html'><b itemprop='author'>toneburst</b></a>
           
           <time datetime='2016-08-15T09:36:11Z' itemprop='datePublished'>
             2016-08-15 09:36:11 UTC
           </time>
        </span>
        <span itemprop='position'>#6</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I think I may have been confusing a discussion here with one on another forum.</p>

<p>Try:<br><a href="http://www.idmt.fraunhofer.de/content/dam/idmt/en/documents/Personal Websites/Franck/publications/dafx2012_hoiws_talk.pdf" class="onebox" target="_blank" rel="nofollow">http://www.idmt.fraunhofer.de/content/dam/idmt/en/documents/Personal%20Websites/Franck/publications/dafx2012_hoiws_talk.pdf</a></p>

<p>There are other links, but about to go out. Will look them up later.</p>

<p>a|x</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Polyphonic morphable wavetable oscillator'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/toneburst.html'><b itemprop='author'>toneburst</b></a>
           
           <time datetime='2016-08-15T09:46:10Z' itemprop='datePublished'>
             2016-08-15 09:46:10 UTC
           </time>
        </span>
        <span itemprop='position'>#7</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>The technique is known as DPW, I think (couldn't remember the name, earlier).</p>

<p>There's probably example sourcecode available.</p>

<p>The maths is way over my head, sadly.</p>

<p>a|x</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Polyphonic morphable wavetable oscillator'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/toneburst.html'><b itemprop='author'>toneburst</b></a>
           
           <time datetime='2016-08-15T09:53:41Z' itemprop='datePublished'>
             2016-08-15 09:53:41 UTC
           </time>
        </span>
        <span itemprop='position'>#8</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Here's the discussion I confused with one here, from the Mutable Instruments forum (look for pichettes posts):</p>

<p><a href="http://mutable-instruments.net/forum/discussion/7163/sinc-interpolation/p1" class="onebox" target="_blank" rel="nofollow">http://mutable-instruments.net/forum/discussion/7163/sinc-interpolation/p1</a></p>

<p>Links to this paper:<br><a href="http://dafx.ca/proceedings/papers/p_169.pdf" class="onebox" target="_blank" rel="nofollow">http://dafx.ca/proceedings/papers/p_169.pdf</a></p>

<p>a|x</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Polyphonic morphable wavetable oscillator'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/thetechnobear.html'><b itemprop='author'>thetechnobear</b></a>
           
           <time datetime='2016-08-15T11:16:13Z' itemprop='datePublished'>
             2016-08-15 11:16:13 UTC
           </time>
        </span>
        <span itemprop='position'>#9</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>interesting... <br>I did some digging, and think I understand the basic concept of DPW, but unfortunately, I think the 'meat' of how to integrate the 'generic' wavetables is detailed in a paper called "Higher-Order Integrated Wavetable and Sampling Synthesis" , so I think id have to buy that, as I can't find any details/implementations.<br>the only implementations/examples of dpw I could find were using specific waveforms... so they 'know' the integration function..<br>the p169 paper seems to just give examples, not how to do it, over and above 'integrate the wavetable'</p>

<p>frankly though, the maths is probably beyond me, without some working examples, so unlikely I will pursue this, unless I stumble on some more details somewhere.</p>

<p>besides, for my current purposes, my wavetables were fine when used in 'reasonable pitch ranges' and using a bit of LP filtering where necessary.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Polyphonic morphable wavetable oscillator'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/thetechnobear.html'><b itemprop='author'>thetechnobear</b></a>
           
           <time datetime='2016-08-15T11:26:23Z' itemprop='datePublished'>
             2016-08-15 11:26:23 UTC
           </time>
        </span>
        <span itemprop='position'>#10</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>ok, so kept digging and found this... <br><a href="http://forum.cockos.com/showthread.php?p=1715341" class="onebox" target="_blank" rel="nofollow">http://forum.cockos.com/showthread.php?p=1715341</a></p>

<p></p><pre><code>desc:test PIWT
/* T.Rochebois 08/2016
  based on code developped at IEF/AXIS lab around 1997.
*/
slider1:32&lt;4,512,1&gt;Table length
// wavetable params
slider3:1&lt;0,10&gt;-R0
slider5:1&lt;0,10&gt;-R1
slider6:5.3&lt;0,10&gt;-I1
slider8:2&lt;0,10&gt;-R2
slider9:0.4&lt;0,10&gt;-I2
slider23:10&lt;0.2,10&gt;Glide rate
// ___________________________________________________________________
@init
function PIWT_init(nMax) instance(n x y z w dp _dp _dp3) (
  this.nMax = nMax;
  n = nMax;
  x = ad; ad += n;
  y = ad; ad += n;
  z = ad; ad += n;
  w = ad; ad += n;
  dp = n*440/srate;
  _dp = 1 / dp; 
  _dp3 = _dp * _dp * _dp;
);
// _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
function PIWT_dcRemove(t n) local(i m)(
  m = 0;  i = 0; loop(n, m += t[i]; i += 1; );
  m /= n; i = 0; loop(n, t[i] -= m; i += 1; );
);
// _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _   
function PIWT_integ()
  instance(x n y z w z y x)
  local(i)(
  PIWT_dcRemove(x, n);
  i = 0; loop(n-1, y[i+1] = y[i] + x[i];                i += 1;  );
  PIWT_dcRemove(y, n);
  i = 0; loop(n-1, z[i+1] = z[i] + y[i] + (1/2) * x[i]; i += 1;  );
  PIWT_dcRemove(z, n);
  i = 0; loop(n,
    y[i] *= 1/2;
    x[i] *= 1/6;
    i &lt; n-1 ? w[i+1] = w[i] + z[i] + y[i] + x[i];
    i += 1;
  );
  PIWT_dcRemove(w, n);
);
// _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
// Call before aProc if there is a discontinuity of dp _dp
function PIWT_disc() 
  instance(n dp _dp _dp3 p out w z y x w0 w1 w2) local(p0 a)(
  p -= 2*dp; p += n * (p &lt; 0); p -= n * (p &gt;= n); p0 = p|0; a = p - p0; 
  w0 = w[p0] + a * (z[p0] + a * (y[p0] + a * x[p0]));
  p += dp; p -= n*(p&gt;=n); p0 = p|0; a = p-p0;
  w1 = w[p0] + a * (z[p0] + a * (y[p0] + a * x[p0]));
  p += dp; p -= n*(p&gt;=n); p0 = p|0; a = p-p0;
  w2 = w[p0] + a * (z[p0] + a * (y[p0] + a * x[p0]));
);
// _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
function PIWT_aProc()
  instance(n dp _dp _dp3 p out w z y x w0 w1 w2 w3) local(p0 a)(
  p += dp; p -= n*(p&gt;=n); p0 = p|0; a = p-p0;
  w3 = w[p0] + a * (z[p0] + a * (y[p0] + a * x[p0]));
  out = (w3 - w0 + 3 * (w1 - w2)) * _dp3;
  w0 = w1; w1 = w2; w2 = w3;
  out;
);
// ___________________________________________________________________
// Init the wave table
_srate = 1 / srate;
piwt.PIWT_init(512);
  dpLfo = 2*$pi*5.5*32/srate;
// ___________________________________________________________________
@slider
slider20 != aslider20 ? (
  dpc = (piwt.n*440/srate)*2^((slider20-69)*(1/12));
  abs(slider20 - aslider20) &gt;= 12 ?  piwt.PIWT_disc();
  aslider20 = slider20;
);
slider1 !== aslider1 || slider3 != aslider3 
 || slider5 != aslider5 || slider6 != aslider6
 || slider8 != aslider8 || slider9 != aslider9 ? (
  slider1 = min(512,max(4,slider1|=0));
  piwt.n = n = slider1;
  piwt.dp =dpg = dpc = (piwt.n*440/srate)*2^((note-69)*(1/12));
  i = 0; loop(n,
    phi = 2*$pi*i/n;
    piwt.x[i] = sin(slider3 * phi 
      + slider6 * sin(slider5 * phi
        + slider9 * sin(slider8 * phi))); // &lt;--- Rich wavetable
    i+=1;
  );
  piwt.PIWT_integ();
  piwt.PIWT_disc();
  aslider1 = slider1;  aslider3 = slider3;
  aslider5 = slider5;  aslider6 = slider6;
  aslider8 = slider8;  aslider9 = slider9;
);
// ___________________________________________________________________
@block
while (midirecv(offset, msg1, msg23)) (
  msg2 = msg23 &amp; 0x7F; msg3 = msg23 &gt;&gt; 8; status = msg1 &amp; $xF0;
  status == $x80 ? ( status = $x90; msg3 = 0; );  // note off
  status == $x90 ? (                              // note on
    msg3 == 0 ? (msg2 == note ? gate = gate2 = 0; )
  : ( 
      note = msg2;
      dpc = (piwt.n*440*_srate) * 2 ^ ((note - 69) * (1/12));
      gate2 == 0 ? (dpg = dpc;);
      gate2 = msg3 * (1/127);
      gate = sqrt(gate2);   
    );
  );
  midisend(offset, msg1, msg23);
);
// ___________________________________________________________________
@sample
k &lt;= 0 ? (
  k = 32;
  pLfo += dpLfo; pLfo -= 2*$pi*(pLfo&gt;0);
  dpg  += 32*_srate*slider23 * (dpc - dpg);
  piwt.dp = dpg * (1+ 0.01*sin(pLfo));
  piwt._dp = 1 / piwt.dp;
  piwt._dp3 = piwt._dp * piwt._dp * piwt._dp;
  piwt.PIWT_disc();
);
k -= 1;
env += (gate&gt;env ? 0.01: 0.0001) * (gate - env);
spl0 = spl1 = min(2,max(-2,env*piwt.PIWT_aProc()));</code></pre>

<p>I'll take a look at this, see if I can understand whats going on <img src="../../images/emoji/emoji_one/slight_smile5e1f.png?v=2" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Polyphonic morphable wavetable oscillator'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/SmashedTransistors.html'><b itemprop='author'>SmashedTransistors</b></a>
           
           <time datetime='2016-12-18T01:16:17Z' itemprop='datePublished'>
             2016-12-18 01:16:17 UTC
           </time>
        </span>
        <span itemprop='position'>#11</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hello,</p>

<p>Eh, that's one of my JSFX plugin <img src="../../images/emoji/emoji_one/wink30f4.png?v=3" title=":wink:" class="emoji" alt=":wink:"></p>

<p>That's a 3rd order differentiation of a pre integrated wavetable:</p>

<ul>
<li>The <span class="mention">@slider</span> section calculates a wavetable (based on some kind of phase modulation but anything is possible here as long as it generates a wavetable)</li>
<li>The function PIWT_integ does the pre integration step :<ul>
<li>The function is considered as a set of  polynomial segments (not isolated samples)</li>
<li>The pre integration consist in calculating the polynomial coefficients for the 3rd order integrated function.</li>
<li>x y z and w are tables that contain the polynomial coefficients for the third order integration.</li>
</ul>
</li>
<li>PIWT_aProc is the main function<ul>
<li>p is the phase </li>
<li>dp is the phase increment </li>
<li>p0 is the integer part of the phase: aka the segment number</li>
<li>a is the float part of the phase</li>
<li>w3 is the more recent value of the 3rd order integral ( w3 = w[p0] + a * (z[p0] + a * (y[p0] + a * x[p0])); )</li>
<li>w2 w1 w0 are past value of the integral</li>
<li>out = (w3 - w0 + 3 * (w1 - w2)) * _dp3; is a third order differentiator with normalisation by 1 / dp^3</li>
</ul>
</li>
</ul>

<p>The problem with third order DPW is that it needs double precision.</p>

<p>I tried to summarize some ideas (including anti alias of distortions) in a small doc here :<br><a href="http://stash.reaper.fm/28384/DifferentiatedPolynomialWaveTables.pdf" rel="nofollow">http://stash.reaper.fm/28384/DifferentiatedPolynomialWaveTables.pdf</a></p>

<p>Maybe it is possible to do some 3rd order DPW by using some 64bit fixed point arithmetic... <br>but I'm still quite new to the Axoloti and a little clumsy with fixed point.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:2'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Polyphonic morphable wavetable oscillator'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/Sputnki.html'><b itemprop='author'>Sputnki</b></a>
           
           <time datetime='2016-12-18T08:05:11Z' itemprop='datePublished'>
             2016-12-18 08:05:11 UTC
           </time>
        </span>
        <span itemprop='position'>#12</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Is really that important to use third order integration? Couldn't you just stop to second order?</p>

<p>As for operation with 64bits, i fear it's not possible, not with floating point or fixed point, that's because of the architecture of the cortex M4. (Actually you can use 64bit floats, but they will make the cpu fly up into the sky)</p>

<p>What if you work with a decimated wavetable? (8bit)<br>I mean, if you need more precision i guess it's always relative to something else. If you aim to produce a 8-bit wavetable, having a 32-bit workspace should be plenty.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Polyphonic morphable wavetable oscillator'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/SmashedTransistors.html'><b itemprop='author'>SmashedTransistors</b></a>
           
           <time datetime='2016-12-19T18:18:47Z' itemprop='datePublished'>
             2016-12-19 18:18:47 UTC
           </time>
        </span>
        <span itemprop='position'>#13</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Well, <br>with third order integration, as far as i experimented with JSFX/Reaper, at 48kHz there is almost no audible aliasing.</p>

<p>I think i will start with first order (I think that Johannes already implemented some first order DPW to generate bandlimited square). And give second order a try.</p>

<p>My goal is to implement a wavetable osc that can be phase modulated.<br>=&gt; DPW with audio rate divisions.</p>

<p>I don't think that using a 8 bit table will be helpful.</p>

<p>The accuracy problems are both at the numerator and denominator sides.<br>The numerator is a difference of two polynomials.<br>The denominator is a difference of two consecutive modulated phases.</p>

<p>I think that the length of the table has a greater impact on the artefacts.<br>Maybe, some consistency tricks between the error in the numerator and denominator can help...<br>Well, I'll have to experiment somewhat.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Polyphonic morphable wavetable oscillator'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/toneburst.html'><b itemprop='author'>toneburst</b></a>
           
           <time datetime='2016-12-19T19:16:18Z' itemprop='datePublished'>
             2016-12-19 19:16:18 UTC
           </time>
        </span>
        <span itemprop='position'>#14</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I'm watching this thread with interest.</p>

<p>Could you envisage the Axoloti being able to record samples and convert them to the band-limited wavetables you mention? It wouldn't necessarily have to do the pre-processing in realtime, but the ability to record a snippet of audio, then automatically create a wavetable from it would be great!</p>

<p>From my point of view, that's the killer feature most hardware wavetable synths lack (except for the Waldorf NW1 Eurorack module).</p>

<p>a|x</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:3'>
      <meta itemprop='headline' content='Polyphonic morphable wavetable oscillator'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/jaffasplaffa.html'><b itemprop='author'>jaffasplaffa</b></a>
           
           <time datetime='2016-12-19T19:47:11Z' itemprop='datePublished'>
             2016-12-19 19:47:11 UTC
           </time>
        </span>
        <span itemprop='position'>#15</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="14" data-topic="1790"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v2/letter/t/b9e5f3/40.png" class="avatar">toneburst:</div>
<blockquote><p>the ability to record a snippet of audio, then automatically create a wavetable from it would be great!</p></blockquote></aside>

<p><a class="mention" href="../../users/toneburst.html">@toneburst</a> <br>You can do this with my wavetable patch, from the community library. Instead of using the sine/saw career subpatch you could use an input. I all ready experimented  a bit with making wavetables out of all kinds of samples, internally in Axoloti. Works pretty well. In some cases it is favourable to add a window function to remove click, especially from movies clips, etc.</p>

<p>I also made a wavetable subpatch, which can morph between several waves. Here you go:<br><a class="attachment" href="../../uploads/default/original/2X/7/4%20morph%20FOR%20COM%201.axp">4 morph FOR COM 1.axp</a> (27.7 KB)</p>

<p>You can use this version with a "multi wavetable", with more than 1 wave. Using <a class="mention" href="../../users/thetechnobear.html">@thetechnobear</a> wavetable object it is pretty easy to set up. </p>

<p>If you for example have a 128 waves wavetable you can, with the index knobs, select 4 waves to morph between, with MORPH knob. And there is also an octave switch for each wave for extra fun <img src="../../images/emoji/emoji_one/slight_smile30f4.png?v=3" title=":slight_smile:" class="emoji" alt=":slight_smile:"> </p>

<p>You can also make a wavetable consisting of only 4 waves and moprh between them. This is very "Sd-ram friendly", you get a lot of different waves and only use very little sd ram. </p>

<p>Id love if someone made a dedicated object like this, that were more efficient. And maybe with more waves to morph between.</p>

<p><div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/f8b8a6cdea8aa3c8ba1349f7cab417983f5a9a93" href="../../uploads/default/original/2X/f/f8b8a6cdea8aa3c8ba1349f7cab417983f5a9a93.png" class="lightbox" title="wt4.png"><img src="../../uploads/default/optimized/2X/f/f8b8a6cdea8aa3c8ba1349f7cab417983f5a9a93_1_690x377.png" width="690" height="377"><div class="meta">
<span class="filename">wt4.png</span><span class="informations">793x434 45.8 KB</span><span class="expand"></span>
</div></a></div></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Polyphonic morphable wavetable oscillator'>
      <hr>
            <a href="../new-antialiasing-technique/2461/15.html">New Antialiasing Technique?</a>
            <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/thetechnobear.html'><b itemprop='author'>thetechnobear</b></a>
           
           <time datetime='2016-12-19T20:46:23Z' itemprop='datePublished'>
             2016-12-19 20:46:23 UTC
           </time>
        </span>
        <span itemprop='position'>#16</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="14" data-topic="1790"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v2/letter/t/b9e5f3/40.png" class="avatar">toneburst:</div>
<blockquote><p>the ability to record a snippet of audio, then automatically create a wavetable from it would be great!</p></blockquote></aside>

<p>if you going down to single cycles, isn't this pretty much granular synthesis? <br>if your doing longer 'phrases' then this is slicing?</p>

<p>or are you thinking of something else?</p>

<p>my wavetable object could be relatively easily adapted to live input, it just using a table ... and it needs to know the table side (same for recording into a buffer, so no difference there) and number of waves... this currently is done at compile time (for efficiency /compiler optimisation), but make a 'variable' version, slightly less efficient is a tiny code change.</p>

<p>I think personally the issue, when you get into recording , is how does the user control this, and see whats going on... if you look at something like the push2 or octatrack they display the waves and allow the users to navigate thru it.... and I think you really need this to be useful.<br>squashing this all into the current scope type control is ok, as for now, but really we need more control than this.. e.g. bigger displays and more importantly it needs to be completely disconnected from the PC/Mac java UI to support the standalone nature of axoloti.<br>What I want to do, is have viewable display buffers, so that things like axocontrol and push2 could have this kind of 'interactive nature', and the user to be able to patch the interaction -  but more on this at a later date  <img src="../../images/emoji/emoji_one/wink30f4.png?v=3" title=":wink:" class="emoji" alt=":wink:"></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Polyphonic morphable wavetable oscillator'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/jaffasplaffa.html'><b itemprop='author'>jaffasplaffa</b></a>
           
           <time datetime='2016-12-19T21:17:15Z' itemprop='datePublished'>
             2016-12-19 21:17:15 UTC
           </time>
        </span>
        <span itemprop='position'>#17</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="16" data-topic="1790"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/community.axoloti.com/thetechnobear/40/6_1.html" class="avatar">thetechnobear:</div>
<blockquote><p>if you going down to single cycles, isn't this pretty much granular synthesis?</p></blockquote></aside>

<p>if you for example use 128X 2048 waves = 262144 samples.. Which is around 5 seconds. Then you can make a wavetable out of a word or something like that. This sound a bit different than granular synthesis. Both are fun, though <img src="../../images/emoji/emoji_one/slight_smile30f4.png?v=3" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Polyphonic morphable wavetable oscillator'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/thetechnobear.html'><b itemprop='author'>thetechnobear</b></a>
           
           <time datetime='2016-12-19T22:00:28Z' itemprop='datePublished'>
             2016-12-19 22:00:28 UTC
           </time>
        </span>
        <span itemprop='position'>#18</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>well, I guess sample playback, granular synthesis and wavetables are all related, basically chunking up waves and moving the origin point <img src="../../images/emoji/emoji_one/slight_smile30f4.png?v=3" title=":slight_smile:" class="emoji" alt=":slight_smile:">  (some granular synths are pretty flexible with grain sizes )</p>

<p>anyway, Id wonder how you'd get reasonable cross points for record audio, its not like its going to 'magically' zero cross (or ends match directions) , so its going to be pretty crunchy.<br>I kind of thing of wavetables as being 'prepared' such that the individual waves are 'nicely formed', and even arranged in a manner, such that morphing makes sense.</p>

<p>hmmm... gives me an idea, this could be done with recorded data, if you did a bit of analysis ... a bit like is done with slicing. might be a slight delay, before the wavetable would be 'ready', as it would have to be done off the audio thread, to ensure no audio glitches.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Polyphonic morphable wavetable oscillator'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/jaffasplaffa.html'><b itemprop='author'>jaffasplaffa</b></a>
           
           <time datetime='2016-12-20T06:41:58Z' itemprop='datePublished'>
             2016-12-20 06:41:58 UTC
           </time>
        </span>
        <span itemprop='position'>#20</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="18" data-topic="1790"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/community.axoloti.com/thetechnobear/40/6_1.html" class="avatar">thetechnobear:</div>
<blockquote><p>well, I guess sample playback, granular synthesis and wavetables are all related</p></blockquote></aside>

<p>Yeah related, but not the same. Wavetables are tuned, som they work the same way as an oscillator, you can play it like any oscillator, with the tonal benefits of an oscillator. Most granular stuff is a bit more diffuse. Maybe some granular effects you can sync the grainsizes to clock, but that is not the same as using it as a tunable oscillator. That is one of the main differences between wavetables and granular.</p>

<aside class="quote" data-post="18" data-topic="1790"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/community.axoloti.com/thetechnobear/40/6_1.html" class="avatar">thetechnobear:</div>
<blockquote><p>anyway, Id wonder how you'd get reasonable cross points for record audio, its not like its going to 'magically' zero cross (or ends match directions) , so its going to be pretty crunchy.</p></blockquote></aside>

<p>Not that hard to do. Use a window function when recording, so you get the fade in and out. As mentioned above, this is really important when trying to use for example audio from a movie, which has got complicated audio signal. In that case it can be hard to find a zero crossing, epsecially one that fits into the grid of the wavetable indexing.... So you have to make them yourself. I would suggest a custom window function for this, where you can control the fade in /out. The ones from fac.lib. have too much fade in/out for wavetable, IMO. If I remember correct, this is also how Serum does it. </p>

<p>End match; what do you mean by that? Length? If length, check my wavetable creator patch. It sets the length of how long of a wavetable you like to record. By default it is set to 262144 samples.</p>

<aside class="quote" data-post="18" data-topic="1790"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/community.axoloti.com/thetechnobear/40/6_1.html" class="avatar">thetechnobear:</div>
<blockquote><p>hmmm... gives me an idea, this could be done with recorded data, if you did a bit of analysis ... a bit like is done with slicing.</p></blockquote></aside>

<p>Yes, it can, check my patch in com lib. I have all ready made a recording wavetable thingy. But didnt work on it for a long time. Its all about doing calcuation before hand <img src="../../images/emoji/emoji_one/slight_smile30f4.png?v=3" title=":slight_smile:" class="emoji" alt=":slight_smile:"> You use the oscillator tuned to fit in a table, using my example for 262144 wavetable(128X2048), the waves have to be 2048 samples long. The only way I got to do that was making a subpatch for it... Took a bit of timeto get it tuned... Actually I think i spend a WHOLE freakign weekend getting that right!!!!!</p>

<p> You can find that in my wavetable creator patch. It is called "Math tune" or something like that. It can be used to tune an oscillator to fir PERFECTLY into a table. Check with scopes, that the waveform doesnt move...Again this took LONG time go get right.... When this is set up, you add the windows function, which has to be controlled by the "table tuned" osc, so it makes fade in/out for each wave in the wavetable.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Polyphonic morphable wavetable oscillator'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/geecen.html'><b itemprop='author'>geecen</b></a>
           
           <time datetime='2017-01-19T20:44:16Z' itemprop='datePublished'>
             2017-01-19 20:44:16 UTC
           </time>
        </span>
        <span itemprop='position'>#21</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I was looking at the Oscitron Eurorack module by Soulby synths today - you can do the wavetable record thing on it. I think it synchs the wave recording to crossing through zero so they are always complete cycles. Don't know coding (yet! :)) but the code is available onlinee, so someone might want to have a look at how it's been done.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Polyphonic morphable wavetable oscillator'>
      <hr>
  </div>

  <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement'>
      <span itemprop='url'><b><a rel="next" itemprop="name" href="17904658.html?page=2">next page →</a></b></span>
  </div>





    </div>
    <footer class="container">
      <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <a href='../../index.html'>Home</a>
        <a href="../../categories.html">Categories</a>
        <a href="../../guidelines.html">FAQ/Guidelines</a>
        <a href="../../tos.html">Terms of Service</a>
        <a href="../../privacy.html">Privacy Policy</a>
      </nav>
      <p>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  

<!-- Mirrored from community.axoloti.com/t/polyphonic-morphable-wavetable-oscillator/1790 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 10 Jul 2023 17:12:44 GMT -->
</html>
