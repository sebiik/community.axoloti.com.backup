<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from community.axoloti.com/t/connecting-arduino-midi-keyboard-to-axoloti/6567 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 16 Jul 2023 18:07:14 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Connecting arduino midi keyboard to Axoloti - Hardware - Axoloti Community</title>
    <meta name="description" content="Hello there, 

I was wondering if someone could help me with this: I am trying to connect a salvaged midi keyboard to axoloti over PA3 input with Hugo&amp;#39;s extra midi I/O script. I thought I&amp;#39;d just use an arduino uno that I&amp;hellip;">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.9.0.beta3 - https://github.com/discourse/discourse version 13f3de4bf673802eb8ec595d36587b4524773209">
<link rel="icon" type="image/png" href="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="6567.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"http://community.axoloti.com","potentialAction":{"@type":"SearchAction","target":"http://community.axoloti.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Axoloti Community Search">

        <link href="../../stylesheets/desktop_d93a33ca8617326fe353f80e6ab865188244d48c8e0b.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop"/>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Connecting arduino midi keyboard to Axoloti&#39;" href="6567.rss" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://community.axoloti.com/uploads/default/optimized/2X/3/388beaea819fbf0e4e75088847828a2d47ba969e_1_327x500.png" />
<meta property="og:image" content="http://community.axoloti.com/uploads/default/optimized/2X/3/388beaea819fbf0e4e75088847828a2d47ba969e_1_327x500.png" />
<meta property="og:url" content="http://community.axoloti.com/t/connecting-arduino-midi-keyboard-to-axoloti/6567" />
<meta name="twitter:url" content="http://community.axoloti.com/t/connecting-arduino-midi-keyboard-to-axoloti/6567" />
<meta property="og:title" content="Connecting arduino midi keyboard to Axoloti" />
<meta name="twitter:title" content="Connecting arduino midi keyboard to Axoloti" />
<meta property="og:description" content="Hello there,   I was wondering if someone could help me with this: I am trying to connect a salvaged midi keyboard to axoloti over PA3 input with Hugo&#39;s extra midi I/O script. I thought I&#39;d just use an arduino uno that I had laying around and used a script I found online. I managed to get the keyboard responding on the arduino (I see the TX light flickering and get integers as outputs on the serial monitor) but when I connect it to axoloti, I don&#39;t seem to get any response.. This is how I connec..." />
<meta name="twitter:description" content="Hello there,   I was wondering if someone could help me with this: I am trying to connect a salvaged midi keyboard to axoloti over PA3 input with Hugo&#39;s extra midi I/O script. I thought I&#39;d just use an arduino uno that I had laying around and used a script I found online. I managed to get the keyboard responding on the arduino (I see the TX light flickering and get integers as outputs on the serial monitor) but when I connect it to axoloti, I don&#39;t seem to get any response.. This is how I connec..." />


  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html"><img src="http://community.axoloti.com/uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo" style="max-width: 150px;"></a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1>
  <a href="6567.html">Connecting arduino midi keyboard to Axoloti</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/hardware.html" itemprop="url">
        <span itemprop="title">Hardware</span>
      </a>
    </div>
</div>





<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/howdoidodis.html'><b itemprop='author'>howdoidodis</b></a>
           
           <time datetime='2020-04-16T10:46:45Z' itemprop='datePublished'>
             2020-04-16 10:46:45 UTC
           </time>
        </span>
        <span itemprop='position'>#1</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hello there,</p>

<p>I was wondering if someone could help me with this:<br>I am trying to connect a salvaged midi keyboard to axoloti over PA3 input with Hugo's extra midi I/O script. I thought I'd just use an arduino uno that I had laying around and used a script I found online. I managed to get the keyboard responding on the arduino (I see the TX light flickering and get integers as outputs on the serial monitor) but when I connect it to axoloti, I don't seem to get any response..<br>This is how I connected everything : <br><div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/388beaea819fbf0e4e75088847828a2d47ba969e" href="http://community.axoloti.com/uploads/default/original/2X/3/388beaea819fbf0e4e75088847828a2d47ba969e.png" class="lightbox" title="Screen Shot 2020-04-16 at 12.37.55.png"><img src="http://community.axoloti.com/uploads/default/optimized/2X/3/388beaea819fbf0e4e75088847828a2d47ba969e_1_327x500.png" width="327" height="500"><div class="meta">
<span class="filename">Screen Shot 2020-04-16 at 12.37.55.png</span><span class="informations">585x893 372 KB</span><span class="expand"></span>
</div></a></div> <br>And this is the code I used for the arduino : <br>// Pin Definitions<br>// Rows are connected to<br>const int row1 = 5;<br>const int row2 = 6;<br>const int row3 = 7;<br>const int row4 = 8;</p>

<p>// The 74HC595 uses a serial communication<br>// link which has three pins<br>const int clock = 9;<br>const int latch = 10;<br>const int data = 11;</p>

<p>uint8_t keyToMidiMap[32];</p>

<p>boolean keyPressed[32];</p>

<p>int noteVelocity = 127;</p>

<p>// use prepared bit vectors instead of shifting bit left everytime<br>int bits[] = { B00000001, B00000010, B00000100, B00001000, B00010000, B00100000, B01000000, B10000000 };</p>

<p>// 74HC595 shift to next column<br>void scanColumn(int value) {<br>  digitalWrite(latch, LOW); //Pulls the chips latch low<br>  shiftOut(data, clock, MSBFIRST, value); //Shifts out the 8 bits to the shift register<br>  digitalWrite(latch, HIGH); //Pulls the latch high displaying the data<br>}</p>

<p>void setup() {</p>

<p>  // Map scan matrix buttons/keys to actual Midi note number. Lowest num 44 corresponds to C MIDI note.<br>keyToMidiMap[0] = 44;<br>  keyToMidiMap[1] = 45;<br>  keyToMidiMap[2] = 46;<br>  keyToMidiMap[3] = 47;<br>  keyToMidiMap[4] = 48;<br>  keyToMidiMap[5] = 49;<br>  keyToMidiMap[6] = 50;<br>  keyToMidiMap[7] = 51;</p>

<p>  keyToMidiMap[8] = 52;<br>  keyToMidiMap[1 + 8] = 53;<br>  keyToMidiMap[2 + 8] = 54;<br>  keyToMidiMap[3 + 8] = 55;<br>  keyToMidiMap[4 + 8] = 56;<br>  keyToMidiMap[5 + 8] = 57;<br>  keyToMidiMap[6 + 8] = 58;<br>  keyToMidiMap[7 + 8] = 59;</p>

<p>  keyToMidiMap[16] = 60;<br>  keyToMidiMap[1 + 16] = 61;<br>  keyToMidiMap[2 + 16] = 62;<br>  keyToMidiMap[3 + 16] = 63;<br>  keyToMidiMap[4 + 16] = 64;<br>  keyToMidiMap[5 + 16] = 65;<br>  keyToMidiMap[6 + 16] = 66;<br>  keyToMidiMap[7 + 16] = 67;</p>

<p>  keyToMidiMap[24] = 68;<br>  keyToMidiMap[1 + 24] = 69;<br>  keyToMidiMap[2 + 24] = 70;<br>  keyToMidiMap[3 + 24] = 71;<br>  keyToMidiMap[4 + 24] = 72;<br>  keyToMidiMap[5 + 24] = 73;<br>  keyToMidiMap[6 + 24] = 74;<br>  keyToMidiMap[7 + 24] = 75;</p>

<p>  // setup pins output/input mode<br>  pinMode(data, OUTPUT);<br>  pinMode(clock, OUTPUT);<br>  pinMode(latch, OUTPUT);</p>

<p>  pinMode(row1, INPUT);<br>  pinMode(row2, INPUT);<br>  pinMode(row3, INPUT);<br>  pinMode(row4, INPUT);</p>

<pre><code>Serial.begin(31250);</code></pre>

<p>  delay(1000);</p>

<p>}</p>

<p>void loop() {</p>

<p>  for (int col = 0; col &lt; 8; col++) {</p>

<pre><code>// shift scan matrix to following column
scanColumn(bits[col]);

// check if any keys were pressed - rows will have HIGH output in this case corresponding
int groupValue1 = digitalRead(row1);
int groupValue2 = digitalRead(row2);
int groupValue3 = digitalRead(row3);
int groupValue4 = digitalRead(row4);

// process if any combination of keys pressed
if (groupValue1 != 0 || groupValue2 != 0 || groupValue3 != 0
    || groupValue4 != 0) {

  if (groupValue1 != 0 &amp;&amp; !keyPressed[col]) {
    keyPressed[col] = true;
    noteOn(0x91, keyToMidiMap[col], noteVelocity);
  }

  if (groupValue2 != 0 &amp;&amp; !keyPressed[col + 8]) {
    keyPressed[col + 8] = true;
    noteOn(0x91, keyToMidiMap[col + 8], noteVelocity);
  }

  if (groupValue3 != 0 &amp;&amp; !keyPressed[col + 16]) {
    keyPressed[col + 16] = true;
    noteOn(0x91, keyToMidiMap[col + 16], noteVelocity);
  }

  if (groupValue4 != 0 &amp;&amp; !keyPressed[col + 24]) {
    keyPressed[col + 24] = true;
    noteOn(0x91, keyToMidiMap[col + 24], noteVelocity);
  }

}

//  process if any combination of keys released
if (groupValue1 == 0 &amp;&amp; keyPressed[col]) {
  keyPressed[col] = false;
  noteOn(0x91, keyToMidiMap[col], 0);
}

if (groupValue2 == 0 &amp;&amp; keyPressed[col + 8]) {
  keyPressed[col + 8] = false;
  noteOn(0x91, keyToMidiMap[col + 8], 0);
}

if (groupValue3 == 0 &amp;&amp; keyPressed[col + 16]) {
  keyPressed[col + 16] = false;
  noteOn(0x91, keyToMidiMap[col + 16], 0);
}

if (groupValue4 == 0 &amp;&amp; keyPressed[col + 24]) {
  keyPressed[col + 24] = false;
  noteOn(0x91, keyToMidiMap[col + 24], 0);
}</code></pre>

<p>  }</p>

<p>}</p>

<p>void noteOn(int cmd, int pitch, int velocity) {<br>    Serial.write(cmd);<br>  Serial.write(pitch);<br>  Serial.write(velocity);<br>}</p>

<p>Am I overseeing something? Should I change something in Hugo's script? </p>

<p>Thanks!!</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Connecting arduino midi keyboard to Axoloti'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/Willem.html'><b itemprop='author'>Willem</b></a>
           
           <time datetime='2020-04-16T16:44:18Z' itemprop='datePublished'>
             2020-04-16 16:44:18 UTC
           </time>
        </span>
        <span itemprop='position'>#2</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hello,</p>

<p>How did you connect the power to the Arduino and the Axoloti?<br>Do they share a common ground? (run from the same powersupply)<br>In your schematic I see only 1 wire going from the Arduino to the Axoloti.</p>

<p>Hope this helps. <br>I built a Arduino Midi-controller and connected it with succes to an Axolotiand can show you my schematic and/or code.</p>

<p>Greetings,</p>

<p>Willem</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Connecting arduino midi keyboard to Axoloti'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/howdoidodis.html'><b itemprop='author'>howdoidodis</b></a>
           
           <time datetime='2020-04-16T18:34:21Z' itemprop='datePublished'>
             2020-04-16 18:34:21 UTC
           </time>
        </span>
        <span itemprop='position'>#3</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hey Willem,</p>

<p>Thank you for responding to this!<br>I connected both the axoloti and the arduino to my computer for power.<br>In the future I would like to power te arduino from the axoloti.<br>Would be great to see how you did it!</p>

<p>Thibaut</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Connecting arduino midi keyboard to Axoloti'>
      <hr>
  </div>






    </div>
    <footer class="container">
      <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <a href='../../index.html'>Home</a>
        <a href="../../categories.html">Categories</a>
        <a href="../../guidelines.html">FAQ/Guidelines</a>
        <a href="../../tos.html">Terms of Service</a>
        <a href="../../privacy.html">Privacy Policy</a>
      </nav>
      <p>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  

<!-- Mirrored from community.axoloti.com/t/connecting-arduino-midi-keyboard-to-axoloti/6567 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 16 Jul 2023 18:07:16 GMT -->
</html>
