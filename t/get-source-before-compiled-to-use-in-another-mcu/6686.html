<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from community.axoloti.com/t/get-source-before-compiled-to-use-in-another-mcu/6686 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 19 Jul 2023 03:37:25 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Get source, before compiled, to use in another MCU - Software - Axoloti Community</title>
    <meta name="description" content="Hi, im a bit of a noob here, but I was wondering if there is a way to get the source code ( all the C++ code generated)  before it gets compiled and use it to run patches on another MCU (let&amp;#39;s say one with more power)? W&amp;hellip;">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.9.0.beta3 - https://github.com/discourse/discourse version 13f3de4bf673802eb8ec595d36587b4524773209">
<link rel="icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="6686.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://sebiik.github.io/community.axoloti.com.backup","potentialAction":{"@type":"SearchAction","target":"https://sebiik.github.io/community.axoloti.com.backup/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Axoloti Community Search">

        <link href="../../stylesheets/desktop_d93a33ca8617326fe353f80e6ab865188244d48c8e0b.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop"/>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','../../../www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Get source, before compiled, to use in another MCU&#39;" href="6686-2.html" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://sebiik.github.io/community.axoloti.com.backup/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:image" content="https://sebiik.github.io/community.axoloti.com.backup/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:url" content="https://sebiik.github.io/community.axoloti.com.backup/t/get-source-before-compiled-to-use-in-another-mcu/6686" />
<meta name="twitter:url" content="https://sebiik.github.io/community.axoloti.com.backup/t/get-source-before-compiled-to-use-in-another-mcu/6686" />
<meta property="og:title" content="Get source, before compiled, to use in another MCU" />
<meta name="twitter:title" content="Get source, before compiled, to use in another MCU" />
<meta property="og:description" content="Hi, im a bit of a noob here, but I was wondering if there is a way to get the source code ( all the C++ code generated)  before it gets compiled and use it to run patches on another MCU (let&#39;s say one with more power)? What I mean is, it would be great to use Axoloti patcher as a great prototype code generator to later use in a different board. Possible?" />
<meta name="twitter:description" content="Hi, im a bit of a noob here, but I was wondering if there is a way to get the source code ( all the C++ code generated)  before it gets compiled and use it to run patches on another MCU (let&#39;s say one with more power)? What I mean is, it would be great to use Axoloti patcher as a great prototype code generator to later use in a different board. Possible?" />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="1 ❤" />


  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html"><img src="../../uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo" style="max-width: 150px;"></a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1>
  <a href="6686.html">Get source, before compiled, to use in another MCU</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/software.html" itemprop="url">
        <span itemprop="title">Software</span>
      </a>
    </div>
</div>





<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/nicokaniak.html'><b itemprop='author'>nicokaniak</b></a>
           
           <time datetime='2020-06-14T13:27:47Z' itemprop='datePublished'>
             2020-06-14 13:27:47 UTC
           </time>
        </span>
        <span itemprop='position'>#1</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hi, im a bit of a noob here, but I was wondering if there is a way to get the source code ( all the C++ code generated)  before it gets compiled and use it to run patches on another MCU (let's say one with more power)?<br>What I mean is, it would be great to use Axoloti patcher as a great prototype code generator to later use in a different board.<br>Possible?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Get source, before compiled, to use in another MCU'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/janvantomme.html'><b itemprop='author'>janvantomme</b></a>
           
           <time datetime='2020-06-15T17:40:40Z' itemprop='datePublished'>
             2020-06-15 17:40:40 UTC
           </time>
        </span>
        <span itemprop='position'>#2</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Should be possible if you can get the firmware to run on another board. The firmware did run on the STM32F4-Discovery board, but that one has the same chip as the Axoloti.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Get source, before compiled, to use in another MCU'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/nicokaniak.html'><b itemprop='author'>nicokaniak</b></a>
           
           <time datetime='2020-06-15T20:14:30Z' itemprop='datePublished'>
             2020-06-15 20:14:30 UTC
           </time>
        </span>
        <span itemprop='position'>#3</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>and what about the Teensy 4.1?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Get source, before compiled, to use in another MCU'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/lokki.html'><b itemprop='author'>lokki</b></a>
           
           <time datetime='2020-06-16T06:02:28Z' itemprop='datePublished'>
             2020-06-16 06:02:28 UTC
           </time>
        </span>
        <span itemprop='position'>#4</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>there are two separate ways this could be achieved:</p>

<p>take the generated sourcecode and edit it, to compile and work on a teensy directly</p>

<p>port the chibios to teensy 4.0 or 4.1 to make it run axoloti patches native.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Get source, before compiled, to use in another MCU'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/nicokaniak.html'><b itemprop='author'>nicokaniak</b></a>
           
           <time datetime='2020-06-16T08:36:38Z' itemprop='datePublished'>
             2020-06-16 08:36:38 UTC
           </time>
        </span>
        <span itemprop='position'>#5</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Yeah, that was actually what I was wondering if it was possible to get the generated source code. As far as I know, Axoloti compiled to c++ and directly to machine language to the Axoloti Core, no in-between steps. I would imagine the later tinkering would require to add the code of the sound shield Teensy uses plus the CC directories for Teensy´s GPIOs, etc etc.</p>

<p>Not sure what chbios is, but ill look into it.</p>

<p>This things really are beyond my skill level, but ill definitively look into them. Thanks, you've been super helpful and pointed me in a good direction <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"> . great to know it is possible.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Get source, before compiled, to use in another MCU'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/lokki.html'><b itemprop='author'>lokki</b></a>
           
           <time datetime='2020-06-16T12:23:34Z' itemprop='datePublished'>
             2020-06-16 12:23:34 UTC
           </time>
        </span>
        <span itemprop='position'>#6</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>chibios is the "os" that runs on axoloti and handles usb in/out and sdcard file i/o etc.</p>

<p>when you compile a patch a xpatch.cpp file will be generated in your build directory, it contains the whole patch.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Get source, before compiled, to use in another MCU'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/nicokaniak.html'><b itemprop='author'>nicokaniak</b></a>
           
           <time datetime='2020-06-16T12:35:29Z' itemprop='datePublished'>
             2020-06-16 12:35:29 UTC
           </time>
        </span>
        <span itemprop='position'>#7</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p><img src="../../images/emoji/twitter/heart_eyesae52.png?v=5" title=":heart_eyes:" class="emoji" alt=":heart_eyes:"> <img src="../../images/emoji/twitter/heart_eyesae52.png?v=5" title=":heart_eyes:" class="emoji" alt=":heart_eyes:"> <img src="../../images/emoji/twitter/heart_eyesae52.png?v=5" title=":heart_eyes:" class="emoji" alt=":heart_eyes:"> thank you!! this is what i was looking for!!</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Get source, before compiled, to use in another MCU'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/ricard.html'><b itemprop='author'>ricard</b></a>
           
           <time datetime='2020-06-20T06:29:20Z' itemprop='datePublished'>
             2020-06-20 06:29:20 UTC
           </time>
        </span>
        <span itemprop='position'>#9</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>One should note, though, that xpatch.cpp only contains the code for the patch itself (including all the patch cords). It still relies on a number of things being in the flash ROM in the Axoloti, such as:<br>- Chibios (the multi tasking OS at the heart of the Axoloti)<br>- The CMSIS DSP library made specially for the STM32 processor series with its ARM core augmented with DSP functionality<br>- Other common things such as SD card and MIDI managment</p>

<p>Especially CMSIS might be a bit of a stumper, as several Axoloti objects make direct calls to the library (have a look at the code of some of the filter objects for instance). The equivalent functions can certainly be implemented on any other platform, but at a certain amount of development cost.</p>

<p>In the end, the best bet is probably getting the Axoloti running on another more powerful STM32 platform, which would require minimal changes to the firmware. I haven't kept up to date on what's available, but given that the Axoloti is several years old by now, it's likely that there is a more powerful STM32 platform available that it could be ported to.</p>

<p>A couple of years ago I ported the Axoloti to the Audiothingies P6, so that I could run Axoloti patches on the P6 hardware, inluding access to the display and encoders. It was mostly a question of differing GPIO assignments and DAC, and a couple of more complex issues like the clock crystal frequencies being different. But the STM32F405 used in the P6 is quite similar to the STM32F427 used in the Axoloti so the amount of changes needed were rather limited.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Get source, before compiled, to use in another MCU'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/nicokaniak.html'><b itemprop='author'>nicokaniak</b></a>
           
           <time datetime='2020-06-20T11:22:06Z' itemprop='datePublished'>
             2020-06-20 11:22:06 UTC
           </time>
        </span>
        <span itemprop='position'>#10</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Dam, I knew it was not gonna be that "easy". <br> As for the CMSIS DSP library, I think it shouldn't be a problem. As far as I've seen, the Teensy 4.1 (which is where I want to port the code) has an arm_cortexM7 which uses the same library. But again, this comes from my very limited knowledge on the subject, so im pretty sure im wrong.<br>Maybe I should also mention what is what I want to do. My plan is to do a more modern version of the CS80, with MPE enabled and the full 16 polyphony. If this project is successful I wanted to, later on, put it into production for sale. <br>Iv saw some project around the forum where their creators had to cut down on the features because the axoloti was easily reaching the 90% DSP.<br>Axoloti is a great way to sketch up functional code (especially because I have little to non-codding experience), but the DSP limitations and later overproduction would seem an obstacle. </p>

<p>I hope this last clarify the reasons of why I would want to port the .cpp to another board.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Get source, before compiled, to use in another MCU'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/ricard.html'><b itemprop='author'>ricard</b></a>
           
           <time datetime='2020-06-20T18:39:16Z' itemprop='datePublished'>
             2020-06-20 18:39:16 UTC
           </time>
        </span>
        <span itemprop='position'>#11</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>As far as I can make out (I wouldn't count myself an expert on the subject, far from it) the CMSIS library is available for (all) Cortex-M and also Cortex-A processors, so it would certainly include the Cortex-M7.</p>

<p><a href="http://www.keil.com/pack/doc/CMSIS/DSP/html/index.html" class="onebox" target="_blank" rel="nofollow noopener">http://www.keil.com/pack/doc/CMSIS/DSP/html/index.html</a></p>

<p>Cortex-A is interesting I think because the Raspberry Pi uses Cortex-A CPUs (although more research would be needed to check the exact requirements; there is an extension to ARM CPUs called NEON which provides DSP instructions, but not all SoCs have that; I don't know if CMSIS is dependent on NEON on the Cortex-A series).</p>

<p>Sounds like a nice project, creating a CS80.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Get source, before compiled, to use in another MCU'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/nicokaniak.html'><b itemprop='author'>nicokaniak</b></a>
           
           <time datetime='2020-06-22T10:47:28Z' itemprop='datePublished'>
             2020-06-22 10:47:28 UTC
           </time>
        </span>
        <span itemprop='position'>#12</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>yeah, been looking into it with more depth. I think ill just do basic C++ code on the Teensy and if needed look on to the nodes code of the Axoloti for inspiration.<br>for the time being this seems to be way beyond my pay grade <img src="../../images/emoji/twitter/sweat_smileae52.png?v=5" title=":sweat_smile:" class="emoji" alt=":sweat_smile:"></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Get source, before compiled, to use in another MCU'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/sebiiksbcs.html'><b itemprop='author'>sebiiksbcs</b></a>
           
           <time datetime='2020-06-23T12:40:48Z' itemprop='datePublished'>
             2020-06-23 12:40:48 UTC
           </time>
        </span>
        <span itemprop='position'>#13</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>There have been efforts by user urklang to port Axoloti to the Stm32h7, search for 'next gen axoloti' maybe you can get some insights from there</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Get source, before compiled, to use in another MCU'>
      <hr>
  </div>






    </div>
    <footer class="container">
      <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <a href='../../index.html'>Home</a>
        <a href="../../categories.html">Categories</a>
        <a href="../../guidelines.html">FAQ/Guidelines</a>
        <a href="../../tos.html">Terms of Service</a>
        <a href="../../privacy.html">Privacy Policy</a>
      </nav>
      <p>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  

<!-- Mirrored from community.axoloti.com/t/get-source-before-compiled-to-use-in-another-mcu/6686 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 19 Jul 2023 03:37:26 GMT -->
</html>
