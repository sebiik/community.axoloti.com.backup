<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from community.axoloti.com/t/to-inline-or-not-to-inline-that-is-the-question/1900 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 10 Jul 2023 17:02:19 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>To Inline or Not to Inline.. that is the question - AxoObject coding - Axoloti Community</title>
    <meta name="description" content="So.. Could anyone outline the circumstances when there&amp;#39;s a benefit to be had in using compiler directives to force inlining of functions, when there isn&amp;#39;t, and when not to specify either way? 

My suspicion is that inlin&amp;hellip;">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.9.0.beta3 - https://github.com/discourse/discourse version 13f3de4bf673802eb8ec595d36587b4524773209">
<link rel="icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="1900.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://sebiik.github.io/community.axoloti.com.backup","potentialAction":{"@type":"SearchAction","target":"https://sebiik.github.io/community.axoloti.com.backup/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Axoloti Community Search">

        <link href="../../stylesheets/desktop_d93a33ca8617326fe353f80e6ab865188244d48c8e0b.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop"/>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','../../../www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;To Inline or Not to Inline.. that is the question&#39;" href="1900.rss" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://sebiik.github.io/community.axoloti.com.backup/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:image" content="https://sebiik.github.io/community.axoloti.com.backup/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:url" content="https://sebiik.github.io/community.axoloti.com.backup/t/to-inline-or-not-to-inline-that-is-the-question/1900" />
<meta name="twitter:url" content="https://sebiik.github.io/community.axoloti.com.backup/t/to-inline-or-not-to-inline-that-is-the-question/1900" />
<meta property="og:title" content="To Inline or Not to Inline.. that is the question" />
<meta name="twitter:title" content="To Inline or Not to Inline.. that is the question" />
<meta property="og:description" content="So.. Could anyone outline the circumstances when there&#39;s a benefit to be had in using compiler directives to force inlining of functions, when there isn&#39;t, and when not to specify either way?   My suspicion is that inlining is only of benefit for smaller/less complex functions. Then again, I&#39;m vague on what inlining actually does. I assume it copies the function inline each time it is called, rather than actually invoking the function from another location in RAM, passing arguments, retrieving t..." />
<meta name="twitter:description" content="So.. Could anyone outline the circumstances when there&#39;s a benefit to be had in using compiler directives to force inlining of functions, when there isn&#39;t, and when not to specify either way?   My suspicion is that inlining is only of benefit for smaller/less complex functions. Then again, I&#39;m vague on what inlining actually does. I assume it copies the function inline each time it is called, rather than actually invoking the function from another location in RAM, passing arguments, retrieving t..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="1 ❤" />


  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html"><img src="../../uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo" style="max-width: 150px;"></a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1>
  <a href="1900.html">To Inline or Not to Inline.. that is the question</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/axoobject-code.html" itemprop="url">
        <span itemprop="title">AxoObject coding</span>
      </a>
    </div>
</div>





<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/toneburst.html'><b itemprop='author'>toneburst</b></a>
           
           <time datetime='2016-06-22T15:53:31Z' itemprop='datePublished'>
             2016-06-22 15:53:31 UTC
           </time>
        </span>
        <span itemprop='position'>#1</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>So..<br>Could anyone outline the circumstances when there's a benefit to be had in using compiler directives to force inlining of functions, when there isn't, and when not to specify either way?</p>

<p>My suspicion is that inlining is only of benefit for smaller/less complex functions. Then again, I'm vague on what inlining actually does. I assume it copies the function inline each time it is called, rather than actually invoking the function from another location in RAM, passing arguments, retrieving the return value etc.. If that's the case I imagine there comes a point where the RAM overhead of complex functions being inlined multiple times outweighs the speed advantage of inlining, but as I said, I'm generally vague on these matters...</p>

<p>a|x</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='To Inline or Not to Inline.. that is the question'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/rvense.html'><b itemprop='author'>rvense</b></a>
           
           <time datetime='2016-06-22T23:54:39Z' itemprop='datePublished'>
             2016-06-22 23:54:39 UTC
           </time>
        </span>
        <span itemprop='position'>#2</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>You have the right understanding. It's basically copying the body of a function to where it would've inserted a call, and as you say, it makes the code longer unless your function is just one instruction, but it does save some theoretical overhead.</p>

<p>It can make a big difference in some cases but function calls really aren't very expensive on ARM. If you have one-two line functions in your objects, or if the main loop is split into simple calls to two-three functions for clarity but they aren't used elsewhere, by all means mark them inline to save a few cycles. But don't expect miracles <img src="../../images/emoji/emoji_one/slight_smile5e1f.png?v=2" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>

<p>(Also, if GCC is compiling the firmware with optimizations on (don't know if it does), you might already be getting the most obvious cases inlined.)</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='To Inline or Not to Inline.. that is the question'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/thetechnobear.html'><b itemprop='author'>thetechnobear</b></a>
           
           <time datetime='2016-06-23T09:03:20Z' itemprop='datePublished'>
             2016-06-23 09:03:20 UTC
           </time>
        </span>
        <span itemprop='position'>#3</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>a note:<br>with the optimisation levels we use if you included functions within the same compile unit, the compiler will want to inline them... this is is likely to be the case in object dev, since you tend to include them, as currently we do not provide a mechanism to add other files to be compiled as separate units.</p>

<p>the issue, as rvense points out, this can lead to severe code bloat, this is why in my push object you will see I've disabled inlining explicitly on many functions that are large, and also infrequently called.</p>

<p>personally, I think at some point we will need to allow for different compilation units within axoloti, to gain a bit more control over this optimisation, but its tricky to do whilst retaining simplicity for the end user.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='To Inline or Not to Inline.. that is the question'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/toneburst.html'><b itemprop='author'>toneburst</b></a>
           
           <time datetime='2016-06-23T09:47:37Z' itemprop='datePublished'>
             2016-06-23 09:47:37 UTC
           </time>
        </span>
        <span itemprop='position'>#4</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="3" data-topic="1900"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/community.axoloti.com/thetechnobear/40/6_1.html" class="avatar">thetechnobear:</div>
<blockquote><p>if you included functions within the same compile unit,</p></blockquote></aside>

<p>Does a compile unit equate to an individual object, generally-speaking?</p>

<p>I was wondering about global variables, actually, maybe this is related. I know the use of globals is generally frowned upon in desktop computer programming these days, but all the factory objects use them, so it occurred to me that perhaps objects are encapsulated in some way at compile-time, so what appear to be global variables are actually only scoped to the object that contains them. This would make a lot of sense, in terms of having multiple instances of the same object operating independently in the same patch, without explicit encapsulation in C++ class/instances.</p>

<p>a|x</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='To Inline or Not to Inline.. that is the question'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/thetechnobear.html'><b itemprop='author'>thetechnobear</b></a>
           
           <time datetime='2016-06-23T10:16:30Z' itemprop='datePublished'>
             2016-06-23 10:16:30 UTC
           </time>
        </span>
        <span itemprop='position'>#5</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>no, a compile unit is a C file... and given a patch contents all ends up in xpatch.cpp, its all one compile unit. (hence my 'warning') </p>

<p>in programming there are various reasons for 'global' being bad, but like all things, it depends...<br>class scoping a global (static) is neither good nor bad, it depends how you use it, and even the most fervent object oriented programmers have used singletons which are still essentially a global, albeit alleviating some of the negatives of globals.<br>but yeah, generally, you avoid globals with objects as you don't wont one object instance to affect another.</p>

<p>also, be careful with Axoloti , axoloti objects are not classes... e.g. each instance of an object becomes a class.<br>generally, its a good idea to check out xpatch.cpp, </p>

<p>Ive probably mentioned this in the past, and you may be doing this , but I recommend when you get to the level of creating custom objects, its a good time to start looking at the generated code, to get a better understanding of axoloti.  create a very simple patch, compile it and then look at xpatch.cpp and get a good feeling of how the 2 related, and how it works.<br>Of course this is not 'required', but I personally learnt a lot from this... and even now, when a patch doesnt work, it can be instructive to go look at the code thats be generated , to see why.</p>

<p>tip: a good code editor and 'code beautifier' is useful to navigate through it.</p>

<p>advance tip: when your developing objects, and trying to fix build issues, if you have expert mode on, you can edit the xpatch.cpp and then just compile to try stuff quickly (e.g. to fix compile errors), then apply to your custom object when you know it works.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='To Inline or Not to Inline.. that is the question'>
      <hr>
  </div>






    </div>
    <footer class="container">
      <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <a href='../../index.html'>Home</a>
        <a href="../../categories.html">Categories</a>
        <a href="../../guidelines.html">FAQ/Guidelines</a>
        <a href="../../tos.html">Terms of Service</a>
        <a href="../../privacy.html">Privacy Policy</a>
      </nav>
      <p>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  

<!-- Mirrored from community.axoloti.com/t/to-inline-or-not-to-inline-that-is-the-question/1900 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 10 Jul 2023 17:02:20 GMT -->
</html>
