<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from community.axoloti.com/t/not-so-easy-math/4308 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 10 Jul 2023 16:05:56 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Not so easy math - AxoObject coding - Axoloti Community</title>
    <meta name="description" content="I am struggling to get some functionality in my object for which I need a division. 

I have entered the following expressions:  outlet_test1 = (64-24)*(64/40); outlet_test2 = (64-24)*1.6; 

In easy math they have the sa&amp;hellip;">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.9.0.beta3 - https://github.com/discourse/discourse version 13f3de4bf673802eb8ec595d36587b4524773209">
<link rel="icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="4308.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"http://community.axoloti.com","potentialAction":{"@type":"SearchAction","target":"http://community.axoloti.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Axoloti Community Search">

        <link href="../../stylesheets/desktop_d93a33ca8617326fe353f80e6ab865188244d48c8e0b.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop"/>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','../../../www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Not so easy math&#39;" href="4308.rss" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:url" content="http://community.axoloti.com/t/not-so-easy-math/4308" />
<meta name="twitter:url" content="http://community.axoloti.com/t/not-so-easy-math/4308" />
<meta property="og:title" content="Not so easy math" />
<meta name="twitter:title" content="Not so easy math" />
<meta property="og:description" content="I am struggling to get some functionality in my object for which I need a division.   I have entered the following expressions:  outlet_test1 = (64-24)*(64/40); outlet_test2 = (64-24)*1.6;   In easy math they have the same outcome. In not so easy math they have a different outcome. Can anyone point me in the direction how I should change the first line to get the outcome of the second line?" />
<meta name="twitter:description" content="I am struggling to get some functionality in my object for which I need a division.   I have entered the following expressions:  outlet_test1 = (64-24)*(64/40); outlet_test2 = (64-24)*1.6;   In easy math they have the same outcome. In not so easy math they have a different outcome. Can anyone point me in the direction how I should change the first line to get the outcome of the second line?" />


  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html"><img src="../../uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo" style="max-width: 150px;"></a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1>
  <a href="4308.html">Not so easy math</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/axoobject-code.html" itemprop="url">
        <span itemprop="title">AxoObject coding</span>
      </a>
    </div>
</div>





<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/azaxo.html'><b itemprop='author'>azaxo</b></a>
           
           <time datetime='2018-03-04T14:30:47Z' itemprop='datePublished'>
             2018-03-04 14:30:47 UTC
           </time>
        </span>
        <span itemprop='position'>#1</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I am struggling to get some functionality in my object for which I need a division.</p>

<p>I have entered the following expressions: <br>outlet_test1 = (64-24)*(64/40);<br>outlet_test2 = (64-24)*1.6;</p>

<p>In easy math they have the same outcome. In not so easy math they have a different outcome. Can anyone point me in the direction how I should change the first line to get the outcome of the second line?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Not so easy math'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/thetechnobear.html'><b itemprop='author'>thetechnobear</b></a>
           
           <time datetime='2018-03-04T16:12:59Z' itemprop='datePublished'>
             2018-03-04 16:12:59 UTC
           </time>
        </span>
        <span itemprop='position'>#2</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I guess this is just a basic C question... (rather than about integer maths as is used in axo.)</p>

<p>assuming so, then your issue with C, is 'type conversion'<br>C will keep its type, so your 64/40 is done as an integer and so equals 1, if you want to use floating point then you have to tell C to upcast it to float (or double or whatever <img src="../../images/emoji/twitter/winkae52.png?v=5" title=":wink:" class="emoji" alt=":wink:">) </p>

<p>in this constant example, you can do this by using float constants<br>e.g. (64-24) * (64/40.0f) , this results in a float expression</p>

<p>this is why your second example 'works' , since you have given it a float, and so will use float for the expression</p>

<p>(40.0 will also work, but is considered bad practice, as its unclear... it could be a double or could be float, depending on compiler/platform... many compilers will now give a warning for this. ) </p>

<p>however, Id recommend you read up about type conversion in C, its an important topic, and one if you are not clear on is <strong>really</strong> easy to get yourself in a mess, and introduce some subtle (=nasty) bugs.<br>(e.g. things like operator precedence might change which parts of your expression are in float, and which in int)</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Not so easy math'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/ricard.html'><b itemprop='author'>ricard</b></a>
           
           <time datetime='2018-03-05T06:01:22Z' itemprop='datePublished'>
             2018-03-05 06:01:22 UTC
           </time>
        </span>
        <span itemprop='position'>#3</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="1" data-topic="4308"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v2/letter/a/ec9cab/40.png" class="avatar">azaxo:</div>
<blockquote><p>outlet_test1 = (64-24)*(64/40);</p></blockquote></aside>

<p>I think what you want to do is change the first line to </p>

<p>outlet_test1 = (64-24)*64/40;</p>

<p>or, clearer but with redundant parentheses, as multiplication and division take place in left to right order anyway.</p>

<p>outlet_test1 = ((64-24)*64)/40;</p>

<p>As <a class="mention" href="../../u/thetechnobear.html">@thetechnobear</a> noted, when 64/40 is evaluated in integer maths, the result is 1, s√• you loose the fractional part. The trick in integer math is to multiply the whole value with 64 before dividing with 40; that way, you don't get the decimal truncation until the the final value. If you really want to be accurate, add 20 (half of 40) before the division, to get the result properly rounded, i.e.</p>

<p>outlet_test1 = ((64-24)*64+20)/40;</p>

<p>The downside is because you're potentially multiplying your value with a fairly large integer (64) it will overflow before the division is performed; in the above example this won't happen, at least not with integers that are 16 bits wide or more, but I'm suspecting the expression is a simplification of a more complex expression involving variables, in which case you need to check your expression with the largest possible input value to check that it doesn't overflow in that case.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Not so easy math'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/azaxo.html'><b itemprop='author'>azaxo</b></a>
           
           <time datetime='2018-03-05T07:37:54Z' itemprop='datePublished'>
             2018-03-05 07:37:54 UTC
           </time>
        </span>
        <span itemprop='position'>#4</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="2" data-topic="4308"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/community.axoloti.com/thetechnobear/40/6_1.html" class="avatar">thetechnobear:</div>
<blockquote><p>type conversion in C, its an important topic,</p></blockquote></aside>

<p>Thank you Mark for pointing me in the right direction. </p>

<aside class="quote" data-post="3" data-topic="4308"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/community.axoloti.com/ricard/40/163_1.html" class="avatar">ricard:</div>
<blockquote><p>but I'm suspecting the expression is a simplification of a more complex expression involving variables, i</p></blockquote></aside>

<p>You are right about that!</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Not so easy math'>
      <hr>
  </div>






    </div>
    <footer class="container">
      <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <a href='../../index.html'>Home</a>
        <a href="../../categories.html">Categories</a>
        <a href="../../guidelines.html">FAQ/Guidelines</a>
        <a href="../../tos.html">Terms of Service</a>
        <a href="../../privacy.html">Privacy Policy</a>
      </nav>
      <p>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  

<!-- Mirrored from community.axoloti.com/t/not-so-easy-math/4308 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 10 Jul 2023 16:05:56 GMT -->
</html>
