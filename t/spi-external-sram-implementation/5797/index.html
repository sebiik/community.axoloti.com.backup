<!DOCTYPE html>
<html lang="en" class="desktop-view not-mobile-device  anon">
  <head>
    <meta charset="utf-8">
    <title>SPI external SRAM implementation - AxoObject coding - Axoloti Community</title>
    <meta name="description" content="So I&amp;#39;ve been playing around trying to get a 23LC1024 SPI SRAM chip working with Axoloti running on the STM32F407 Discovery board. 

I know I know, why try using SPI SRAM when the stock Axoloti board has fast and abundant&amp;hellip;">
    <meta name="discourse_theme_key" content="b5ce34aa-3ee1-4d3e-b190-0a2ab62c7408">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.9.0.beta3 - https://github.com/discourse/discourse version 13f3de4bf673802eb8ec595d36587b4524773209">
<link rel="icon" type="image/png" href="/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#nil">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="http://community.axoloti.com/t/spi-external-sram-implementation/5797" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"http://community.axoloti.com","potentialAction":{"@type":"SearchAction","target":"http://community.axoloti.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="http://community.axoloti.com/opensearch.xml" title="Axoloti Community Search">

    

      <meta name="fragment" content="!">


    <script>
      window.EmberENV = window.EmberENV || {};
      window.EmberENV['FORCE_JQUERY'] = true;
    </script>

    <link rel='preload' href='/assets/locales/en-5bbc8626277bd471a9fcd063411070c515cad1a78c86a38ad27792a513f11bd4.js' as='script'/>
<script src='/assets/locales/en-5bbc8626277bd471a9fcd063411070c515cad1a78c86a38ad27792a513f11bd4.js'></script>
    <link rel='preload' href='/assets/ember_jquery-a8dcbd325e04410f036f2a791d66d8316c48c5387acdd914de99a5dd6afb3cd3.js' as='script'/>
<script src='/assets/ember_jquery-a8dcbd325e04410f036f2a791d66d8316c48c5387acdd914de99a5dd6afb3cd3.js'></script>
    <link rel='preload' href='/assets/preload-store-ec90ffab9d7a6d9e507dda7cf7343e9d50b8bce624f7f44486ac8fd6b9814309.js' as='script'/>
<script src='/assets/preload-store-ec90ffab9d7a6d9e507dda7cf7343e9d50b8bce624f7f44486ac8fd6b9814309.js'></script>
    <link rel='preload' href='/assets/vendor-199fce5a9e9895329b51b04605f1f5061951acb488baa6b2ea2fc2ae36def529.js' as='script'/>
<script src='/assets/vendor-199fce5a9e9895329b51b04605f1f5061951acb488baa6b2ea2fc2ae36def529.js'></script>
    <link rel='preload' href='/assets/pretty-text-bundle-e888dd08c05658b05da2124dd56955aa8fe94225d532fb8bfa3264a3eb2aa581.js' as='script'/>
<script src='/assets/pretty-text-bundle-e888dd08c05658b05da2124dd56955aa8fe94225d532fb8bfa3264a3eb2aa581.js'></script>
    <link rel='preload' href='/assets/application-13a284a273d9247cd8b3d19ae7d053297aeb5b3eabaa9a901c9fd236fb7dfe60.js' as='script'/>
<script src='/assets/application-13a284a273d9247cd8b3d19ae7d053297aeb5b3eabaa9a901c9fd236fb7dfe60.js'></script>
    <link rel='preload' href='/assets/plugin-3a5d56cbe920ebb10de8abd59e839cf2d48d598ca07a267327f96e3fec534065.js' as='script'/>
<script src='/assets/plugin-3a5d56cbe920ebb10de8abd59e839cf2d48d598ca07a267327f96e3fec534065.js'></script>
    <link rel='preload' href='/assets/plugin-third-party-346f0166b34a16f0ac66ea388d925068ee8f76267dc167ac7173785ea046f465.js' as='script'/>
<script src='/assets/plugin-third-party-346f0166b34a16f0ac66ea388d925068ee8f76267dc167ac7173785ea046f465.js'></script>


      

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

    <link rel="manifest" href="/manifest.json">


      <link href="/stylesheets/desktop_d93a33ca8617326fe353f80e6ab865188244d48c.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop"/>


  <link href="/stylesheets/desktop_theme_1_6c5f8f7f5e6a154a9f0dfd7aedf04bae4b669f17.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop_theme"/>

    

<link rel="preload" href="/assets/fontawesome-webfont-2adefcbc041e7d18fcf2d417879dc5a09997aa64d675b7a3c4b6ce33da13f3fe.woff2?http://community.axoloti.com&2&v=4.7.0" as="font" type="font/woff2" crossorigin />
<style>
  @font-face {
    font-family: 'FontAwesome';
    src: url('/assets/fontawesome-webfont-2adefcbc041e7d18fcf2d417879dc5a09997aa64d675b7a3c4b6ce33da13f3fe.woff2?http://community.axoloti.com&2&v=4.7.0') format('woff2'),
         url('/assets/fontawesome-webfont-ba0c59deb5450f5cb41b3f93609ee2d0d995415877ddfa223e8a8a7533474f07.woff?http://community.axoloti.com&amp;2&v=4.7.0') format('woff');
  }
</style>


      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;SPI external SRAM implementation&#39;" href="http://community.axoloti.com/t/spi-external-sram-implementation/5797.rss" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://community.axoloti.com/uploads/default/optimized/2X/4/4c60814a64fc64df2a34f3dd381d7aef92c6b8e7_1_659x500.png" />
<meta property="og:image" content="http://community.axoloti.com/uploads/default/optimized/2X/4/4c60814a64fc64df2a34f3dd381d7aef92c6b8e7_1_659x500.png" />
<meta property="og:url" content="http://community.axoloti.com/t/spi-external-sram-implementation/5797" />
<meta name="twitter:url" content="http://community.axoloti.com/t/spi-external-sram-implementation/5797" />
<meta property="og:title" content="SPI external SRAM implementation" />
<meta name="twitter:title" content="SPI external SRAM implementation" />
<meta property="og:description" content="So I&#39;ve been playing around trying to get a 23LC1024 SPI SRAM chip working with Axoloti running on the STM32F407 Discovery board.   I know I know, why try using SPI SRAM when the stock Axoloti board has fast and abundant SDRAM. I do own a stock Axoloti and use it live, and my playing with the Discovery board is mainly for learning purposes. Kindly see below what I&#39;ve got so far...    [image]  Although the code is still quite ineffective the problem is, the SPI read and write actions seem to be u..." />
<meta name="twitter:description" content="So I&#39;ve been playing around trying to get a 23LC1024 SPI SRAM chip working with Axoloti running on the STM32F407 Discovery board.   I know I know, why try using SPI SRAM when the stock Axoloti board has fast and abundant SDRAM. I do own a stock Axoloti and use it live, and my playing with the Discovery board is mainly for learning purposes. Kindly see below what I&#39;ve got so far...    [image]  Although the code is still quite ineffective the problem is, the SPI read and write actions seem to be u..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="2 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="4 ❤" />



    
  </head>

  <body class="">
    

    <div class='debug-eyeline'></div>

    <noscript data-path="/t/spi-external-sram-implementation/5797">
      <header class="d-header">
  <div class="wrap">
    <div class="contents">
      <div class="row">
        <div class="title span13">
          <a href="/">
              <img src="/uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo">
          </a>
        </div>
            <div class='panel clearfix'>
              <a href="/login" class='btn btn-primary btn-small login-button'><i class="fa fa-user"></i> Log In</a>
            </div>
      </div>
    </div>
  </div>
</header>

      <div id="main-outlet" class="wrap">
        <!-- preload-content: -->
        <h1>
  <a href="/t/spi-external-sram-implementation/5797">SPI external SRAM implementation</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="/c/axoobject-code" itemprop="url">
        <span itemprop="title">AxoObject coding</span>
      </a>
    </div>
</div>





<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/sebiiksbcs'><b itemprop='author'>sebiiksbcs</b></a>
           
           <time datetime='2019-06-17T15:48:11Z' itemprop='datePublished'>
             2019-06-17 15:48:11 UTC
           </time>
        </span>
        <span itemprop='position'>#1</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>So I've been playing around trying to get a 23LC1024 SPI SRAM chip working with Axoloti running on the STM32F407 Discovery board.</p>

<p>I know I know, why try using SPI SRAM when the stock Axoloti board has fast and abundant SDRAM. I do own a stock Axoloti and use it live, and my playing with the Discovery board is mainly for learning purposes. Kindly see below what I've got so far...</p>

<p><div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/4c60814a64fc64df2a34f3dd381d7aef92c6b8e7" href="//community.axoloti.com/uploads/default/original/2X/4/4c60814a64fc64df2a34f3dd381d7aef92c6b8e7.png" class="lightbox" title="Screenshot from 2019-06-17 22-57-43.png"><img src="//community.axoloti.com/uploads/default/optimized/2X/4/4c60814a64fc64df2a34f3dd381d7aef92c6b8e7_1_659x500.png" width="659" height="500"><div class="meta">
<span class="filename">Screenshot from 2019-06-17 22-57-43.png</span><span class="informations">1356x1028 244 KB</span><span class="expand"></span>
</div></a></div></p>

<p>Although the code is still quite ineffective the problem is, the SPI read and write actions seem to be using up so much CPU. Does anyone have a hint on what I am missing (something about threads? Maybe use spiExchange instead of spiSend/spiReceive?)<br>I did try minimizing redundant function calls and do the whole read write action in k-rate, writing to the frac32[i] buffer in a 'for' loop, but it ended up in roughly the same CPU load.</p>

<p>I am using SPI1 (used SPI2 before, same)</p>

<p>Or is that the best SPI can do on ChibiOS / Axoloti / Discovery? I dare doubt that since the 23LC1024 SRAM works fast (?) and clean e.g. on Teensy 3.X with the Teensy Audio Library?</p>

<p>This is my custom SPI config object code in XML (or download file below):<br><a href="https://pastebin.com/wNzuyYzV" class="onebox" target="_blank" rel="nofollow noopener">https://pastebin.com/wNzuyYzV</a></p>

<p>And here's the 23LC(V)1024 delay test object code in XML (or download file below):<br><a href="https://pastebin.com/WT9dbQdU" class="onebox" target="_blank" rel="nofollow noopener">https://pastebin.com/WT9dbQdU</a></p>

<p><a class="attachment" href="//community.axoloti.com/uploads/default/original/2X/e/edd65fb4cafc5591f1ac3796485670bfe318103e.axo">spi1config.axo</a> (3.2 KB)<br><a class="attachment" href="//community.axoloti.com/uploads/default/original/2X/6/6cd43fb5e8b1d429c2180a47477467d32d3269d8.axp">spitest2-buffer.axp</a> (10.6 KB)</p>

<p>Thanks in advance, and please do let me know wherever my code sucks!</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:2'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='SPI external SRAM implementation'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/Blindsmyth'><b itemprop='author'>Blindsmyth</b></a>
           
           <time datetime='2020-05-01T14:45:32Z' itemprop='datePublished'>
             2020-05-01 14:45:32 UTC
           </time>
        </span>
        <span itemprop='position'>#2</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hey there, this looks very interesting and considering so many users here run out of sram (and sdram) I am surprised nobody commented here.</p>

<p>Have you ben able to make any progress with your project in the meantime?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='SPI external SRAM implementation'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/sebiiksbcs'><b itemprop='author'>sebiiksbcs</b></a>
           
           <time datetime='2020-05-02T09:37:02Z' itemprop='datePublished'>
             2020-05-02 09:37:02 UTC
           </time>
        </span>
        <span itemprop='position'>#3</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hi, actually I didn't follow up on this back then and let it be the way it was, however I now understand more about threads, interrupts, DMA etc. so I might have a look at this again to tune it up a bit. I2S, after all, is basically SPI in a specific configuration, and on the Axo it's stereo in stereo out with hardly any CPU load... this must be the power of DMA and interrupts.</p>

<p>That being said, I believe we're better off just using the Axo's stock SDRAM since it's fast and plenty. Expanding the internally usable SRAM in a useful way would mean delving deep in the firmware and linker (or maybe even lower?) code, besides this SRAM chip I have only speaks SPI, so I doubt there'd even be a way to have the memory available during firmware and patch compilation.</p>

<p>Hope this makes sense, glad to know there are others out there interested in this though!</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='SPI external SRAM implementation'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/Blindsmyth'><b itemprop='author'>Blindsmyth</b></a>
           
           <time datetime='2020-05-02T17:25:16Z' itemprop='datePublished'>
             2020-05-02 17:25:16 UTC
           </time>
        </span>
        <span itemprop='position'>#4</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="3" data-topic="5797"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//community.axoloti.com/user_avatar/community.axoloti.com/sebiiksbcs/40/6295_1.png" class="avatar">sebiiksbcs:</div>
<blockquote><p>That being said, I believe we're better off just using the Axo's stock SDRAM since it's fast and plenty.</p></blockquote></aside>

<p>I use almost all of that for sampling, so and sram is full too...</p>

<p>since you're busy with spi on axoloti have you ever tested linking to boards via spi? there is an experimental firmware branch, but there wasnt much happeing ever since.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='SPI external SRAM implementation'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/sebiiksbcs'><b itemprop='author'>sebiiksbcs</b></a>
           
           <time datetime='2020-05-06T04:26:40Z' itemprop='datePublished'>
             2020-05-06 04:26:40 UTC
           </time>
        </span>
        <span itemprop='position'>#5</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Linking boards is definitely worth looking into. Wondering if CAN would be a viable protocol actually.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='SPI external SRAM implementation'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/Blindsmyth'><b itemprop='author'>Blindsmyth</b></a>
           
           <time datetime='2020-05-06T17:21:39Z' itemprop='datePublished'>
             2020-05-06 17:21:39 UTC
           </time>
        </span>
        <span itemprop='position'>#6</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>What is CAN?</p>

<p>I think linking 2 boards would be so elegant, just double your resources and you would also have double ins and outs your system.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='SPI external SRAM implementation'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/sebiiksbcs'><b itemprop='author'>sebiiksbcs</b></a>
           
           <time datetime='2020-05-07T00:46:15Z' itemprop='datePublished'>
             2020-05-07 00:46:15 UTC
           </time>
        </span>
        <span itemprop='position'>#7</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Looks like CAN is another data transfer protocol and I believe it is used in automotive industry for inter-MCU communication? Anyway since some apps of the venerable Midibox platform use CAN to transfer data between multiple core MCUs I thought this would be a good candidate for Axo as well.</p>

<p>I agree with you that linking boards would be such a performance boost, it's a no-brauner really. Like so many other features, but so little time... I'm sure Johannes is busy enough already.</p>

<p>I'll definitely look into this though, I mean even a rudimentary data exchange (like transferring audio streams between boards directly into the other board's patch) would be so great</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='SPI external SRAM implementation'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/Nosnibor'><b itemprop='author'>Nosnibor</b></a>
           
           <time datetime='2020-05-10T15:37:51Z' itemprop='datePublished'>
             2020-05-10 15:37:51 UTC
           </time>
        </span>
        <span itemprop='position'>#8</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>The SPI functions (spiSend(), spiReceive() etc.) are from ChibiOS and are meant to be blocking, i.e. spiSend() returns only after all data has been sent. This means two things:<br>1. the CPU (or rather the thread) has to wait for each SPI transaction to finish. This seems wasteful: there is DMA and everything on the chip, and yet the CPU can't do anything else while SPI is active.<br>2. the source code is easily readable: spiSelect(), spiSend(), spiReceive() and spiUnselect() appear in the same order as things happen in realtime. ChibiOS also offers nonblocking SPI access with callbacks and stuff, which can quickly get confusing.<br>Notice that I mentioned the thread has to wait, not the whole CPU. ChibiOS can do multitasking after all. So if we put all SPI stuff in another thread, it won't delay the computation of all the other objects. There is already a factory object that puts code in a separate thread: script/script. Of course for the SPI RAM use some changes are necessary: red inputs and outputs instead of blue, and some mechanism (mutex or something) in the K-rate-code to sync the SPI thread to the main thread. I don't (yet) know enough about ChibiOS to figure that out.</p>

<p>As for linking boards via SPI, that seems to be the intention of the "Multiprocessor stream" and "Multiprocessor sync" connectors. The "stream" connector has SPI, and if we get the CPU not to wait for the hardware, SPI seems a practical interface: fast and no overhead (no start-bit, command-byte, frame checksum, address etc.). It should be possible to swap a block of data each k-rate cycle, maybe enough for stereo audio plus a bunch of control (blue) signals.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='SPI external SRAM implementation'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/sebiiksbcs'><b itemprop='author'>sebiiksbcs</b></a>
           
           <time datetime='2020-05-21T13:56:02Z' itemprop='datePublished'>
             2020-05-21 13:56:02 UTC
           </time>
        </span>
        <span itemprop='position'>#9</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>To answer myself, looks like CAN is too slow to get audio data (at least in axoloti quality format) across.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='SPI external SRAM implementation'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/sebiiksbcs'><b itemprop='author'>sebiiksbcs</b></a>
           
           <time datetime='2020-05-21T14:07:08Z' itemprop='datePublished'>
             2020-05-21 14:07:08 UTC
           </time>
        </span>
        <span itemprop='position'>#10</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Ok so I have the SPI RAM communication in a separate thread now and voila, it consumes very few CPU cycles.</p>

<blockquote><p> and some mechanism (mutex or something) in the K-rate-code to sync the SPI thread to the main thread. I don't (yet) know enough about ChibiOS to figure that out.</p></blockquote>

<p>I do get audio into the RAM and back out, however as you said I need to sync the thread to the main thread, i.e. make sure each audio block sent and received is in sync with the audio buffers. As of now I basically have a delay+samplerate reducer effect going on.</p>

<p>I am currently using a flag that is set each k-rate when an audio block is fully transfered into the SPI's transmit buffer, then checked inside the thread and cleared when the SPI transfer is finished. Doesn't seem to work the way I expected.</p>

<p>Another option, chSysLock(), would probably block the CPU far too long since I am transferring audio samples mono in blocks of BUFSIZE*2 bytes (resulting in 16bit audio), in other words each spiSend and spiReceive transfers BUFSIZE*2 bytes (plus the instructions and address data making up another 4 bytes). This is because the 23LC1024 has this mode called Sequential Mode in which you can basically keep clocking in as many bytes as you want with the chip auto-incrementing the data address.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='SPI external SRAM implementation'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/Nosnibor'><b itemprop='author'>Nosnibor</b></a>
           
           <time datetime='2020-05-21T20:08:55Z' itemprop='datePublished'>
             2020-05-21 20:08:55 UTC
           </time>
        </span>
        <span itemprop='position'>#11</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>chSysLock() seems too heavy-handed to me. There should be some simple mechanism like a message or an event flag for this.</p>

<p>(after reading some OS documentation) Ugh, messages are too complicated.<br>The SPI thread could call chEvtWaitAny() to wait for the main thread to copy the data. The main thread calls chEvtSignal() with at least one bit set after it has copied the data. This should release the SPI thread to do its job and return to waiting for the next round.<br>The SPI thread needs to have a higher priority than the main thread, so that it can start the SPI hardware immediately instead of waiting for the main thread to finish its k-rate computations (which would mean that (again) CPU and SPI hardware are not working at the same time, wasting precious CPU cycles).</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='SPI external SRAM implementation'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/sebiiksbcs'><b itemprop='author'>sebiiksbcs</b></a>
           
           <time datetime='2020-06-04T01:59:51Z' itemprop='datePublished'>
             2020-06-04 01:59:51 UTC
           </time>
        </span>
        <span itemprop='position'>#12</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Your suggestion worked!</p>

<p>Now I just need to shorten the wires or make a small breakout board for the SPI RAM because I am still getting pops and clicks likely due to wire noise.</p>

<p>Then I can focus on improving the objects (delay interpolation will be another hurdle).</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='SPI external SRAM implementation'>
      <hr>
  </div>






        <!-- :preload-content -->
        <footer>
          <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
            <a href='/'>Home</a>
            <a href="/categories">Categories</a>
            <a href="/guidelines">FAQ/Guidelines</a>
            <a href="/tos">Terms of Service</a>
            <a href="/privacy">Privacy Policy</a>
          </nav>
        </footer>
      </div>

      <footer id='noscript-footer'>
        <p>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
      </footer>
    </noscript>

      

    <section id='main'>
    </section>

    <div id='offscreen-content'>
    </div>

      <form id='hidden-login-form' method="post" action="/login" style="display: none;">
        <input name="username" type="text"     id="signin_username">
        <input name="password" type="password" id="signin_password">
        <input name="redirect" type="hidden">
        <input type="submit" id="signin-button" value="Log In">
      </form>

      <script>
      (function() {
        var ps = require('preload-store').default;
          ps.store("site", {"default_archetype":"regular","notification_types":{"mentioned":1,"replied":2,"quoted":3,"edited":4,"liked":5,"private_message":6,"invited_to_private_message":7,"invitee_accepted":8,"posted":9,"moved_post":10,"linked":11,"granted_badge":12,"invited_to_topic":13,"custom":14,"group_mentioned":15,"group_message_summary":16,"watching_first_post":17,"topic_reminder":18},"post_types":{"regular":1,"moderator_action":2,"small_action":3,"whisper":4},"groups":[{"id":1,"name":"admins"},{"id":0,"name":"everyone"},{"id":2,"name":"moderators"},{"id":3,"name":"staff"},{"id":10,"name":"trust_level_0"},{"id":11,"name":"trust_level_1"},{"id":12,"name":"trust_level_2"},{"id":13,"name":"trust_level_3"},{"id":14,"name":"trust_level_4"}],"filters":["latest","unread","new","read","posted","bookmarks"],"periods":["all","yearly","quarterly","monthly","weekly","daily"],"top_menu_items":["latest","unread","new","read","posted","bookmarks","category","categories","top"],"anonymous_top_menu_items":["latest","top","categories","category","categories","top"],"uncategorized_category_id":1,"is_readonly":false,"disabled_plugins":[],"user_field_max_length":2048,"suppressed_from_homepage_category_ids":[],"post_action_types":[{"name_key":"bookmark","name":"Bookmark","description":"Bookmark this post","short_description":"Bookmark this post","long_form":"bookmarked this post","is_flag":false,"icon":null,"id":1,"is_custom_flag":false},{"name_key":"like","name":"Like","description":"Like this post","short_description":"Like this post","long_form":"liked this","is_flag":false,"icon":"heart","id":2,"is_custom_flag":false},{"name_key":"off_topic","name":"Off-Topic","description":"This post is not relevant to the current discussion as defined by the title and first post, and should probably be moved elsewhere.","short_description":"Not relevant to the discussion","long_form":"flagged this as off-topic","is_flag":true,"icon":null,"id":3,"is_custom_flag":false},{"name_key":"inappropriate","name":"Inappropriate","description":"This post contains content that a reasonable person would consider offensive, abusive, or a violation of \u003ca href=\"/guidelines\"\u003eour community guidelines\u003c/a\u003e.","short_description":"A violation of \u003ca href=\"/guidelines\"\u003eour community guidelines\u003c/a\u003e","long_form":"flagged this as inappropriate","is_flag":true,"icon":null,"id":4,"is_custom_flag":false},{"name_key":"vote","name":"Vote","description":"Vote for this post","short_description":"Vote for this post","long_form":"voted for this post","is_flag":false,"icon":null,"id":5,"is_custom_flag":false},{"name_key":"spam","name":"Spam","description":"This post is an advertisement, or vandalism. It is not useful or relevant to the current topic.","short_description":"This is an advertisement or vandalism","long_form":"flagged this as spam","is_flag":true,"icon":null,"id":8,"is_custom_flag":false},{"name_key":"notify_user","name":"Send @{{username}} a message","description":"I want to talk to this person directly and privately about their post.","short_description":"I want to talk to this person directly and privately about their post.","long_form":"messaged user","is_flag":true,"icon":null,"id":6,"is_custom_flag":true},{"name_key":"notify_moderators","name":"Something Else","description":"This post requires staff attention for another reason not listed above.","short_description":"Requires staff attention for another reason","long_form":"flagged this for staff attention","is_flag":true,"icon":null,"id":7,"is_custom_flag":true}],"topic_flag_types":[{"name_key":"inappropriate","name":"Inappropriate","description":"This topic contains content that a reasonable person would consider offensive, abusive, or a violation of \u003ca href=\"/guidelines\"\u003eour community guidelines\u003c/a\u003e.","short_description":"translation missing: en.topic_flag_types.inappropriate.short_description","long_form":"flagged this as inappropriate","is_flag":true,"icon":null,"id":4,"is_custom_flag":false},{"name_key":"spam","name":"Spam","description":"This topic is an advertisement. It is not useful or relevant to this site, but promotional in nature.","short_description":"translation missing: en.topic_flag_types.spam.short_description","long_form":"flagged this as spam","is_flag":true,"icon":null,"id":8,"is_custom_flag":false},{"name_key":"notify_moderators","name":"Something Else","description":"This topic requires general staff attention based on the \u003ca href=\"/guidelines\"\u003eguidelines\u003c/a\u003e, \u003ca href=\"/tos\"\u003eTOS\u003c/a\u003e, or for another reason not listed above.","short_description":"translation missing: en.topic_flag_types.notify_moderators.short_description","long_form":"flagged this for moderator attention","is_flag":true,"icon":null,"id":7,"is_custom_flag":true}],"can_create_tag":null,"can_tag_topics":null,"tags_filter_regexp":"[/\\?#\\[\\]@!\\$\u0026'\\(\\)\\*\\+,;=\\.%\\\\`^\\s|\\{\\}\"\u003c\u003e]+","top_tags":["midi","controllers","modular","linux","1.0.11","macos","windows","troubleshooting","usb","challenge","wavetable","library","math","faust","dsp","out","tips","current","14bit"],"topic_featured_link_allowed_category_ids":[10,4,12,1,6,2,15,5,3,16,14,8,9,11,7,13],"user_themes":[{"theme_key":"b5ce34aa-3ee1-4d3e-b190-0a2ab62c7408","name":"Migrated from Site Text","default":true}],"categories":[{"id":1,"name":"Uncategorized","color":"AB9364","text_color":"FFFFFF","slug":"uncategorized","topic_count":-1,"post_count":1,"position":0,"description":"Topics that don't need a category, or don't fit into any other existing category.","description_text":"","topic_url":"/t/","read_restricted":false,"permission":null,"notification_level":1,"topic_template":null,"has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":10,"name":"User Guide","color":"3AB54A","text_color":"FFFFFF","slug":"user-guide","topic_count":24,"post_count":102,"position":1,"description":"This category contains posts to help users use Axoloti, a dynamic user guide.","description_text":"This category contains posts to help users use Axoloti, a dynamic user guide.","topic_url":"/t/about-the-user-guide-category/51","read_restricted":false,"permission":null,"notification_level":1,"topic_template":"","has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":8,"name":"Helpdesk","color":"9EB83B","text_color":"FFFFFF","slug":"helpdesk","topic_count":389,"post_count":3093,"position":2,"description":"This category is for reporting issues and bugs\u003cbr\u003ePlease use other categories for discussions on features or questions or \"how to?\"","description_text":"This category is for reporting issues and bugsPlease use other categories for discussions on features or questions or \"how to?\"","topic_url":"/t/about-the-helpdesk-category/23","read_restricted":false,"permission":null,"notification_level":1,"topic_template":"","has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":13,"name":"Community Library","color":"9EB83B","text_color":"FFFFFF","slug":"community-library","topic_count":54,"post_count":2940,"position":3,"description":"Category for the community library","description_text":"Category for the community library","topic_url":"/t/about-the-community-library-category/1005","read_restricted":false,"permission":null,"notification_level":1,"topic_template":"","has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":7,"name":"Patching","color":"AB9364","text_color":"FFFFFF","slug":"patching","topic_count":1023,"post_count":8372,"position":4,"description":"This category is for discussion about patching Axoloti, and sharing patches.","description_text":"This category is for discussion about patching Axoloti, and sharing patches.","topic_url":"/t/about-the-patching-category/14","read_restricted":false,"permission":null,"notification_level":1,"topic_template":"","has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":5,"name":"Hardware","color":"AB9364","text_color":"FFFFFF","slug":"hardware","topic_count":696,"post_count":7483,"position":5,"description":"This category is intended for discussion about the Axoloti hardware and connecting to other hardware, including , connecting midi controllers and other hardware, related hardware projects. ","description_text":"This category is intended for discussion about the Axoloti hardware and connecting to other hardware, including , connecting midi controllers and other hardware, related hardware projects.","topic_url":"/t/about-the-hardware-category/12","read_restricted":false,"permission":null,"notification_level":1,"topic_template":null,"has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":6,"name":"Software","color":"AB9364","text_color":"FFFFFF","slug":"software","topic_count":334,"post_count":3364,"position":6,"description":"This category is for posts regarding the software of Axoloti, this includes the Axoloti patching GUI, Axoloti Objects (axo) and firmware. Please use the Patching category to discuss patching Axoloti. ","description_text":"This category is for posts regarding the software of Axoloti, this includes the Axoloti patching GUI, Axoloti Objects (axo) and firmware. Please use the Patching category to discuss patching Axoloti.","topic_url":"/t/about-the-software-category/13","read_restricted":false,"permission":null,"notification_level":1,"topic_template":null,"has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":16,"name":"AxoObject coding","color":"AB9364","text_color":"FFFFFF","slug":"axoobject-code","topic_count":269,"post_count":2191,"position":7,"description":"Category to discuss coding Axoloti Objects.","description_text":"Category to discuss coding Axoloti Objects.","topic_url":"/t/about-the-axoobject-coding-category/1519","read_restricted":false,"permission":null,"notification_level":1,"topic_template":null,"has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":14,"name":"News/Events","color":"283890","text_color":"FFFFFF","slug":"events","topic_count":30,"post_count":106,"position":8,"description":"Meetups, workshops, presentations, all sort of events.\u003cbr\u003eIt's perfectly fine for users to announce and discuss their own events, as long as it is related to Axoloti somehow.\u003cbr\u003eStart your topic title with the name of the area where your event will happen.","description_text":"Meetups, workshops, presentations, all sort of events.It's perfectly fine for users to announce and discuss their own events, as long as it is related to Axoloti somehow.Start your topic title with the name of the area where your event will happen.","topic_url":"/t/about-the-events-category/1142","read_restricted":false,"permission":null,"notification_level":1,"topic_template":"","has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":12,"name":"Challenges","color":"0E76BD","text_color":"FFFFFF","slug":"challenges","topic_count":19,"post_count":266,"position":9,"description":"This category is for challenges, competitions and discussions related to these.\u003cbr\u003eposters are reminded when entering challenges and competitions to not include any copyrighted material","description_text":"This category is for challenges, competitions and discussions related to these.posters are reminded when entering challenges and competitions to not include any copyrighted material","topic_url":"/t/about-the-challenges-category/838","read_restricted":false,"permission":null,"notification_level":1,"topic_template":"","has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":9,"name":"Your Music/Projects","color":"0E76BD","text_color":"FFFFFF","slug":"your-music-projects","topic_count":186,"post_count":1307,"position":10,"description":"Have some music that you have made with Axoloti? or an interesting project you would like to share the communities?\u003cbr\u003eTells us about it here.","description_text":"Have some music that you have made with Axoloti? or an interesting project you would like to share the communities?Tells us about it here.","topic_url":"/t/about-the-your-music-projects-category/25","read_restricted":false,"permission":null,"notification_level":1,"topic_template":"","has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":15,"name":"Lounge","color":"AB9364","text_color":"FFFFFF","slug":"lounge","topic_count":105,"post_count":1712,"position":11,"description":"This category is for discussions that are related to Axoloti generally but are not specifically about Axoloti.\u003cbr\u003e(please ensure it has some relevance to Axoloti, rather than general discussion) ","description_text":"This category is for discussions that are related to Axoloti generally but are not specifically about Axoloti.(please ensure it has some relevance to Axoloti, rather than general discussion)","topic_url":"/t/about-the-lounge-category/1277","read_restricted":false,"permission":null,"notification_level":1,"topic_template":null,"has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":11,"name":"Developer","color":"BF1E2E","text_color":"FFFFFF","slug":"developer","topic_count":66,"post_count":648,"position":12,"description":"This category is for discussion about the development of Axoloti at a low level, its intended only for developers/programmers.","description_text":"This category is for discussion about the development of Axoloti at a low level, its intended only for developers/programmers.","topic_url":"/t/about-the-developer-category/735","read_restricted":false,"permission":null,"notification_level":1,"topic_template":"This category is for low level discussion on the development of Axoloti, its is intended for developers/programmers only.","has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null},{"id":3,"name":"Website and Forum","color":"808281","text_color":"FFFFFF","slug":"meta","topic_count":45,"post_count":412,"position":13,"description":"Discussion about this site, its organization, how it works, and how we can improve it.","description_text":"Discussion about this site, its organization, how it works, and how we can improve it.","topic_url":"/t/about-the-meta-category/2","read_restricted":false,"permission":null,"notification_level":1,"topic_template":"","has_children":false,"sort_order":null,"sort_ascending":null,"show_subcategory_list":false,"num_featured_topics":3,"default_view":null,"subcategory_list_style":"rows_with_featured_topics","default_top_period":"all","uploaded_logo":null,"uploaded_background":null}],"trust_levels":[{"id":0,"name":"new user"},{"id":1,"name":"basic user"},{"id":2,"name":"member"},{"id":3,"name":"regular"},{"id":4,"name":"leader"}],"archetypes":[{"id":"regular","name":"Regular Topic","options":[]},{"id":"banner","name":"Banner Topic","options":[]}],"user_fields":[]});
          ps.store("siteSettings", {"title":"Axoloti Community","contact_email":"johannes.taelman@gmail.com","contact_url":"","logo_url":"/uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png","logo_small_url":"/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png","mobile_logo_url":"","favicon_url":"/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png","allow_user_locale":false,"suggested_topics":5,"track_external_right_clicks":false,"ga_universal_tracking_code":"UA-56017691-4","ga_universal_domain_name":"auto","ga_tracking_code":"","ga_domain_name":"","gtm_container_id":"","top_menu":"categories|latest|new|unread|top","post_menu":"like-count|like|share|flag|edit|bookmark|delete|admin|reply","post_menu_hidden_items":"flag|bookmark|edit|delete|admin","share_links":"twitter|facebook|email","desktop_category_page_style":"categories_and_latest_topics","category_colors":"BF1E2E|F1592A|F7941D|9EB83B|3AB54A|12A89D|25AAE2|0E76BD|652D90|92278F|ED207B|8C6238|231F20|808281|B3B5B4|283890","category_style":"bullet","enable_mobile_theme":true,"relative_date_duration":30,"fixed_category_positions":true,"fixed_category_positions_on_create":false,"enable_badges":true,"enable_badge_sql":false,"enable_whispers":false,"invite_only":false,"login_required":false,"must_approve_users":false,"enable_local_logins":true,"allow_new_registrations":true,"enable_signup_cta":true,"enable_google_oauth2_logins":false,"enable_yahoo_logins":false,"enable_twitter_logins":false,"enable_instagram_logins":false,"enable_facebook_logins":false,"enable_github_logins":false,"enable_sso":false,"sso_overrides_avatar":false,"min_username_length":3,"max_username_length":20,"min_password_length":10,"min_admin_password_length":15,"logout_redirect":"","full_name_required":false,"enable_names":true,"invites_per_page":40,"delete_user_max_post_age":60,"delete_all_posts_max":15,"show_email_on_profile":false,"prioritize_username_in_ux":true,"enable_user_directory":true,"allow_anonymous_posting":false,"anonymous_posting_min_trust_level":1,"hide_user_profiles_from_public":false,"enable_group_directory":true,"min_post_length":20,"min_first_post_length":20,"min_private_message_post_length":10,"max_post_length":32000,"topic_featured_link_enabled":true,"min_topic_title_length":15,"max_topic_title_length":255,"min_private_message_title_length":2,"allow_uncategorized_topics":false,"min_title_similar_length":10,"min_body_similar_length":15,"enable_private_messages":true,"edit_history_visible_to_public":false,"delete_removed_posts_after":24,"enable_experimental_markdown_it":false,"traditional_markdown_linebreaks":false,"enable_markdown_typographer":false,"allow_html_tables":false,"suppress_reply_directly_below":true,"suppress_reply_directly_above":true,"max_reply_history":1,"newuser_max_images":1,"newuser_max_attachments":2,"show_pinned_excerpt_mobile":true,"show_pinned_excerpt_desktop":true,"display_name_on_posts":false,"show_time_gap_days":7,"short_progress_text_threshold":10000,"default_code_lang":"auto","autohighlight_all_code":false,"highlighted_languages":"apache|bash|cs|cpp|css|coffeescript|diff|xml|http|ini|json|java|javascript|makefile|markdown|nginx|objectivec|ruby|perl|php|python|sql|handlebars","censored_words":"","censored_pattern":"","enable_emoji":true,"emoji_set":"twitter","code_formatting_style":"4-spaces-indent","allowed_href_schemes":"","email_time_window_mins":10,"disable_digest_emails":false,"email_in":false,"disable_emails":false,"bounce_score_threshold":4,"max_image_size_kb":3072,"max_attachment_size_kb":3072,"authorized_extensions":"jpg|jpeg|png|gif|axo|axp|axs|axh|fpd|brd|axt","max_image_width":690,"max_image_height":500,"prevent_anons_from_downloading_files":false,"enable_s3_uploads":false,"allow_profile_backgrounds":true,"allow_uploaded_avatars":true,"allow_animated_avatars":false,"default_avatars":"","external_system_avatars_enabled":true,"external_system_avatars_url":"/letter_avatar_proxy/v2/letter/{first_letter}/{color}/{size}.png","allow_staff_to_upload_any_file_in_pm":true,"tl1_requires_read_posts":30,"tl3_links_no_follow":false,"use_admin_ip_whitelist":false,"max_oneboxes_per_post":50,"alert_admins_if_errors_per_minute":0,"alert_admins_if_errors_per_hour":0,"max_prints_per_hour_per_user":5,"enable_long_polling":true,"long_polling_base_url":"/","background_polling_interval":60000,"polling_interval":3000,"anon_polling_interval":15000,"flush_timings_secs":20,"verbose_localization":false,"max_new_topics":500,"tos_url":"","privacy_policy_url":"","faq_url":"","maximum_backups":5,"min_search_term_length":3,"version_checks":true,"suppress_uncategorized_badge":true,"topic_views_heat_low":1000,"topic_views_heat_medium":2000,"topic_views_heat_high":5000,"topic_post_like_heat_low":0.5,"topic_post_like_heat_medium":1.0,"topic_post_like_heat_high":2.0,"history_hours_low":12,"history_hours_medium":24,"history_hours_high":48,"cold_age_days_low":14,"cold_age_days_medium":90,"cold_age_days_high":180,"global_notice":"","show_create_topics_notice":true,"bootstrap_mode_min_users":50,"bootstrap_mode_enabled":false,"automatically_unpin_topics":true,"read_time_word_count":500,"disable_mailing_list_mode":false,"default_topics_automatic_unpin":true,"tagging_enabled":true,"tag_style":"simple","max_tags_per_topic":5,"max_tag_length":20,"min_trust_level_to_tag_topics":0,"max_tag_search_results":5,"show_filter_by_tag":true,"tags_sort_alphabetically":false,"staff_tags":"","suppress_overlapping_tags_in_list":false,"discourse_narrative_bot_enabled":true,"poll_enabled":true,"poll_maximum_options":20,"details_enabled":true,"available_locales":"ar|bs_BA|cs|da|de|el|en|es|et|fa_IR|fi|fr|gl|he|id|it|ja|ko|nb_NO|nl|pl_PL|pt|pt_BR|ro|ru|sk|sq|sv|te|tr_TR|uk|ur|vi|zh_CN|zh_TW"});
          ps.store("customHTML", {"top":"","footer":""});
          ps.store("banner", {});
          ps.store("customEmoji", []);
          ps.store("translationOverrides", {});
          ps.store("topic_5797", {"post_stream":{"posts":[{"id":34652,"name":"Sebastian","username":"sebiiksbcs","avatar_template":"/user_avatar/community.axoloti.com/sebiiksbcs/{size}/6295_1.png","created_at":"2019-06-17T15:48:11.155Z","cooked":"\u003cp\u003eSo I've been playing around trying to get a 23LC1024 SPI SRAM chip working with Axoloti running on the STM32F407 Discovery board.\u003c/p\u003e\n\n\u003cp\u003eI know I know, why try using SPI SRAM when the stock Axoloti board has fast and abundant SDRAM. I do own a stock Axoloti and use it live, and my playing with the Discovery board is mainly for learning purposes. Kindly see below what I've got so far...\u003c/p\u003e\n\n\u003cp\u003e\u003cdiv class=\"lightbox-wrapper\"\u003e\u003ca data-download-href=\"//community.axoloti.com/uploads/default/4c60814a64fc64df2a34f3dd381d7aef92c6b8e7\" href=\"//community.axoloti.com/uploads/default/original/2X/4/4c60814a64fc64df2a34f3dd381d7aef92c6b8e7.png\" class=\"lightbox\" title=\"Screenshot from 2019-06-17 22-57-43.png\"\u003e\u003cimg src=\"//community.axoloti.com/uploads/default/optimized/2X/4/4c60814a64fc64df2a34f3dd381d7aef92c6b8e7_1_659x500.png\" width=\"659\" height=\"500\"\u003e\u003cdiv class=\"meta\"\u003e\n\u003cspan class=\"filename\"\u003eScreenshot from 2019-06-17 22-57-43.png\u003c/span\u003e\u003cspan class=\"informations\"\u003e1356x1028 244 KB\u003c/span\u003e\u003cspan class=\"expand\"\u003e\u003c/span\u003e\n\u003c/div\u003e\u003c/a\u003e\u003c/div\u003e\u003c/p\u003e\n\n\u003cp\u003eAlthough the code is still quite ineffective the problem is, the SPI read and write actions seem to be using up so much CPU. Does anyone have a hint on what I am missing (something about threads? Maybe use spiExchange instead of spiSend/spiReceive?)\u003cbr\u003eI did try minimizing redundant function calls and do the whole read write action in k-rate, writing to the frac32[i] buffer in a 'for' loop, but it ended up in roughly the same CPU load.\u003c/p\u003e\n\n\u003cp\u003eI am using SPI1 (used SPI2 before, same)\u003c/p\u003e\n\n\u003cp\u003eOr is that the best SPI can do on ChibiOS / Axoloti / Discovery? I dare doubt that since the 23LC1024 SRAM works fast (?) and clean e.g. on Teensy 3.X with the Teensy Audio Library?\u003c/p\u003e\n\n\u003cp\u003eThis is my custom SPI config object code in XML (or download file below):\u003cbr\u003e\u003ca href=\"https://pastebin.com/wNzuyYzV\" class=\"onebox\" target=\"_blank\" rel=\"nofollow noopener\"\u003ehttps://pastebin.com/wNzuyYzV\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eAnd here's the 23LC(V)1024 delay test object code in XML (or download file below):\u003cbr\u003e\u003ca href=\"https://pastebin.com/WT9dbQdU\" class=\"onebox\" target=\"_blank\" rel=\"nofollow noopener\"\u003ehttps://pastebin.com/WT9dbQdU\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003ca class=\"attachment\" href=\"//community.axoloti.com/uploads/default/original/2X/e/edd65fb4cafc5591f1ac3796485670bfe318103e.axo\"\u003espi1config.axo\u003c/a\u003e (3.2 KB)\u003cbr\u003e\u003ca class=\"attachment\" href=\"//community.axoloti.com/uploads/default/original/2X/6/6cd43fb5e8b1d429c2180a47477467d32d3269d8.axp\"\u003espitest2-buffer.axp\u003c/a\u003e (10.6 KB)\u003c/p\u003e\n\n\u003cp\u003eThanks in advance, and please do let me know wherever my code sucks!\u003c/p\u003e","post_number":1,"post_type":1,"updated_at":"2019-06-17T15:48:11.155Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"avg_time":70,"incoming_link_count":40,"reads":65,"score":246.5,"yours":false,"topic_id":5797,"topic_slug":"spi-external-sram-implementation","display_username":"Sebastian","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"link_counts":[{"url":"//community.axoloti.com/uploads/default/original/2X/e/edd65fb4cafc5591f1ac3796485670bfe318103e.axo","internal":true,"reflection":false,"clicks":3},{"url":"https://pastebin.com/wNzuyYzV","internal":false,"reflection":false,"title":"[XML] Axoloti spi1config object - Pastebin.com","clicks":3},{"url":"//community.axoloti.com/uploads/default/original/2X/6/6cd43fb5e8b1d429c2180a47477467d32d3269d8.axp","internal":true,"reflection":false,"clicks":1},{"url":"https://pastebin.com/WT9dbQdU","internal":false,"reflection":false,"title":"[XML] Axoloti 23LC1024 delay test object - Pastebin.com","clicks":1},{"url":"//community.axoloti.com/uploads/default/original/2X/4/4c60814a64fc64df2a34f3dd381d7aef92c6b8e7.png","internal":true,"reflection":false,"clicks":0}],"read":true,"user_title":null,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":139,"hidden":false,"hidden_reason_id":null,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":false,"wiki":false},{"id":39615,"name":"Simon","username":"Blindsmyth","avatar_template":"/letter_avatar_proxy/v2/letter/b/2acd7d/{size}.png","created_at":"2020-05-01T14:45:32.861Z","cooked":"\u003cp\u003eHey there, this looks very interesting and considering so many users here run out of sram (and sdram) I am surprised nobody commented here.\u003c/p\u003e\n\n\u003cp\u003eHave you ben able to make any progress with your project in the meantime?\u003c/p\u003e","post_number":2,"post_type":1,"updated_at":"2020-05-01T14:46:00.453Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"avg_time":30,"incoming_link_count":0,"reads":48,"score":11.1,"yours":false,"topic_id":5797,"topic_slug":"spi-external-sram-implementation","display_username":"Simon","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":337,"hidden":false,"hidden_reason_id":null,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":false,"wiki":false},{"id":39639,"name":"Sebastian","username":"sebiiksbcs","avatar_template":"/user_avatar/community.axoloti.com/sebiiksbcs/{size}/6295_1.png","created_at":"2020-05-02T09:37:02.122Z","cooked":"\u003cp\u003eHi, actually I didn't follow up on this back then and let it be the way it was, however I now understand more about threads, interrupts, DMA etc. so I might have a look at this again to tune it up a bit. I2S, after all, is basically SPI in a specific configuration, and on the Axo it's stereo in stereo out with hardly any CPU load... this must be the power of DMA and interrupts.\u003c/p\u003e\n\n\u003cp\u003eThat being said, I believe we're better off just using the Axo's stock SDRAM since it's fast and plenty. Expanding the internally usable SRAM in a useful way would mean delving deep in the firmware and linker (or maybe even lower?) code, besides this SRAM chip I have only speaks SPI, so I doubt there'd even be a way to have the memory available during firmware and patch compilation.\u003c/p\u003e\n\n\u003cp\u003eHope this makes sense, glad to know there are others out there interested in this though!\u003c/p\u003e","post_number":3,"post_type":1,"updated_at":"2020-05-02T09:37:02.122Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"avg_time":36,"incoming_link_count":0,"reads":47,"score":31.2,"yours":false,"topic_id":5797,"topic_slug":"spi-external-sram-implementation","display_username":"Sebastian","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":139,"hidden":false,"hidden_reason_id":null,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":false,"wiki":false},{"id":39645,"name":"Simon","username":"Blindsmyth","avatar_template":"/letter_avatar_proxy/v2/letter/b/2acd7d/{size}.png","created_at":"2020-05-02T17:25:16.303Z","cooked":"\u003caside class=\"quote\" data-post=\"3\" data-topic=\"5797\"\u003e\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"20\" height=\"20\" src=\"//community.axoloti.com/user_avatar/community.axoloti.com/sebiiksbcs/40/6295_1.png\" class=\"avatar\"\u003esebiiksbcs:\u003c/div\u003e\n\u003cblockquote\u003e\u003cp\u003eThat being said, I believe we're better off just using the Axo's stock SDRAM since it's fast and plenty.\u003c/p\u003e\u003c/blockquote\u003e\u003c/aside\u003e\n\n\u003cp\u003eI use almost all of that for sampling, so and sram is full too...\u003c/p\u003e\n\n\u003cp\u003esince you're busy with spi on axoloti have you ever tested linking to boards via spi? there is an experimental firmware branch, but there wasnt much happeing ever since.\u003c/p\u003e","post_number":4,"post_type":1,"updated_at":"2020-05-02T17:25:16.303Z","reply_count":1,"reply_to_post_number":3,"quote_count":1,"avg_time":27,"incoming_link_count":0,"reads":47,"score":15.75,"yours":false,"topic_id":5797,"topic_slug":"spi-external-sram-implementation","display_username":"Simon","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":337,"hidden":false,"hidden_reason_id":null,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":false,"wiki":false},{"id":39683,"name":"Sebastian","username":"sebiiksbcs","avatar_template":"/user_avatar/community.axoloti.com/sebiiksbcs/{size}/6295_1.png","created_at":"2020-05-06T04:26:40.460Z","cooked":"\u003cp\u003eLinking boards is definitely worth looking into. Wondering if CAN would be a viable protocol actually.\u003c/p\u003e","post_number":5,"post_type":1,"updated_at":"2020-05-06T04:27:08.348Z","reply_count":1,"reply_to_post_number":4,"quote_count":0,"avg_time":20,"incoming_link_count":0,"reads":44,"score":14.8,"yours":false,"topic_id":5797,"topic_slug":"spi-external-sram-implementation","display_username":"Sebastian","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Blindsmyth","avatar_template":"/letter_avatar_proxy/v2/letter/b/2acd7d/{size}.png"},"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":139,"hidden":false,"hidden_reason_id":null,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":false,"wiki":false},{"id":39689,"name":"Simon","username":"Blindsmyth","avatar_template":"/letter_avatar_proxy/v2/letter/b/2acd7d/{size}.png","created_at":"2020-05-06T17:21:39.206Z","cooked":"\u003cp\u003eWhat is CAN?\u003c/p\u003e\n\n\u003cp\u003eI think linking 2 boards would be so elegant, just double your resources and you would also have double ins and outs your system.\u003c/p\u003e","post_number":6,"post_type":1,"updated_at":"2020-05-06T17:21:39.206Z","reply_count":0,"reply_to_post_number":5,"quote_count":0,"avg_time":19,"incoming_link_count":0,"reads":44,"score":9.75,"yours":false,"topic_id":5797,"topic_slug":"spi-external-sram-implementation","display_username":"Simon","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"sebiiksbcs","avatar_template":"/user_avatar/community.axoloti.com/sebiiksbcs/{size}/6295_1.png"},"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":337,"hidden":false,"hidden_reason_id":null,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":false,"wiki":false},{"id":39693,"name":"Sebastian","username":"sebiiksbcs","avatar_template":"/user_avatar/community.axoloti.com/sebiiksbcs/{size}/6295_1.png","created_at":"2020-05-07T00:46:15.478Z","cooked":"\u003cp\u003eLooks like CAN is another data transfer protocol and I believe it is used in automotive industry for inter-MCU communication? Anyway since some apps of the venerable Midibox platform use CAN to transfer data between multiple core MCUs I thought this would be a good candidate for Axo as well.\u003c/p\u003e\n\n\u003cp\u003eI agree with you that linking boards would be such a performance boost, it's a no-brauner really. Like so many other features, but so little time... I'm sure Johannes is busy enough already.\u003c/p\u003e\n\n\u003cp\u003eI'll definitely look into this though, I mean even a rudimentary data exchange (like transferring audio streams between boards directly into the other board's patch) would be so great\u003c/p\u003e","post_number":7,"post_type":1,"updated_at":"2020-05-07T00:46:15.478Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"avg_time":24,"incoming_link_count":0,"reads":41,"score":14.4,"yours":false,"topic_id":5797,"topic_slug":"spi-external-sram-implementation","display_username":"Sebastian","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":139,"hidden":false,"hidden_reason_id":null,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":false,"wiki":false},{"id":39717,"name":null,"username":"Nosnibor","avatar_template":"/letter_avatar_proxy/v2/letter/n/51bf81/{size}.png","created_at":"2020-05-10T15:37:51.180Z","cooked":"\u003cp\u003eThe SPI functions (spiSend(), spiReceive() etc.) are from ChibiOS and are meant to be blocking, i.e. spiSend() returns only after all data has been sent. This means two things:\u003cbr\u003e1. the CPU (or rather the thread) has to wait for each SPI transaction to finish. This seems wasteful: there is DMA and everything on the chip, and yet the CPU can't do anything else while SPI is active.\u003cbr\u003e2. the source code is easily readable: spiSelect(), spiSend(), spiReceive() and spiUnselect() appear in the same order as things happen in realtime. ChibiOS also offers nonblocking SPI access with callbacks and stuff, which can quickly get confusing.\u003cbr\u003eNotice that I mentioned the thread has to wait, not the whole CPU. ChibiOS can do multitasking after all. So if we put all SPI stuff in another thread, it won't delay the computation of all the other objects. There is already a factory object that puts code in a separate thread: script/script. Of course for the SPI RAM use some changes are necessary: red inputs and outputs instead of blue, and some mechanism (mutex or something) in the K-rate-code to sync the SPI thread to the main thread. I don't (yet) know enough about ChibiOS to figure that out.\u003c/p\u003e\n\n\u003cp\u003eAs for linking boards via SPI, that seems to be the intention of the \"Multiprocessor stream\" and \"Multiprocessor sync\" connectors. The \"stream\" connector has SPI, and if we get the CPU not to wait for the hardware, SPI seems a practical interface: fast and no overhead (no start-bit, command-byte, frame checksum, address etc.). It should be possible to swap a block of data each k-rate cycle, maybe enough for stereo audio plus a bunch of control (blue) signals.\u003c/p\u003e","post_number":8,"post_type":1,"updated_at":"2020-05-10T15:37:51.180Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"avg_time":30,"incoming_link_count":2,"reads":38,"score":39.1,"yours":false,"topic_id":5797,"topic_slug":"spi-external-sram-implementation","display_username":null,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":2371,"hidden":false,"hidden_reason_id":null,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":false,"wiki":false},{"id":39805,"name":"Sebastian","username":"sebiiksbcs","avatar_template":"/user_avatar/community.axoloti.com/sebiiksbcs/{size}/6295_1.png","created_at":"2020-05-21T13:56:02.831Z","cooked":"\u003cp\u003eTo answer myself, looks like CAN is too slow to get audio data (at least in axoloti quality format) across.\u003c/p\u003e","post_number":9,"post_type":1,"updated_at":"2020-05-21T13:56:02.831Z","reply_count":0,"reply_to_post_number":7,"quote_count":0,"avg_time":20,"incoming_link_count":0,"reads":31,"score":7.2,"yours":false,"topic_id":5797,"topic_slug":"spi-external-sram-implementation","display_username":"Sebastian","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"sebiiksbcs","avatar_template":"/user_avatar/community.axoloti.com/sebiiksbcs/{size}/6295_1.png"},"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":139,"hidden":false,"hidden_reason_id":null,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":false,"wiki":false},{"id":39807,"name":"Sebastian","username":"sebiiksbcs","avatar_template":"/user_avatar/community.axoloti.com/sebiiksbcs/{size}/6295_1.png","created_at":"2020-05-21T14:07:08.057Z","cooked":"\u003cp\u003eOk so I have the SPI RAM communication in a separate thread now and voila, it consumes very few CPU cycles.\u003c/p\u003e\n\n\u003cblockquote\u003e\u003cp\u003e and some mechanism (mutex or something) in the K-rate-code to sync the SPI thread to the main thread. I don't (yet) know enough about ChibiOS to figure that out.\u003c/p\u003e\u003c/blockquote\u003e\n\n\u003cp\u003eI do get audio into the RAM and back out, however as you said I need to sync the thread to the main thread, i.e. make sure each audio block sent and received is in sync with the audio buffers. As of now I basically have a delay+samplerate reducer effect going on.\u003c/p\u003e\n\n\u003cp\u003eI am currently using a flag that is set each k-rate when an audio block is fully transfered into the SPI's transmit buffer, then checked inside the thread and cleared when the SPI transfer is finished. Doesn't seem to work the way I expected.\u003c/p\u003e\n\n\u003cp\u003eAnother option, chSysLock(), would probably block the CPU far too long since I am transferring audio samples mono in blocks of BUFSIZE*2 bytes (resulting in 16bit audio), in other words each spiSend and spiReceive transfers BUFSIZE*2 bytes (plus the instructions and address data making up another 4 bytes). This is because the 23LC1024 has this mode called Sequential Mode in which you can basically keep clocking in as many bytes as you want with the chip auto-incrementing the data address.\u003c/p\u003e","post_number":10,"post_type":1,"updated_at":"2020-05-21T14:07:42.839Z","reply_count":1,"reply_to_post_number":8,"quote_count":0,"avg_time":22,"incoming_link_count":0,"reads":35,"score":13.1,"yours":false,"topic_id":5797,"topic_slug":"spi-external-sram-implementation","display_username":"Sebastian","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"Nosnibor","avatar_template":"/letter_avatar_proxy/v2/letter/n/51bf81/{size}.png"},"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":139,"hidden":false,"hidden_reason_id":null,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":false,"wiki":false},{"id":39814,"name":null,"username":"Nosnibor","avatar_template":"/letter_avatar_proxy/v2/letter/n/51bf81/{size}.png","created_at":"2020-05-21T20:08:55.111Z","cooked":"\u003cp\u003echSysLock() seems too heavy-handed to me. There should be some simple mechanism like a message or an event flag for this.\u003c/p\u003e\n\n\u003cp\u003e(after reading some OS documentation) Ugh, messages are too complicated.\u003cbr\u003eThe SPI thread could call chEvtWaitAny() to wait for the main thread to copy the data. The main thread calls chEvtSignal() with at least one bit set after it has copied the data. This should release the SPI thread to do its job and return to waiting for the next round.\u003cbr\u003eThe SPI thread needs to have a higher priority than the main thread, so that it can start the SPI hardware immediately instead of waiting for the main thread to finish its k-rate computations (which would mean that (again) CPU and SPI hardware are not working at the same time, wasting precious CPU cycles).\u003c/p\u003e","post_number":11,"post_type":1,"updated_at":"2020-05-21T21:20:48.895Z","reply_count":0,"reply_to_post_number":10,"quote_count":0,"avg_time":19,"incoming_link_count":0,"reads":33,"score":7.55,"yours":false,"topic_id":5797,"topic_slug":"spi-external-sram-implementation","display_username":null,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"username":"sebiiksbcs","avatar_template":"/user_avatar/community.axoloti.com/sebiiksbcs/{size}/6295_1.png"},"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":2371,"hidden":false,"hidden_reason_id":null,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":false,"wiki":false},{"id":39958,"name":"Sebastian","username":"sebiiksbcs","avatar_template":"/user_avatar/community.axoloti.com/sebiiksbcs/{size}/6295_1.png","created_at":"2020-06-04T01:59:51.320Z","cooked":"\u003cp\u003eYour suggestion worked!\u003c/p\u003e\n\n\u003cp\u003eNow I just need to shorten the wires or make a small breakout board for the SPI RAM because I am still getting pops and clicks likely due to wire noise.\u003c/p\u003e\n\n\u003cp\u003eThen I can focus on improving the objects (delay interpolation will be another hurdle).\u003c/p\u003e","post_number":12,"post_type":1,"updated_at":"2020-06-04T01:59:51.320Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"avg_time":14,"incoming_link_count":0,"reads":28,"score":6.3,"yours":false,"topic_id":5797,"topic_slug":"spi-external-sram-implementation","display_username":"Sebastian","primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_bg_color":null,"primary_group_flair_color":null,"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_wiki":false,"read":true,"user_title":null,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":139,"hidden":false,"hidden_reason_id":null,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":false,"wiki":false}],"stream":[34652,39615,39639,39645,39683,39689,39693,39717,39805,39807,39814,39958]},"timeline_lookup":[[1,823],[2,504],[3,503],[5,500],[6,499],[8,495],[9,484],[12,471]],"id":5797,"title":"SPI external SRAM implementation","fancy_title":"SPI external SRAM implementation","posts_count":12,"created_at":"2019-06-17T15:48:11.022Z","views":738,"reply_count":6,"participant_count":3,"like_count":4,"last_posted_at":"2020-06-04T01:59:51.320Z","visible":true,"closed":false,"archived":false,"has_summary":false,"archetype":"regular","slug":"spi-external-sram-implementation","category_id":16,"word_count":1472,"deleted_at":null,"user_id":139,"pm_with_non_human_user":false,"draft":null,"draft_key":"topic_5797","draft_sequence":null,"unpinned":null,"pinned_globally":false,"pinned":false,"pinned_at":null,"pinned_until":null,"details":{"created_by":{"id":139,"username":"sebiiksbcs","avatar_template":"/user_avatar/community.axoloti.com/sebiiksbcs/{size}/6295_1.png"},"last_poster":{"id":139,"username":"sebiiksbcs","avatar_template":"/user_avatar/community.axoloti.com/sebiiksbcs/{size}/6295_1.png"},"participants":[{"id":139,"username":"sebiiksbcs","avatar_template":"/user_avatar/community.axoloti.com/sebiiksbcs/{size}/6295_1.png","post_count":7,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":337,"username":"Blindsmyth","avatar_template":"/letter_avatar_proxy/v2/letter/b/2acd7d/{size}.png","post_count":3,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null},{"id":2371,"username":"Nosnibor","avatar_template":"/letter_avatar_proxy/v2/letter/n/51bf81/{size}.png","post_count":2,"primary_group_name":null,"primary_group_flair_url":null,"primary_group_flair_color":null,"primary_group_flair_bg_color":null}],"suggested_topics":[{"id":7081,"title":"MIDI CLOCK ( UART ) -\u003e internal port issue","fancy_title":"MIDI CLOCK ( UART ) -\u0026gt; internal port issue","slug":"midi-clock-uart-internal-port-issue","posts_count":2,"reply_count":0,"highest_post_number":2,"image_url":"/uploads/default/original/2X/e/e33611c4b36a2ded711be372d976ff19826ada8e.png","created_at":"2021-01-23T12:04:29.901Z","last_posted_at":"2021-01-27T20:18:35.698Z","bumped":true,"bumped_at":"2021-01-28T09:58:06.894Z","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"archetype":"regular","like_count":0,"views":186,"category_id":16,"tags":[],"featured_link":null,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1936,"username":"DrKoma","avatar_template":"/user_avatar/community.axoloti.com/drkoma/{size}/6977_1.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":337,"username":"Blindsmyth","avatar_template":"/letter_avatar_proxy/v2/letter/b/2acd7d/{size}.png"}}]},{"id":6977,"title":"Midi to (float) frequency cenversation using mtofextended","fancy_title":"Midi to (float) frequency cenversation using mtofextended","slug":"midi-to-float-frequency-cenversation-using-mtofextended","posts_count":7,"reply_count":2,"highest_post_number":7,"image_url":null,"created_at":"2020-12-01T17:56:47.815Z","last_posted_at":"2020-12-03T20:37:12.160Z","bumped":true,"bumped_at":"2020-12-03T20:37:12.160Z","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"archetype":"regular","like_count":0,"views":276,"category_id":16,"tags":[],"featured_link":null,"posters":[{"extras":null,"description":"Original Poster","user":{"id":2676,"username":"lol3000","avatar_template":"/letter_avatar_proxy/v2/letter/l/c77e96/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":2371,"username":"Nosnibor","avatar_template":"/letter_avatar_proxy/v2/letter/n/51bf81/{size}.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":790,"username":"lokki","avatar_template":"/user_avatar/community.axoloti.com/lokki/{size}/5157_1.png"}}]},{"id":6893,"title":"Image2table conversion. Externally created file loadable from SD-card:)","fancy_title":"Image2table conversion. Externally created file loadable from SD-card:)","slug":"image2table-conversion-externally-created-file-loadable-from-sd-card","posts_count":5,"reply_count":2,"highest_post_number":5,"image_url":null,"created_at":"2020-10-20T18:22:42.856Z","last_posted_at":"2020-10-28T18:06:06.935Z","bumped":true,"bumped_at":"2020-10-28T18:06:06.935Z","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"archetype":"regular","like_count":7,"views":249,"category_id":16,"tags":[],"featured_link":null,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":410,"username":"SirSickSik","avatar_template":"/user_avatar/community.axoloti.com/sirsicksik/{size}/5014_1.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1230,"username":"Moutcast","avatar_template":"/letter_avatar_proxy/v2/letter/m/ba8739/{size}.png"}}]},{"id":7020,"title":"Refering to two different tables from one object [solved]","fancy_title":"Refering to two different tables from one object [solved]","slug":"refering-to-two-different-tables-from-one-object-solved","posts_count":5,"reply_count":2,"highest_post_number":5,"image_url":"/uploads/default/optimized/2X/c/c02b6e5e6eac969c0a8ee5a7219f8f812fc4980c_1_690x425.png","created_at":"2020-12-20T19:21:22.757Z","last_posted_at":"2020-12-20T20:45:13.395Z","bumped":true,"bumped_at":"2020-12-20T20:45:13.395Z","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"archetype":"regular","like_count":0,"views":169,"category_id":16,"tags":[],"featured_link":null,"posters":[{"extras":"latest","description":"Original Poster, Most Recent Poster","user":{"id":337,"username":"Blindsmyth","avatar_template":"/letter_avatar_proxy/v2/letter/b/2acd7d/{size}.png"}},{"extras":null,"description":"Frequent Poster","user":{"id":1880,"username":"MattilynMattroe","avatar_template":"/user_avatar/community.axoloti.com/mattilynmattroe/{size}/7160_1.png"}}]},{"id":7270,"title":"MIDI clock generator with (real) BMP input","fancy_title":"MIDI clock generator with (real) BMP input","slug":"midi-clock-generator-with-real-bmp-input","posts_count":4,"reply_count":1,"highest_post_number":4,"image_url":null,"created_at":"2021-04-30T16:42:46.564Z","last_posted_at":"2021-05-01T10:24:09.857Z","bumped":true,"bumped_at":"2021-05-01T10:24:09.857Z","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"archetype":"regular","like_count":2,"views":112,"category_id":16,"tags":[],"featured_link":null,"posters":[{"extras":null,"description":"Original Poster","user":{"id":1751,"username":"mrpoulpy","avatar_template":"/user_avatar/community.axoloti.com/mrpoulpy/{size}/5281_1.png"}},{"extras":"latest","description":"Most Recent Poster","user":{"id":745,"username":"jaffasplaffa","avatar_template":"/user_avatar/community.axoloti.com/jaffasplaffa/{size}/5808_1.png"}}]}],"links":[{"url":"https://pastebin.com/wNzuyYzV","title":"[XML] Axoloti spi1config object - Pastebin.com","fancy_title":null,"internal":false,"attachment":false,"reflection":false,"clicks":3,"user_id":139,"domain":"pastebin.com"},{"url":"//community.axoloti.com/uploads/default/original/2X/e/edd65fb4cafc5591f1ac3796485670bfe318103e.axo","title":null,"fancy_title":null,"internal":true,"attachment":true,"reflection":false,"clicks":3,"user_id":139,"domain":"community.axoloti.com"},{"url":"https://pastebin.com/WT9dbQdU","title":"[XML] Axoloti 23LC1024 delay test object - Pastebin.com","fancy_title":null,"internal":false,"attachment":false,"reflection":false,"clicks":1,"user_id":139,"domain":"pastebin.com"},{"url":"//community.axoloti.com/uploads/default/original/2X/6/6cd43fb5e8b1d429c2180a47477467d32d3269d8.axp","title":null,"fancy_title":null,"internal":true,"attachment":true,"reflection":false,"clicks":1,"user_id":139,"domain":"community.axoloti.com"},{"url":"//community.axoloti.com/uploads/default/original/2X/4/4c60814a64fc64df2a34f3dd381d7aef92c6b8e7.png","title":null,"fancy_title":null,"internal":true,"attachment":true,"reflection":false,"clicks":0,"user_id":139,"domain":"community.axoloti.com"}],"notification_level":1,"can_flag_topic":false},"highest_post_number":12,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false}],"chunk_size":20,"bookmarked":null,"tags":[],"featured_link":null,"topic_timer":null,"message_bus_last_id":44});
      })();
      </script>

    

    <script>
  Ember.RSVP.configure('onerror', function(e) {
    // Ignore TransitionAborted exceptions that bubble up
    if (e && e.message === "TransitionAborted") { return; }

    window.onerror(e && e.message, null,null,null,e);
  });
</script>

<script>

  (function() {
    var ps = require('preload-store').default;

    Discourse.CDN = '';
    Discourse.BaseUrl = 'community.axoloti.com'.replace(/:[\d]*$/,"");
    Discourse.BaseUri = '';
    Discourse.Environment = 'production';
    Discourse.SiteSettings = ps.get('siteSettings');
    Discourse.LetterAvatarVersion = '5_9b142ce9460b8c6b265fd9abf598d3fd';
    I18n.defaultLocale = 'en';
    Discourse.start();
    Discourse.set('assetVersion','d1ec72c862674d2eea0eb8ef6fc5934f');
    Discourse.Session.currentProp("disableCustomCSS", false);
    Discourse.HighlightJSPath = "/highlight-js/community.axoloti.com/100444ceef8ca161334f64d3ce49fe7a1556f943.js";
  })();
</script>

<link rel='preload' href='/assets/browser-update-f57286e74ddbc53aa899689b01ef467078911e4138050c561939955849af35dd.js' as='script'/>
<script src='/assets/browser-update-f57286e74ddbc53aa899689b01ef467078911e4138050c561939955849af35dd.js'></script>


    

      
    
  </body>
</html>
