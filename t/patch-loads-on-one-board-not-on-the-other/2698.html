<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from community.axoloti.com/t/patch-loads-on-one-board-not-on-the-other/2698 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 10 Jul 2023 17:04:12 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Patch loads on one board, not on the other - Helpdesk - Axoloti Community</title>
    <meta name="description" content="ok here is the issue: 

a patch that involves loading of a file to sdcard and later to sdram works only on one of my two axolotis. 

i load a file on startup of the patch to the sd-card via an object. 

the &amp;quot;working&amp;quot; axo&amp;hellip;">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.9.0.beta3 - https://github.com/discourse/discourse version 13f3de4bf673802eb8ec595d36587b4524773209">
<link rel="icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="2698.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"http://community.axoloti.com","potentialAction":{"@type":"SearchAction","target":"http://community.axoloti.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Axoloti Community Search">

        <link href="../../stylesheets/desktop_d93a33ca8617326fe353f80e6ab865188244d48c8e0b.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop"/>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','../../../www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Patch loads on one board, not on the other&#39;" href="2698.rss" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:url" content="http://community.axoloti.com/t/patch-loads-on-one-board-not-on-the-other/2698" />
<meta name="twitter:url" content="http://community.axoloti.com/t/patch-loads-on-one-board-not-on-the-other/2698" />
<meta property="og:title" content="Patch loads on one board, not on the other" />
<meta name="twitter:title" content="Patch loads on one board, not on the other" />
<meta property="og:description" content="ok here is the issue:   a patch that involves loading of a file to sdcard and later to sdram works only on one of my two axolotis.   i load a file on startup of the patch to the sd-card via an object.   the &quot;working&quot; axoloti just does it, no problem. the non working axoloti attempts to upload the file to sdcard, then reboots and freezes the patcher completely.   if i kill the patcher and reopen it, i can see in the filemanager that the file was written to sd-card succesfully. so maybe the sdram ..." />
<meta name="twitter:description" content="ok here is the issue:   a patch that involves loading of a file to sdcard and later to sdram works only on one of my two axolotis.   i load a file on startup of the patch to the sd-card via an object.   the &quot;working&quot; axoloti just does it, no problem. the non working axoloti attempts to upload the file to sdcard, then reboots and freezes the patcher completely.   if i kill the patcher and reopen it, i can see in the filemanager that the file was written to sd-card succesfully. so maybe the sdram ..." />

      <link rel="next" href="26984658.html?page=2">

  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html"><img src="../../uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo" style="max-width: 150px;"></a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1>
  <a href="2698.html">Patch loads on one board, not on the other</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/helpdesk.html" itemprop="url">
        <span itemprop="title">Helpdesk</span>
      </a>
    </div>
</div>





<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/lokki.html'><b itemprop='author'>lokki</b></a>
           
           <time datetime='2016-12-28T23:30:26Z' itemprop='datePublished'>
             2016-12-28 23:30:26 UTC
           </time>
        </span>
        <span itemprop='position'>#1</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>ok here is the issue:</p>

<p>a patch that involves loading of a file to sdcard and later to sdram works only on one of my two axolotis.</p>

<p>i load a file on startup of the patch to the sd-card via an object.</p>

<p>the "working" axoloti just does it, no problem.<br>the non working axoloti attempts to upload the file to sdcard, then reboots and freezes the patcher completely.</p>

<p>if i kill the patcher and reopen it, i can see in the filemanager that the file was written to sd-card succesfully. so maybe the sdram is the problem? can it "break" somehow? can i reset the board in some low level way?</p>

<p>i used the same sd-card on both axolotis to try this.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Patch loads on one board, not on the other'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/lokki.html'><b itemprop='author'>lokki</b></a>
           
           <time datetime='2016-12-29T00:01:17Z' itemprop='datePublished'>
             2016-12-29 00:01:17 UTC
           </time>
        </span>
        <span itemprop='position'>#2</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>ok a quick update to make this more testable:</p>

<p>all on the "non working with tables/sdram/sdcard" board</p>

<p>when i open the factory demos sampling sample drum player and take it live without any samples it uploads ok and runs. of course no sounds, and the console complains that the files are not found. so far so good. now if i go unlive (hit ctrl-e again) sometimes the axoloti reboots and the patcher freezes completely, not everytime but sometimes. i suspect there is something faulty with the board and i just did not see it until today, because i never used tables or accesed sdram that way. are there any tests i can do to check if the sdram is ok?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Patch loads on one board, not on the other'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/jaffasplaffa.html'><b itemprop='author'>jaffasplaffa</b></a>
           
           <time datetime='2016-12-29T06:47:45Z' itemprop='datePublished'>
             2016-12-29 06:47:45 UTC
           </time>
        </span>
        <span itemprop='position'>#3</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p><a class="mention" href="../../users/lokki.html">@lokki</a> </p>

<p>It could be a faulty SD-card, or an Sd-card that just doesnt work well with Axoloti. I had some similar odd behaviour from trying different SD-cards. I got a Nashua SD-card which is really slow, works rarely. Then I went and got 2 different Sony Sd-cards. One 90 mgb bandwith and one of 96 mgb bandwith. The one on 90 mgb works very well, but the one with 96mgb bandwith has similar problems like the one you describe; often it cannot find files on Sd-card. Often I can take out the Sd-card and put int back in the machine. It helps a lot of times but not every time. Often I also told by Axoloti that that there is no Sd-card present, like you mention.</p>

<p>This is the exact Sd-czrd that works well for me, 90mgb:<br>ny-sr16uy3-ultra-micro-sd-kaart-16-gb/9200000014394322/</p>

<p>This is the exact version that works rarely, 96mgb, this one I could only find a Chinese link for.<br><a href="http://www.huihui.cn/detail_c5a1fece4718b956.html" class="onebox" target="_blank">http://www.huihui.cn/detail_c5a1fece4718b956.html</a></p>

<p>I dunno if an Sd-card can be "too fast" for Axoloti? Anyway did you use the same Sd-card for both Axolotis? If not, then try using same Sd-card on both of them, to check if there is any difference?</p>

<p>Hope you find the issue <img src="../../images/emoji/emoji_one/wink30f4.png?v=3" title=":wink:" class="emoji" alt=":wink:"></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Patch loads on one board, not on the other'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/lokki.html'><b itemprop='author'>lokki</b></a>
           
           <time datetime='2016-12-29T06:55:49Z' itemprop='datePublished'>
             2016-12-29 06:55:49 UTC
           </time>
        </span>
        <span itemprop='position'>#4</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>well, i used the same sd-card on both boards, so i can rule that out, i think...</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Patch loads on one board, not on the other'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/jaffasplaffa.html'><b itemprop='author'>jaffasplaffa</b></a>
           
           <time datetime='2016-12-29T06:58:46Z' itemprop='datePublished'>
             2016-12-29 06:58:46 UTC
           </time>
        </span>
        <span itemprop='position'>#5</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Ok, sorry, that was my 5 cents.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Patch loads on one board, not on the other'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/johannes.html'><b itemprop='author'>johannes</b></a>
           
           <time datetime='2016-12-30T11:43:34Z' itemprop='datePublished'>
             2016-12-30 11:43:34 UTC
           </time>
        </span>
        <span itemprop='position'>#6</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Could you try to rule out sdram errors? Create a patch with just a <code>delay/write sdram</code> object set to a large size, or maybe connect an oscillator to its input, and the output to audio/out?<br>Sdram is functionally tested on every board before shipping, and the normal flashing procedure (you've gone through this the first time you connected...) also relies on functioning sdram. Rescue flashing does not use sdram though.</p>

<aside class="quote" data-post="1" data-topic="2698"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/community.axoloti.com/lokki/40/2882_1.png" class="avatar">lokki:</div>
<blockquote><p>can i reset the board in some low level way?</p></blockquote></aside>

<p>During board startup, the firmware in the processor flash memory calculates a checksum of itself, when you press connect this is compared with the firmware image in the software distribution, and if it does not match it presents the "firmware CRC mismatch" dialog. If you don't get the "firmware CRC mismatch" dialog it's very unlikely that the firmware went corrupt. It's only a CRC32, it is not cryptographically secure, but would detect a corrupt firmware with a very high probability.<br>After firmware there is still a possibility that a startup patch (either in flash memory or a start.bin file on sdcard) loads but leaves the firmware in a corrupt state somehow. Holding switch S2 during power up will skip loading any startup patch.</p>

<p>To check sdcard: In the main (console) window of Axoloti software it shows if a sdcard is detected ("SDCard mounted") or not ("no SDCard") right of the clear button. This is updated as soon as you eject/insert an sdcard. If it shows "SDCard mounted", it successfully accessed the sdcard. You can also check the presence of files in the File Manager window after clicking "refresh" in that window. Does that work?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Patch loads on one board, not on the other'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/lokki.html'><b itemprop='author'>lokki</b></a>
           
           <time datetime='2016-12-30T12:22:46Z' itemprop='datePublished'>
             2016-12-30 12:22:46 UTC
           </time>
        </span>
        <span itemprop='position'>#7</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="6" data-topic="2698"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/community.axoloti.com/johannes/40/8_1.html" class="avatar">johannes:</div>
<blockquote><p>Could you try to rule out sdram errors? Create a patch with just a delay/write sdram object set to a large size, or maybe connect an oscillator to its input, and the output to audio/out?</p></blockquote></aside>

<p>i did this: <br><img src="../../uploads/default/original/2X/a/a5b24b7eb2ca8b9b2c5b4c704e84e224bbb74125.png" width="627" height="216"></p>

<p>and the patch  goes live, but i get instant output from the delayline (when i change the oscillator frequency it immediately changes on the output of the delay/read. is that expected behaviour? sorry, i never worked with delays so far on the axoloti.</p>

<p>but the sound i get from the delay/read is all garbled, sounds like a heavily aliased squarewave glibberish...not a sine!</p>

<aside class="quote" data-post="6" data-topic="2698"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/community.axoloti.com/johannes/40/8_1.html" class="avatar">johannes:</div>
<blockquote><p>To check sdcard: In the main (console) window of Axoloti software it shows if a sdcard is detected ("SDCard mounted") or not ("no SDCard") right of the clear button.</p></blockquote></aside>

<p>i don't see this message, but i see the message running/start.bin  when i insert the sdcard and the patch runs, so i assume it is working. i tried deleting the start.bin and uploading another one as startup patch, no difference.<br>file manager works, if i hit refresh i see all the files, i can delete some, no problem. so it does not seem to be an sdcard problem. </p>

<p>so it "feels" like sdram is somehow broken...</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:2'>
      <meta itemprop='headline' content='Patch loads on one board, not on the other'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/lokki.html'><b itemprop='author'>lokki</b></a>
           
           <time datetime='2016-12-30T12:26:37Z' itemprop='datePublished'>
             2016-12-30 12:26:37 UTC
           </time>
        </span>
        <span itemprop='position'>#8</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>i also tried to flash the firmware, and it seems to work, this is what i get:<br></p>

<p></p><pre><code class="lang-auto">Start uploading firmware
firmware file path: /opt/Axoloti/app/firmware/build/axoloti.bin
firmware file size: 588,360
firmware crc: 0x50A29AA2
block uploaded @ 0xC0000000 length 16
block uploaded @ 0xC0000010 length 32768
block uploaded @ 0xC0008010 length 32768
block uploaded @ 0xC0010010 length 32768
block uploaded @ 0xC0018010 length 32768
block uploaded @ 0xC0020010 length 32768
block uploaded @ 0xC0028010 length 32768
block uploaded @ 0xC0030010 length 32768
block uploaded @ 0xC0038010 length 32768
block uploaded @ 0xC0040010 length 32768
block uploaded @ 0xC0048010 length 32768
block uploaded @ 0xC0050010 length 32768
block uploaded @ 0xC0058010 length 32768
block uploaded @ 0xC0060010 length 32768
block uploaded @ 0xC0068010 length 32768
block uploaded @ 0xC0070010 length 32768
block uploaded @ 0xC0078010 length 32768
block uploaded @ 0xC0080010 length 32768
block uploaded @ 0xC0088010 length 31304
Done uploading firmware
Start uploading patch
bin path: /opt/Axoloti/app/firmware/flasher/flasher_build/flasher.bin
block uploaded @ 0x20011000 length 15220
Done uploading patch
Start flashing...
Firmware flashing in progress, do not unplug the board until the leds stop blinking! You can connect again after the leds stop blinking.
Disconnect request
flashing... (ready when the green LED is steady on)</code></pre>

<p>but i found that the patch in question goes live when the sdcard is not inserted, and completely freezes the patcher when the sdcard is inserted and i try to upload. so that would point to an sdcard issue. hmm... strange, since the same sdcard works with the same patch on my other axoloti.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Patch loads on one board, not on the other'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/lokki.html'><b itemprop='author'>lokki</b></a>
           
           <time datetime='2016-12-30T12:39:57Z' itemprop='datePublished'>
             2016-12-30 12:39:57 UTC
           </time>
        </span>
        <span itemprop='position'>#9</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>also, loading the patch to sdcard as startup file works as well. it  is just when i upload it from the patcher and the sdcard is inserted, the patcher freezes...</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Patch loads on one board, not on the other'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/thetechnobear.html'><b itemprop='author'>thetechnobear</b></a>
           
           <time datetime='2016-12-30T13:18:16Z' itemprop='datePublished'>
             2016-12-30 13:18:16 UTC
           </time>
        </span>
        <span itemprop='position'>#10</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>if your not familar with the delay line, use one of the help files  (for delay) and/or things like the reverb, simply then switch out the delays (or tables) used for the delay sdram.</p>

<p>also you mentioned originally the issue was with a patch that reads/writes from sdcard to sdram, <br>I suggest you post this patch... so we can see if the same error can be reproduced.</p>

<p>another simple test you could do is to write a script which fills a table/sdram with a value (2^32-1 is a good value) and then reads the values back... (its just a for loop so very simple) , this is what basic ram tests do. you can also play with 'random' values, repeat read/writes... </p>

<p>(personally, Id be more suspicious of the patch/sdcard-&gt;sdram that a physical faults, but... good to test all possibilities)</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Patch loads on one board, not on the other'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/johannes.html'><b itemprop='author'>johannes</b></a>
           
           <time datetime='2016-12-30T13:56:11Z' itemprop='datePublished'>
             2016-12-30 13:56:11 UTC
           </time>
        </span>
        <span itemprop='position'>#11</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="7" data-topic="2698"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/community.axoloti.com/lokki/40/2882_1.png" class="avatar">lokki:</div>
<blockquote><p>but the sound i get from the delay/read is all garbled, sounds like a heavily aliased squarewave glibberish...not a sine!</p></blockquote></aside>

<p>That strongly points towards broken sdram... <img src="../../images/emoji/emoji_one/cry30f4.png?v=3" title=":cry:" class="emoji" alt=":cry:"></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Patch loads on one board, not on the other'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/lokki.html'><b itemprop='author'>lokki</b></a>
           
           <time datetime='2016-12-30T21:50:17Z' itemprop='datePublished'>
             2016-12-30 21:50:17 UTC
           </time>
        </span>
        <span itemprop='position'>#12</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="11" data-topic="2698"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/community.axoloti.com/johannes/40/8_1.html" class="avatar">johannes:</div>
<blockquote><p>That strongly points towards broken sdram... <img src="../../images/emoji/emoji_one/cry30f4.png?v=3" title=":cry:" class="emoji" alt=":cry:"></p></blockquote></aside>

<p>ok, but why can i update the firmware then?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Patch loads on one board, not on the other'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/lokki.html'><b itemprop='author'>lokki</b></a>
           
           <time datetime='2017-01-01T01:16:52Z' itemprop='datePublished'>
             2017-01-01 01:16:52 UTC
           </time>
        </span>
        <span itemprop='position'>#13</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="10" data-topic="2698"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/community.axoloti.com/thetechnobear/40/6_1.html" class="avatar">thetechnobear:</div>
<blockquote><p>also you mentioned originally the issue was with a patch that reads/writes from sdcard to sdram, <br>I suggest you post this patch... so we can see if the same error can be reproduced.</p></blockquote></aside>

<p>i  don't know if i may post the patch here, since it is not mine but <a class="mention" href="../../users/toneburst.html">@toneburst</a>'s. it's his lpc stuff that i am beta testing. maybe i should send you the patch via p.m. rather then posting it here?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Patch loads on one board, not on the other'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/toneburst.html'><b itemprop='author'>toneburst</b></a>
           
           <time datetime='2017-01-01T10:55:27Z' itemprop='datePublished'>
             2017-01-01 10:55:27 UTC
           </time>
        </span>
        <span itemprop='position'>#14</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p><a class="mention" href="../../users/johannes.html">@johannes</a> would you mind if <a class="mention" href="../../users/lokki.html">@lokki</a> PMed you the file(s)?</p>

<p>It's something I've been working on, but don't want to release into the wild just yet.</p>

<p>a|x</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:2'>
      <meta itemprop='headline' content='Patch loads on one board, not on the other'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/toneburst.html'><b itemprop='author'>toneburst</b></a>
           
           <time datetime='2017-01-01T14:15:56Z' itemprop='datePublished'>
             2017-01-01 14:15:56 UTC
           </time>
        </span>
        <span itemprop='position'>#15</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p><a class="mention" href="../../users/johannes.html">@johannes</a> could I call the crc32 function you mentioned from my own custom object's C code?</p>

<p>a|x</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Patch loads on one board, not on the other'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/johannes.html'><b itemprop='author'>johannes</b></a>
           
           <time datetime='2017-01-02T19:54:14Z' itemprop='datePublished'>
             2017-01-02 19:54:14 UTC
           </time>
        </span>
        <span itemprop='position'>#16</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="12" data-topic="2698"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/community.axoloti.com/lokki/40/2882_1.png" class="avatar">lokki:</div>
<blockquote><p>ok, but why can i update the firmware then?</p></blockquote></aside>

<p>The firmware flashing sequence first copies the firmware image and checksum to sdram, then launches a "magic patch" that reboots axoloti, now running exclusively from sram (not relying on code in flash memory, so flash can be erased/written). At this point the USB connection with the computer is also suspended. Then the magic patch verifies if the firmware matches the checksum. If it matches, the flash memory is erased and the firmware image from sdram is copied to flash, and finally reboots to into normal operation. If it does not match, the red led blinks 10 times, and reboots, leaving the flash memory unaffected.<br>So if sdram is broken, flashing firmware aborts leaving the flash memory untouched. I have not found a way to keep the USB connection to the PC alive through a reboot of the microcontroller, so the only feedback from the flashing process is through the LED blinking pattern (or via a TTL serial cable).</p>

<aside class="quote" data-post="14" data-topic="2698"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v2/letter/t/b9e5f3/40.png" class="avatar">toneburst:</div>
<blockquote><p><a class="mention" href="../../users/johannes.html">@johannes</a> would you mind if <a class="mention" href="../../users/lokki.html">@lokki</a> PMed you the file(s)?</p></blockquote></aside>

<p>Of course not</p>

<aside class="quote" data-post="15" data-topic="2698"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v2/letter/t/b9e5f3/40.png" class="avatar">toneburst:</div>
<blockquote><p>could I call the crc32 function you mentioned from my own custom object's C code?</p></blockquote></aside>

<p>Yes, here is the function prototype:<br><code>uint32_t CalcCRC32(uint8_t *buffer, uint32_t size);</code></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:2'>
      <meta itemprop='headline' content='Patch loads on one board, not on the other'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/toneburst.html'><b itemprop='author'>toneburst</b></a>
           
           <time datetime='2017-01-02T21:02:22Z' itemprop='datePublished'>
             2017-01-02 21:02:22 UTC
           </time>
        </span>
        <span itemprop='position'>#17</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="16" data-topic="2698"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/community.axoloti.com/johannes/40/8_1.html" class="avatar">johannes:</div>
<blockquote><p>uint32_t CalcCRC32(uint8_t *buffer, uint32_t size);</p></blockquote></aside>

<p>Cool. What's the unit of 'size'? Number of 8-bit bytes?</p>

<p>a|x</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Patch loads on one board, not on the other'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/lokki.html'><b itemprop='author'>lokki</b></a>
           
           <time datetime='2017-01-02T21:08:44Z' itemprop='datePublished'>
             2017-01-02 21:08:44 UTC
           </time>
        </span>
        <span itemprop='position'>#18</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>ok, but i did "update" the firmware and it did work! so that means sdram is not broken? ("update" because i went from 1.0.11 to 1.0.11)</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Patch loads on one board, not on the other'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/johannes.html'><b itemprop='author'>johannes</b></a>
           
           <time datetime='2017-01-02T21:49:27Z' itemprop='datePublished'>
             2017-01-02 21:49:27 UTC
           </time>
        </span>
        <span itemprop='position'>#19</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="17" data-topic="2698"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v2/letter/t/b9e5f3/40.png" class="avatar">toneburst:</div>
<blockquote><p>What's the unit of 'size'? Number of 8-bit bytes?</p></blockquote></aside>

<p>Yes</p>

<aside class="quote" data-post="18" data-topic="2698" data-full="true"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/community.axoloti.com/lokki/40/2882_1.png" class="avatar">lokki:</div>
<blockquote><p>ok, but i did "update" the firmware and it did work! so that means sdram is not broken? ("update" because i went from 1.0.11 to 1.0.11)</p></blockquote></aside>

<p>Well, if it fails, it 'd abort before touching the firmware in flash, and the only feedback from a failing firmware update would be the led blinking sequence.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Patch loads on one board, not on the other'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/lokki.html'><b itemprop='author'>lokki</b></a>
           
           <time datetime='2017-01-02T22:06:29Z' itemprop='datePublished'>
             2017-01-02 22:06:29 UTC
           </time>
        </span>
        <span itemprop='position'>#20</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>ok, what does it do if it does not fail? no blinking at all? i will try again later just want to be sure what to look out for <img src="../../images/emoji/emoji_one/slight_smile30f4.png?v=3" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Patch loads on one board, not on the other'>
      <hr>
  </div>

  <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement'>
      <span itemprop='url'><b><a rel="next" itemprop="name" href="26984658.html?page=2">next page â†’</a></b></span>
  </div>





    </div>
    <footer class="container">
      <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <a href='../../index.html'>Home</a>
        <a href="../../categories.html">Categories</a>
        <a href="../../guidelines.html">FAQ/Guidelines</a>
        <a href="../../tos.html">Terms of Service</a>
        <a href="../../privacy.html">Privacy Policy</a>
      </nav>
      <p>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  

<!-- Mirrored from community.axoloti.com/t/patch-loads-on-one-board-not-on-the-other/2698 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 10 Jul 2023 17:04:15 GMT -->
</html>
