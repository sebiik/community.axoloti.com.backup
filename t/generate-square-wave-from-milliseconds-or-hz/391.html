<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from community.axoloti.com/t/generate-square-wave-from-milliseconds-or-hz/391 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 10 Jul 2023 17:07:57 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Generate square wave from milliseconds or Hz - Software - Axoloti Community</title>
    <meta name="description" content="I&amp;#39;m trying to create a BPM object similar to the lfo/square object. The idea is to set the BPM, and steps (4th notes, 8th notes or 16th notes). The object looks like the screenshot below. 

[image] 

I found this table o&amp;hellip;">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.9.0.beta3 - https://github.com/discourse/discourse version 13f3de4bf673802eb8ec595d36587b4524773209">
<link rel="icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="391.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"http://community.axoloti.com","potentialAction":{"@type":"SearchAction","target":"http://community.axoloti.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Axoloti Community Search">

        <link href="../../stylesheets/desktop_d93a33ca8617326fe353f80e6ab865188244d48c8e0b.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop"/>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','../../../www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Generate square wave from milliseconds or Hz&#39;" href="391.rss" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://community.axoloti.com/uploads/default/optimized/1X/552ee64cdae8d424fa872d3b0e9c31fbd3f8803c_1_690x323.png" />
<meta property="og:image" content="http://community.axoloti.com/uploads/default/optimized/1X/552ee64cdae8d424fa872d3b0e9c31fbd3f8803c_1_690x323.png" />
<meta property="og:url" content="http://community.axoloti.com/t/generate-square-wave-from-milliseconds-or-hz/391" />
<meta name="twitter:url" content="http://community.axoloti.com/t/generate-square-wave-from-milliseconds-or-hz/391" />
<meta property="og:title" content="Generate square wave from milliseconds or Hz" />
<meta name="twitter:title" content="Generate square wave from milliseconds or Hz" />
<meta property="og:description" content="I&#39;m trying to create a BPM object similar to the lfo/square object. The idea is to set the BPM, and steps (4th notes, 8th notes or 16th notes). The object looks like the screenshot below.    [image]  I found this table online that shows how bpm relates to milliseconds and Hz. http://www.wiseguysynth.com/larry/convert/bpm_table.htm   My problem with using a square lfo to create a sequencer is that it only outputs the square wave for 4th notes, and I want to be able to use 16th notes. I&#39;m creating..." />
<meta name="twitter:description" content="I&#39;m trying to create a BPM object similar to the lfo/square object. The idea is to set the BPM, and steps (4th notes, 8th notes or 16th notes). The object looks like the screenshot below.    [image]  I found this table online that shows how bpm relates to milliseconds and Hz. http://www.wiseguysynth.com/larry/convert/bpm_table.htm   My problem with using a square lfo to create a sequencer is that it only outputs the square wave for 4th notes, and I want to be able to use 16th notes. I&#39;m creating..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="6 ❤" />


  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html"><img src="../../uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo" style="max-width: 150px;"></a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1>
  <a href="391.html">Generate square wave from milliseconds or Hz</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/software.html" itemprop="url">
        <span itemprop="title">Software</span>
      </a>
    </div>
</div>





<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/janvantomme.html'><b itemprop='author'>janvantomme</b></a>
           
           <time datetime='2015-09-04T13:37:44Z' itemprop='datePublished'>
             2015-09-04 13:37:44 UTC
           </time>
        </span>
        <span itemprop='position'>#1</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I'm trying to create a BPM object similar to the lfo/square object. The idea is to set the BPM, and steps (4th notes, 8th notes or 16th notes). The object looks like the screenshot below.</p>

<p><div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/552ee64cdae8d424fa872d3b0e9c31fbd3f8803c" href="../../uploads/default/original/1X/552ee64cdae8d424fa872d3b0e9c31fbd3f8803c.png" class="lightbox" title="axoloti-bpm-object.png"><img src="../../uploads/default/optimized/1X/552ee64cdae8d424fa872d3b0e9c31fbd3f8803c_1_690x323.png" width="690" height="323"><div class="meta">
<span class="filename">axoloti-bpm-object.png</span><span class="informations">1242x582 42.7 KB</span><span class="expand"></span>
</div></a></div></p>

<p>I found this table online that shows how bpm relates to milliseconds and Hz. <a href="http://www.wiseguysynth.com/larry/convert/bpm_table.htm" rel="nofollow">http://www.wiseguysynth.com/larry/convert/bpm_table.htm</a></p>

<p>My problem with using a square lfo to create a sequencer is that it only outputs the square wave for 4th notes, and I want to be able to use 16th notes. I'm creating this object so I don't have to look up at which position I need to set the dial of the lfo to get the tempo I need.</p>

<p>I've figured out the necessary formulas to calculate the necessary Hz and milliseconds values, this is what I get for 120 bpm.</p>

<p>120 bpm = 2 Hz = 500 msec (4ths)<br>120 bpm = 4 Hz = 250 msec (8ths)<br>120 bpm = 8 Hz = 125 msec (16ths)</p>

<p>And this is the point where I'm stuck. The MTOFEXTENDED() function from the square lfo uses numbers generated by the dial to calculate the frequency. I've noticed that the numbers this function needs are quite large. For instance: If I feed the number 15938355 into MTOFEXTENDED(), I get the 8 Hz wave. I also know that the range of the dial is from -134217727 to 134217727.</p>

<p><strong>Any ideas on how to convert from Hz to the range the dial uses?</strong></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Generate square wave from milliseconds or Hz'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/johannes.html'><b itemprop='author'>johannes</b></a>
           
           <time datetime='2015-09-04T15:48:09Z' itemprop='datePublished'>
             2015-09-04 15:48:09 UTC
           </time>
        </span>
        <span itemprop='position'>#2</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I believe there needs to be a specific control type for BPM. I understand the demand for "detents" at round numbers. But using an integer control would not even allow smaller steps than 1 bpm, I think it should be only "detents".<br>An integer number control is currently not midi controller mappable, and it would limit the maximum bpm to 127. Or if taken the double of the cc value as bpm, it would not allow single bpm increments anymore. </p>

<p>The MTOFEXTENDED map semitones in fractional format to phase increment for oscillators. If you want whole number bpm's rather than a exponential scaling, there is no use for this function. </p>

<p>LFO's work internally with a phase in 32bit integer format. Every cycle, the phase gets augmented by a certain amount. This amount determines the frequency. If you add one unit to an integer above 2147483647 (2^31 - 1), it wraps to -2147483648 (- 2^31). Yes minus. So it repeats implicitly! Check two's complement number representation for the details. <br>If you'd augment the phase with a single unit at k-rate, the resulting frequency is 3000Hz/4294967296 = 0.69849 microhertz<br>To get exactly 1 Hertz, the corresponding phase increment would need to be (2^32)/3000 = 1431655.7653. We need to round that to a whole number, 1431656. The real frequency obtained then is 0.99999983608 Hz. Not good enough for CERN but good enough for musical purposes. The quartz crystal time reference is less accurate than the error caused by roundoff here.</p>

<p>For a square LFO, the output is true when the phase is greater than zero.</p>

<p>So a 1Hz square LFO can be coded like this (k-rate code)<br>Phase += 1431656;<br>outlet_wave= (Phase&gt;0)?1:0;</p>

<p>In C, "+=" means add to. It is shorthand for<br>Phase = Phase + 1431656;<br>The "?" construction is shorthand for<br>if (phase&gt;0)<br> outlet_wave=1;<br>else<br> outlet_wave=0;<br>If you have an integer BPM inlet or parameter, this can be modified into</p>

<p>Phase += 1431656 * param_bpm;<br>outlet_wave= (Phase&gt;0)?1:0;</p>

<p>Actually the line <br>outlet_wave= (Phase&gt;0)?1:0;<br>can be reduced to <br>outlet_wave= Phase&gt;0;</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:4'>
      <meta itemprop='interactionCount' content='UserComments:2'>
      <meta itemprop='headline' content='Generate square wave from milliseconds or Hz'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/anon5189335.html'><b itemprop='author'>anon5189335</b></a>
           
           <time datetime='2015-09-04T19:13:23Z' itemprop='datePublished'>
             2015-09-04 19:13:23 UTC
           </time>
        </span>
        <span itemprop='position'>#3</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Yeah I am interested in the BPM object too but gave up on it for now.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Generate square wave from milliseconds or Hz'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/janvantomme.html'><b itemprop='author'>janvantomme</b></a>
           
           <time datetime='2015-09-05T13:07:31Z' itemprop='datePublished'>
             2015-09-05 13:07:31 UTC
           </time>
        </span>
        <span itemprop='position'>#4</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Thanks for the explanation <a class="mention" href="../../users/johannes.html">@johannes</a>. Some of the numbers I've encountered make more sense now. I started working on this object mainly to understand how objects work and how they relate to the firmware. </p>

<p>A floating point number control would indeed make more sense for some things. And it makes programming a lot easier. Integer math is quite hard if you aren't used to it <img src="../../images/emoji/emoji_one/confuseda4f0.png?v=0" title=":confused:" class="emoji" alt="confused">.</p>

<p>I'll take a look at finishing the object next week.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Generate square wave from milliseconds or Hz'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/loopmasta.html'><b itemprop='author'>loopmasta</b></a>
           
           <time datetime='2015-12-26T17:48:17Z' itemprop='datePublished'>
             2015-12-26 17:48:17 UTC
           </time>
        </span>
        <span itemprop='position'>#5</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p><a class="mention" href="../../users/janvantomme.html">@janvantomme</a> Did you finish your timer/bpm object? I could use it in project right now.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Generate square wave from milliseconds or Hz'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/janvantomme.html'><b itemprop='author'>janvantomme</b></a>
           
           <time datetime='2015-12-26T17:51:08Z' itemprop='datePublished'>
             2015-12-26 17:51:08 UTC
           </time>
        </span>
        <span itemprop='position'>#6</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Not yet. Too busy with other things right now.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Generate square wave from milliseconds or Hz'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/loopmasta.html'><b itemprop='author'>loopmasta</b></a>
           
           <time datetime='2015-12-26T19:29:11Z' itemprop='datePublished'>
             2015-12-26 19:29:11 UTC
           </time>
        </span>
        <span itemprop='position'>#7</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Ok. I'll give it a go. So far i kinda fake your patch by using a pll object but it's just a workaround. A specific object would be better. The time value in the pll object corresponds to the steps value in your timer/bpm.</p>

<p><div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/937e33571f5b6fa834b28bae22a24d34ba2b6752" href="../../uploads/default/original/2X/9/937e33571f5b6fa834b28bae22a24d34ba2b6752.png" class="lightbox" title="bpm.png"><img src="../../uploads/default/optimized/2X/9/937e33571f5b6fa834b28bae22a24d34ba2b6752_1_690x393.png" width="690" height="393"><div class="meta">
<span class="filename">bpm.png</span><span class="informations">769x438 11.7 KB</span><span class="expand"></span>
</div></a></div></p>

<p><a class="attachment" href="../../uploads/default/original/2X/8/bpm.axo">bpm.axo</a> (886 Bytes)<br><a class="attachment" href="../../uploads/default/original/2X/f/pll.axo">pll.axo</a> (1.3 KB)<br><a class="attachment" href="../../uploads/default/original/2X/f/bpm.axp">bpm.axp</a> (2.4 KB)</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Generate square wave from milliseconds or Hz'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/loopmasta.html'><b itemprop='author'>loopmasta</b></a>
           
           <time datetime='2015-12-27T19:20:05Z' itemprop='datePublished'>
             2015-12-27 19:20:05 UTC
           </time>
        </span>
        <span itemprop='position'>#8</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Here is my first attempt. Still needs some work.</p>

<ul>
<li>PBM speed seems to be a little off. Compared to my Volca. Maybe the Volca is wrong?</li>
<li>Swing not jet implemented.</li>
</ul>

<p><div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/a4cb2b68bf2ebeb702e3a08bb3c5acd16daca3e7" href="../../uploads/default/original/2X/a/a4cb2b68bf2ebeb702e3a08bb3c5acd16daca3e7.png" class="lightbox" title="metronome.png"><img src="../../uploads/default/optimized/2X/a/a4cb2b68bf2ebeb702e3a08bb3c5acd16daca3e7_1_690x341.png" width="690" height="341"><div class="meta">
<span class="filename">metronome.png</span><span class="informations">783x388 29 KB</span><span class="expand"></span>
</div></a></div></p>

<p><a class="attachment" href="../../uploads/default/original/2X/a/metronome.axp">metronome.axp</a> (4.7 KB)<br><a class="attachment" href="../../uploads/default/original/2X/7/metronome.axo">metronome.axo</a> (1.1 KB)</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Generate square wave from milliseconds or Hz'>
      <hr>
  </div>






    </div>
    <footer class="container">
      <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <a href='../../index.html'>Home</a>
        <a href="../../categories.html">Categories</a>
        <a href="../../guidelines.html">FAQ/Guidelines</a>
        <a href="../../tos.html">Terms of Service</a>
        <a href="../../privacy.html">Privacy Policy</a>
      </nav>
      <p>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  

<!-- Mirrored from community.axoloti.com/t/generate-square-wave-from-milliseconds-or-hz/391 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 10 Jul 2023 17:08:09 GMT -->
</html>
