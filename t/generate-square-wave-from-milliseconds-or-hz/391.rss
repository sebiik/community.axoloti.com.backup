<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Generate square wave from milliseconds or Hz</title>
    <link>https://sebiik.github.io/community.axoloti.com.backup/t/generate-square-wave-from-milliseconds-or-hz/391</link>
    <description>I&#39;m trying to create a BPM object similar to the lfo/square object. The idea is to set the BPM, and steps (4th notes, 8th notes or 16th notes). The object looks like the screenshot below.

&lt;img src=&quot;/uploads/default/original/1X/552ee64cdae8d424fa872d3b0e9c31fbd3f8803c.png&quot; width=&quot;690&quot; height=&quot;323&quot;&gt;

I found this table online that shows how bpm relates to milliseconds and Hz. http://www.wiseguysynth.com/larry/convert/bpm_table.htm

My problem with using a square lfo to create a sequencer is that it only outputs the square wave for 4th notes, and I want to be able to use 16th notes. I&#39;m creating this object so I don&#39;t have to look up at which position I need to set the dial of the lfo to get the tempo I need.

I&#39;ve figured out the necessary formulas to calculate the necessary Hz and milliseconds values, this is what I get for 120 bpm.

120 bpm = 2 Hz = 500 msec (4ths)
120 bpm = 4 Hz = 250 msec (8ths)
120 bpm = 8 Hz = 125 msec (16ths)

And this is the point where I&#39;m stuck. The MTOFEXTENDED() function from the square lfo uses numbers generated by the dial to calculate the frequency. I&#39;ve noticed that the numbers this function needs are quite large. For instance: If I feed the number 15938355 into MTOFEXTENDED(), I get the 8 Hz wave. I also know that the range of the dial is from -134217727 to 134217727.

**Any ideas on how to convert from Hz to the range the dial uses?**</description>
    
    <lastBuildDate>Sun, 27 Dec 2015 19:25:46 +0000</lastBuildDate>
    <category>Software</category>
    <atom:link href="https://sebiik.github.io/community.axoloti.com.backup/t/generate-square-wave-from-milliseconds-or-hz/391.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Generate square wave from milliseconds or Hz</title>
        <dc:creator><![CDATA[@loopmasta loopmasta]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/u/loopmasta">@loopmasta</a> wrote:</p>
          <blockquote>
              <p>Here is my first attempt. Still needs some work.</p>

<ul>
<li>PBM speed seems to be a little off. Compared to my Volca. Maybe the Volca is wrong?</li>
<li>Swing not jet implemented.</li>
</ul>

<p><div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/a4cb2b68bf2ebeb702e3a08bb3c5acd16daca3e7" href="//community.axoloti.com/uploads/default/original/2X/a/a4cb2b68bf2ebeb702e3a08bb3c5acd16daca3e7.png" class="lightbox" title="metronome.png"><img src="//community.axoloti.com/uploads/default/optimized/2X/a/a4cb2b68bf2ebeb702e3a08bb3c5acd16daca3e7_1_690x341.png" width="690" height="341"><div class="meta">
<span class="filename">metronome.png</span><span class="informations">783x388 29 KB</span><span class="expand"></span>
</div></a></div></p>

<p><a class="attachment" href="//community.axoloti.com/uploads/default/original/2X/a/a6d98a409e2f0ece514448bca4d7287fe92edc68.axp">metronome.axp</a> (4.7 KB)<br><a class="attachment" href="//community.axoloti.com/uploads/default/original/2X/7/7ae22dd2f96930570fac7e2383cccdb69b9321bb.axo">metronome.axo</a> (1.1 KB)</p>
          </blockquote>
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/t/generate-square-wave-from-milliseconds-or-hz/391/8">Read full topic</a></p>
        ]]></description>
        <link>https://sebiik.github.io/community.axoloti.com.backup/t/generate-square-wave-from-milliseconds-or-hz/391/8</link>
        <pubDate>Sun, 27 Dec 2015 19:20:05 +0000</pubDate>
        <guid isPermaLink="false">community.axoloti.com-post-391-8</guid>
        <source url="https://sebiik.github.io/community.axoloti.com.backup/t/generate-square-wave-from-milliseconds-or-hz/391.rss">Generate square wave from milliseconds or Hz</source>
      </item>
      <item>
        <title>Generate square wave from milliseconds or Hz</title>
        <dc:creator><![CDATA[@loopmasta loopmasta]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/u/loopmasta">@loopmasta</a> wrote:</p>
          <blockquote>
              <p>Ok. I'll give it a go. So far i kinda fake your patch by using a pll object but it's just a workaround. A specific object would be better. The time value in the pll object corresponds to the steps value in your timer/bpm.</p>

<p><div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/937e33571f5b6fa834b28bae22a24d34ba2b6752" href="//community.axoloti.com/uploads/default/original/2X/9/937e33571f5b6fa834b28bae22a24d34ba2b6752.png" class="lightbox" title="bpm.png"><img src="//community.axoloti.com/uploads/default/optimized/2X/9/937e33571f5b6fa834b28bae22a24d34ba2b6752_1_690x393.png" width="690" height="393"><div class="meta">
<span class="filename">bpm.png</span><span class="informations">769x438 11.7 KB</span><span class="expand"></span>
</div></a></div></p>

<p><a class="attachment" href="//community.axoloti.com/uploads/default/original/2X/8/8ef1a256bbd13683c27d6f708c6c49e5ee157852.axo">bpm.axo</a> (886 Bytes)<br><a class="attachment" href="//community.axoloti.com/uploads/default/original/2X/f/fb1e19836a6bc145c72e8956b4d739d2949131ea.axo">pll.axo</a> (1.3 KB)<br><a class="attachment" href="//community.axoloti.com/uploads/default/original/2X/f/fd417b20f8d59d1be1b6ba0d34f57e8754ff278a.axp">bpm.axp</a> (2.4 KB)</p>
          </blockquote>
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/t/generate-square-wave-from-milliseconds-or-hz/391/7">Read full topic</a></p>
        ]]></description>
        <link>https://sebiik.github.io/community.axoloti.com.backup/t/generate-square-wave-from-milliseconds-or-hz/391/7</link>
        <pubDate>Sat, 26 Dec 2015 19:29:11 +0000</pubDate>
        <guid isPermaLink="false">community.axoloti.com-post-391-7</guid>
        <source url="https://sebiik.github.io/community.axoloti.com.backup/t/generate-square-wave-from-milliseconds-or-hz/391.rss">Generate square wave from milliseconds or Hz</source>
      </item>
      <item>
        <title>Generate square wave from milliseconds or Hz</title>
        <dc:creator><![CDATA[@janvantomme Jan Vantomme]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/u/janvantomme">@janvantomme</a> wrote:</p>
          <blockquote>
              <p>Not yet. Too busy with other things right now.</p>
          </blockquote>
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/t/generate-square-wave-from-milliseconds-or-hz/391/6">Read full topic</a></p>
        ]]></description>
        <link>https://sebiik.github.io/community.axoloti.com.backup/t/generate-square-wave-from-milliseconds-or-hz/391/6</link>
        <pubDate>Sat, 26 Dec 2015 17:51:08 +0000</pubDate>
        <guid isPermaLink="false">community.axoloti.com-post-391-6</guid>
        <source url="https://sebiik.github.io/community.axoloti.com.backup/t/generate-square-wave-from-milliseconds-or-hz/391.rss">Generate square wave from milliseconds or Hz</source>
      </item>
      <item>
        <title>Generate square wave from milliseconds or Hz</title>
        <dc:creator><![CDATA[@loopmasta loopmasta]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/u/loopmasta">@loopmasta</a> wrote:</p>
          <blockquote>
              <p><a class="mention" href="/users/janvantomme">@janvantomme</a> Did you finish your timer/bpm object? I could use it in project right now.</p>
          </blockquote>
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/t/generate-square-wave-from-milliseconds-or-hz/391/5">Read full topic</a></p>
        ]]></description>
        <link>https://sebiik.github.io/community.axoloti.com.backup/t/generate-square-wave-from-milliseconds-or-hz/391/5</link>
        <pubDate>Sat, 26 Dec 2015 17:48:17 +0000</pubDate>
        <guid isPermaLink="false">community.axoloti.com-post-391-5</guid>
        <source url="https://sebiik.github.io/community.axoloti.com.backup/t/generate-square-wave-from-milliseconds-or-hz/391.rss">Generate square wave from milliseconds or Hz</source>
      </item>
      <item>
        <title>Generate square wave from milliseconds or Hz</title>
        <dc:creator><![CDATA[@janvantomme Jan Vantomme]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/u/janvantomme">@janvantomme</a> wrote:</p>
          <blockquote>
              <p>Thanks for the explanation <a class="mention" href="/users/johannes">@johannes</a>. Some of the numbers I've encountered make more sense now. I started working on this object mainly to understand how objects work and how they relate to the firmware. </p>

<p>A floating point number control would indeed make more sense for some things. And it makes programming a lot easier. Integer math is quite hard if you aren't used to it <img src="/images/emoji/emoji_one/confused.png?v=0" title=":confused:" class="emoji" alt="confused">.</p>

<p>I'll take a look at finishing the object next week.</p>
          </blockquote>
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/t/generate-square-wave-from-milliseconds-or-hz/391/4">Read full topic</a></p>
        ]]></description>
        <link>https://sebiik.github.io/community.axoloti.com.backup/t/generate-square-wave-from-milliseconds-or-hz/391/4</link>
        <pubDate>Sat, 05 Sep 2015 13:07:31 +0000</pubDate>
        <guid isPermaLink="false">community.axoloti.com-post-391-4</guid>
        <source url="https://sebiik.github.io/community.axoloti.com.backup/t/generate-square-wave-from-milliseconds-or-hz/391.rss">Generate square wave from milliseconds or Hz</source>
      </item>
      <item>
        <title>Generate square wave from milliseconds or Hz</title>
        <dc:creator><![CDATA[@anon5189335]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/u/anon5189335">@anon5189335</a> wrote:</p>
          <blockquote>
              <p>Yeah I am interested in the BPM object too but gave up on it for now.</p>
          </blockquote>
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/t/generate-square-wave-from-milliseconds-or-hz/391/3">Read full topic</a></p>
        ]]></description>
        <link>https://sebiik.github.io/community.axoloti.com.backup/t/generate-square-wave-from-milliseconds-or-hz/391/3</link>
        <pubDate>Fri, 04 Sep 2015 19:13:23 +0000</pubDate>
        <guid isPermaLink="false">community.axoloti.com-post-391-3</guid>
        <source url="https://sebiik.github.io/community.axoloti.com.backup/t/generate-square-wave-from-milliseconds-or-hz/391.rss">Generate square wave from milliseconds or Hz</source>
      </item>
      <item>
        <title>Generate square wave from milliseconds or Hz</title>
        <dc:creator><![CDATA[@johannes johannes]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/u/johannes">@johannes</a> wrote:</p>
          <blockquote>
              <p>I believe there needs to be a specific control type for BPM. I understand the demand for "detents" at round numbers. But using an integer control would not even allow smaller steps than 1 bpm, I think it should be only "detents".<br>An integer number control is currently not midi controller mappable, and it would limit the maximum bpm to 127. Or if taken the double of the cc value as bpm, it would not allow single bpm increments anymore. </p>

<p>The MTOFEXTENDED map semitones in fractional format to phase increment for oscillators. If you want whole number bpm's rather than a exponential scaling, there is no use for this function. </p>

<p>LFO's work internally with a phase in 32bit integer format. Every cycle, the phase gets augmented by a certain amount. This amount determines the frequency. If you add one unit to an integer above 2147483647 (2^31 - 1), it wraps to -2147483648 (- 2^31). Yes minus. So it repeats implicitly! Check two's complement number representation for the details. <br>If you'd augment the phase with a single unit at k-rate, the resulting frequency is 3000Hz/4294967296 = 0.69849 microhertz<br>To get exactly 1 Hertz, the corresponding phase increment would need to be (2^32)/3000 = 1431655.7653. We need to round that to a whole number, 1431656. The real frequency obtained then is 0.99999983608 Hz. Not good enough for CERN but good enough for musical purposes. The quartz crystal time reference is less accurate than the error caused by roundoff here.</p>

<p>For a square LFO, the output is true when the phase is greater than zero.</p>

<p>So a 1Hz square LFO can be coded like this (k-rate code)<br>Phase += 1431656;<br>outlet_wave= (Phase&gt;0)?1:0;</p>

<p>In C, "+=" means add to. It is shorthand for<br>Phase = Phase + 1431656;<br>The "?" construction is shorthand for<br>if (phase&gt;0)<br> outlet_wave=1;<br>else<br> outlet_wave=0;<br>If you have an integer BPM inlet or parameter, this can be modified into</p>

<p>Phase += 1431656 * param_bpm;<br>outlet_wave= (Phase&gt;0)?1:0;</p>

<p>Actually the line <br>outlet_wave= (Phase&gt;0)?1:0;<br>can be reduced to <br>outlet_wave= Phase&gt;0;</p>
          </blockquote>
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/t/generate-square-wave-from-milliseconds-or-hz/391/2">Read full topic</a></p>
        ]]></description>
        <link>https://sebiik.github.io/community.axoloti.com.backup/t/generate-square-wave-from-milliseconds-or-hz/391/2</link>
        <pubDate>Fri, 04 Sep 2015 15:48:09 +0000</pubDate>
        <guid isPermaLink="false">community.axoloti.com-post-391-2</guid>
        <source url="https://sebiik.github.io/community.axoloti.com.backup/t/generate-square-wave-from-milliseconds-or-hz/391.rss">Generate square wave from milliseconds or Hz</source>
      </item>
      <item>
        <title>Generate square wave from milliseconds or Hz</title>
        <dc:creator><![CDATA[@janvantomme Jan Vantomme]]></dc:creator>
        <description><![CDATA[
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/u/janvantomme">@janvantomme</a> wrote:</p>
          <blockquote>
              <p>I'm trying to create a BPM object similar to the lfo/square object. The idea is to set the BPM, and steps (4th notes, 8th notes or 16th notes). The object looks like the screenshot below.</p>

<p><div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/552ee64cdae8d424fa872d3b0e9c31fbd3f8803c" href="//community.axoloti.com/uploads/default/original/1X/552ee64cdae8d424fa872d3b0e9c31fbd3f8803c.png" class="lightbox" title="axoloti-bpm-object.png"><img src="//community.axoloti.com/uploads/default/optimized/1X/552ee64cdae8d424fa872d3b0e9c31fbd3f8803c_1_690x323.png" width="690" height="323"><div class="meta">
<span class="filename">axoloti-bpm-object.png</span><span class="informations">1242x582 42.7 KB</span><span class="expand"></span>
</div></a></div></p>

<p>I found this table online that shows how bpm relates to milliseconds and Hz. <a href="http://www.wiseguysynth.com/larry/convert/bpm_table.htm" rel="nofollow">http://www.wiseguysynth.com/larry/convert/bpm_table.htm</a></p>

<p>My problem with using a square lfo to create a sequencer is that it only outputs the square wave for 4th notes, and I want to be able to use 16th notes. I'm creating this object so I don't have to look up at which position I need to set the dial of the lfo to get the tempo I need.</p>

<p>I've figured out the necessary formulas to calculate the necessary Hz and milliseconds values, this is what I get for 120 bpm.</p>

<p>120 bpm = 2 Hz = 500 msec (4ths)<br>120 bpm = 4 Hz = 250 msec (8ths)<br>120 bpm = 8 Hz = 125 msec (16ths)</p>

<p>And this is the point where I'm stuck. The MTOFEXTENDED() function from the square lfo uses numbers generated by the dial to calculate the frequency. I've noticed that the numbers this function needs are quite large. For instance: If I feed the number 15938355 into MTOFEXTENDED(), I get the 8 Hz wave. I also know that the range of the dial is from -134217727 to 134217727.</p>

<p><strong>Any ideas on how to convert from Hz to the range the dial uses?</strong></p>
          </blockquote>
          <p><a href="https://sebiik.github.io/community.axoloti.com.backup/t/generate-square-wave-from-milliseconds-or-hz/391/1">Read full topic</a></p>
        ]]></description>
        <link>https://sebiik.github.io/community.axoloti.com.backup/t/generate-square-wave-from-milliseconds-or-hz/391/1</link>
        <pubDate>Fri, 04 Sep 2015 13:37:44 +0000</pubDate>
        <guid isPermaLink="false">community.axoloti.com-post-391-1</guid>
        <source url="https://sebiik.github.io/community.axoloti.com.backup/t/generate-square-wave-from-milliseconds-or-hz/391.rss">Generate square wave from milliseconds or Hz</source>
      </item>
  </channel>
</rss>
