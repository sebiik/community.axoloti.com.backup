<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from community.axoloti.com/t/any-interest-in-sysex-input-capabilities/2929 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 10 Jul 2023 16:03:44 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Any interest in sysex input capabilities? - Developer - Axoloti Community</title>
    <meta name="description" content="I&amp;#39;ve made a branch that enables capturing up to N bytes of data from sysex messages and forwarding it to the patch. Currently I&amp;#39;ve only implemented it for serial MIDI, but it looks like it wouldn&amp;#39;t be hard to add for USB&amp;hellip;">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.9.0.beta3 - https://github.com/discourse/discourse version 13f3de4bf673802eb8ec595d36587b4524773209">
<link rel="icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="2929.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"http://community.axoloti.com","potentialAction":{"@type":"SearchAction","target":"http://community.axoloti.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Axoloti Community Search">

        <link href="../../stylesheets/desktop_d93a33ca8617326fe353f80e6ab865188244d48c8e0b.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop"/>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','../../../www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Any interest in sysex input capabilities?&#39;" href="2929.rss" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:url" content="http://community.axoloti.com/t/any-interest-in-sysex-input-capabilities/2929" />
<meta name="twitter:url" content="http://community.axoloti.com/t/any-interest-in-sysex-input-capabilities/2929" />
<meta property="og:title" content="Any interest in sysex input capabilities?" />
<meta name="twitter:title" content="Any interest in sysex input capabilities?" />
<meta property="og:description" content="I&#39;ve made a branch that enables capturing up to N bytes of data from sysex messages and forwarding it to the patch. Currently I&#39;ve only implemented it for serial MIDI, but it looks like it wouldn&#39;t be hard to add for USB as well. The catch is that I had to extend the signature of MidiInHandler to add ..., uint8_t sysex_bytes[], uint8_t sysex_len), and although that&#39;s not a breaking change, I assume it has some overhead, at least in terms of complexity.   I did this to support my RockBand 3 guita..." />
<meta name="twitter:description" content="I&#39;ve made a branch that enables capturing up to N bytes of data from sysex messages and forwarding it to the patch. Currently I&#39;ve only implemented it for serial MIDI, but it looks like it wouldn&#39;t be hard to add for USB as well. The catch is that I had to extend the signature of MidiInHandler to add ..., uint8_t sysex_bytes[], uint8_t sysex_len), and although that&#39;s not a breaking change, I assume it has some overhead, at least in terms of complexity.   I did this to support my RockBand 3 guita..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="2 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="11 ❤" />


  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html"><img src="../../uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo" style="max-width: 150px;"></a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1>
  <a href="2929.html">Any interest in sysex input capabilities?</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/developer.html" itemprop="url">
        <span itemprop="title">Developer</span>
      </a>
    </div>
</div>

    <div class='tags-list' itemscope itemtype='http://schema.org/ItemList'>
        <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
          <meta itemprop='url' content='../../tags/midi.html'>
          <a href='../../tags/midi.html' itemprop='item'>
            <span itemprop='name'>midi</span>
          </a>
        </div>
    </div>




<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/jessecrossen.html'><b itemprop='author'>jessecrossen</b></a>
           
           <time datetime='2017-02-19T13:26:00Z' itemprop='datePublished'>
             2017-02-19 13:26:00 UTC
           </time>
        </span>
        <span itemprop='position'>#1</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I've made a branch that enables capturing up to N bytes of data from sysex messages and forwarding it to the patch. Currently I've only implemented it for serial MIDI, but it looks like it wouldn't be hard to add for USB as well. The catch is that I had to extend the signature of MidiInHandler to add <code>..., uint8_t sysex_bytes[], uint8_t sysex_len)</code>, and although that's not a breaking change, I assume it has some overhead, at least in terms of complexity.</p>

<p>I did this to support my RockBand 3 guitar controller, but I'm interested in whether anyone else would want the feature. If so, I can polish it up and submit a PR, otherwise I'll just rock on with my modified firmware.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:2'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Any interest in sysex input capabilities?'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/Eskadrone.html'><b itemprop='author'>Eskadrone</b></a>
           
           <time datetime='2017-02-19T18:40:59Z' itemprop='datePublished'>
             2017-02-19 18:40:59 UTC
           </time>
        </span>
        <span itemprop='position'>#2</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Although I`m interested in sysex input, for midi tuning events or short 12 Note Roland/Yamaha tunig dumps, I will wait for this happen in the main distribution.<img src="../../images/emoji/emoji_one/wink30f4.png?v=3" title=":wink:" class="emoji" alt=":wink:"></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Any interest in sysex input capabilities?'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/johannes.html'><b itemprop='author'>johannes</b></a>
           
           <time datetime='2017-02-20T23:16:40Z' itemprop='datePublished'>
             2017-02-20 23:16:40 UTC
           </time>
        </span>
        <span itemprop='position'>#3</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I had a look at your implementation, the downside of your approach is that it can't handle sysex messages larger than 16 bytes, and it's impossible to store midi messages in a queue at some point in the future. </p>

<p>The model that I envision implementing in the future is moving from <code>midi_device_t dev, uint8_t port, uint8_t b0, uint8_t b1, uint8_t b2</code> to a 4 byte format where the 1st byte is Cable Number (4 bits) followed by a Code Index Number (4 bits), just like the <a href="http://www.usb.org/developers/docs/devclass_docs/midi10.pdf">usb midi spec</a>. That allows streaming sysex messages. Every midi message in a queue is then exactly 32bits. But it removes separate filtering based on device/port. I think the current mechanism is not as practical as it could be, and could be replaced by mapping/merging all physical midi input devices/ports to virtual midi input cable numbers (1-16), and mapping/replicating 16 virtual midi output cable numbers to physical midi output devices/ports. This would be a board setup preference, probably stored in flash memory or on sdcard in a preference file. This preference could also contain midi-thru routing.<br>This model conflicts with your implementation, unfortunately "the perfect is the enemy of the good"...</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Any interest in sysex input capabilities?'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/jessecrossen.html'><b itemprop='author'>jessecrossen</b></a>
           
           <time datetime='2017-02-20T23:34:28Z' itemprop='datePublished'>
             2017-02-20 23:34:28 UTC
           </time>
        </span>
        <span itemprop='position'>#4</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>That sounds like a really great design, and very efficient because the messages could be packed into a uint32 buffer for queuing, no structs, pointers, or linked lists required. In your ideal implementation, would the MidiInHandler signature remain the same to avoid breakage of existing object code? I can see how you could just unpack the 32 bit message into existing parameters, but I don't see how you'd communicate the code index number, i.e. that a message is a sysex continuation for example. I guess another way to do it in a non-breaking way would be to translate supported events for legacy code, and also make a new message buffer available to k-rate code. </p>

<p>Let me know if there's anything I can do to help improve MIDI support. I would really love to add support for hubs, but I have no idea how complex that would be.</p>

<p>P.S. I will point out that my implementation has an arbitrary limit on message length. The 16 bytes is just a constant, and since there isn't currently a queue that buffer is cheap because it only needs to be allocated once. As you say, queuing would make that a huge hassle, which is probably why JACK still has no support for sysex.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Any interest in sysex input capabilities?'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/bigpig.html'><b itemprop='author'>bigpig</b></a>
           
           <time datetime='2017-02-21T00:13:38Z' itemprop='datePublished'>
             2017-02-21 00:13:38 UTC
           </time>
        </span>
        <span itemprop='position'>#5</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I am interested in sysex input, for handling template changes from the Novation LaunchControl controller. </p>

<p><a class="mention" href="../../users/jessecrossen.html">@jessecrossen</a> could you link to your branch? I'd be interested in taking a look on how you did it, and potentially using your implementation.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Any interest in sysex input capabilities?'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/jessecrossen.html'><b itemprop='author'>jessecrossen</b></a>
           
           <time datetime='2017-02-21T01:14:17Z' itemprop='datePublished'>
             2017-02-21 01:14:17 UTC
           </time>
        </span>
        <span itemprop='position'>#6</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Sure: <a href="https://github.com/jessecrossen/axoloti/tree/sysex-in" rel="nofollow">https://github.com/jessecrossen/axoloti/tree/sysex-in</a></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:2'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Any interest in sysex input capabilities?'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/johannes.html'><b itemprop='author'>johannes</b></a>
           
           <time datetime='2017-03-10T14:16:16Z' itemprop='datePublished'>
             2017-03-10 14:16:16 UTC
           </time>
        </span>
        <span itemprop='position'>#7</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I've made steps implementing virtual midi cables, and using midi input/output buffers containing Cable Number/Code Index Number, in the <a href="https://github.com/axoloti/axoloti/tree/migration_to_chibios16">migration_to_chibios16 branch</a> on github. That infrastructure should allow long sysex input and output, but currently not even short sysex messages are handled. Note that this is experimental development, don't touch if you're not familiar with firmware coding, compiling, flashing etc. I have only briefly tested midi in and out on din, usb host and device.<br>I'd like to invite developers in community to test, comment, and perhaps implement (long) sysex support. Check the <a href="https://github.com/axoloti/axoloti/blob/migration_to_chibios16/TODO.md">todo</a> file, and code comments. <a class="mention" href="../../users/jessecrossen.html">@jessecrossen</a> ?</p>

<aside class="quote" data-post="4" data-topic="2929"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/community.axoloti.com/jessecrossen/40/3641_1.html" class="avatar">jessecrossen:</div>
<blockquote><p>In your ideal implementation, would the MidiInHandler signature remain the same to avoid breakage of existing object code?</p></blockquote></aside>

<p>Assuming patches only use the OMNI port filter, the port value could be used for CN/CIN. That will break patches that make use of complex midi routing, but I believe the virtual input/output port system will result in cleaner patches. Adding a parallel midi port routing model in addition to the current could cause more user confusion than transitioning to a revised new model.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:2'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Any interest in sysex input capabilities?'>
      <hr>
            <a href="../usb-hub-support-development/3561/4.html">USB Hub support development</a>
            <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/spinus.html'><b itemprop='author'>spinus</b></a>
           
           <time datetime='2017-08-24T20:04:37Z' itemprop='datePublished'>
             2017-08-24 20:04:37 UTC
           </time>
        </span>
        <span itemprop='position'>#8</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>From a user/designer perspective, I think a sysex implementation would be GREAT. Given the nature of the GPIO, I think many instrument designs (will) include a MIDI controller of some kind, and being able to tailor that interfacing process, work with visual feedback etc with a wide variety of interfaces would be AMAZING.</p>

<p>I built a semi-modular sampler instrument based off of the CMD DV-1 controller, which works flawlessly except for the LED/button feedback part, which I have all the sysex codes for, but cant swing because I have no way of bouncing from the Axo to the DV-1.</p>

<p>Any help with that would be greatly appreciated!</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Any interest in sysex input capabilities?'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/thetechnobear.html'><b itemprop='author'>thetechnobear</b></a>
           
           <time datetime='2017-08-24T20:40:29Z' itemprop='datePublished'>
             2017-08-24 20:40:29 UTC
           </time>
        </span>
        <span itemprop='position'>#9</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>sysex output is already possible, I replied to your PM explaining how...</p>

<p>generally anyone wanting to do this should look at my code for the Ableton Push<br>community lib/objects/tb/midi/ctrl/push</p>

<p>you will see call to MidiSendSysEx</p>

<p>you should also be aware that the size of the sysex message is limited to the size of the ring buffer, in practice this will means 192 bytes for the sysex BUT if you have any other midi messages 'in flight' these also will take up space at 4 bytes per midi message (FIXED size ... thats the way USB midi works!) </p>

<p>if you get warning about ring buffers overflow.... then you know your message is either too long, or your sending them too fast.<br>(you will notice in the Push code, I'm quite careful to minimise the amount of data sent, and also ensure that it is sent out at a limited frequency.... I don't just push the display constantly or triggered off 'user input')</p>

<p>This is all subject to change in a future release <img src="../../images/emoji/twitter/winkae52.png?v=5" title=":wink:" class="emoji" alt=":wink:"></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:2'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Any interest in sysex input capabilities?'>
      <hr>
  </div>






    </div>
    <footer class="container">
      <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <a href='../../index.html'>Home</a>
        <a href="../../categories.html">Categories</a>
        <a href="../../guidelines.html">FAQ/Guidelines</a>
        <a href="../../tos.html">Terms of Service</a>
        <a href="../../privacy.html">Privacy Policy</a>
      </nav>
      <p>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  

<!-- Mirrored from community.axoloti.com/t/any-interest-in-sysex-input-capabilities/2929 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 10 Jul 2023 16:03:44 GMT -->
</html>
