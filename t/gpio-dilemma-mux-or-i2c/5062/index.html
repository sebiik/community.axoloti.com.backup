<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>GPIO Dilemma, MUX or I2C - Hardware - Axoloti Community</title>
    <meta name="description" content="Lots of scattered unresolved post on this over the years, can someone help me make a decision? I want to build an enclosure with at least one OLED, 12-16 LED backed switches and then some knobs... I really want to do eve&amp;hellip;">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.9.0.beta3 - https://github.com/discourse/discourse version 13f3de4bf673802eb8ec595d36587b4524773209">
<link rel="icon" type="image/png" href="/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="http://community.axoloti.com/t/gpio-dilemma-mux-or-i2c/5062" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"http://community.axoloti.com","potentialAction":{"@type":"SearchAction","target":"http://community.axoloti.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="http://community.axoloti.com/opensearch.xml" title="Axoloti Community Search">

        <link href="/stylesheets/desktop_d93a33ca8617326fe353f80e6ab865188244d48c.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop"/>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;GPIO Dilemma, MUX or I2C&#39;" href="http://community.axoloti.com/t/gpio-dilemma-mux-or-i2c/5062.rss" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:url" content="http://community.axoloti.com/t/gpio-dilemma-mux-or-i2c/5062" />
<meta name="twitter:url" content="http://community.axoloti.com/t/gpio-dilemma-mux-or-i2c/5062" />
<meta property="og:title" content="GPIO Dilemma, MUX or I2C" />
<meta name="twitter:title" content="GPIO Dilemma, MUX or I2C" />
<meta property="og:description" content="Lots of scattered unresolved post on this over the years, can someone help me make a decision? I want to build an enclosure with at least one OLED, 12-16 LED backed switches and then some knobs... I really want to do everything from the axoloti itself and avoid a separate Arduino or MIDI based solution... Seems I should be able to accomplish this with some combination of I2C and MUX chips... CD74HC4067 or https://www.sparkfun.com/products/9056 MCP23017  or https://www.sparkfun.com/products/13601 ..." />
<meta name="twitter:description" content="Lots of scattered unresolved post on this over the years, can someone help me make a decision? I want to build an enclosure with at least one OLED, 12-16 LED backed switches and then some knobs... I really want to do everything from the axoloti itself and avoid a separate Arduino or MIDI based solution... Seems I should be able to accomplish this with some combination of I2C and MUX chips... CD74HC4067 or https://www.sparkfun.com/products/9056 MCP23017  or https://www.sparkfun.com/products/13601 ..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="9 ❤" />


  </head>
  <body class="crawler">
    
    <header>
      <a href="/"><img src="/uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo" style="max-width: 150px;"></a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1>
  <a href="/t/gpio-dilemma-mux-or-i2c/5062">GPIO Dilemma, MUX or I2C</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="/c/hardware" itemprop="url">
        <span itemprop="title">Hardware</span>
      </a>
    </div>
</div>





<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/damonp'><b itemprop='author'>damonp</b></a>
           
           <time datetime='2018-10-17T21:48:54Z' itemprop='datePublished'>
             2018-10-17 21:48:54 UTC
           </time>
        </span>
        <span itemprop='position'>#1</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Lots of scattered unresolved post on this over the years, can someone help me make a decision?<br>I want to build an enclosure with at least one OLED, 12-16 LED backed switches and then some knobs... I really want to do everything from the axoloti itself and avoid a separate Arduino or MIDI based solution...<br>Seems I should be able to accomplish this with some combination of I2C and MUX chips...<br>CD74HC4067 or <a href="https://www.sparkfun.com/products/9056" rel="nofollow noopener">https://www.sparkfun.com/products/9056</a><br>MCP23017  or <a href="https://www.sparkfun.com/products/13601" rel="nofollow noopener">https://www.sparkfun.com/products/13601</a></p>

<p>It seems to me I could have 2 OLED Displays and 6 MCP23017s for a total of 196 GPIOs, but at what cost?<br>Also, I dont want to do that, just saying its possible <img src="//community.axoloti.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"> <br>So, are there i2c objects? how do i do this?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='GPIO Dilemma, MUX or I2C'>
      <hr>
            <a href="https://sebiik.github.io/community.axoloti.com.backup/t/spi-i2c-oled-display/638/150">SPI/I2C OLED display</a>
            <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/deadsy'><b itemprop='author'>deadsy</b></a>
           
           <time datetime='2018-10-18T00:13:26Z' itemprop='datePublished'>
             2018-10-18 00:13:26 UTC
           </time>
        </span>
        <span itemprop='position'>#2</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>You can run everything off the same i2c bus- that is the one that is already on the IO pins.</p>

<p>The gpio expander you reference is the sx1509 (not the mcp23017).<br>I wrote a driver for it. My driver is mostly about key scanning, but it's better than starting from scratch. <a href="https://github.com/deadsy/axo/tree/master/work/objects/sx1509" rel="nofollow noopener">https://github.com/deadsy/axo/tree/master/work/objects/sx1509</a><br>btw - you can have up to 4 on the same bus (4 x 16 gpio lines)</p>

<p>OLED display: last time I looked at the driver for it there were some issues with i2c bus sharing.<br>Those are fixable - maybe Mr. <a class="mention" href="/u/smashedtransistors">@SmashedTransistors</a> will revise it. <img src="//community.axoloti.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"> </p>

<blockquote><p>So, are there i2c objects? how do i do this?</p></blockquote>

<p>I don't think you can with the existing i2c objects/drivers. The OLED driver needs to play well with others and you need an gpio expander driver object that has the sort of interface you are after. But it's very do-able.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='GPIO Dilemma, MUX or I2C'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/SmashedTransistors'><b itemprop='author'>SmashedTransistors</b></a>
           
           <time datetime='2018-10-19T06:44:21Z' itemprop='datePublished'>
             2018-10-19 06:44:21 UTC
           </time>
        </span>
        <span itemprop='position'>#3</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Note that the tiar/HW/OLED objects has very limited functionalities, they are good as little oscilloscopes and "parameter reminders".</p>

<aside class="quote" data-post="2" data-topic="5062"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//community.axoloti.com/user_avatar/community.axoloti.com/deadsy/40/5105_1.png" class="avatar">deadsy:</div>
<blockquote><p>OLED display: last time I looked at the driver for it there were some issues with i2c bus sharing.<br>Those are fixable - maybe Mr. <a class="mention" href="/u/smashedtransistors">@SmashedTransistors</a> will revise it. <img src="//community.axoloti.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p></blockquote></aside>

<p>In fact, I have no idea how to do that. I will need some help <img src="//community.axoloti.com/images/emoji/twitter/wink.png?v=5" title=":wink:" class="emoji" alt=":wink:"><br>Maybe it is a good idea to start a new thread about "tips and good practices for I2C objects".</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='GPIO Dilemma, MUX or I2C'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/damonp'><b itemprop='author'>damonp</b></a>
           
           <time datetime='2018-10-19T14:47:50Z' itemprop='datePublished'>
             2018-10-19 14:47:50 UTC
           </time>
        </span>
        <span itemprop='position'>#4</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>yup, I only need the OLEDs to remind me what my knobs do...<br>So is there an issue with I2C bus sharing?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='GPIO Dilemma, MUX or I2C'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/deadsy'><b itemprop='author'>deadsy</b></a>
           
           <time datetime='2018-10-19T14:56:02Z' itemprop='datePublished'>
             2018-10-19 14:56:02 UTC
           </time>
        </span>
        <span itemprop='position'>#5</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p><a class="mention" href="/u/smashedtransistors">@SmashedTransistors</a> </p>

<blockquote><p>Maybe it is a good idea to start a new thread about "tips and good practices for I2C objects".</p></blockquote>

<p>Ok. I'll write up some stuff and explain myself.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:2'>
      <meta itemprop='interactionCount' content='UserComments:2'>
      <meta itemprop='headline' content='GPIO Dilemma, MUX or I2C'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/SmashedTransistors'><b itemprop='author'>SmashedTransistors</b></a>
           
           <time datetime='2018-10-19T16:13:41Z' itemprop='datePublished'>
             2018-10-19 16:13:41 UTC
           </time>
        </span>
        <span itemprop='position'>#6</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Thanks !! There is a lot of interesting I2C devices out there that can be used for music applications.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='GPIO Dilemma, MUX or I2C'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/damonp'><b itemprop='author'>damonp</b></a>
           
           <time datetime='2018-10-19T21:14:37Z' itemprop='datePublished'>
             2018-10-19 21:14:37 UTC
           </time>
        </span>
        <span itemprop='position'>#7</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Yeah, it feels really really silly to add another device to send signals to the axoloti it can generate itself</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='GPIO Dilemma, MUX or I2C'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/SmashedTransistors'><b itemprop='author'>SmashedTransistors</b></a>
           
           <time datetime='2018-10-20T11:51:51Z' itemprop='datePublished'>
             2018-10-20 11:51:51 UTC
           </time>
        </span>
        <span itemprop='position'>#8</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>If you make a Arduino device with buttons, breath control and other sensors you benefit from existing drivers. On the Arduino, you have MIDI drivers that allow to transform your device into a MIDI device so that it can be used with the Axoloti and other MIDI instruments and devices.<br>I think that when you have a lot of sensors/buttons it is the way to go.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='GPIO Dilemma, MUX or I2C'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/SmashedTransistors'><b itemprop='author'>SmashedTransistors</b></a>
           
           <time datetime='2018-10-21T10:21:02Z' itemprop='datePublished'>
             2018-10-21 10:21:02 UTC
           </time>
        </span>
        <span itemprop='position'>#9</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Thanks for the new post <a class="mention" href="/u/deadsy">@deadsy</a>   <img src="//community.axoloti.com/images/emoji/twitter/smiley.png?v=5" title=":smiley:" class="emoji" alt=":smiley:"><br>I see i have some revisions to make!</p>

<p>I will make a revised version for the OLED next month (i won't have much "Axoloti time" since then but it is on the top of my todo list). </p>

<hr>

<p>[EDIT 24 oct 18]<br>Big thanks for your tutorial and examples <a class="mention" href="/u/deadsy">@deadsy</a> ! </p>

<p>I added  tiar/HW/OLED128x64nice which "plays the game" more nicely.<br>It needs a gpio/i2c/config to work<br>In the help patch OLED128x64nice.axh I use two instances of the OLED128x64nice object to address two OLED displays (which was not possible with the former object).</p>

<p>I do not have other i2c devices to test how "nicer" this OLED object his.<br>[EDIT 29 oct]<br>Update for the new OLED128x64nice object:</p>

<ul>
<li>mode2 is full height scope mode</li>
<li>can draw horizontal bar graphs (see help patch tiar/HW/bar.axh), useful for displaying envelopes and lfos.<br>[EDIT 30 oct]<br>added bardbl object that allows up to 8 bargraphs per OLED display (see help patch tiar/HW/bar.axh)</li>
</ul>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:4'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='GPIO Dilemma, MUX or I2C'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/SmashedTransistors'><b itemprop='author'>SmashedTransistors</b></a>
           
           <time datetime='2018-10-30T21:15:40Z' itemprop='datePublished'>
             2018-10-30 21:15:40 UTC
           </time>
        </span>
        <span itemprop='position'>#10</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>It would be great if somebody can connect a I2C device and an OLED to check that my revision work <img src="//community.axoloti.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"> So that I can  correct it if there are some issues.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:2'>
      <meta itemprop='headline' content='GPIO Dilemma, MUX or I2C'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/damonp'><b itemprop='author'>damonp</b></a>
           
           <time datetime='2018-11-12T15:33:33Z' itemprop='datePublished'>
             2018-11-12 15:33:33 UTC
           </time>
        </span>
        <span itemprop='position'>#11</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Ill order some MCP23017 chips and get started here soon... thanks for the effort...</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='GPIO Dilemma, MUX or I2C'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/damonp'><b itemprop='author'>damonp</b></a>
           
           <time datetime='2018-11-19T20:30:50Z' itemprop='datePublished'>
             2018-11-19 20:30:50 UTC
           </time>
        </span>
        <span itemprop='position'>#12</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>can I do audio in/out over I2C with a MCP23017?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:2'>
      <meta itemprop='headline' content='GPIO Dilemma, MUX or I2C'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/SmashedTransistors'><b itemprop='author'>SmashedTransistors</b></a>
           
           <time datetime='2018-11-19T20:42:29Z' itemprop='datePublished'>
             2018-11-19 20:42:29 UTC
           </time>
        </span>
        <span itemprop='position'>#13</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I don't think so. <br>I never experimented with the MCP23017 and I do not know if you have means to synchronize the converter with the audio rate of the axoloti.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='GPIO Dilemma, MUX or I2C'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/damonp'><b itemprop='author'>damonp</b></a>
           
           <time datetime='2018-11-19T20:57:43Z' itemprop='datePublished'>
             2018-11-19 20:57:43 UTC
           </time>
        </span>
        <span itemprop='position'>#14</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>could I use an ad/da with one of the new I/O ports?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='GPIO Dilemma, MUX or I2C'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/deadsy'><b itemprop='author'>deadsy</b></a>
           
           <time datetime='2018-11-20T02:08:10Z' itemprop='datePublished'>
             2018-11-20 02:08:10 UTC
           </time>
        </span>
        <span itemprop='position'>#15</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Short answer: No. i2c is too slow for audio at reasonable sample rates.</p>

<p>Long answer: At a 400 kHz i2c clock rate with say 10 bit times per byte you could maybe get 20,000, 16-bit samples/sec across an i2c link, but nobody sane does this. Also - manipulating the GPIO lines of the mcp23017 is not going to make things any faster.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='GPIO Dilemma, MUX or I2C'>
      <hr>
  </div>






    </div>
    <footer class="container">
      <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <a href='/'>Home</a>
        <a href="/categories">Categories</a>
        <a href="/guidelines">FAQ/Guidelines</a>
        <a href="/tos">Terms of Service</a>
        <a href="/privacy">Privacy Policy</a>
      </nav>
      <p>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
