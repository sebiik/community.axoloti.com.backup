<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Polyphonic patches chord playing gives stuck notes via USB midi</title>
    <link>http://community.axoloti.com/t/polyphonic-patches-chord-playing-gives-stuck-notes-via-usb-midi/733</link>
    <description>Hi there, 
playing chords with my M-Audio Keystation Mini 32 the polyphonic pathces like i.e. &quot;organ&quot; o &quot;strings&quot; from the ../library/demos/synth, I often obtain random stuck-notes.
In this way I find that the poliphonic patches are quite unusable for a live modality.

Any other similar experience?

Windows 7 x64
CPU i7
Ram 16gb
laptop
USB3 or USB2 connection between Axoloti and the PC
Axoloti 1.0.5</description>
    
    <lastBuildDate>Wed, 18 Jan 2023 09:35:08 +0000</lastBuildDate>
    <category>Hardware</category>
    <atom:link href="http://community.axoloti.com/t/polyphonic-patches-chord-playing-gives-stuck-notes-via-usb-midi/733.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Polyphonic patches chord playing gives stuck notes via USB midi</title>
        <dc:creator><![CDATA[@testilus testilus]]></dc:creator>
        <description><![CDATA[
          <p><a href="http://community.axoloti.com/u/testilus">@testilus</a> wrote:</p>
          <blockquote>
              <p>Thanks a lot for the link, I just tried it and it seems that plugging in a 1/4 to 3.5mm into the sustain pedal input "solves" the issue!</p>
          </blockquote>
          <p><a href="http://community.axoloti.com/t/polyphonic-patches-chord-playing-gives-stuck-notes-via-usb-midi/733/14">Read full topic</a></p>
        ]]></description>
        <link>http://community.axoloti.com/t/polyphonic-patches-chord-playing-gives-stuck-notes-via-usb-midi/733/14</link>
        <pubDate>Thu, 03 Sep 2020 19:05:40 +0000</pubDate>
        <guid isPermaLink="false">community.axoloti.com-post-733-14</guid>
        <source url="http://community.axoloti.com/t/polyphonic-patches-chord-playing-gives-stuck-notes-via-usb-midi/733.rss">Polyphonic patches chord playing gives stuck notes via USB midi</source>
      </item>
      <item>
        <title>Polyphonic patches chord playing gives stuck notes via USB midi</title>
        <dc:creator><![CDATA[@XponentOne Martyn Quickenden]]></dc:creator>
        <description><![CDATA[
          <p><a href="http://community.axoloti.com/u/xponentone">@XponentOne</a> wrote:</p>
          <blockquote>
              <p>Related to this maybe?<br><aside class="quote" data-topic="5569" data-slug="akai-mpk-mini-m2-no-note-off-in-standalone-mode" data-post="7"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//community.axoloti.com/user_avatar/community.axoloti.com/lokki/40/5157_1.png" class="avatar"><a href="//community.axoloti.com/t/akai-mpk-mini-m2-no-note-off-in-standalone-mode/5569/7" rel="nofollow noopener">Akai MPK mini m2 - no note off in standalone mode</a>
</div>
<blockquote><p>hmm, still seems odd that this would be on by default. sounds like a bug to me. maybe on yours the jack plug somehow shorts when nothing is connected? (some of those plugs have switches on the contact, that are only open when you insert a cable) maybe some of that circuitry is broken...</p></blockquote></aside></p>
          </blockquote>
          <p><a href="http://community.axoloti.com/t/polyphonic-patches-chord-playing-gives-stuck-notes-via-usb-midi/733/13">Read full topic</a></p>
        ]]></description>
        <link>http://community.axoloti.com/t/polyphonic-patches-chord-playing-gives-stuck-notes-via-usb-midi/733/13</link>
        <pubDate>Thu, 03 Sep 2020 07:13:17 +0000</pubDate>
        <guid isPermaLink="false">community.axoloti.com-post-733-13</guid>
        <source url="http://community.axoloti.com/t/polyphonic-patches-chord-playing-gives-stuck-notes-via-usb-midi/733.rss">Polyphonic patches chord playing gives stuck notes via USB midi</source>
      </item>
      <item>
        <title>Polyphonic patches chord playing gives stuck notes via USB midi</title>
        <dc:creator><![CDATA[@testilus testilus]]></dc:creator>
        <description><![CDATA[
          <p><a href="http://community.axoloti.com/u/testilus">@testilus</a> wrote:</p>
          <blockquote>
              <p><a class="mention" href="/u/johannes">@johannes</a>, <a class="mention" href="/u/thetechnobear">@thetechnobear</a> I also just checked, I don't think a high cpu load has anything to do with it. I just did a simple patch with midi-in, adsr, sine-oscillator, vca and stereo-out, as soon as you set it to polyphonic it will hang, even though the load of the subpatch alone is displayed as 0% or 1%.</p>
          </blockquote>
          <p><a href="http://community.axoloti.com/t/polyphonic-patches-chord-playing-gives-stuck-notes-via-usb-midi/733/12">Read full topic</a></p>
        ]]></description>
        <link>http://community.axoloti.com/t/polyphonic-patches-chord-playing-gives-stuck-notes-via-usb-midi/733/12</link>
        <pubDate>Wed, 02 Sep 2020 17:38:38 +0000</pubDate>
        <guid isPermaLink="false">community.axoloti.com-post-733-12</guid>
        <source url="http://community.axoloti.com/t/polyphonic-patches-chord-playing-gives-stuck-notes-via-usb-midi/733.rss">Polyphonic patches chord playing gives stuck notes via USB midi</source>
      </item>
      <item>
        <title>Polyphonic patches chord playing gives stuck notes via USB midi</title>
        <dc:creator><![CDATA[@testilus testilus]]></dc:creator>
        <description><![CDATA[
          <p><a href="http://community.axoloti.com/u/testilus">@testilus</a> wrote:</p>
          <blockquote>
              <p>I just recently got my axoloti, and I'm running into the same problem with an Akai MPK mini. I replicated it with the default "organ" patch. Even when setting polyphony to "1" it is the same. I try to describe some observations I made:</p>

<ul>
<li>I observed that when using the "live" mode, everything works fine as it should, but when I send it to flash and reboot the axoloti, then the notes will hang.</li>
<li>When just using a subpatch alone without polyphony it works fine. As soon as I add that subpatch to a new patch with polyphony (even just 1 voice) it will hang. </li>
<li>It seems that the only the "note-off" messages are not received or processed: I mapped some parameters to the knobs of my keyboard and they all work fine. You can also notice that if you play a chord, and then just press one key repeatedly, all other notes will stop due to last-note-priority.</li>
</ul>

<p>The original post was from 5 years ago, has anyone found a solution since in the meantime?</p>

<p>I had hoped to use the axoloti as a portable standalone synth with this keyboard, as it is one of the few that has an usb host functionality.</p>
          </blockquote>
          <p><a href="http://community.axoloti.com/t/polyphonic-patches-chord-playing-gives-stuck-notes-via-usb-midi/733/11">Read full topic</a></p>
        ]]></description>
        <link>http://community.axoloti.com/t/polyphonic-patches-chord-playing-gives-stuck-notes-via-usb-midi/733/11</link>
        <pubDate>Tue, 01 Sep 2020 22:44:49 +0000</pubDate>
        <guid isPermaLink="false">community.axoloti.com-post-733-11</guid>
        <source url="http://community.axoloti.com/t/polyphonic-patches-chord-playing-gives-stuck-notes-via-usb-midi/733.rss">Polyphonic patches chord playing gives stuck notes via USB midi</source>
      </item>
      <item>
        <title>Polyphonic patches chord playing gives stuck notes via USB midi</title>
        <dc:creator><![CDATA[@johannes johannes]]></dc:creator>
        <description><![CDATA[
          <p><a href="http://community.axoloti.com/u/johannes">@johannes</a> wrote:</p>
          <blockquote>
              <aside class="quote" data-post="7" data-topic="733"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//community.axoloti.com/user_avatar/community.axoloti.com/thetechnobear/40/6_1.png" class="avatar">thetechnobear:</div>
<blockquote><p>hmm, guess we need to be careful then that high USB loads (e.g. linnstrument) don't lead to audio glitches.</p></blockquote></aside>

<p>I think an audio glitch is preferred over lost midi data. </p>

<p>USB host processor load should be minimized, I see a lot of wrapper functions that do not get inlined. <br>Like USBH_BulkReceiveData -&gt; USBH_LL_SubmitURB -&gt; HAL_HCD_HC_SubmitRequest<br>This requires enabling link time optimisation in firmware, or macro-izing some functions. Or maybe the USBHS peripheral has tricks available that the STM usb host lib does not use.</p>
          </blockquote>
          <p><a href="http://community.axoloti.com/t/polyphonic-patches-chord-playing-gives-stuck-notes-via-usb-midi/733/10">Read full topic</a></p>
        ]]></description>
        <link>http://community.axoloti.com/t/polyphonic-patches-chord-playing-gives-stuck-notes-via-usb-midi/733/10</link>
        <pubDate>Wed, 16 Dec 2015 20:52:55 +0000</pubDate>
        <guid isPermaLink="false">community.axoloti.com-post-733-10</guid>
        <source url="http://community.axoloti.com/t/polyphonic-patches-chord-playing-gives-stuck-notes-via-usb-midi/733.rss">Polyphonic patches chord playing gives stuck notes via USB midi</source>
      </item>
      <item>
        <title>Polyphonic patches chord playing gives stuck notes via USB midi</title>
        <dc:creator><![CDATA[@natcl]]></dc:creator>
        <description><![CDATA[
          <p><a href="http://community.axoloti.com/u/natcl">@natcl</a> wrote:</p>
          <blockquote>
              <p>I'll be glad to test things with my linnstrument !</p>
          </blockquote>
          <p><a href="http://community.axoloti.com/t/polyphonic-patches-chord-playing-gives-stuck-notes-via-usb-midi/733/9">Read full topic</a></p>
        ]]></description>
        <link>http://community.axoloti.com/t/polyphonic-patches-chord-playing-gives-stuck-notes-via-usb-midi/733/9</link>
        <pubDate>Wed, 16 Dec 2015 16:03:11 +0000</pubDate>
        <guid isPermaLink="false">community.axoloti.com-post-733-9</guid>
        <source url="http://community.axoloti.com/t/polyphonic-patches-chord-playing-gives-stuck-notes-via-usb-midi/733.rss">Polyphonic patches chord playing gives stuck notes via USB midi</source>
      </item>
      <item>
        <title>Polyphonic patches chord playing gives stuck notes via USB midi</title>
        <dc:creator><![CDATA[@keyman Antonio Machado]]></dc:creator>
        <description><![CDATA[
          <p><a href="http://community.axoloti.com/u/keyman">@keyman</a> wrote:</p>
          <blockquote>
              <p>Hi <a class="mention" href="/users/thetechnobear">@thetechnobear</a> Mark, helping hand here;</p>

<p>I did try yesterday really quick using the AXIS49 an yep stuck notes - patch:organ…</p>

<aside class="quote" data-post="7" data-topic="733"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="//community.axoloti.com/user_avatar/community.axoloti.com/thetechnobear/40/6_1.png" class="avatar">thetechnobear:</div>
<blockquote><p>axoloti should be reporting the USB buffer size in the console for the device. what is it reporting?</p></blockquote></aside>

<p>Does this help?</p>

<p>Axoloti says: USB Host : device disconnected<br>Axoloti says: USB Device Attached<br>Axoloti says: PID: 1h<br>Axoloti says: VID: 1D17h<br>Axoloti says: Address (#1) assigned.<br>Axoloti says: Manufacturer : C-Thru Music Ltd<br>Axoloti says: Product : AXIS-49 2A<br>Axoloti says: Serial Number : CTMAX49     00.00.13<br>Axoloti says: Enumeration done.<br>Axoloti says: This device has only 1 configuration.<br>Axoloti says: Default configuration set.<br>Axoloti says: Switching to Interface (#0)<br>Axoloti says: Class    : 1h<br>Axoloti says: SubClass : 3h<br>Axoloti says: Protocol : 0h<br>Axoloti says: USB Host Output size requests : 40<br>Axoloti says: USB Host Output interval : 0<br>Axoloti says: USB Host Input size requests : 40<br>Axoloti says: USB Host Input interval : 0<br>Axoloti says: USB Host Output connected to 0 : 1<br>Axoloti says: USB Host Input connected to 0 : 81<br>Axoloti says: MID class started.</p>
          </blockquote>
          <p><a href="http://community.axoloti.com/t/polyphonic-patches-chord-playing-gives-stuck-notes-via-usb-midi/733/8">Read full topic</a></p>
        ]]></description>
        <link>http://community.axoloti.com/t/polyphonic-patches-chord-playing-gives-stuck-notes-via-usb-midi/733/8</link>
        <pubDate>Wed, 16 Dec 2015 15:47:11 +0000</pubDate>
        <guid isPermaLink="false">community.axoloti.com-post-733-8</guid>
        <source url="http://community.axoloti.com/t/polyphonic-patches-chord-playing-gives-stuck-notes-via-usb-midi/733.rss">Polyphonic patches chord playing gives stuck notes via USB midi</source>
      </item>
      <item>
        <title>Polyphonic patches chord playing gives stuck notes via USB midi</title>
        <dc:creator><![CDATA[@thetechnobear Mark Harris]]></dc:creator>
        <description><![CDATA[
          <p><a href="http://community.axoloti.com/u/thetechnobear">@thetechnobear</a> wrote:</p>
          <blockquote>
              <p>hmm, guess we need to be careful then that high USB loads (e.g. linnstrument) don't lead to audio glitches.</p>

<p>the other thing that crossed my mind, was the decoupling of the usb reading/midi parsing, to delivery of the midi message to the control rate handler (lets call this midi handling)<br>perhaps because the this usb thread is also do the midi message handling, its taking longer than it should...<br>we talked before about a message queue to avoid this (and also alleviate our concerns over the possible threading issues caused by this)</p>

<p><a class="mention" href="/users/erminardi">@erminardi</a> axoloti should be reporting the USB buffer size in the console for the device. what is it reporting?<br>(there is a max size in the firmware, but I don't think you will be hitting it)</p>
          </blockquote>
          <p><a href="http://community.axoloti.com/t/polyphonic-patches-chord-playing-gives-stuck-notes-via-usb-midi/733/7">Read full topic</a></p>
        ]]></description>
        <link>http://community.axoloti.com/t/polyphonic-patches-chord-playing-gives-stuck-notes-via-usb-midi/733/7</link>
        <pubDate>Wed, 16 Dec 2015 13:50:21 +0000</pubDate>
        <guid isPermaLink="false">community.axoloti.com-post-733-7</guid>
        <source url="http://community.axoloti.com/t/polyphonic-patches-chord-playing-gives-stuck-notes-via-usb-midi/733.rss">Polyphonic patches chord playing gives stuck notes via USB midi</source>
      </item>
      <item>
        <title>Polyphonic patches chord playing gives stuck notes via USB midi</title>
        <dc:creator><![CDATA[@johannes johannes]]></dc:creator>
        <description><![CDATA[
          <p><a href="http://community.axoloti.com/u/johannes">@johannes</a> wrote:</p>
          <blockquote>
              <p>High CPU load on the board, not on your PC.</p>

<p>I have found a solution: increasing the priority of the usb host handling in the firmware so it gets a higher priority than audio handling. Needs a bit further testing before making it into a release. Stay tuned!</p>
          </blockquote>
          <p><a href="http://community.axoloti.com/t/polyphonic-patches-chord-playing-gives-stuck-notes-via-usb-midi/733/6">Read full topic</a></p>
        ]]></description>
        <link>http://community.axoloti.com/t/polyphonic-patches-chord-playing-gives-stuck-notes-via-usb-midi/733/6</link>
        <pubDate>Wed, 16 Dec 2015 11:57:35 +0000</pubDate>
        <guid isPermaLink="false">community.axoloti.com-post-733-6</guid>
        <source url="http://community.axoloti.com/t/polyphonic-patches-chord-playing-gives-stuck-notes-via-usb-midi/733.rss">Polyphonic patches chord playing gives stuck notes via USB midi</source>
      </item>
      <item>
        <title>Polyphonic patches chord playing gives stuck notes via USB midi</title>
        <dc:creator><![CDATA[@erminardi]]></dc:creator>
        <description><![CDATA[
          <p><a href="http://community.axoloti.com/u/erminardi">@erminardi</a> wrote:</p>
          <blockquote>
              <p>Thanks to all, I will check ASAP, but I think that the M-Audio has some issues with USB buffer size in Axoloti for poly patches.</p>
          </blockquote>
          <p><a href="http://community.axoloti.com/t/polyphonic-patches-chord-playing-gives-stuck-notes-via-usb-midi/733/5">Read full topic</a></p>
        ]]></description>
        <link>http://community.axoloti.com/t/polyphonic-patches-chord-playing-gives-stuck-notes-via-usb-midi/733/5</link>
        <pubDate>Wed, 16 Dec 2015 10:39:36 +0000</pubDate>
        <guid isPermaLink="false">community.axoloti.com-post-733-5</guid>
        <source url="http://community.axoloti.com/t/polyphonic-patches-chord-playing-gives-stuck-notes-via-usb-midi/733.rss">Polyphonic patches chord playing gives stuck notes via USB midi</source>
      </item>
      <item>
        <title>Polyphonic patches chord playing gives stuck notes via USB midi</title>
        <dc:creator><![CDATA[@johannes johannes]]></dc:creator>
        <description><![CDATA[
          <p><a href="http://community.axoloti.com/u/johannes">@johannes</a> wrote:</p>
          <blockquote>
              <p>seems to relate to high cpu load indeed, but not sure yet why this drops data.</p>
          </blockquote>
          <p><a href="http://community.axoloti.com/t/polyphonic-patches-chord-playing-gives-stuck-notes-via-usb-midi/733/4">Read full topic</a></p>
        ]]></description>
        <link>http://community.axoloti.com/t/polyphonic-patches-chord-playing-gives-stuck-notes-via-usb-midi/733/4</link>
        <pubDate>Tue, 15 Dec 2015 19:56:08 +0000</pubDate>
        <guid isPermaLink="false">community.axoloti.com-post-733-4</guid>
        <source url="http://community.axoloti.com/t/polyphonic-patches-chord-playing-gives-stuck-notes-via-usb-midi/733.rss">Polyphonic patches chord playing gives stuck notes via USB midi</source>
      </item>
      <item>
        <title>Polyphonic patches chord playing gives stuck notes via USB midi</title>
        <dc:creator><![CDATA[@thetechnobear Mark Harris]]></dc:creator>
        <description><![CDATA[
          <p><a href="http://community.axoloti.com/u/thetechnobear">@thetechnobear</a> wrote:</p>
          <blockquote>
              <p><a class="mention" href="/users/erminardi">@erminardi</a> , this is with your Mini 32 attached directly to the Axoloti core?  or are going via the PC?</p>

<p>anyway, I had to do some testing with my Virus TI (directly to the axoloti board) anyway, so I thought I try this out.</p>

<p>I had no issue with any patch EXCEPT organ..... (strings was fine)<br>I tried lots of rapid notes and chords etc, and all seemed to be fine.</p>

<p>however with "organ" I found id get stuck notes, especially if playing notes rapidly, <br>I tried chords on this and other patches and didn't seem to find this caused any issue<br>I also tried legato vs staccato but couldn't really see a correlation. </p>

<p>so the question is why this patch and not others...</p>

<p>well organ is taking a lot of cpu, ~ 89% so perhaps this is the issue.<br>but when I increased the strings voices to 10, this took it up to ~84% and this had no issue.<br>knocking the voices down on organ also seemed to make it stop hanging.</p>

<p>I will say sometimes it hangs quickly other time takes a bit of time so tricky to be 100% sure if reducing voices solved the issue etc.... all i can say is this is what appears to happen.</p>

<p>of course different usb devices have different buffer sizes so this could also play an influential role.</p>

<p>perhaps high cpu causes the midi messages not to be read frequently enough, this could be being aggravated by the fact we are processing the midi in messages within the midi "thread"</p>

<p>anyway just some thoughts/observations... as I had to test something else anyway <img src="/images/emoji/emoji_one/smile.png?v=0" title=":smile:" class="emoji" alt=":smile:"></p>
          </blockquote>
          <p><a href="http://community.axoloti.com/t/polyphonic-patches-chord-playing-gives-stuck-notes-via-usb-midi/733/3">Read full topic</a></p>
        ]]></description>
        <link>http://community.axoloti.com/t/polyphonic-patches-chord-playing-gives-stuck-notes-via-usb-midi/733/3</link>
        <pubDate>Tue, 15 Dec 2015 18:24:47 +0000</pubDate>
        <guid isPermaLink="false">community.axoloti.com-post-733-3</guid>
        <source url="http://community.axoloti.com/t/polyphonic-patches-chord-playing-gives-stuck-notes-via-usb-midi/733.rss">Polyphonic patches chord playing gives stuck notes via USB midi</source>
      </item>
      <item>
        <title>Polyphonic patches chord playing gives stuck notes via USB midi</title>
        <dc:creator><![CDATA[@johannes johannes]]></dc:creator>
        <description><![CDATA[
          <p><a href="http://community.axoloti.com/u/johannes">@johannes</a> wrote:</p>
          <blockquote>
              <p>will investigate....</p>
          </blockquote>
          <p><a href="http://community.axoloti.com/t/polyphonic-patches-chord-playing-gives-stuck-notes-via-usb-midi/733/2">Read full topic</a></p>
        ]]></description>
        <link>http://community.axoloti.com/t/polyphonic-patches-chord-playing-gives-stuck-notes-via-usb-midi/733/2</link>
        <pubDate>Tue, 15 Dec 2015 12:51:38 +0000</pubDate>
        <guid isPermaLink="false">community.axoloti.com-post-733-2</guid>
        <source url="http://community.axoloti.com/t/polyphonic-patches-chord-playing-gives-stuck-notes-via-usb-midi/733.rss">Polyphonic patches chord playing gives stuck notes via USB midi</source>
      </item>
      <item>
        <title>Polyphonic patches chord playing gives stuck notes via USB midi</title>
        <dc:creator><![CDATA[@erminardi]]></dc:creator>
        <description><![CDATA[
          <p><a href="http://community.axoloti.com/u/erminardi">@erminardi</a> wrote:</p>
          <blockquote>
              <p>Hi there, <br>playing chords with my M-Audio Keystation Mini 32 the polyphonic pathces like i.e. "organ" o "strings" from the ../library/demos/synth, I often obtain random stuck-notes.<br>In this way I find that the poliphonic patches are quite unusable for a live modality.</p>

<p>Any other similar experience?</p>

<p>Windows 7 x64<br>CPU i7<br>Ram 16gb<br>laptop<br>USB3 or USB2 connection between Axoloti and the PC<br>Axoloti 1.0.5</p>
          </blockquote>
          <p><a href="http://community.axoloti.com/t/polyphonic-patches-chord-playing-gives-stuck-notes-via-usb-midi/733/1">Read full topic</a></p>
        ]]></description>
        <link>http://community.axoloti.com/t/polyphonic-patches-chord-playing-gives-stuck-notes-via-usb-midi/733/1</link>
        <pubDate>Tue, 15 Dec 2015 05:00:11 +0000</pubDate>
        <guid isPermaLink="false">community.axoloti.com-post-733-1</guid>
        <source url="http://community.axoloti.com/t/polyphonic-patches-chord-playing-gives-stuck-notes-via-usb-midi/733.rss">Polyphonic patches chord playing gives stuck notes via USB midi</source>
      </item>
  </channel>
</rss>
