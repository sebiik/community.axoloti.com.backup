<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from community.axoloti.com/t/how-to-interface-axoloti-with-plants-midi-sprout-300/1772 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 16 Jul 2023 18:28:36 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>How to interface axoloti with Plants ? Midi sprout 300 ‚Ç¨? - Hardware - Axoloti Community</title>
    <meta name="description" content="midi sprout 300 ‚Ç¨ ? WTF!!!!  lets adapt this to axo .. this would push our axolotiy to the stars and beyond and back again ,,,, 

secret life of plants is not only an album  its also film, with music made by a blind, ste&amp;hellip;">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.9.0.beta3 - https://github.com/discourse/discourse version 13f3de4bf673802eb8ec595d36587b4524773209">
<link rel="icon" type="image/png" href="https://sebiik.github.io/community.axoloti.com.backup/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="https://sebiik.github.io/community.axoloti.com.backup/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="https://sebiik.github.io/community.axoloti.com.backup/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="1772.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"http://community.axoloti.com","potentialAction":{"@type":"SearchAction","target":"http://community.axoloti.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Axoloti Community Search">

        <link href="../../stylesheets/desktop_d93a33ca8617326fe353f80e6ab865188244d48c8e0b.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop"/>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;How to interface axoloti with Plants ? Midi sprout 300 ‚Ç¨?&#39;" href="1772.rss" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:url" content="http://community.axoloti.com/t/how-to-interface-axoloti-with-plants-midi-sprout-300/1772" />
<meta name="twitter:url" content="http://community.axoloti.com/t/how-to-interface-axoloti-with-plants-midi-sprout-300/1772" />
<meta property="og:title" content="How to interface axoloti with Plants ? Midi sprout 300 ‚Ç¨?" />
<meta name="twitter:title" content="How to interface axoloti with Plants ? Midi sprout 300 ‚Ç¨?" />
<meta property="og:description" content="midi sprout 300 ‚Ç¨ ? WTF!!!!  lets adapt this to axo .. this would push our axolotiy to the stars and beyond and back again ,,,,   secret life of plants is not only an album  its also film, with music made by a blind, stevie wonder... WATCH IT!!!!!!     a seed is a star, a star is a seed.....  iplant   aahhhh in germany there is no sound due to copyright ...so stevie have to watch it ....   and the link Midisprout http://midisprout.com/" />
<meta name="twitter:description" content="midi sprout 300 ‚Ç¨ ? WTF!!!!  lets adapt this to axo .. this would push our axolotiy to the stars and beyond and back again ,,,,   secret life of plants is not only an album  its also film, with music made by a blind, stevie wonder... WATCH IT!!!!!!     a seed is a star, a star is a seed.....  iplant   aahhhh in germany there is no sound due to copyright ...so stevie have to watch it ....   and the link Midisprout http://midisprout.com/" />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="5 mins üïë" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="6 ‚ù§" />


  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html"><img src="http://community.axoloti.com/uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo" style="max-width: 150px;"></a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1>
  <a href="1772.html">How to interface axoloti with Plants ? Midi sprout 300 ‚Ç¨?</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/hardware.html" itemprop="url">
        <span itemprop="title">Hardware</span>
      </a>
    </div>
</div>





<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/philoop.html'><b itemprop='author'>philoop</b></a>
           
           <time datetime='2016-05-31T23:45:54Z' itemprop='datePublished'>
             2016-05-31 23:45:54 UTC
           </time>
        </span>
        <span itemprop='position'>#1</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>midi sprout 300 ‚Ç¨ ? WTF!!!! <br>lets adapt this to axo ..<br>this would push our axolotiy to the stars and beyond and back again ,,,,</p>

<p>secret life of plants is not only an album <br>its also film, with music made by a blind,<br>stevie wonder...<br>WATCH IT!!!!!!<br><div class="lazyYT" data-youtube-id="dFYgue5VfGk" data-youtube-title="·µÄ·¥¥·¥± Secret Life of Plants" data-width="480" data-height="270" data-parameters="feature=oembed&amp;wmode=opaque"></div></p>

<p> a seed is a star, a star is a seed.....<br> iplant</p>

<p>aahhhh in germany there is no sound due to copyright ...so stevie have to watch it ....</p>

<p>and the link Midisprout<br><a href="http://midisprout.com/" class="onebox" target="_blank" rel="nofollow">http://midisprout.com/</a></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='How to interface axoloti with Plants ? Midi sprout 300 ‚Ç¨?'>
      <hr>
            <a href="../generating-external-noise-from-analog-in-like-on-arduino/2380/8.html">Generating external noise from analog in like on arduino</a>
            <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/philoop.html'><b itemprop='author'>philoop</b></a>
           
           <time datetime='2016-06-01T20:39:14Z' itemprop='datePublished'>
             2016-06-01 20:39:14 UTC
           </time>
        </span>
        <span itemprop='position'>#2</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>well ...let me put it this way: how to interface axoloti with Plants ?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='How to interface axoloti with Plants ? Midi sprout 300 ‚Ç¨?'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/datagarden.html'><b itemprop='author'>datagarden</b></a>
           
           <time datetime='2016-06-02T14:49:05Z' itemprop='datePublished'>
             2016-06-02 14:49:05 UTC
           </time>
        </span>
        <span itemprop='position'>#3</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hi, this is Sam from Data Garden.  If you are interested in working with a MIDI Sprout and coding Axoloti patches, I recommend building your own Sprout! The MIDI Sprout is quite easy to allocate parts and assemble.  All of the code, schematics, board layouts, etc are open source on <a>support.midisprout.com</a>  you can even buy packs of 3 circuit boards direct from OSHpark for ~25$.  I just made a video of the solder build process, which I will be adding to the support forum later this week.</p>

<p>The Sprout will should immediately with the axoloti, no modification needed, outputting MIDI notes on Channel 1 with a single Control parameter on CC80, just need to push that MIDI data into your patcher!</p>

<p>I've had many people make the '300 WTF' comment, this is an educational and open source project intended to share  what I have learned about Biodata Sonification with the world.  Unlike some 'product' driven kickstarters, this project was not meant to kick-off production of commercial units, many supporters invest in companies through kickstarter not with the mindset of 'pay for this product' but actually considering their support can help build an organization, company, product, or individual.  In the case of the MIDI Sprout, supporters who can put in a decent price have allowed every other person in the world to now have access to how this device works ... for free.  So yeah, 300-WTF ... now get on that support forum and build a Sprout, i'd be very happy to provide any help which I can!</p>

<p>-sam</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:3'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='How to interface axoloti with Plants ? Midi sprout 300 ‚Ç¨?'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/philoop.html'><b itemprop='author'>philoop</b></a>
           
           <time datetime='2016-06-02T15:14:30Z' itemprop='datePublished'>
             2016-06-02 15:14:30 UTC
           </time>
        </span>
        <span itemprop='position'>#4</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hi Datagarden! I now feel sorry for WTF!<br>Thanks for the infos, i have searched the web for <br>plant interfacing and most methods are too complex for me ....<br>using a 555 for sensoring is very convenient<br>From the Midisprout forum:<br><img src="http://community.axoloti.com/uploads/default/original/2X/c/c0db6560e96ad259bb67e0adb2665a8a39615b20.jpg" width="640" height="480"></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='How to interface axoloti with Plants ? Midi sprout 300 ‚Ç¨?'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/philoop.html'><b itemprop='author'>philoop</b></a>
           
           <time datetime='2018-02-18T18:17:32Z' itemprop='datePublished'>
             2018-02-18 18:17:32 UTC
           </time>
        </span>
        <span itemprop='position'>#5</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>midisprout. <br>here the image of watering my thirsty agave..<br>you can see/hear as it starts breathing again<br><div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/9faca6520b569527dbd942825ed6a4d459a5267f" href="https://sebiik.github.io/community.axoloti.com.backup/uploads/default/original/2X/9/9faca6520b569527dbd942825ed6a4d459a5267f.png" class="lightbox" title="2018-02-18 18_48_46-spooksprout_  [spook] - Ableton Live 9 Suite.png"><img src="http://community.axoloti.com/uploads/default/optimized/2X/9/9faca6520b569527dbd942825ed6a4d459a5267f_1_690x312.png" width="690" height="312"><div class="meta">
<span class="filename">2018-02-18 18_48_46-spooksprout_  [spook] - Ableton Live 9 Suite.png</span><span class="informations">1318x596 23 KB</span><span class="expand"></span>
</div></a></div><br>but something is wrong with the scale, it folds at some point.<br>I still wish this could be done with axoloti ...</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='How to interface axoloti with Plants ? Midi sprout 300 ‚Ç¨?'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/philoop.html'><b itemprop='author'>philoop</b></a>
           
           <time datetime='2018-02-18T18:26:45Z' itemprop='datePublished'>
             2018-02-18 18:26:45 UTC
           </time>
        </span>
        <span itemprop='position'>#6</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>How to measure conductance with an axoloti?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='How to interface axoloti with Plants ? Midi sprout 300 ‚Ç¨?'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/philoop.html'><b itemprop='author'>philoop</b></a>
           
           <time datetime='2018-03-12T20:29:27Z' itemprop='datePublished'>
             2018-03-12 20:29:27 UTC
           </time>
        </span>
        <span itemprop='position'>#7</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>hello! I  i made now the part with the 555 and connected it to the axoloti.....still remains a mystery to me how to derive values from that  input ...   here is the code    maybe someone can explain how it is done?</p>

<p>MIDI_PsychoGalvanometer v021<br>Accepts pulse inputs from a Galvanic Conductance sensor<br>consisting of a 555 timer set as an astablemultivibrator and two electrodes.<br>Through sampling pulse widths and identifying fluctuations, MIDI note and control messages<br>are generated.  Features include Threshold, Scaling, Control Number, and Control Voltage<br>using PWM through an RC Low Pass filter.<br>-------------*/</p>

<h1>include  //manage LEDs without delay() jgillick/arduino-LEDFader <a href="https://github.com/jgillick/arduino-LEDFader.git" rel="nofollow noopener">https://github.com/jgillick/arduino-LEDFader.git</a>
</h1>

<p>//******************************<br>//set scaled values, sorted array, first element scale length<br>int scaleMajor[]  = {7,1, 3, 5, 6, 8, 10, 12};<br>int scaleDiaMinor[]  = {7,1, 3, 4, 6, 8, 9, 11};<br>int scaleIndian[]  = {7,1, 2, 2, 5, 6, 9, 11};<br>int scaleMinor[]  = {7,1, 3, 4, 6, 8, 9, 11};<br>int scaleChrom[] = {12,1,2,3,4,5,6,7,8,9,10,11,12};<br>int *scaleSelect = scaleChrom; //initialize scaling<br>int root = 0; //initialize for root<br>//*******************************</p>

<p>const byte interruptPin = INT0; //galvanometer input<br>const byte knobPin = A0; //knob analog input</p>

<p>const byte samplesize = 10; //set sample array size<br>const byte analysize = samplesize - 1;  //trim for analysis array</p>

<p>const byte polyphony = 5; //above 8 notes may run out of ram<br>byte channel = 1;  //setting channel to 11 or 12 often helps simply computer midi routing setups<br>int noteMin = 36; //C2  - keyboard note minimum<br>int noteMax = 96; //C7  - keyboard note maximum<br>byte QY8= 0;  //sends each note out chan 1-4, for use with General MIDI like Yamaha QY8 sequencer<br>byte controlNumber = 80; //set to mappable control, low values may interfere with other soft synth controls!!<br>byte controlVoltage = 1; //output PWM CV on controlLED, pin 17, PB3, digital 11 *lowpass filter<br>long batteryLimit = 3000; //voltage check minimum, 3.0~2.7V under load; causes lightshow to turn off (save power)<br>byte checkBat = 1;</p>

<p>volatile unsigned long microseconds; //sampling timer<br>volatile byte index = 0;<br>volatile unsigned long samples[samplesize];</p>

<p>float threshold = 2.3;  //change threshold multiplier<br>float threshMin = 1.61; //scaling threshold min<br>float threshMax = 3.71; //scaling threshold max<br>float knobMin = 1;<br>float knobMax = 1023;</p>

<p>unsigned long previousMillis = 0;<br>unsigned long currentMillis = 1;<br>unsigned long batteryCheck = 0; //battery check delay timer</p>

<h1>define LED_NUM 6</h1>

<p>LEDFader leds[LED_NUM] = { // 6 LEDs (perhaps 2 RGB LEDs)<br>  LEDFader(3),<br>  LEDFader(5),<br>  LEDFader(6),<br>  LEDFader(9),<br>  LEDFader(10),<br>  LEDFader(11)  //Control Voltage output or controlLED<br>};<br>int ledNums[LED_NUM] = {3,5,6,9,10,11};<br>byte controlLED = 5; //array index of control LED (CV out)<br>byte noteLEDs = 1;  //performs lightshow set at noteOn event</p>

<p>typedef struct _MIDImessage { //build structure for Note and Control MIDImessages<br>  unsigned int type;<br>  int value;<br>  int velocity;<br>  long duration;<br>  long period;<br>  int channel;<br>}<br>MIDImessage;<br>MIDImessage noteArray[polyphony]; //manage MIDImessage data as an array with size polyphony<br>int noteIndex = 0;<br>MIDImessage controlMessage; //manage MIDImessage data for Control Message (CV out)</p>

<p>void setup()<br>{<br>  pinMode(knobPin, INPUT);<br>  randomSeed(analogRead(0)); //seed for QY8<br>  Serial.begin(31250);  //initialize at MIDI rate<br>  controlMessage.value = 0;  //begin CV at 0<br>  //MIDIpanic(); //dont panic, unless you are sure it is nessisary<br>  checkBattery(); // shut off lightshow if power is too low<br>  if(noteLEDs) bootLightshow(); //a light show to display on system boot<br>  attachInterrupt(interruptPin, sample, RISING);  //begin sampling from interrupt</p>

<p>}</p>

<p>void loop()<br>{<br>  currentMillis = millis();   //manage time<br>  checkBattery(); //on low power, shutoff lightShow, continue MIDI operation<br>  checkKnob(); //check knob value<br>  if(index &gt;= samplesize)  { analyzeSample(); }  //if samples array full, also checked in analyzeSample(), call sample analysis <br>  checkNote();  //turn off expired notes<br>  checkControl();  //update control value<br>  //checkButton();  //not implemented in this build<br>  checkLED();  //LED management without delay()<br>  previousMillis = currentMillis;   //manage time<br>}</p>

<p>void setNote(int value, int velocity, long duration, int notechannel)<br>{<br>  //find available note in array (velocity = 0);<br>  for(int i=0;i&lt;polyphony;i++){<br>    if(!noteArray[i].velocity){<br>      //if velocity is 0, replace note in array<br>      noteArray[i].type = 0;<br>      noteArray[i].value = value;<br>      noteArray[i].velocity = velocity;<br>      noteArray[i].duration = currentMillis + duration;<br>      noteArray[i].channel = notechannel;</p>

<pre><code>    if(QY8) { midiSerial(144, notechannel, value, velocity); }
    else { midiSerial(144, channel, value, velocity); }


  if(noteLEDs){
      for(byte j=0; j&lt;(LED_NUM-1); j++) {   //find available LED and set
        if(!leds[j].is_fading()) { rampUp(i, 255, duration);  break; }
      }
  }

  break;
}</code></pre>

<p>  }<br>}</p>

<p>void setControl(int type, int value, int velocity, long duration)<br>{<br>  controlMessage.type = type;<br>  controlMessage.value = value;<br>  controlMessage.velocity = velocity;<br>  controlMessage.period = duration;<br>  controlMessage.duration = currentMillis + duration; //schedule for update cycle<br>}</p>

<p>void checkControl()<br>{<br>  //need to make this a smooth slide transition, using high precision<br>  //distance is current minus goal<br>  signed int distance =  controlMessage.velocity - controlMessage.value;<br>  //if still sliding<br>  if(distance != 0) {<br>    //check timing<br>    if(currentMillis&gt;controlMessage.duration) { //and duration expired<br>        controlMessage.duration = currentMillis + controlMessage.period; //extend duration<br>        //update value<br>       if(distance &gt; 0) { controlMessage.value += 1; } else { controlMessage.value -=1; }</p>

<pre><code>   //send MIDI control message after ramp duration expires, on each increment
   midiSerial(176, channel, controlMessage.type, controlMessage.value);

    //send out control voltage message on pin 17, PB3, digital 11
    if(controlVoltage) { if(distance &gt; 0) { rampUp(controlLED, map(controlMessage.value, 0, 127, 0 , 255), 5); }
                                        else { rampDown(controlLED, map(controlMessage.value, 0, 127, 0 , 255), 5); }
    }
}</code></pre>

<p>  }<br>}</p>

<p>void checkNote()<br>{<br>  for (int i = 0;i&lt;polyphony;i++) {<br>    if(noteArray[i].velocity) {<br>      if (noteArray[i].duration &lt;= currentMillis) {<br>        //send noteOff for all notes with expired duration <br>          if(QY8) { midiSerial(144, noteArray[i].channel, noteArray[i].value, 0); }<br>          else { midiSerial(144, channel, noteArray[i].value, 0); }<br>        noteArray[i].velocity = 0;<br>        rampDown(i, 0, 225);<br>      }<br>    }<br>  }</p>

<p>}</p>

<p>void MIDIpanic()<br>{<br>  //120 - all sound off<br>  //123 - All Notes off<br> // midiSerial(21, panicChannel, 123, 0); //123 kill all notes</p>

<p>  //brute force all notes Off<br>  for(byte i=1;i&lt;128;i++) {<br>    delay(1); //don't choke on note offs!<br>    midiSerial(144, channel, i, 0); //clear notes on main channel</p>

<pre><code>   if(QY8){ //clear on all four channels
     for(byte k=1;k&lt;5;k++) {
      delay(1); //don't choke on note offs!
      midiSerial(144, k, i, 0);
     }
   }</code></pre>

<p>  }</p>

<p>}</p>

<p>void midiSerial(int type, int channel, int data1, int data2) {</p>

<p>  cli(); //kill interrupts, probably unnessisary<br>    //  Note type = 144<br>    //  Control type = 176	<br>    // remove MSBs on data<br>		data1 &amp;= 0x7F;  //number<br>		data2 &amp;= 0x7F;  //velocity</p>

<pre><code>	byte statusbyte = (type | ((channel-1) &amp; 0x0F));

	Serial.write(statusbyte);
	Serial.write(data1);
	Serial.write(data2);</code></pre>

<p>  sei(); //enable interrupts<br>}</p>

<p>void checkKnob() {<br>  //float knobValue<br>  threshold = analogRead(knobPin); <br>  //set threshold to knobValue mapping<br>  threshold = mapfloat(threshold, knobMin, knobMax, threshMin, threshMax);</p>

<p>}</p>

<p>void knobMode() {<br>  //scroll through menus and select values using only a single knob<br>  //keep dreamin' kid,<br>}</p>

<p>void rampUp(int ledPin, int value, int time) {<br>LEDFader *led = &amp;leds[ledPin];<br>// led-&gt;set_value(0);<br>  led-&gt;fade(value, time); <br>}</p>

<p>void rampDown(int ledPin, int value, int time) {   <br>  LEDFader *led = &amp;leds[ledPin];<br> // led-&gt;set_value(255); //turn on<br>  led-&gt;fade(value, time); //fade out<br>}</p>

<p>void checkLED(){<br>//iterate through LED array and call update <br> for (byte i = 0; i &lt; LED_NUM; i++) {<br>    LEDFader *led = &amp;leds[i];<br>    led-&gt;update(); <br> }<br>}</p>

<p>void checkButton() {<br>  //no button in this build...<br>}</p>

<p>long readVcc() {  //https://code.google.com/p/tinkerit/wiki/SecretVoltmeter<br>  long result;<br>  // Read 1.1V reference against AVcc<br>  ADMUX = _BV(REFS0) | _BV(MUX3) | _BV(MUX2) | _BV(MUX1);<br>  delay(2); // Wait for Vref to settle<br>  ADCSRA |= _BV(ADSC); // Convert<br>  while (bit_is_set(ADCSRA,ADSC));<br>  result = ADCL;<br>  result |= ADCH&lt;&lt;8;<br>  result = 1126400L / result; // Back-calculate AVcc in mV<br>  return result;<br>}</p>

<p>void checkBattery(){<br>  //check battery voltage against internal 1.1v reference<br>  //if below the minimum value, turn off the light show to save power<br>  //don't check on every loop, settle delay in readVcc() slows things down a bit<br> if(batteryCheck &lt; currentMillis){<br>  batteryCheck = currentMillis+10000; //reset for next battery check</p>

<p>  if(readVcc() &lt; batteryLimit) {   //if voltage &gt; valueV<br>    //battery failure <br>    if(checkBat) { //first battery failure<br>      for(byte j=0;j&lt;LED_NUM;j++) { leds[j].stop_fade(); leds[j].set_value(0); }  //reset leds, power savings<br>      noteLEDs = 0;  //shut off lightshow set at noteOn event, power savings<br>      checkBat = 0; //update, first battery failure identified<br>    } else { //not first low battery cycle<br>      //do nothing, lights off indicates low battery<br>      //MIDI continues to flow, MIDI data eventually garbles at very low voltages<br>      //some USB-MIDI interfaces may crash due to garbled data<br>    }<br>  }<br> }<br>}</p>

<p>void bootLightshow(){<br> //light show to be displayed on boot<br>  for (byte i = 5; i &gt; 0; i--) {<br>    LEDFader *led = &amp;leds[i-1];<br>//    led-&gt;set_value(200); //set to max</p>

<pre><code>led-&gt;fade(200, 150); //fade up
while(led-&gt;is_fading()) checkLED();


led-&gt;fade(0,150+i*17);  //fade down
while(led-&gt;is_fading()) checkLED();</code></pre>

<p>   //move to next LED<br>  }<br>}</p>

<p>//provide float map function<br>float mapfloat(float x, float in_min, float in_max, float out_min, float out_max)<br>{<br>  return (x - in_min) * (out_max - out_min) / (in_max - in_min) + out_min;<br>}</p>

<p>//debug SRAM memory size<br>int freeRAM() {<br>  extern int <strong>heap_start, *</strong>brkval;<br>  int v;<br>  return (int) &amp;v - (<strong>brkval == 0 ? (int) &amp;</strong>heap_start : (int) __brkval);<br>} // print free RAM at any point</p>

<p>//interrupt timing sample array<br>void sample()<br>{<br>  if(index &lt; samplesize) {<br>    samples[index] = micros() - microseconds;<br>    microseconds = samples[index] + microseconds; //rebuild micros() value w/o recalling<br>    //micros() is very slow<br>    //try a higher precision counter<br>    //samples[index] = ((timer0_overflow_count &lt;&lt; 8) + TCNT0) - microseconds;<br>    index += 1;<br>  }<br>}</p>

<p>void analyzeSample()<br>{<br>  //eating up memory, one long at a time!<br>  unsigned long averg = 0;<br>  unsigned long maxim = 0;<br>  unsigned long minim = 100000;<br>  float stdevi = 0;<br>  unsigned long delta = 0;<br>  byte change = 0;</p>

<p>  if (index = samplesize) { //array is full<br>    unsigned long sampanalysis[analysize];<br>    for (byte i=0; i&lt;analysize; i++){<br>      //skip first element in the array<br>      sampanalysis[i] = samples[i+1];  //load analysis table (due to volitle)<br>      //manual calculation<br>      if(sampanalysis[i] &gt; maxim) { maxim = sampanalysis[i]; }<br>      if(sampanalysis[i] &lt; minim) { minim = sampanalysis[i]; }<br>      averg += sampanalysis[i];<br>      stdevi += sampanalysis[i] * sampanalysis[i];  //prep stdevi<br>    }</p>

<pre><code>//manual calculation
averg = averg/analysize;
stdevi = sqrt(stdevi / analysize - averg * averg); //calculate stdevu
if (stdevi &lt; 1) { stdevi = 1.0; } //min stdevi of 1
delta = maxim - minim;

//**********perform change detection
if (delta &gt; (stdevi * threshold)){
  change = 1;
}
//*********

if(change){// set note and control vector
   int dur = 150+(map(delta%127,1,127,100,2500)); //length of note
   int ramp = 3 + (dur%100) ; //control slide rate, min 25 (or 3 ;)
   int notechannel = random(1,5); //gather a random channel for QY8 mode

   //set scaling, root key, note
   int setnote = map(averg%127,1,127,noteMin,noteMax);  //derive note, min and max note
   setnote = scaleNote(setnote, scaleSelect, root);  //scale the note
   // setnote = setnote + root; // (apply root?)
   if(QY8) { setNote(setnote, 100, dur, notechannel); } //set for QY8 mode
   else { setNote(setnote, 100, dur, channel); }

   //derive control parameters and set   
   setControl(controlNumber, controlMessage.value, delta%127, ramp); //set the ramp rate for the control
 }
 //reset array for next sample
index = 0;</code></pre>

<p>  }<br>}</p>

<p>int scaleSearch(int note, int scale[], int scalesize) {<br> for(byte i=1;i&lt;scalesize;i++) {<br>  if(note == scale[i]) { return note; }<br>  else { if(note &lt; scale[i]) { return scale[i]; } } //highest scale value less than or equal to note<br>  //otherwise continue search<br> }<br> //didn't find note and didn't pass note value, uh oh!<br> return 6;//give arbitrary value rather than fail<br>}</p>

<p>int scaleNote(int note, int scale[], int root) {<br>  //input note mod 12 for scaling, note/12 octave<br>  //search array for nearest note, return scaled*octave<br>  int scaled = note%12;<br>  int octave = note/12;<br>  int scalesize = (scale[0]);<br>  //search entire array and return closest scaled note<br>  scaled = scaleSearch(scaled, scale, scalesize);<br>  scaled = (scaled + (12 * octave)) + root; //apply octave and root<br>  return scaled;<br>}</p>

<p>/*--------<br>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the ‚ÄúSoftware‚Äù), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:<br>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p>

<p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR<br>IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS<br>FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR<br>COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER<br>IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='How to interface axoloti with Plants ? Midi sprout 300 ‚Ç¨?'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/philoop.html'><b itemprop='author'>philoop</b></a>
           
           <time datetime='2018-03-12T21:50:05Z' itemprop='datePublished'>
             2018-03-12 21:50:05 UTC
           </time>
        </span>
        <span itemprop='position'>#8</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>also i tried this approach with no luck , its translated from danish and is one of the most confusing instructionals i have ever read, tough the approach with an induktion is interessting </p>

<p><a href="http://www.gunook.com/singende-pflanze-machen-sie-ihre-pflanze-mit-arduino-touche-und-einem-gameduino-singen/" class="onebox" target="_blank" rel="nofollow noopener">http://www.gunook.com/singende-pflanze-machen-sie-ihre-pflanze-mit-arduino-touche-und-einem-gameduino-singen/</a><br><div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/9914643c4a6db3ba8dbbd2ea9473de54d69f6d89" href="https://sebiik.github.io/community.axoloti.com.backup/uploads/default/original/2X/9/9914643c4a6db3ba8dbbd2ea9473de54d69f6d89.jpg" class="lightbox" title="image.jpg"><img src="http://community.axoloti.com/uploads/default/optimized/2X/9/9914643c4a6db3ba8dbbd2ea9473de54d69f6d89_1_684x499.jpg" width="684" height="499"><div class="meta">
<span class="filename">image.jpg</span><span class="informations">1348x985 86 KB</span><span class="expand"></span>
</div></a></div></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='How to interface axoloti with Plants ? Midi sprout 300 ‚Ç¨?'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/philoop.html'><b itemprop='author'>philoop</b></a>
           
           <time datetime='2018-03-22T17:01:21Z' itemprop='datePublished'>
             2018-03-22 17:01:21 UTC
           </time>
        </span>
        <span itemprop='position'>#9</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p> midisprout   launchkontrol and axolti + liedetector    <a href="https://soundcloud.com/phuck-dub/axoloti-with-midisprout-agave-versus-kurkuma" rel="nofollow noopener">https://soundcloud.com/phuck-dub/axoloti-with-midisprout-agave-versus-kurkuma</a></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='How to interface axoloti with Plants ? Midi sprout 300 ‚Ç¨?'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/philoop.html'><b itemprop='author'>philoop</b></a>
           
           <time datetime='2019-01-10T23:02:45Z' itemprop='datePublished'>
             2019-01-10 23:02:45 UTC
           </time>
        </span>
        <span itemprop='position'>#10</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="onebox whitelistedgeneric">
  <header class="source">
    <a href="https://www.tindie.com/products/manueldomke/midi-biodata-sonification-device-v21/" target="_blank" rel="nofollow noopener">tindie.com</a>
  </header>
  <article class="onebox-body">
    <img src="https://cdn.tindiemedia.com/images/resize/XTOxkGB1IiZtqdSLPqBLIQUyEkg=/p/1200x630/smart/i/93367/products/2018-10-21T17%3A07%3A57.791Z-holz.JPG" width="" height="" class="thumbnail">

<h3><a href="https://www.tindie.com/products/manueldomke/midi-biodata-sonification-device-v21/" target="_blank" rel="nofollow noopener">MIDI Biodata Sonification Device v2.1 by 13-37 electronics on Tindie</a></h3>

<p>new version with button and menu for more options + 3D printed enclosure</p>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>


<p>MIDI Biodata Sonification Device v2.1     125 dollar</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='How to interface axoloti with Plants ? Midi sprout 300 ‚Ç¨?'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/jaffasplaffa.html'><b itemprop='author'>jaffasplaffa</b></a>
           
           <time datetime='2019-01-11T00:28:31Z' itemprop='datePublished'>
             2019-01-11 00:28:31 UTC
           </time>
        </span>
        <span itemprop='position'>#11</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>300‚Ç¨....... </p>

<p>Damn......</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='How to interface axoloti with Plants ? Midi sprout 300 ‚Ç¨?'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/philoop.html'><b itemprop='author'>philoop</b></a>
           
           <time datetime='2019-01-11T00:53:27Z' itemprop='datePublished'>
             2019-01-11 00:53:27 UTC
           </time>
        </span>
        <span itemprop='position'>#12</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>no this is a better version at tindie for 125 $   wich is really ok</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='How to interface axoloti with Plants ? Midi sprout 300 ‚Ç¨?'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/jaffasplaffa.html'><b itemprop='author'>jaffasplaffa</b></a>
           
           <time datetime='2019-01-11T02:31:36Z' itemprop='datePublished'>
             2019-01-11 02:31:36 UTC
           </time>
        </span>
        <span itemprop='position'>#13</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Yes, I was just referring to your first post in the thread.</p>

<p>125 is better, but still up there. I would love to hear which kind of sounds actually comes out of it <img src="http://community.axoloti.com/images/emoji/twitter/slight_smile.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='How to interface axoloti with Plants ? Midi sprout 300 ‚Ç¨?'>
      <hr>
  </div>






    </div>
    <footer class="container">
      <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <a href='../../index.html'>Home</a>
        <a href="../../categories.html">Categories</a>
        <a href="../../guidelines.html">FAQ/Guidelines</a>
        <a href="../../tos.html">Terms of Service</a>
        <a href="../../privacy.html">Privacy Policy</a>
      </nav>
      <p>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  

<!-- Mirrored from community.axoloti.com/t/how-to-interface-axoloti-with-plants-midi-sprout-300/1772 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 16 Jul 2023 18:28:39 GMT -->
</html>
