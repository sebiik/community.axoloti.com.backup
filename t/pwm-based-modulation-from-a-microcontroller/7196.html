<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from community.axoloti.com/t/pwm-based-modulation-from-a-microcontroller/7196 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 16 Jul 2023 17:21:27 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>PWM Based modulation from a microcontroller - Hardware - Axoloti Community</title>
    <meta name="description" content="I can&amp;#39;t find anything online that is related to this, figured I would ask here first. In fact, as I&amp;#39;m typing this out I&amp;#39;m realizing that this is probably quite common in the eurorack format  (something I&amp;#39;m unfamiliar wit&amp;hellip;">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.9.0.beta3 - https://github.com/discourse/discourse version 13f3de4bf673802eb8ec595d36587b4524773209">
<link rel="icon" type="image/png" href="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="7196.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"http://community.axoloti.com","potentialAction":{"@type":"SearchAction","target":"http://community.axoloti.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Axoloti Community Search">

        <link href="../../stylesheets/desktop_d93a33ca8617326fe353f80e6ab865188244d48c8e0b.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop"/>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;PWM Based modulation from a microcontroller&#39;" href="7196.rss" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:url" content="http://community.axoloti.com/t/pwm-based-modulation-from-a-microcontroller/7196" />
<meta name="twitter:url" content="http://community.axoloti.com/t/pwm-based-modulation-from-a-microcontroller/7196" />
<meta property="og:title" content="PWM Based modulation from a microcontroller" />
<meta name="twitter:title" content="PWM Based modulation from a microcontroller" />
<meta property="og:description" content="I can&#39;t find anything online that is related to this, figured I would ask here first. In fact, as I&#39;m typing this out I&#39;m realizing that this is probably quite common in the eurorack format  (something I&#39;m unfamiliar with).   In an attempt to offload resources from the Axoloti, I had the idea to send LFOs and envelopes to the Axoloti&#39;s analog inputs from the microcontroller I&#39;ve been using to control the Axoloti by MIDI. Since the ADC receives higher resolution than the 7 bit MIDI signals, is it..." />
<meta name="twitter:description" content="I can&#39;t find anything online that is related to this, figured I would ask here first. In fact, as I&#39;m typing this out I&#39;m realizing that this is probably quite common in the eurorack format  (something I&#39;m unfamiliar with).   In an attempt to offload resources from the Axoloti, I had the idea to send LFOs and envelopes to the Axoloti&#39;s analog inputs from the microcontroller I&#39;ve been using to control the Axoloti by MIDI. Since the ADC receives higher resolution than the 7 bit MIDI signals, is it..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="1 ❤" />


  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html"><img src="http://community.axoloti.com/uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo" style="max-width: 150px;"></a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1>
  <a href="7196.html">PWM Based modulation from a microcontroller</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/hardware.html" itemprop="url">
        <span itemprop="title">Hardware</span>
      </a>
    </div>
</div>





<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/hitachii.html'><b itemprop='author'>hitachii</b></a>
           
           <time datetime='2021-03-07T19:36:38Z' itemprop='datePublished'>
             2021-03-07 19:36:38 UTC
           </time>
        </span>
        <span itemprop='position'>#1</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I can't find anything online that is related to this, figured I would ask here first. In fact, as I'm typing this out I'm realizing that this is probably quite common in the eurorack format  (something I'm unfamiliar with).</p>

<p>In an attempt to offload resources from the Axoloti, I had the idea to send LFOs and envelopes to the Axoloti's analog inputs from the microcontroller I've been using to control the Axoloti by MIDI. Since the ADC receives higher resolution than the 7 bit MIDI signals, is it possible to send information from the PWM out of a Teensy into the analog ins of the Axoloti? </p>

<p>If so, it means that I would have to make the Teensy the MIDI handler, so that the note messages are sent at the same time as the envelope. Alternately, I could use the Axo as a MIDI thru to send messages from the Axo MIDI inputs to the Teensy, then back out to the Axoloti, but I'm worried about latency, unless the latency would be negligible. </p>

<p>Does anybody have any experience doing something similar? These are all things that I can figure out by myself, but I figured I would ask here first in case it saves a few hours of trial and error! Thanks!</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='PWM Based modulation from a microcontroller'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/hitachii.html'><b itemprop='author'>hitachii</b></a>
           
           <time datetime='2021-03-09T20:16:28Z' itemprop='datePublished'>
             2021-03-09 20:16:28 UTC
           </time>
        </span>
        <span itemprop='position'>#2</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Found it.</p>

<p>Seems like just about every time I have a question about a digital-to-analog solution or vice versa, there's a page on the Teensy site dedicated entirely, and exhaustively, to that one specific thing. Here it is if anybody is interested.</p>

<p>Turns out that it's entirely possible, but it requires a small additional low pass filter circuit in order to work. </p>

<p><a href="https://www.pjrc.com/teensy/td_pulse.html" class="onebox" target="_blank" rel="nofollow noopener">https://www.pjrc.com/teensy/td_pulse.html</a></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='PWM Based modulation from a microcontroller'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/hitachii.html'><b itemprop='author'>hitachii</b></a>
           
           <time datetime='2021-05-17T03:12:42Z' itemprop='datePublished'>
             2021-05-17 03:12:42 UTC
           </time>
        </span>
        <span itemprop='position'>#3</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Little update on this, in case anybody finds it useful. </p>

<p>Tonight was the first real effort to receive modulation from a microcontroller. The cool part is how easy it was because the microcontroller sending the modulation to the Axoloti, was the Axoloti itself! </p>

<p>I've been told that a microcontroller's analog outs can be wired back into their analog ins directly, so the schematic for this was literally PA4 -&gt; PC0. </p>

<p><div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/0b5ae624bbd07d997445f6e5222a73b67988f725" href="http://community.axoloti.com/uploads/default/original/2X/0/0b5ae624bbd07d997445f6e5222a73b67988f725.jpg" class="lightbox" title="20210516_225757.jpg"><img src="http://community.axoloti.com/uploads/default/optimized/2X/0/0b5ae624bbd07d997445f6e5222a73b67988f725_1_690x387.jpg" width="690" height="387"><div class="meta">
<span class="filename">20210516_225757.jpg</span><span class="informations">2851x1603 2.04 MB</span><span class="expand"></span>
</div></a></div></p>

<p>The PWM documentation from the Teensy page in my previous post above recommends using a hardware low-pass filter to smooth some of the 'stepping' from the digital signal, which I tried at first using a 1uf capacitor and 1k resistor. It ended up slowing (softening?) the signal quite significantly. Then I tried it without using the low-pass filter at all, and the results exceeded expectations. </p>

<p>A sine wave LFO was used to individually modulate the volume and pitch of the oscillator in the patch pictured here. You can see a slight inconsistency from the received signal on the right, but there were no audible artifacts. The modulation sounded the same as if the control came from the LFO itself. Perhaps if I used something other than an MI CSAW the minutiae would be more detectable <img src="http://community.axoloti.com/images/emoji/twitter/sweat_smile.png?v=5" title=":sweat_smile:" class="emoji" alt=":sweat_smile:"></p>

<p><div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/1551501a3a04064392e5a4ec2887ff1f8dc83a0a" href="http://community.axoloti.com/uploads/default/original/2X/1/1551501a3a04064392e5a4ec2887ff1f8dc83a0a.png" class="lightbox" title="Screen Shot 2021-05-16 at 10.57.12 PM.png"><img src="http://community.axoloti.com/uploads/default/optimized/2X/1/1551501a3a04064392e5a4ec2887ff1f8dc83a0a_1_690x332.png" width="690" height="332"><div class="meta">
<span class="filename">Screen Shot 2021-05-16 at 10.57.12 PM.png</span><span class="informations">1459x703 41.4 KB</span><span class="expand"></span>
</div></a></div></p>

<p>Hopefully the next update will be modulation sent from the Teensy to the Axoloti, and hopefully that will be sooner than a few months from now!</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='PWM Based modulation from a microcontroller'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/borututuforte.html'><b itemprop='author'>borututuforte</b></a>
           
           <time datetime='2021-05-17T11:59:54Z' itemprop='datePublished'>
             2021-05-17 11:59:54 UTC
           </time>
        </span>
        <span itemprop='position'>#4</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>The Axoloti GPIO pin outputs the LFO as a voltage, not as a PWM signal, so no lowpass filter is required. The signal received from the Teensys PWM output filtered by the simple rc circuit will probably give you much worse results, but it may also be interesting and good enough for modulation.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='PWM Based modulation from a microcontroller'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/hitachii.html'><b itemprop='author'>hitachii</b></a>
           
           <time datetime='2021-05-17T16:30:56Z' itemprop='datePublished'>
             2021-05-17 16:30:56 UTC
           </time>
        </span>
        <span itemprop='position'>#5</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Oh that's really good to know. Showing my lack of knowledge here, but does the Axoloti's DAC route to the analog out pins? If that's the case, I have the Teensy audio shield as well, but I'll have to look and see if using pins on the audio shield for modulation means sacrificing the audio outs.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='PWM Based modulation from a microcontroller'>
      <hr>
  </div>






    </div>
    <footer class="container">
      <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <a href='../../index.html'>Home</a>
        <a href="../../categories.html">Categories</a>
        <a href="../../guidelines.html">FAQ/Guidelines</a>
        <a href="../../tos.html">Terms of Service</a>
        <a href="../../privacy.html">Privacy Policy</a>
      </nav>
      <p>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  

<!-- Mirrored from community.axoloti.com/t/pwm-based-modulation-from-a-microcontroller/7196 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 16 Jul 2023 17:21:32 GMT -->
</html>
