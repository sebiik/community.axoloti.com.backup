<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from community.axoloti.com/t/note-length-with-lfo-square-counter-sel-ad-pattern/6356/5 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 19 Jul 2023 03:14:36 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Note length with LFO.square &gt; counter &gt; sel &gt; ad pattern - Patching - Axoloti Community</title>
    <meta name="description" content="How would I make a solid note length using the LFO.square &amp;gt; counter &amp;gt; sel &amp;gt; ad pattern? 

Is there an object that holds a boolean set by trigger for specific note length? 

Using an ad envelope works but I would like mor&amp;hellip;">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.9.0.beta3 - https://github.com/discourse/discourse version 13f3de4bf673802eb8ec595d36587b4524773209">
<link rel="icon" type="image/png" href="../../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="../../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="../6356.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"http://community.axoloti.com","potentialAction":{"@type":"SearchAction","target":"http://community.axoloti.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="Axoloti Community Search">

        <link href="../../../stylesheets/desktop_d93a33ca8617326fe353f80e6ab865188244d48c8e0b.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop"/>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','../../../../www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Note length with LFO.square &gt; counter &gt; sel &gt; ad pattern&#39;" href="../6356.rss" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://community.axoloti.com/user_avatar/community.axoloti.com/weasel79/200/6141_1.png" />
<meta property="og:image" content="http://community.axoloti.com/user_avatar/community.axoloti.com/weasel79/200/6141_1.png" />
<meta property="og:url" content="http://community.axoloti.com/t/note-length-with-lfo-square-counter-sel-ad-pattern/6356/5" />
<meta name="twitter:url" content="http://community.axoloti.com/t/note-length-with-lfo-square-counter-sel-ad-pattern/6356/5" />
<meta property="og:title" content="Note length with LFO.square &gt; counter &gt; sel &gt; ad pattern" />
<meta name="twitter:title" content="Note length with LFO.square &gt; counter &gt; sel &gt; ad pattern" />
<meta property="og:description" content="Yes, K-rate code is executed at the k-rate of 3000Hz!   The code basically just loops through a counter based on param_delay and keeps the output positive until the counter reaches zero. For some info on MTOF and other guidellines check this   fwiw i like you solution with the and object and the clock timed pulse length but you could as well just add the pulse length object directly after the output of your sel and avoid the rest." />
<meta name="twitter:description" content="Yes, K-rate code is executed at the k-rate of 3000Hz!   The code basically just loops through a counter based on param_delay and keeps the output positive until the counter reaches zero. For some info on MTOF and other guidellines check this   fwiw i like you solution with the and object and the clock timed pulse length but you could as well just add the pulse length object directly after the output of your sel and avoid the rest." />


  </head>
  <body class="crawler">
    
    <header>
      <a href="../../../index.html"><img src="../../../uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo" style="max-width: 150px;"></a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1>
  <a href="../6356.html">Note length with LFO.square &gt; counter &gt; sel &gt; ad pattern</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../../c/patching.html" itemprop="url">
        <span itemprop="title">Patching</span>
      </a>
    </div>
</div>





<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/bart.html'><b itemprop='author'>bart</b></a>
           
           <time datetime='2020-01-30T08:40:18Z' itemprop='datePublished'>
             2020-01-30 08:40:18 UTC
           </time>
        </span>
        <span itemprop='position'>#1</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>How would I make a solid note length using the LFO.square &gt; counter &gt; sel &gt; ad pattern?</p>

<p>Is there an object that holds a boolean set by trigger for specific note length?</p>

<p>Using an ad envelope works but I would like more control on the note length</p>

<p>Any ideas?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Note length with LFO.square &gt; counter &gt; sel &gt; ad pattern'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/weasel79.html'><b itemprop='author'>weasel79</b></a>
           
           <time datetime='2020-01-30T17:00:29Z' itemprop='datePublished'>
             2020-01-30 17:00:29 UTC
           </time>
        </span>
        <span itemprop='position'>#2</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>look at <code>timer/pulselength</code></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Note length with LFO.square &gt; counter &gt; sel &gt; ad pattern'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/Nosnibor-2.html'><b itemprop='author'>Nosnibor</b></a>
           
           <time datetime='2020-01-30T22:31:32Z' itemprop='datePublished'>
             2020-01-30 22:31:32 UTC
           </time>
        </span>
        <span itemprop='position'>#3</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>You probably need an ahd envelope instead of ad.<br><strong>ad</strong> uses the start of the gate pulse as a trigger and then generates a rising and a falling slope, regardless of the duration of the gate pulse.<br><strong>ahd</strong> generates a rising slope, then stays at maximum until the gate signal ends, then it generates a falling slope.<br>Of course you also need a gate signal with the proper duration.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Note length with LFO.square &gt; counter &gt; sel &gt; ad pattern'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/bart.html'><b itemprop='author'>bart</b></a>
           
           <time datetime='2020-01-31T21:46:16Z' itemprop='datePublished'>
             2020-01-31 21:46:16 UTC
           </time>
        </span>
        <span itemprop='position'>#4</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Thanks, I was in the train and I forgot my headphones so I had to test this using the disp/boolean object. And this worked quite well so I made a patch that has a seqencer where I can define the note length. </p>

<p><div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/7c7149f3e0da142bec033cf9b8700f55cec95e77" href="../../../uploads/default/original/2X/7/7c7149f3e0da142bec033cf9b8700f55cec95e77.png" class="lightbox" title="notelength.PNG"><img src="../../../uploads/default/optimized/2X/7/7c7149f3e0da142bec033cf9b8700f55cec95e77_1_690x268.png" width="690" height="268"><div class="meta">
<span class="filename">notelength.PNG</span><span class="informations">1822x708 104 KB</span><span class="expand"></span>
</div></a></div></p>

<p><a class="attachment" href="../../../uploads/default/original/2X/3/notelength2.axp">notelength2.axp</a> (4.0 KB)</p>

<p>Now the next thing is that I would like to understand the code of this object. Is the K-rate code executed at a fixed rate? I am new to this.</p>

<blockquote><p>if ((inlet_trig &gt; 0) &amp;&amp; !ntrig) {<br>  val = 1 &lt;&lt; 30;<br>  ntrig = 1;<br>  outlet_pulse = 1;<br>}<br>else {<br>  if (!(inlet_trig &gt; 0))<br>    ntrig = 0;<br>  if (val&gt;0) {<br>    int32_t t;<br>    MTOF(-param_delay,t);<br>     val -= t&gt;&gt;3;<br>     if (val&lt;=0) outlet_pulse = 0;<br>     else outlet_pulse = 1;<br>  } else outlet_pulse = 0;<br>}</p></blockquote>

<p>Thanks!,<br>Bart</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Note length with LFO.square &gt; counter &gt; sel &gt; ad pattern'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/weasel79.html'><b itemprop='author'>weasel79</b></a>
           
           <time datetime='2020-01-31T22:11:38Z' itemprop='datePublished'>
             2020-01-31 22:11:38 UTC
           </time>
        </span>
        <span itemprop='position'>#5</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Yes, K-rate code is executed at the k-rate of 3000Hz!</p>

<p>The code basically just loops through a counter based on param_delay and keeps the output positive until the counter reaches zero. For some info on MTOF and other guidellines check this<br><aside class="quote" data-post="1" data-topic="2606">
  <div class="title">
    <div class="quote-controls"></div>
    <img alt="" width="20" height="20" src="../../../user_avatar/community.axoloti.com/sputnki/40/175_1.png" class="avatar">
    <a href="../../coding-axoloti-objects/2606a04d.html?source_topic_id=6356" rel="nofollow noopener">Coding axoloti objects</a> <a class="badge-wrapper  bullet" href="../../../c/user-guide.html"><span class="badge-category-bg" style="background-color: #3AB54A;"></span><span style="color: #FFFFFF;" class="badge-category clear-badge" title="This category contains posts to help users use Axoloti, a dynamic user guide.">User Guide</span></a>
  </div>
  <blockquote>
    A pretty big subject, but i think it might be useful to shed some light for newbies: 

Contents


<a href="#needtoknow">What do you need to know to code objects</a>
<a href="#startcoding">How do you start coding an object?</a>
<a href="#editlibrary">How do you edit a library object?</a>
<a href="#codeinout">Coding with input/output (and parameters)</a>
<a href="#localdata">Local data</a>
<a href="#initcode">Init code</a>
<a href="#kratesrate">K-rate and S-rate cycles</a>
<a href="#inletsoutlets">Inlets/Outlets</a>
<a href="#parameters">Parameters</a>
<a href="#rangeformat">Normal range and number format</a>
<a href="#elementarymath">Elementary math in axoloti</a>
<a href="#32bitvar">32bit variables</a>
<a href="#bitshifts">Bitshifts</a>
<a href="#fixedpointmath">Fixed point math</a>
<a href="#functions">Functions</a>
<a href="#assembly">Assembly functions</a>
<a href="#bitwise">Bitwise operations</a>





<a name="needtoknow" href="#"></a>What do you need to know…
  </blockquote>
</aside>
<br>fwiw i like you solution with the <code>and</code> object and the clock timed pulse length but you could as well just add the pulse length object directly after the output of your <code>sel</code> and avoid the rest.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Note length with LFO.square &gt; counter &gt; sel &gt; ad pattern'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/bart.html'><b itemprop='author'>bart</b></a>
           
           <time datetime='2020-02-01T12:02:48Z' itemprop='datePublished'>
             2020-02-01 12:02:48 UTC
           </time>
        </span>
        <span itemprop='position'>#6</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Thanks and cool, that makes it clear, and helps me in coding some objects.</p>

<p>I tried putting the pulse length directly after the sel but as it didn't work I made this solution with the and object. But you are right, I used the wrong sel object. I used the <br><strong>sel b 16 4t</strong>, <br>but should have chosen <br><strong>sel b 16 4t pulse</strong></p>

<p>Now it works great.</p>

<p>MTOF is still not clear to me. It is mapping the input to output, but what does the function do?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Note length with LFO.square &gt; counter &gt; sel &gt; ad pattern'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../../u/janvantomme.html'><b itemprop='author'>janvantomme</b></a>
           
           <time datetime='2020-02-03T08:59:31Z' itemprop='datePublished'>
             2020-02-03 08:59:31 UTC
           </time>
        </span>
        <span itemprop='position'>#7</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="6" data-topic="6356"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../user_avatar/community.axoloti.com/bart/40/6822_1.jpg" class="avatar">bart:</div>
<blockquote><p>MTOF is still not clear to me. It is mapping the input to output, but what does the function do?</p></blockquote></aside>

<p>Converts pitch to frequency.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Note length with LFO.square &gt; counter &gt; sel &gt; ad pattern'>
      <hr>
  </div>






    </div>
    <footer class="container">
      <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <a href='../../../index.html'>Home</a>
        <a href="../../../categories.html">Categories</a>
        <a href="../../../guidelines.html">FAQ/Guidelines</a>
        <a href="../../../tos.html">Terms of Service</a>
        <a href="../../../privacy.html">Privacy Policy</a>
      </nav>
      <p>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  

<!-- Mirrored from community.axoloti.com/t/note-length-with-lfo-square-counter-sel-ad-pattern/6356/5 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 19 Jul 2023 03:14:40 GMT -->
</html>
