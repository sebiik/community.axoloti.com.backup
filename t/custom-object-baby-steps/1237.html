<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from community.axoloti.com/t/custom-object-baby-steps/1237 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 10 Jul 2023 16:05:49 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Custom Object Baby Steps - AxoObject coding - Axoloti Community</title>
    <meta name="description" content="I&amp;#39;ve just started working on a new object. Trying to remember some of the C I learnt many years ago. 

First question: 

how do I declare and then initialise an array of signed 32bit integers? 

I currently have: 

 &amp;lt;cod&amp;hellip;">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.9.0.beta3 - https://github.com/discourse/discourse version 13f3de4bf673802eb8ec595d36587b4524773209">
<link rel="icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="1237.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"http://community.axoloti.com","potentialAction":{"@type":"SearchAction","target":"http://community.axoloti.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Axoloti Community Search">

        <link href="../../stylesheets/desktop_d93a33ca8617326fe353f80e6ab865188244d48c8e0b.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop"/>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','../../../www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Custom Object Baby Steps&#39;" href="1237.rss" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:url" content="http://community.axoloti.com/t/custom-object-baby-steps/1237" />
<meta name="twitter:url" content="http://community.axoloti.com/t/custom-object-baby-steps/1237" />
<meta property="og:title" content="Custom Object Baby Steps" />
<meta name="twitter:title" content="Custom Object Baby Steps" />
<meta property="og:description" content="I&#39;ve just started working on a new object. Trying to remember some of the C I learnt many years ago.   First question:   how do I declare and then initialise an array of signed 32bit integers?   I currently have:    &lt;code.declaration&gt;     &lt;![CDATA[       int32_t pattern[32];       int counter;       int ntrig;       int rtrig;     ]]&gt; &lt;/code.declaration&gt; &lt;code.init&gt;    &lt;![CDATA[       pattern[] = {-57, -55, -42, -40, -39, -30, -28, -25, -24, -22, -21, -20, -17, -15, -8, -3, -2, 3, 5, 7, 8, 11, 1..." />
<meta name="twitter:description" content="I&#39;ve just started working on a new object. Trying to remember some of the C I learnt many years ago.   First question:   how do I declare and then initialise an array of signed 32bit integers?   I currently have:    &lt;code.declaration&gt;     &lt;![CDATA[       int32_t pattern[32];       int counter;       int ntrig;       int rtrig;     ]]&gt; &lt;/code.declaration&gt; &lt;code.init&gt;    &lt;![CDATA[       pattern[] = {-57, -55, -42, -40, -39, -30, -28, -25, -24, -22, -21, -20, -17, -15, -8, -3, -2, 3, 5, 7, 8, 11, 1..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="3 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="2 ❤" />


  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html"><img src="../../uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo" style="max-width: 150px;"></a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1>
  <a href="1237.html">Custom Object Baby Steps</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/axoobject-code.html" itemprop="url">
        <span itemprop="title">AxoObject coding</span>
      </a>
    </div>
</div>





<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/toneburst.html'><b itemprop='author'>toneburst</b></a>
           
           <time datetime='2016-03-08T23:19:41Z' itemprop='datePublished'>
             2016-03-08 23:19:41 UTC
           </time>
        </span>
        <span itemprop='position'>#1</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I've just started working on a new object. Trying to remember some of the C I learnt many years ago.</p>

<p>First question:</p>

<p>how do I declare and then initialise an array of signed 32bit integers?</p>

<p>I currently have:</p>

<p></p><pre><code class="lang-auto">&lt;code.declaration&gt;
    &lt;![CDATA[
      int32_t pattern[32];
      int counter;
      int ntrig;
      int rtrig;
    ]]&gt;
&lt;/code.declaration&gt;
&lt;code.init&gt;
   &lt;![CDATA[
      pattern[] = {-57, -55, -42, -40, -39, -30, -28, -25, -24, -22, -21, -20, -17, -15, -8, -3, -2, 3, 5, 7, 8, 11, 18, 20, 36, 39, 44, 47, 48, 49, 60, 63};
      counter = 0;
      ntrig = 0;
      rtrig = 0;
  ]]&gt;
&lt;/code.init&gt;</code></pre>

<p>but get these errors:</p>

<p></p><pre><code class="lang-auto">/Users/alx/Documents/axoloti/build/xpatch.cpp:81:13: error: 'int32' does not name a type
             int32 pattern[32];
             ^
/Users/alx/Documents/axoloti/build/xpatch.cpp: In member function 'void rootc::instancetbnmpgen__1::Init(rootc*)':
/Users/alx/Documents/axoloti/build/xpatch.cpp:91:13: error: 'pattern' was not declared in this scope
             pattern[32] = {-57, -55, -42, -40, -39, -30, -28, -25, -24, -22, -21, -20, -17, -15, -8, -3, -2, 3, 5, 7, 8, 11, 18, 20, 36, 39, 44, 47, 48, 49, 60, 63};
             ^
/Users/alx/Documents/axoloti/build/xpatch.cpp: In member function 'void rootc::instancetbnmpgen__1::dsp(int32_t, int32_t, int32_t&amp;)':
/Users/alx/Documents/axoloti/build/xpatch.cpp:111:30: error: 'pattern' was not declared in this scope
                 outlet_out = pattern[counter];
                              ^
make: *** [/Users/alx/Documents/axoloti/build/xpatch.bin] Error 1
shell task failed, exit value: 2
Compiling patch failed ( untitled )</code></pre>

<p>a|x</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Custom Object Baby Steps'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/johannes.html'><b itemprop='author'>johannes</b></a>
           
           <time datetime='2016-03-09T00:19:50Z' itemprop='datePublished'>
             2016-03-09 00:19:50 UTC
           </time>
        </span>
        <span itemprop='position'>#2</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Inline array initialization can only be done at declaration</p>

<pre><code>&lt;code.declaration&gt;&lt;![CDATA[
   int32_t pattern[32] = {-57, -55, -42, -40, -39, -30, -28, -25, -24, -22, -21, -20, -17, -15, -8, -3, -2, 3, 5, 7, 8, 11, 18, 20, 36, 39, 44, 47, 48, 49, 60, 63};
]]&gt;
&lt;/code.declaration&gt;</code></pre>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Custom Object Baby Steps'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/toneburst.html'><b itemprop='author'>toneburst</b></a>
           
           <time datetime='2016-03-09T08:36:45Z' itemprop='datePublished'>
             2016-03-09 08:36:45 UTC
           </time>
        </span>
        <span itemprop='position'>#3</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Thanks johannes. So once declared, I can only set values using pattern[index] notation, then?</p>

<p>I have another stupid question.</p>

<p>How can I declare a function that is run once when the object is initialised, but can also be run at any time 'in the loop'?</p>

<p>Also, are values from knobs etc. available in the init block?</p>

<p>If not, I guess I will need to set some kind of switch variable so I can tell in the main loop that the object is running for the first time.</p>

<p>Is there some kind of 'hook' to hang a function on when parameter changes occur, or will I have to keep the values of the controls from the last iteration of the loop, and compare to current values, to work out if they've changed?</p>

<p>Finally, is it possible to set min, max and step-size for object controls?</p>

<p>Sorry for all the questions.</p>

<p>a|x</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Custom Object Baby Steps'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/toneburst.html'><b itemprop='author'>toneburst</b></a>
           
           <time datetime='2016-03-09T23:38:24Z' itemprop='datePublished'>
             2016-03-09 23:38:24 UTC
           </time>
        </span>
        <span itemprop='position'>#4</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Coming from a background in JavaScript, where variables can be of any type, and can even change their type dynamically, I'm afraid I'm a bit bewildered by the different data types I see in the library .axo objects.</p>

<p>I'm trying to make a simple k-rate object that steps through the values in an array and outputs them. Here's what I have so far:</p>

<p></p><pre><code class="lang-auto">&lt;objdefs&gt;
   &lt;obj.normal id="tbnmpgen" uuid="f4aa3eb163415b6fc722e576dde754a226a022ac" sha="6f50fda64d42de1ad8230b4a833a42c03c18e494"&gt;
      &lt;sDescription&gt;Pseudo-random (repeatable) pattern generator. Based on Nord modular PatternGen module.&lt;/sDescription&gt;
      &lt;author&gt;toneburst&lt;/author&gt;
      &lt;license&gt;BSD&lt;/license&gt;
      &lt;inlets&gt;
         &lt;bool32.rising name="trig" description="trigger"/&gt;
         &lt;bool32.rising name="r" description="reset"/&gt;
      &lt;/inlets&gt;
      &lt;outlets&gt;
         &lt;frac32.positive name="out" description="pattern"/&gt;
      &lt;/outlets&gt;
      &lt;displays/&gt;
      &lt;params/&gt;
      &lt;attribs&gt;
          &lt;spinner name="length" MinValue="1" MaxValue="32" DefaultValue="16"/&gt;
      &lt;/attribs&gt;
      &lt;code.declaration&gt;
          &lt;![CDATA[
            int32_t pattern[32] = {0,63,0,63,0,63,0,63,0,63,0,63,0,63,0,63,0,63,0,63,0,63,0,63,0,63,0,63,0,63,0,63};
            int counter;
            int ntrig;
            int rtrig;
          ]]&gt;
    &lt;/code.declaration&gt;
    &lt;code.init&gt;
         &lt;![CDATA[
            counter = 0;
            ntrig = 0;
            rtrig = 0;
        ]]&gt;
    &lt;/code.init&gt;
    &lt;code.krate&gt;
        &lt;![CDATA[
            if (inlet_trig&gt;0) {
                if ((counter&gt;attr_length - 1) || (inlet_r&gt;0)) {
                    counter = 0;
                } else {
                    counter++;
                }
            }
            outlet_out = pattern[counter];
        ]]&gt;
    &lt;/code.krate&gt;
    &lt;/obj.normal&gt;
&lt;/objdefs&gt;</code></pre>

<p>This appears to do absolutely nothing. I've setup a toggle object to feed the trigger inlet, and piped the outlet to a scope, and also to the Pitch inlet of a filter, but the scope shows no change when I press the button.</p>

<p>I suspect this is to do with variable types or ranges, but I can't figure it out. Could someone lend a hand?</p>

<p>Cheers,</p>

<p>a|x</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Custom Object Baby Steps'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/johannes.html'><b itemprop='author'>johannes</b></a>
           
           <time datetime='2016-03-10T00:38:24Z' itemprop='datePublished'>
             2016-03-10 00:38:24 UTC
           </time>
        </span>
        <span itemprop='position'>#5</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="3" data-topic="1237"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v2/letter/t/b9e5f3/40.png" class="avatar">toneburst:</div>
<blockquote><p>So once declared, I can only set values using pattern[index] notation, then?</p></blockquote></aside>

<p>yes<br></p>

<aside class="quote" data-post="3" data-topic="1237"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v2/letter/t/b9e5f3/40.png" class="avatar">toneburst:</div>
<blockquote><p>How can I declare a function that is run once when the object is initialised, but can also be run at any time 'in the loop'?</p></blockquote></aside>

<p>you can put the funcion in <code>&lt;code.declaration&gt;</code><br></p>

<aside class="quote" data-post="3" data-topic="1237"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v2/letter/t/b9e5f3/40.png" class="avatar">toneburst:</div>
<blockquote><p>Is there some kind of 'hook' to hang a function on when parameter changes occur, or will I have to keep the values of the controls from the last iteration of the loop, and compare to current values, to work out if they've changed?</p></blockquote></aside>

<p>currently there are only a few predefined functions to pre-scale parameters, no custom setter functions yet.</p>

<aside class="quote" data-post="3" data-topic="1237"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v2/letter/t/b9e5f3/40.png" class="avatar">toneburst:</div>
<blockquote><p>Also, are values from knobs etc. available in the init block?</p></blockquote></aside>

<p>parameters are not available, only attributes</p>

<aside class="quote" data-post="3" data-topic="1237"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v2/letter/t/b9e5f3/40.png" class="avatar">toneburst:</div>
<blockquote><p>Finally, is it possible to set min, max and step-size for object controls?</p></blockquote></aside>

<p>.<br>integer-type parameters have min/max, but always 1 for step-size<br>fractional-type parameters are continuous.</p>

<aside class="quote" data-post="4" data-topic="1237"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v2/letter/t/b9e5f3/40.png" class="avatar">toneburst:</div>
<blockquote><p>I suspect this is to do with variable types or ranges, but I can't figure it out. Could someone lend a hand?</p></blockquote></aside>

<p>The scaling is off.<br>Either change the outlet type to int32.positive, or scale the values in your array like<br><code>{0&lt;&lt;21,63&lt;&lt;21,0&lt;&lt;21,...</code></p>

<p><code>&lt;&lt;x</code> means shift <code>x</code> decimal places to the left, which is the equivalent of multiplying with 2^<code>x</code>.</p>

<p>And then you'll notice that the inlet_trig is still level-sensitive where you probably expect it to be edge-sensitive. Currently this is the responsibility of the object to detect the rising edge.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:2'>
      <meta itemprop='headline' content='Custom Object Baby Steps'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/toneburst.html'><b itemprop='author'>toneburst</b></a>
           
           <time datetime='2016-03-10T08:50:15Z' itemprop='datePublished'>
             2016-03-10 08:50:15 UTC
           </time>
        </span>
        <span itemprop='position'>#6</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="5" data-topic="1237"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/community.axoloti.com/johannes/40/8_1.html" class="avatar">johannes:</div>
<blockquote><p>he scaling is off.Either change the outlet type to int32.positive, or scale the values in your array like{0&lt;&lt;21,63&lt;&lt;21,0&lt;&lt;21,...</p></blockquote></aside>

<p>I thought it was probably to do with scaling.</p>

<p>Would you recommend outputting floating-point number (in the range -64 to 64?), or unsigned 32bit integers?</p>

<p>I'm confused by the fact that the documentation states that blue outlets should output numbers in the -64 to +64 range, but when I look at the LFO objects, they all seem to output int32.positive (which I assume to be unsigned positive integers). </p>

<p>Are outputs automatically converted to floats in the -64 to +64 range? Or is the -64 to +64 range merely a convention in the Patcher UI, and when actually outputting values from an object, we should use the 32bit fixed-point integers (seem to remember reading that you recommended that, somewhere in the forum, but can't recall where now)?</p>

<p>Sorry for the stupid questions. I have quite a lot of experience working with high-level scripting languages (mostly JavaScript and PHP, but also some GLSL), but no formal background in computer science, so I'm not used to having to deal with issues like these. I'm keen to learn though, if it means I can make cool music tools on an exciting platform like Axoloti.</p>

<p>a|x</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Custom Object Baby Steps'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/toneburst.html'><b itemprop='author'>toneburst</b></a>
           
           <time datetime='2016-03-10T09:06:07Z' itemprop='datePublished'>
             2016-03-10 09:06:07 UTC
           </time>
        </span>
        <span itemprop='position'>#7</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="5" data-topic="1237"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/community.axoloti.com/johannes/40/8_1.html" class="avatar">johannes:</div>
<blockquote><p>Either change the outlet type to int32.positive, or scale the values in your array like{0&lt;&lt;21,63&lt;&lt;21,0&lt;&lt;21,...</p></blockquote></aside>

<p>This confuses me, too, I'm afraid. <br>The '&lt;&lt;' operator is a left bit-shift, if I'm not mistaken.<br>Why shift 21 bits though? Currently I have integers in the 0 &gt; 64 range in my array. That range can be represented in 6 bits, I think. 6 + 21 = 27 bits. But, I'd be outputting a 32 bit integer, so what's happened to the other 5 bits?</p>

<p>Sorry again to keep asking stupid questions.</p>

<p>a|x</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Custom Object Baby Steps'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/toneburst.html'><b itemprop='author'>toneburst</b></a>
           
           <time datetime='2016-03-10T09:42:35Z' itemprop='datePublished'>
             2016-03-10 09:42:35 UTC
           </time>
        </span>
        <span itemprop='position'>#8</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Oh, I see in <a href="../how-to-code-axoloti-objects/663/26.html">this</a> thread that outputs are in the range -0x08000000 to 0x07FFFFFF for frac32 and 0x0 to 0x07FFFFFF for frac32.positive.</p>

<p>Do you have a list of all the possible inlet/outlet types, their ranges, and and what they're used for?</p>

<p>Just doing a multi-file search of the factory Objects directory for 'frac32', I'm seeing</p>

<p>frac32<br>frac32.vu<br>frac32.u.map<br>frac32.s.map<br>frac32.positive<br>frac32.bipolar<br>frac32buffer</p>

<p>a|x</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Custom Object Baby Steps'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/toneburst.html'><b itemprop='author'>toneburst</b></a>
           
           <time datetime='2016-03-10T18:53:22Z' itemprop='datePublished'>
             2016-03-10 18:53:22 UTC
           </time>
        </span>
        <span itemprop='position'>#9</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Is it planned that the inlet type 'bool32.rising' will eventually work such that it will go true for one k-rate cycle on every rising edge received (as the name implies)?</p>

<p>a|x</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Custom Object Baby Steps'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/johannes.html'><b itemprop='author'>johannes</b></a>
           
           <time datetime='2016-03-10T20:13:04Z' itemprop='datePublished'>
             2016-03-10 20:13:04 UTC
           </time>
        </span>
        <span itemprop='position'>#10</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="8" data-topic="1237"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v2/letter/t/b9e5f3/40.png" class="avatar">toneburst:</div>
<blockquote><p>Do you have a list of all the possible inlet/outlet types, their ranges, and and what they're used for?</p></blockquote></aside>

<p>In my todo-list <img src="../../images/emoji/emoji_one/smilea4f0.png?v=0" title=":smile:" class="emoji" alt=":smile:"></p>

<aside class="quote" data-post="9" data-topic="1237"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../letter_avatar_proxy/v2/letter/t/b9e5f3/40.png" class="avatar">toneburst:</div>
<blockquote><p>Is it planned that the inlet type 'bool32.rising' will eventually work such that it will go true for one k-rate cycle on every rising edge received (as the name implies)?</p></blockquote></aside>

<p> <br>Eventually, yes, but that will become a different inlet type to maintain compatibility.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Custom Object Baby Steps'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/toneburst.html'><b itemprop='author'>toneburst</b></a>
           
           <time datetime='2016-03-11T00:54:49Z' itemprop='datePublished'>
             2016-03-11 00:54:49 UTC
           </time>
        </span>
        <span itemprop='position'>#12</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>This seems to work.</p>

<p></p><pre><code class="lang-auto">   &lt;obj.normal id="tbnmpgen" uuid="f4aa3eb163415b6fc722e576dde754a226a022ac"&gt;
      &lt;sDescription&gt;Pseudo-random (repeatable) pattern generator. Based on Nord modular PatternGen module.&lt;/sDescription&gt;
      &lt;author&gt;toneburst&lt;/author&gt;
      &lt;license&gt;BSD&lt;/license&gt;
      &lt;inlets&gt;
         &lt;bool32.rising name="trig" description="trigger"/&gt;
         &lt;bool32.rising name="r" description="reset"/&gt;
      &lt;/inlets&gt;
      &lt;outlets&gt;
         &lt;frac32.bipolar name="out"/&gt;
      &lt;/outlets&gt;
      &lt;displays/&gt;
      &lt;params&gt;
         &lt;frac32.u.map name="bankindex" description="Bank"/&gt;
         &lt;frac32.u.map name="patternindex" description="Pattern"/&gt;
      &lt;/params&gt;
      &lt;attribs&gt;
         &lt;spinner name="length" description="Pattern Length" MinValue="0" MaxValue="128" DefaultValue="16"/&gt;
      &lt;/attribs&gt;
      &lt;code.declaration&gt;&lt;![CDATA[int32_t pattern[128] = {};
int32_t counter;
int ntrig;
int rtrig;
int32_t bindex;
int32_t pindex;
int32_t outval;
int init = 1;

int32_t rstate = 1;

// Seeded random number generator from:
// http://blog.embedded-office.com/en/blog-artikel/items/random-1.html
// (cryptographically rubbish, but should be fine for our porpoises)
int32_t updatestate() {
	int32_t a = 5;
	int32_t b = 12345;
	int32_t m = 511;
	rstate = ((rstate * a + b) % m) - 255;
	return rstate;
}

// Update pattern array
void newpattern(int32_t a, int32_t b, int len) {
	rstate = a * 64 + b;
	for(int i = 0; i &lt; len; i++) {
		pattern[i] = updatestate();
	}
}
]]&gt;&lt;/code.declaration&gt;
      &lt;code.init&gt;&lt;![CDATA[counter = 0;
ntrig = 0;
rtrig = 0;]]&gt;&lt;/code.init&gt;
      &lt;code.krate&gt;&lt;![CDATA[// Looprunning for 1st time
if (init) {
	newpattern(param_bankindex, param_patternindex, attr_length);
	init = 0;
}

// Trigger input rising edge
if ((inlet_trig&gt;0) &amp;&amp; !ntrig) {
    	// Check for changes to parameters
    	// and regenerate array if params changed
	if ((param_bankindex != bindex) || (param_patternindex != pindex)) {
		newpattern(param_bankindex, param_patternindex, attr_length);
		bindex = param_bankindex;
		pindex = param_patternindex;
	}
    // Update/reset counter
    counter = (counter&gt;attr_length)? 0 : counter + 1;
    // Set output value until next trigger
    outval = pattern[counter];
    ntrig=1;
} else if (!(inlet_trig&gt;0)) {
    ntrig=0;
}

// Reset input rising edge
if ((inlet_r&gt;0) &amp;&amp; !rtrig) {
    rtrig = 1;
    counter = 0;
} else if (!(inlet_r&gt;0)) {
    rtrig=0;
}

outlet_out = outval&lt;&lt;19;]]&gt;&lt;/code.krate&gt;
   &lt;/obj.normal&gt;
&lt;/objdefs&gt;</code></pre>

<p>Any tips on making it better gratefully received. Particularly in terms of variable types etc.. I've just ended up making everything int32_ts.. no idea if this is the best way or not...</p>

<p>a|x</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Custom Object Baby Steps'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/toneburst.html'><b itemprop='author'>toneburst</b></a>
           
           <time datetime='2016-03-11T09:17:56Z' itemprop='datePublished'>
             2016-03-11 09:17:56 UTC
           </time>
        </span>
        <span itemprop='position'>#13</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Tidied up the code a little, renamed and added descriptions for in/outlets.</p>

<p>a|x</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Custom Object Baby Steps'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/toneburst.html'><b itemprop='author'>toneburst</b></a>
           
           <time datetime='2016-03-13T20:29:05Z' itemprop='datePublished'>
             2016-03-13 20:29:05 UTC
           </time>
        </span>
        <span itemprop='position'>#14</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I'm moving this to the Axolotl Contrib library on GitHub.</p>

<p>a|x</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Custom Object Baby Steps'>
      <hr>
  </div>






    </div>
    <footer class="container">
      <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <a href='../../index.html'>Home</a>
        <a href="../../categories.html">Categories</a>
        <a href="../../guidelines.html">FAQ/Guidelines</a>
        <a href="../../tos.html">Terms of Service</a>
        <a href="../../privacy.html">Privacy Policy</a>
      </nav>
      <p>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  

<!-- Mirrored from community.axoloti.com/t/custom-object-baby-steps/1237 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 10 Jul 2023 16:05:49 GMT -->
</html>
