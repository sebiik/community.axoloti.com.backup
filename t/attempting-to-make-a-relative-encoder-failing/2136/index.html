<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Attempting to make a relative encoder, failing - Patching - Axoloti Community</title>
    <meta name="description" content="Hi All, I thought I&amp;#39;d have a go at creating an object that deals with relative rotary encoders, it doesn&amp;#39;t work  

[image] 

I&amp;#39;ve got rotary encoders on my arturia minilab, for 2 of the relative types the values are grea&amp;hellip;">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.9.0.beta3 - https://github.com/discourse/discourse version 13f3de4bf673802eb8ec595d36587b4524773209">
<link rel="icon" type="image/png" href="/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="https://sebiik.github.io/community.axoloti.com.backup/t/attempting-to-make-a-relative-encoder-failing/2136" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"http://community.axoloti.com","potentialAction":{"@type":"SearchAction","target":"http://community.axoloti.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="https://sebiik.github.io/community.axoloti.com.backup/opensearch.xml" title="Axoloti Community Search">

        <link href="/stylesheets/desktop_d93a33ca8617326fe353f80e6ab865188244d48c.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop"/>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Attempting to make a relative encoder, failing&#39;" href="https://sebiik.github.io/community.axoloti.com.backup/t/attempting-to-make-a-relative-encoder-failing/2136.rss" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://community.axoloti.com/uploads/default/optimized/2X/d/d4d6a99687a16e39c925eac66c1130c1eb935023_1_690x299.JPG" />
<meta property="og:image" content="http://community.axoloti.com/uploads/default/optimized/2X/d/d4d6a99687a16e39c925eac66c1130c1eb935023_1_690x299.JPG" />
<meta property="og:url" content="http://community.axoloti.com/t/attempting-to-make-a-relative-encoder-failing/2136" />
<meta name="twitter:url" content="http://community.axoloti.com/t/attempting-to-make-a-relative-encoder-failing/2136" />
<meta property="og:title" content="Attempting to make a relative encoder, failing" />
<meta name="twitter:title" content="Attempting to make a relative encoder, failing" />
<meta property="og:description" content="Hi All, I thought I&#39;d have a go at creating an object that deals with relative rotary encoders, it doesn&#39;t work     [image]  I&#39;ve got rotary encoders on my arturia minilab, for 2 of the relative types the values are greater or lesser than 64, either bipolar from 64, or 1/127, with acceleration it&#39;s a bit more involved than that but for the purposes of testing I can use &lt;&gt;64 for those 2 types.  I am only getting 0 or 126 on disp i_3, it doesn&#39;t count.  Am I doing something wrong?" />
<meta name="twitter:description" content="Hi All, I thought I&#39;d have a go at creating an object that deals with relative rotary encoders, it doesn&#39;t work     [image]  I&#39;ve got rotary encoders on my arturia minilab, for 2 of the relative types the values are greater or lesser than 64, either bipolar from 64, or 1/127, with acceleration it&#39;s a bit more involved than that but for the purposes of testing I can use &lt;&gt;64 for those 2 types.  I am only getting 0 or 126 on disp i_3, it doesn&#39;t count.  Am I doing something wrong?" />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="2 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="2 ❤" />


  </head>
  <body class="crawler">
    
    <header>
      <a href="/"><img src="/uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo" style="max-width: 150px;"></a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1>
  <a href="/t/attempting-to-make-a-relative-encoder-failing/2136">Attempting to make a relative encoder, failing</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="/c/patching" itemprop="url">
        <span itemprop="title">Patching</span>
      </a>
    </div>
</div>





<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/Reggie'><b itemprop='author'>Reggie</b></a>
           
           <time datetime='2016-08-20T22:06:07Z' itemprop='datePublished'>
             2016-08-20 22:06:07 UTC
           </time>
        </span>
        <span itemprop='position'>#1</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hi All, I thought I'd have a go at creating an object that deals with relative rotary encoders, it doesn't work </p>

<p><div class="lightbox-wrapper"><a data-download-href="//community.axoloti.com/uploads/default/d4d6a99687a16e39c925eac66c1130c1eb935023" href="//community.axoloti.com/uploads/default/original/2X/d/d4d6a99687a16e39c925eac66c1130c1eb935023.JPG" class="lightbox" title="rotary.JPG"><img src="//community.axoloti.com/uploads/default/optimized/2X/d/d4d6a99687a16e39c925eac66c1130c1eb935023_1_690x299.JPG" width="690" height="299"><div class="meta">
<span class="filename">rotary.JPG</span><span class="informations">735x319 14.6 KB</span><span class="expand"></span>
</div></a></div></p>

<p>I've got rotary encoders on my arturia minilab, for 2 of the relative types the values are greater or lesser than 64, either bipolar from 64, or 1/127, with acceleration it's a bit more involved than that but for the purposes of testing I can use &lt;&gt;64 for those 2 types.  I am only getting 0 or 126 on disp i_3, it doesn't count.  Am I doing something wrong?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Attempting to make a relative encoder, failing'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/thetechnobear'><b itemprop='author'>thetechnobear</b></a>
           
           <time datetime='2016-08-21T08:57:22Z' itemprop='datePublished'>
             2016-08-21 08:57:22 UTC
           </time>
        </span>
        <span itemprop='position'>#2</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>That would only work if your controller updates at around k-rate (3000/sec) , it's probably much slower than that.  </p>

<p>You need to basically be doing something like 64 - X</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Attempting to make a relative encoder, failing'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/Reggie'><b itemprop='author'>Reggie</b></a>
           
           <time datetime='2016-08-21T11:32:02Z' itemprop='datePublished'>
             2016-08-21 11:32:02 UTC
           </time>
        </span>
        <span itemprop='position'>#3</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p><a class="mention" href="/users/thetechnobear">@thetechnobear</a> I decided last night that this really wasn't the best way to handle relative values from rotary encoders.</p>

<p>I had a look at the midi/in/cc i object and created my own versions that deal with the 3 different relative encoder types on my arturia, the 3 types are all accelerated so they deal with 2 ranges of values in each direction for increment/decrement.  the left hand value for inc/dec is the un-accelerated value you would expect for each type, so  63/65, 1/127, 15/17.</p>

<ol>
<li><p>63-1/65-127</p></li>
<li><p>1-63/127-65</p></li>
<li><p>15-0/17-32</p></li>
</ol>

<p>Now that I can decode relative data types we should be able to control pretty much anything with a rotary encoder, obviously I need to write the objects to cope but I envisage a rotary encoder object where you set a min and a max value, and a resolution for the data type you want to control, attach it to the object you want to control and start twisting <img src="/images/emoji/emoji_one/smile.png?v=2" title=":smile:" class="emoji" alt=":smile:"></p>

<p>I'm not sure if a cc i style object is the right way to do this but I decided to make them anyway, they're very simple objects and the code can be adapted to suit.</p>

<p>I will post the objects later on once I've finished testing them.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Attempting to make a relative encoder, failing'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/thetechnobear'><b itemprop='author'>thetechnobear</b></a>
           
           <time datetime='2016-08-21T14:52:03Z' itemprop='datePublished'>
             2016-08-21 14:52:03 UTC
           </time>
        </span>
        <span itemprop='position'>#4</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>this is what I did with the Push <img src="/images/emoji/emoji_one/slight_smile.png?v=2" title=":slight_smile:" class="emoji" alt=":slight_smile:"> <br>the push uses something called... 2's complement encoding.  I suspect this is what (2) is.</p>

<p>yes, there are various different relative encodings, in fact Ableton offers support for 8 different variations <img src="/images/emoji/emoji_one/wink.png?v=2" title=":wink:" class="emoji" alt=":wink:"> </p>

<p>Im rather surprised Arturia are using different encodings, Id have thought for one controller, one encoding is enough (the Push only uses 1)...  with relative encoding it doesn't matter if a value is bipolar or unipolar, as you are sending changes.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Attempting to make a relative encoder, failing'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/Reggie'><b itemprop='author'>Reggie</b></a>
           
           <time datetime='2016-08-21T16:12:45Z' itemprop='datePublished'>
             2016-08-21 16:12:45 UTC
           </time>
        </span>
        <span itemprop='position'>#5</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I tried to find what had been done with encoders in the push code but couldn't find anything immediately apparent, I appear to suck at searching the code and forums.</p>

<p>I believe they use different types of encoding simply because not all software solutions for rotary encoders are created equal, like you've said, ableton has got 8, presonus studio one has got a few (but they're not documented so you have to guess/reverse engineer their solution!!), traktor has got a few as well.</p>

<p>Now I've got the arturia covered, I'm going to look at what I need to do for my behringer and numark midi DJ controllers, tons of buttons, pots, faders and encoders, along with a bunch of midi addressable LEDs, this will give me enough controls for pretty much any synth/module/effect.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Attempting to make a relative encoder, failing'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/Reggie'><b itemprop='author'>Reggie</b></a>
           
           <time datetime='2016-08-22T00:50:42Z' itemprop='datePublished'>
             2016-08-22 00:50:42 UTC
           </time>
        </span>
        <span itemprop='position'>#6</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p><a class="mention" href="/users/thetechnobear">@thetechnobear</a> I'm getting a nagging feeling that creating objects to do this isn't the right way, it seems to me that it would be better to do it universally via the CC assignment in the gui?</p>

<p>I don't know java at all, but I think this function <a href="https://github.com/axoloti/axoloti/blob/master/src/main/java/axoloti/parameters/ParameterInstance.java#L375" rel="nofollow">GenerateMidiCCCodeSub</a> Is  one of the functions I'd need to look at editing?  </p>

<p>I also need to add a way for the user to choose the type of incoming CC data, Absolute, or XX relative types.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Attempting to make a relative encoder, failing'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/johannes'><b itemprop='author'>johannes</b></a>
           
           <time datetime='2016-08-22T11:43:11Z' itemprop='datePublished'>
             2016-08-22 11:43:11 UTC
           </time>
        </span>
        <span itemprop='position'>#7</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I think a custom object is the right way. Doing it in GUI code complicates future efforts to implement live-midi-mapping.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Attempting to make a relative encoder, failing'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/Reggie'><b itemprop='author'>Reggie</b></a>
           
           <time datetime='2016-08-22T13:13:07Z' itemprop='datePublished'>
             2016-08-22 13:13:07 UTC
           </time>
        </span>
        <span itemprop='position'>#8</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>It shouldn't be anymore complicated than a switch/case and appropriate controls/logic but even that's beyond me at the moment as I'm not familiar enough with axoloti to attempt this <img src="/images/emoji/emoji_one/wink.png?v=2" title=":wink:" class="emoji" alt=":wink:"></p>

<p>I would still like to attempt this for myself at some point in the future, I hear what you're saying <a class="mention" href="/users/johannes">@johannes</a> so anything I attempt would be purely for my own satisfaction and not to challenge you <img src="/images/emoji/emoji_one/slight_smile.png?v=2" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Attempting to make a relative encoder, failing'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/thetechnobear'><b itemprop='author'>thetechnobear</b></a>
           
           <time datetime='2016-08-22T20:33:36Z' itemprop='datePublished'>
             2016-08-22 20:33:36 UTC
           </time>
        </span>
        <span itemprop='position'>#9</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>There are a few ways to do this kind of midi mapping....</p>

<p>the obvious ones are the UI mapping, and the midi/in/cc objects. the later you could create a custom variant off for relative encodes.. the former would as you noted, need an Axoloti UI release.</p>

<p>BUT there is another way worth considering, and that is using mod sources.. (and again you could create a variant). the nice thing about these is, they are kind of 'detached' a little from the patch.</p>

<p>I was thinking the other day, of perhaps creating a small mod source patch bay i could throw into each of my patches, they was on predefined CCs , so then in the patch all I do is then assign relevant controls to the mod source.</p>

<p><a class="mention" href="/users/johannes">@johannes</a>, we might want to add to the object editor a 'provides modulation source' checkbox, so we can have custom ones.... I also see a slight limitation here, in that a user might one to create have an object create multiple mod sources.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Attempting to make a relative encoder, failing'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/Reggie'><b itemprop='author'>Reggie</b></a>
           
           <time datetime='2016-08-22T22:41:18Z' itemprop='datePublished'>
             2016-08-22 22:41:18 UTC
           </time>
        </span>
        <span itemprop='position'>#10</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>The patchbay is an interesting idea <a class="mention" href="/users/thetechnobear">@thetechnobear</a> I was thinking along those lines myself, but hadn't really come up with much of a way to implement it other than making a specific object.  What are modulation sources?  I had a look at the mod source cc object but I'm not sure if I understand exactly what it does?  </p>

<p>The ui feels like an intuitive place to be able to assign CC encoders, I'd also like to be able to assign note on and/or off for switches, toggles and radio buttons.</p>

<p>I do appreciate that it will add complexity but then again, adding anything to the mapping system will increase complexity but it will also end up enhancing what I believe is a very very powerful midi system, there is a lot of potential here.</p>

<p>I want to be able to plug in any of my midi gear and know that it will be easy to use, the beauty of the axoloti is that we can write the code for anything that is missing.</p>

<p>btw. I had a look at 2s complement but I couldn't see how to use it for a 7bit value, unless I add 128 to values &gt; 64?</p>

<p>Lastly, I was wondering how the midi system is connected and whether it's possible to just intercept the incoming CC messages before it goes anywhere, manipulate the data and then inject it back into the internal system, that way it would be possible to assign CCs via the ui without actually having to change the ui code?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Attempting to make a relative encoder, failing'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='/u/midinerd'><b itemprop='author'>midinerd</b></a>
           
           <time datetime='2020-01-16T13:53:21Z' itemprop='datePublished'>
             2020-01-16 13:53:21 UTC
           </time>
        </span>
        <span itemprop='position'>#11</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Without reading this whole thread (sorry) here's a simple recipe for absolute-&gt;relative encoding:</p>

<p>input value -&gt; sample/hold the value -&gt; subtract the held value from the next input value -&gt; divide this result by the absolute value of itself.  you will get a signed 1 as a result (-1 or 1).  cheers!</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Attempting to make a relative encoder, failing'>
      <hr>
  </div>






    </div>
    <footer class="container">
      <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <a href='/'>Home</a>
        <a href="/categories">Categories</a>
        <a href="/guidelines">FAQ/Guidelines</a>
        <a href="/tos">Terms of Service</a>
        <a href="/privacy">Privacy Policy</a>
      </nav>
      <p>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
