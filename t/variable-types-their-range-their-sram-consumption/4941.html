<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from community.axoloti.com/t/variable-types-their-range-their-sram-consumption/4941 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 10 Jul 2023 16:03:47 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Variable types, their range &amp; their SRAM consumption - AxoObject coding - Axoloti Community</title>
    <meta name="description" content="This is probably a stupid question, but since people here are so nice... 

I am trying to squeeze the last bit of SRAM out of my axo. I suppose that choosing variables with as few bits as possible would be one way of doi&amp;hellip;">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.9.0.beta3 - https://github.com/discourse/discourse version 13f3de4bf673802eb8ec595d36587b4524773209">
<link rel="icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="4941.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://sebiik.github.io/community.axoloti.com.backup","potentialAction":{"@type":"SearchAction","target":"https://sebiik.github.io/community.axoloti.com.backup/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Axoloti Community Search">

        <link href="../../stylesheets/desktop_d93a33ca8617326fe353f80e6ab865188244d48c8e0b.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop"/>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','../../../www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Variable types, their range &amp; their SRAM consumption&#39;" href="4941.rss" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://sebiik.github.io/community.axoloti.com.backup/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:image" content="https://sebiik.github.io/community.axoloti.com.backup/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:url" content="https://sebiik.github.io/community.axoloti.com.backup/t/variable-types-their-range-their-sram-consumption/4941" />
<meta name="twitter:url" content="https://sebiik.github.io/community.axoloti.com.backup/t/variable-types-their-range-their-sram-consumption/4941" />
<meta property="og:title" content="Variable types, their range &amp; their SRAM consumption" />
<meta name="twitter:title" content="Variable types, their range &amp; their SRAM consumption" />
<meta property="og:description" content="This is probably a stupid question, but since people here are so nice...   I am trying to squeeze the last bit of SRAM out of my axo. I suppose that choosing variables with as few bits as possible would be one way of doing that. But i noticed that e.g. switching from an &quot;int&quot; variable to an &quot;int8_t&quot; variable uses more SRAM than the other way around.   So if someone were kind enough to take the time and explain to me what the different int (and similar) variable types are ---int, int8_t, int16, u..." />
<meta name="twitter:description" content="This is probably a stupid question, but since people here are so nice...   I am trying to squeeze the last bit of SRAM out of my axo. I suppose that choosing variables with as few bits as possible would be one way of doing that. But i noticed that e.g. switching from an &quot;int&quot; variable to an &quot;int8_t&quot; variable uses more SRAM than the other way around.   So if someone were kind enough to take the time and explain to me what the different int (and similar) variable types are ---int, int8_t, int16, u..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins ðŸ•‘" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="1 â¤" />


  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html"><img src="../../uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo" style="max-width: 150px;"></a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1>
  <a href="4941.html">Variable types, their range &amp; their SRAM consumption</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/axoobject-code.html" itemprop="url">
        <span itemprop="title">AxoObject coding</span>
      </a>
    </div>
</div>





<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/Captain_Burek.html'><b itemprop='author'>Captain_Burek</b></a>
           
           <time datetime='2018-09-05T10:12:16Z' itemprop='datePublished'>
             2018-09-05 10:12:16 UTC
           </time>
        </span>
        <span itemprop='position'>#1</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>This is probably a stupid question, but since people here are so nice...</p>

<p>I am trying to squeeze the last bit of SRAM out of my axo. I suppose that choosing variables with as few bits as possible would be one way of doing that. But i noticed that e.g. switching from an "int" variable to an "int8_t" variable uses <em>more</em> SRAM than the other way around.</p>

<p>So if someone were kind enough to take the time and explain to me what the different int (and similar) variable types are ---int, int8_t, int16, uint and what have you--- and how they differ in terms of range and SRAM usage, that'd be sooo appreciated!</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Variable types, their range &amp; their SRAM consumption'>
      <hr>
            <a href="../the-position-of-an-object-effects-the-amount-of-sram-it-uses/5814/6.html">The position of an object effects the amount of SRAM it uses?</a>
            <hr>
            <a href="../how-to-improve-performance-of-objects-and-patches/4997/2.html">How to improve performance of objects and patches</a>
            <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/thetechnobear.html'><b itemprop='author'>thetechnobear</b></a>
           
           <time datetime='2018-09-05T18:39:33Z' itemprop='datePublished'>
             2018-09-05 18:39:33 UTC
           </time>
        </span>
        <span itemprop='position'>#2</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>hmm,  interesting question, and one id need to play with to give a good answer .. but some thoughts to give you something to look into...</p>

<p>I think the M4, being 32bit, uses 4 byte aligned data , <br>so by default, I think unpacked data , like an int8 would effectively use 32 bit anyway. (1 byte data, 3 byte pad, and perhaps also a performance penalty for conversion <img src="../../images/emoji/twitter/frowningae52.png?v=5" title=":frowning:" class="emoji" alt=":frowning:"> </p>

<p>however, I think you can use packed structures to stop this(!?)</p>

<p>but Id need to check this, the best way to do this would be to check with structs, and do a sizeof.<br>( a simple type, wont tell you about memory wasted due to alignment)</p>

<p>anyway hopefully this gives you a few keywords to do a bit of research, as I don't have time at the moment.</p>

<p>(but also do check, that your quest for more ram, doesn't come at a cpu performance hit that's unacceptable for your need - this stuff is aligned by default for a reason <img src="../../images/emoji/twitter/winkae52.png?v=5" title=":wink:" class="emoji" alt=":wink:"> )</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Variable types, their range &amp; their SRAM consumption'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/deadsy.html'><b itemprop='author'>deadsy</b></a>
           
           <time datetime='2018-09-05T23:46:59Z' itemprop='datePublished'>
             2018-09-05 23:46:59 UTC
           </time>
        </span>
        <span itemprop='position'>#3</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Misaligned accesses (ie accessing a N bit variable on something other than a N bit memory boundary) tend to be either prohibited or slow, so compilers avoid generating them. As a consequence data structures are not packed- and if you don't arrange things efficiently the compiler will generate data structures with holes.</p>

<p>E.g.</p>

<p>BAD<br>struct {<br>a uint32_t,<br>b uint8_t,<br>c uint32_t,<br>d uint8_t,<br>e uint32_t,<br>}</p>

<p>GOOD:<br>struct {<br>a uint32_t,<br>c uint32_t,<br>e uint32_t,<br>b uint8_t,<br>d uint8_t,<br>}</p>

<p>The latter case uses less RAM for the same data. So that's one thing to watch out for. Use sizeof() to check.</p>

<p>Also - Compilers generally generate the most concise code when dealing with variables that match the natural word size of the CPU- so use something that makes life easy for the compiler.</p>

<p>BAD:<br>unsigned char i;<br>for (i = 0; i &lt; 100; i ++) {<br>// blah<br>}</p>

<p>GOOD:<br>int i;<br>for (i = 0; i &lt; 100; i ++) {<br>// blah<br>}</p>

<p>i is a stack variable - and is probably going to have the same stack usage in either case.<br>The code may be smaller (.text) because it's all 32 bit ops. ARM does have 8/16/32 bit ops,<br>so may do an ok job with this - but the point is that picking a local variable that is smaller in<br>size is really a no-op as far as data and code size go.</p>

<p>int<br>signed integer - size is compiler dependent, 32 bits on the ARM cortex M4<br>int8_t,int16_t,int32_t<br>These are also signed integers, but the size is explicit.</p>

<p>min_value = -(1 &lt;&lt; (n - 1))<br>max_value = (1 &lt;&lt; (n-1)) - 1<br>where n is the size in bits.</p>

<p>e.g. in python</p>

<blockquote><blockquote><blockquote><p>n = 8<br>min_value = -(1 &lt;&lt; (n - 1))<br>print min_value<br>-128<br>max_value = (1 &lt;&lt; (n-1)) - 1<br>print max_value<br>127</p></blockquote></blockquote></blockquote>

<p>BTW - if you really want to save RAM you should look at the *.map file and see where it's being used.<br>That'll tell you where you need to focus your efforts.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='Variable types, their range &amp; their SRAM consumption'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/Captain_Burek.html'><b itemprop='author'>Captain_Burek</b></a>
           
           <time datetime='2018-09-06T00:46:08Z' itemprop='datePublished'>
             2018-09-06 00:46:08 UTC
           </time>
        </span>
        <span itemprop='position'>#4</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Thanks, guys! Between your two answers, i'm beginning to see the light. I think .map file reading is beyond me, but variable sorting i can do (-:</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Variable types, their range &amp; their SRAM consumption'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/SirSickSik.html'><b itemprop='author'>SirSickSik</b></a>
           
           <time datetime='2019-06-25T00:41:13Z' itemprop='datePublished'>
             2019-06-25 00:41:13 UTC
           </time>
        </span>
        <span itemprop='position'>#5</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>[quote/]<br>E.g.</p>

<p>BAD<br>struct {<br>a uint32_t,<br>b uint8_t,<br>c uint32_t,<br>d uint8_t,<br>e uint32_t,<br>}</p>

<p>GOOD:<br>struct {<br>a uint32_t,<br>c uint32_t,<br>e uint32_t,<br>b uint8_t,<br>d uint8_t,<br>}</p>

<p>[/quote]</p>

<p>aha ok... this should save up some mem in quite some of my modules..</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='Variable types, their range &amp; their SRAM consumption'>
      <hr>
  </div>






    </div>
    <footer class="container">
      <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <a href='../../index.html'>Home</a>
        <a href="../../categories.html">Categories</a>
        <a href="../../guidelines.html">FAQ/Guidelines</a>
        <a href="../../tos.html">Terms of Service</a>
        <a href="../../privacy.html">Privacy Policy</a>
      </nav>
      <p>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  

<!-- Mirrored from community.axoloti.com/t/variable-types-their-range-their-sram-consumption/4941 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 10 Jul 2023 16:03:47 GMT -->
</html>
