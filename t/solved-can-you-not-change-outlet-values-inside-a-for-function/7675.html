<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from community.axoloti.com/t/solved-can-you-not-change-outlet-values-inside-a-for-function/7675 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 19 Jul 2023 03:03:14 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>[SOLVED]Can you not change outlet values inside a FOR function? - AxoObject coding - Axoloti Community</title>
    <meta name="description" content="Hello, I´ve been coding some objects lately and after a fair amount of sweating I´ve come to the conclusion that you can´t change the value of an outlet inside a FOR function. Is this right? What I´m doing is an object f&amp;hellip;">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.9.0.beta3 - https://github.com/discourse/discourse version 13f3de4bf673802eb8ec595d36587b4524773209">
<link rel="icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="7675.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"http://community.axoloti.com","potentialAction":{"@type":"SearchAction","target":"http://community.axoloti.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Axoloti Community Search">

        <link href="../../stylesheets/desktop_d93a33ca8617326fe353f80e6ab865188244d48c8e0b.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop"/>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','../../../www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;[SOLVED]Can you not change outlet values inside a FOR function?&#39;" href="7675.rss" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:url" content="http://community.axoloti.com/t/solved-can-you-not-change-outlet-values-inside-a-for-function/7675" />
<meta name="twitter:url" content="http://community.axoloti.com/t/solved-can-you-not-change-outlet-values-inside-a-for-function/7675" />
<meta property="og:title" content="[SOLVED]Can you not change outlet values inside a FOR function?" />
<meta name="twitter:title" content="[SOLVED]Can you not change outlet values inside a FOR function?" />
<meta property="og:description" content="Hello, I´ve been coding some objects lately and after a fair amount of sweating I´ve come to the conclusion that you can´t change the value of an outlet inside a FOR function. Is this right? What I´m doing is an object for controlling the leds of a nanokontrol 2. I´ve got 30 bool inlets (one for each button) and four outlets connected to a midi/out/cc any object: -Value (frac32.positive) -CC (int32.positive) -Channel (int32.positive) -Trigger (bool32) In the K-Rate code section I write all the i..." />
<meta name="twitter:description" content="Hello, I´ve been coding some objects lately and after a fair amount of sweating I´ve come to the conclusion that you can´t change the value of an outlet inside a FOR function. Is this right? What I´m doing is an object for controlling the leds of a nanokontrol 2. I´ve got 30 bool inlets (one for each button) and four outlets connected to a midi/out/cc any object: -Value (frac32.positive) -CC (int32.positive) -Channel (int32.positive) -Trigger (bool32) In the K-Rate code section I write all the i..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="3 ❤" />


  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html"><img src="../../uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo" style="max-width: 150px;"></a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1>
  <a href="7675.html">[SOLVED]Can you not change outlet values inside a FOR function?</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/axoobject-code.html" itemprop="url">
        <span itemprop="title">AxoObject coding</span>
      </a>
    </div>
</div>





<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/TTotelka.html'><b itemprop='author'>TTotelka</b></a>
           
           <time datetime='2022-04-06T15:52:55Z' itemprop='datePublished'>
             2022-04-06 15:52:55 UTC
           </time>
        </span>
        <span itemprop='position'>#1</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Hello,<br>I´ve been coding some objects lately and after a fair amount of sweating I´ve come to the conclusion that you can´t change the value of an outlet inside a FOR function. Is this right?<br>What I´m doing is an object for controlling the leds of a nanokontrol 2.<br>I´ve got 30 bool inlets (one for each button) and four outlets connected to a midi/out/cc any object:<br>-Value (frac32.positive)<br>-CC (int32.positive)<br>-Channel (int32.positive)<br>-Trigger (bool32)<br>In the K-Rate code section I write all the inlet states into an array, and then I use a FOR function for comparing these values with another array with old values. If they have changed the outlets are supposed to change to the corresponding value, cc, channel and send a trigger to let the midi/out/cc any object know it should send a cc message.<br>It should be pretty straight forward, but it doesn´t work. It seems that I have to have another array for storing if any inlet has changed, and then concatenate 30 IFs for sending messages if there has been any change in the inputs.<br>This seems to work, but it feels like very sloppy programming. <br>So, is this right, or am I doing something wrong and it should work inside the FOR function?</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='[SOLVED]Can you not change outlet values inside a FOR function?'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/TTotelka.html'><b itemprop='author'>TTotelka</b></a>
           
           <time datetime='2022-04-06T16:05:20Z' itemprop='datePublished'>
             2022-04-06 16:05:20 UTC
           </time>
        </span>
        <span itemprop='position'>#2</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>This was my original code. It did work just fine, but then making another object that simultaneously toggles one boolean output on and another boolean output off I realised that this code can´t deal with simultaneous changes:</p>

<blockquote>
<p>states[0] = inlet_S1;<br>states[1] = inlet_S2;<br>states[2] = inlet_S3;<br>states[3] = inlet_S4;<br>states[4] = inlet_S5;<br>states[5] = inlet_S6;<br>states[6] = inlet_S7;<br>states[7] = inlet_S8;<br>states[8] = inlet_M1;<br>states[9] = inlet_M2;<br>states[10] = inlet_M3;<br>states[11] = inlet_M4;<br>states[12] = inlet_M5;<br>states[13] = inlet_M6;<br>states[14] = inlet_M7;<br>states[15] = inlet_M8;<br>states[16] = inlet_R1;<br>states[17] = inlet_R2;<br>states[18] = inlet_R3;<br>states[19] = inlet_R4;<br>states[20] = inlet_R5;<br>states[21] = inlet_R6;<br>states[22] = inlet_R7;<br>states[23] = inlet_R8;<br>states[24] = inlet_REW;<br>states[25] = inlet_FF;<br>states[26] = inlet_STOP;<br>states[27] = inlet_PLAY;<br>states[28] = inlet_REC;<br>states[29] = inlet_CYCLE;	</p>
<p>for (int i=0; i&lt;30; i++){<br>	if (states[i] != prevstates[i]){<br>		value = states[i]*0x7FFFFFFF;<br>		cc = i+37;<br>		channel = attr_MidiChannel;<br>		trig = 1;<br>		prevstates[i] = states[i];<br>	}<br>}</p>
<p>outlet_Value = value;<br>outlet_CC = cc;<br>outlet_Channel = channel;<br>outlet_Trigger = trig;</p>
<p>trig = 0;</p>
</blockquote>

<p>Then I tried doing this:</p>

<blockquote>
<p>for (int i=0; i&lt;30; i++){<br>if (states[i] != prevstates[i]){<br>change[i] = 1;<br>prevstates[i] = states[i];<br>}</p>
<p>for (int i=0; i&lt;30; i++){<br>if (change[i]){<br>outlet_Value = states[i]*0x7FFFFFFF;<br>outlet_CC = i+37;<br>outlet_Channel = attr_MidiChannel;<br>outlet_Trigger = 1;<br>}<br>outlet_Trigger = 0;<br>}</p>
</blockquote>

<p>But then it doesn´t send anything anymore</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='[SOLVED]Can you not change outlet values inside a FOR function?'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/TTotelka.html'><b itemprop='author'>TTotelka</b></a>
           
           <time datetime='2022-04-07T08:34:27Z' itemprop='datePublished'>
             2022-04-07 08:34:27 UTC
           </time>
        </span>
        <span itemprop='position'>#3</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Ok I finally got it.<br>Instead of having outlets for sending to a midi/out/cc any object I inserted the midi sending code into my object, and now it works flawlessly, even when receiving simultaneous toggles.</p>

<blockquote>
<p>states[0] = inlet_S1;<br>states[1] = inlet_S2;<br>states[2] = inlet_S3;<br>states[3] = inlet_S4;<br>states[4] = inlet_S5;<br>states[5] = inlet_S6;<br>states[6] = inlet_S7;<br>states[7] = inlet_S8;<br>states[8] = inlet_M1;<br>states[9] = inlet_M2;<br>states[10] = inlet_M3;<br>states[11] = inlet_M4;<br>states[12] = inlet_M5;<br>states[13] = inlet_M6;<br>states[14] = inlet_M7;<br>states[15] = inlet_M8;<br>states[16] = inlet_R1;<br>states[17] = inlet_R2;<br>states[18] = inlet_R3;<br>states[19] = inlet_R4;<br>states[20] = inlet_R5;<br>states[21] = inlet_R6;<br>states[22] = inlet_R7;<br>states[23] = inlet_R8;<br>states[24] = inlet_REW;<br>states[25] = inlet_FF;<br>states[26] = inlet_STOP;<br>states[27] = inlet_PLAY;<br>states[28] = inlet_REC;<br>states[29] = inlet_CYCLE;	</p>
<p>for (int i=0; i&lt;30; i++){<br>	if (states[i] != prevstates[i]){<br>		MidiSend3((midi_device_t) attr_device, MIDI_CONTROL_CHANGE + (channel-1), (i+37), __USAT((states[i]*0x07FFFFFF)&gt;&gt;20,7));		<br>		prevstates[i] = states[i];<br>	}<br>}</p>
</blockquote>

<p>holy christ the feeling of relief you get when you solve a problem you´ve been fighting for days...</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='[SOLVED]Can you not change outlet values inside a FOR function?'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/MattilynMattroe.html'><b itemprop='author'>MattilynMattroe</b></a>
           
           <time datetime='2022-04-07T18:23:42Z' itemprop='datePublished'>
             2022-04-07 18:23:42 UTC
           </time>
        </span>
        <span itemprop='position'>#4</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>I know the feeling well!  Glad you got it sorted.</p>

<p>To kind of answer your questions (I'm no code expert):</p>

<p>No, the outlets won't work in a loop like that, you'd end up with the last calculated values at the end of the loop. But when you put the midi code in, it's sending each message to the midi output buffer,  so they all get queued up and sent out. </p>

<p>You could also use this for the controller input - recieve the midi and store it in an array. </p>

<p>For this kind of stuff (controllers/buttons/leds) check out rbrts midi table store and table send,. Using the table for the array is useful because you can save them to the sd card for templates or whatever.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='[SOLVED]Can you not change outlet values inside a FOR function?'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/TTotelka.html'><b itemprop='author'>TTotelka</b></a>
           
           <time datetime='2022-04-08T08:21:59Z' itemprop='datePublished'>
             2022-04-08 08:21:59 UTC
           </time>
        </span>
        <span itemprop='position'>#5</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>That was what was happening. When receiving simultaneous changes only the last one got sent.<br>I´ll check out rbrts objects, even though I´m pretty happy with mine right now, it does exactly what I want <img src="../../images/emoji/twitter/slight_smileae52.png?v=5" title=":slight_smile:" class="emoji" alt=":slight_smile:"><br>Thanks!!!</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='[SOLVED]Can you not change outlet values inside a FOR function?'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/ricard.html'><b itemprop='author'>ricard</b></a>
           
           <time datetime='2022-04-18T21:55:50Z' itemprop='datePublished'>
             2022-04-18 21:55:50 UTC
           </time>
        </span>
        <span itemprop='position'>#6</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>Another alternative is to code the loop so that once it finds one state change, it outputs that CC value, saves its current state (i.e. the i variable), and exits, thus continuing at the next k-rate interval. You won't be able to grab more than one state change per k-rate interval, but on the other hand, with the k-rate being 3 kHz, and consequently the k-rate interval being 1/3000 = 333 µs, you're not going to loose much, since it takes 320 µs to send a MIDI byte anyway (at least over DIN MIDI).</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='[SOLVED]Can you not change outlet values inside a FOR function?'>
      <hr>
  </div>






    </div>
    <footer class="container">
      <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <a href='../../index.html'>Home</a>
        <a href="../../categories.html">Categories</a>
        <a href="../../guidelines.html">FAQ/Guidelines</a>
        <a href="../../tos.html">Terms of Service</a>
        <a href="../../privacy.html">Privacy Policy</a>
      </nav>
      <p>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  

<!-- Mirrored from community.axoloti.com/t/solved-can-you-not-change-outlet-values-inside-a-for-function/7675 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 19 Jul 2023 03:03:15 GMT -->
</html>
