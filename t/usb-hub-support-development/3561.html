<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from community.axoloti.com/t/usb-hub-support-development/3561 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 10 Jul 2023 16:03:37 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>USB Hub support development - Developer - Axoloti Community</title>
    <meta name="description" content="Axoloti user community">
    <meta name="author" content="">
<meta name="generator" content="Discourse 1.9.0.beta3 - https://github.com/discourse/discourse version 13f3de4bf673802eb8ec595d36587b4524773209">
<link rel="icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<link rel="icon" sizes="144x144" href="../../uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
<link rel="canonical" href="3561.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"http://community.axoloti.com","potentialAction":{"@type":"SearchAction","target":"http://community.axoloti.com/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="Axoloti Community Search">

        <link href="../../stylesheets/desktop_d93a33ca8617326fe353f80e6ab865188244d48c8e0b.css?__ws=community.axoloti.com" media="all" rel="stylesheet" data-target="desktop"/>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','../../../www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56017691-4', {"cookieDomain":"auto"});
</script>

      <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;USB Hub support development&#39;" href="3561.rss" />
  <meta property="og:site_name" content="Axoloti Community" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:image" content="http://community.axoloti.com/uploads/default/original/1X/ffed196003990f0e5c2a0f8227fc977345cd68be.png" />
<meta property="og:url" content="http://community.axoloti.com/t/usb-hub-support-development/3561" />
<meta name="twitter:url" content="http://community.axoloti.com/t/usb-hub-support-development/3561" />
<meta property="og:title" content="USB Hub support development" />
<meta name="twitter:title" content="USB Hub support development" />
<meta property="og:description" content="That would mean that we could connect multiple MIDI USB devices to an Axoloti ? 🤪" />
<meta name="twitter:description" content="That would mean that we could connect multiple MIDI USB devices to an Axoloti ? 🤪" />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="3 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="7 ❤" />


  </head>
  <body class="crawler">
    
    <header>
      <a href="../../index.html"><img src="../../uploads/default/original/1X/b22e6e9ef608f1e17a1de19b733d043beff77f05.png" alt="Axoloti Community" id="site-logo" style="max-width: 150px;"></a>
    </header>
    <div id="main-outlet" class="wrap">
      <h1>
  <a href="3561.html">USB Hub support development</a>
</h1>

<div id='breadcrumbs'>
    <div id="breadcrumb-0" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"
>
      <a href="../../c/developer.html" itemprop="url">
        <span itemprop="title">Developer</span>
      </a>
    </div>
</div>





<hr>


  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/SmashedTransistors.html'><b itemprop='author'>SmashedTransistors</b></a>
           
           <time datetime='2017-07-31T08:34:52Z' itemprop='datePublished'>
             2017-07-31 08:34:52 UTC
           </time>
        </span>
        <span itemprop='position'>#1</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="5" data-topic="3558"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/community.axoloti.com/johannes/40/8_1.html" class="avatar">johannes:</div>
<blockquote><p>the ChibiOS USB host community driver supports USB hubs.</p></blockquote></aside>

<p>That would mean that we could connect multiple MIDI USB devices to an Axoloti ? <img src="../../images/emoji/twitter/crazy_faceae52.png?v=5" title=":crazy_face:" class="emoji" alt=":crazy_face:"></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='USB Hub support development'>
      <hr>
            <a href="../usb-devices-3d-space-mouse/3558/6.html">USB Devices / 3D space mouse</a>
            <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/johannes.html'><b itemprop='author'>johannes</b></a>
           
           <time datetime='2017-07-31T10:02:25Z' itemprop='datePublished'>
             2017-07-31 10:02:25 UTC
           </time>
        </span>
        <span itemprop='position'>#2</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="6" data-topic="3558"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/community.axoloti.com/smashedtransistors/40/3147_1.html" class="avatar">SmashedTransistors:</div>
<blockquote><p>That would mean that we could connect multiple MIDI USB devices to an Axoloti ?</p></blockquote></aside>

<p>If that works out, yes. The flood of NAK events has been addressed in the meantime, and the first test with a hub, one HID and one MIDI device seems to work, so it looks promising.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:6'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='USB Hub support development'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/thetechnobear.html'><b itemprop='author'>thetechnobear</b></a>
           
           <time datetime='2017-07-31T13:00:42Z' itemprop='datePublished'>
             2017-07-31 13:00:42 UTC
           </time>
        </span>
        <span itemprop='position'>#3</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>This mean we will need to consider exposing the USB device name , so that you can filter events by midi devices. <br>(The filtering needs to be midi device/midi port/midi channel)</p>

<p>Probably this could just be an extension of midi device id, (with axo din/USB device being fixed), and the host ports being dynamic. </p>

<p>wonder if you have to use the USB id, since when you store in the patch (for filtering) , it needs to be consistent regardless of order of USB devices being powered etc. </p>

<p>Hmm not trivial, when you also consider the 'name' needs to also be fed back to the user for selection purposes.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='USB Hub support development'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/johannes.html'><b itemprop='author'>johannes</b></a>
           
           <time datetime='2017-07-31T14:49:31Z' itemprop='datePublished'>
             2017-07-31 14:49:31 UTC
           </time>
        </span>
        <span itemprop='position'>#4</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>In development, I have added "virtual midi input and output ports", those have only a index number (1-16). That would allow a patch to deal with index numbers only, making references to the USB device name would require changes to the patch when using a different usb-midi controller.<br>Multiple real midi input ports can be routed to several virtual input ports. Each virtual midi output port can also be mapped to several real midi output ports.</p>

<p>The use cases this cover would be:<br>* using virtual input port 1 for "just playing", merging all keyboards and direct controllers. Most patches would just use virtual input port 1.<br>* virtual input port 8 could be used for midi clock, perhaps also switching between external and firmware-generated clock without modifying the patch. <br>* midi controllers that are not intended as "just playing" controllers, like a Launchpad or a Mackie MCU, could use a different virtual input/output port than 1 or 8.<br>* virtual port 9-16 could be dedicated for midi thru routing</p>

<p>So that 'd move the midi device/port logic out of the patch.<br>The problem is then moved to firmware...<br>In many cases it is sufficient to merge all midi input ports to virtual port 1.<br>Clock can be a bit more tricky, merging midi clocks makes no sense. There are probably application scenarios where multiple midi clocks are useful, but 99% of the applications will be served with a single internal or external clock source. The first physical port where a clock is received could be selected as the clock source. The 1% of the applications that require multiple independent clock inputs could use specific virtual input ports rather than virtual input port 8.<br>Mapping midi devices to a specific port, I think this needs a configuration file on sdcard containing virtual port mapping for USB device names. That would not allow a different port mapping for, say, 2 Nanocontrols since they will both have the same name. But I don't see a reasonable way to deal with that scenario, no matter if it is selected by usb device serial number (if present), connection order, or usb port number, it will always remain a potential source of confusion.</p>

<p>(related: <a href="../any-interest-in-sysex-input-capabilities/2929/7.html">http://community.axoloti.com/t/any-interest-in-sysex-input-capabilities/2929/7</a>)</p>

<p>Does that cover it? Hrmm also Sysex is problematic when merging several inputs to one virtual input, if they arrive simultaneously, they will get mangled. Assigning a separate virtual input channel would solve that again.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:1'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='USB Hub support development'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/thetechnobear.html'><b itemprop='author'>thetechnobear</b></a>
           
           <time datetime='2017-07-31T18:29:18Z' itemprop='datePublished'>
             2017-07-31 18:29:18 UTC
           </time>
        </span>
        <span itemprop='position'>#5</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>from my perspective (others may be different)</p>

<p>Id say, merging all midi input is rarely what I want (and of course, output = never)... Id usually want a patch/object to be able to determine where the midi data goes. In fact, the only scenario where I don't care, is when Im developing, say a synth patch, and I just need any controller to trigger the sound. ... but honestly I don't see that so much as merging data, as not filtering any device (e.g. Omni)</p>

<p>but other cases, I really do want separate streams, and I need them to be identifiable... <br>something like a Launchpad, you may be send/receiving specific data, to say control the pad colours.<br>or you might want you keyboard to be triggering a synth, but a 'pad controller' to be triggering drums.</p>

<p>(... and I don't like generally doing this via midi channels, its cumbersome at best, and if your controller is sending out on multi channels (sequencer/multitimbral synths/expressive controllers) , it may not even be viable.)</p>

<p>I'm not quite sure I understand the benefit of virtual mappings much.. over say simple filtering, with Omni options..... the only advantage I can think of, is if you had lots of controllers or similar types... and you want to treat them similarly.. then you could group into a virtual midi device - but that seems pretty 'corner case'</p>

<p>even with virtual midi ids, your still going to need to get the 'usb device name' back to UI, so the user can identify it.... are you proposing, that the first time a 'new' device connects it gets a virtual midi id, and then has it forever? ... that might work</p>

<p>also, how do you propose to do output? I cant see you ever want to merge output (ok, perhaps clock is useful, but not notes/cc etc), its going to get very confusing if a physical device has a different virtual midi input id, to its output id.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='USB Hub support development'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/johannes.html'><b itemprop='author'>johannes</b></a>
           
           <time datetime='2017-08-02T18:30:36Z' itemprop='datePublished'>
             2017-08-02 18:30:36 UTC
           </time>
        </span>
        <span itemprop='position'>#6</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <aside class="quote" data-post="5" data-topic="3561"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/community.axoloti.com/thetechnobear/40/6_1.html" class="avatar">thetechnobear:</div>
<blockquote><p>but honestly I don't see that so much as merging data, as not filtering any device (e.g. Omni)</p></blockquote></aside>

<p>The missing piece in my opinion the ability to filter "any device except the Launchpad and the Mackie MCU", preferably as a system setting, without a need to modify a "just playing" patch.</p>

<p>Checking how it is done in <strong>Max</strong>, in the MIDI setup dialog, every input/output port can be assigned to an abbreviation indicated with a single character (a..z), and a MIDI channel offset. <br>Those abbreviations seems very similar to my approach of virtual MIDI input/output ports.<br>The MIDI channel offset in Max, not quite sure how useful this is. Max does not limit the midi channel number to 0-15. <br>I'm not quite sure shifting MIDI channels is a good idea, could get confusing, and loses the relation between channel and port. <br>Max can also deal with MIDI port names in the patch, but I would expect this to make it hard to migrate patches from one setup to another, with a "Launchpad Mini" to a "Launchpad MK2" or a Mackie MCU connected to a MIDI DIN port.</p>

<p>If I recall correctly, <strong>Pd</strong> arranges all enabled MIDI input ports to successive MIDI channels, 1-16 for the 1st port, 17-32 for the 2nd port etc. </p>

<p><strong>DAWs</strong> typically have a MIDI setup dialog where MIDI clock can be routed to destination ports, MIDI ports for "just playing" controllers/keyboards/synths can be enabled (or perhaps more relevant: excluded), and configure supported remote controllers that incidentally use MIDI. </p>

<aside class="quote" data-post="5" data-topic="3561"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/community.axoloti.com/thetechnobear/40/6_1.html" class="avatar">thetechnobear:</div>
<blockquote><p>even with virtual midi ids, your still going to need to get the 'usb device name' back to UI</p></blockquote></aside>

<p>To a midi-input and midi-output routing settings dialog UI, yes, but not to the patch. </p>

<aside class="quote" data-post="5" data-topic="3561"><div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../user_avatar/community.axoloti.com/thetechnobear/40/6_1.html" class="avatar">thetechnobear:</div>
<blockquote><p>are you proposing, that the first time a 'new' device connects it gets a virtual midi id, and then has it forever? ... that might work</p></blockquote></aside>

<p>No, any reference to such a virtual midi ID in a patch would be specific to each individual setup<br>the goal is to abstract specific setups.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='USB Hub support development'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/thetechnobear.html'><b itemprop='author'>thetechnobear</b></a>
           
           <time datetime='2017-08-02T18:56:47Z' itemprop='datePublished'>
             2017-08-02 18:56:47 UTC
           </time>
        </span>
        <span itemprop='position'>#7</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>in max you can assign specific controllers to specific midi input objects. (just right click on them), you can also specify the 'text' device name .eg "Ableton Push 2 User mode"</p>

<p>in PD, yes, for some platforms (e.g. OSS) its sequential midi channels (bad), but for others (e.g. alsa) , you can create virtual midi ports, which you can then use aconnect to route midi too.<br>max also supports virtual midi in/out, which you can use other software to then route too </p>

<p>the thing about virtual devices in these cases though, is they tend to then just be directly accessible from a daw etc... its not like you have to assign devices, its just like your treating them as virtual instruments... which you target from a daw.</p>

<p>I guess I don't mind, as long as I can say, in this patch , I want this controller (e.g. keyboard) to target this subpatch, and this other controller (e.g. drum pads) to target this subpatch.... and when I load that patch up (standalone) with those assigned controllers connected, it works the same as when I last used it <img src="../../images/emoji/twitter/winkae52.png?v=5" title=":wink:" class="emoji" alt=":wink:"></p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:1'>
      <meta itemprop='headline' content='USB Hub support development'>
      <hr>
  </div>
  <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <div class='creator'>
        <span>
          <a href='../../u/natcl.html'><b itemprop='author'>natcl</b></a>
           
           <time datetime='2018-12-29T23:12:12Z' itemprop='datePublished'>
             2018-12-29 23:12:12 UTC
           </time>
        </span>
        <span itemprop='position'>#8</span>
      </div>
      <div class='post' itemprop='articleBody'>
        <p>In the iConnectivity soundcards you can "lock" a device to a specific virtual input which works nicely. You then have a matrix you can use to choose where the data goes.<br>Not sure about merging all devices to a single input, that should be optional for sure.</p>
      </div>
      <meta itemprop='interactionCount' content='UserLikes:0'>
      <meta itemprop='interactionCount' content='UserComments:0'>
      <meta itemprop='headline' content='USB Hub support development'>
      <hr>
  </div>






    </div>
    <footer class="container">
      <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <a href='../../index.html'>Home</a>
        <a href="../../categories.html">Categories</a>
        <a href="../../guidelines.html">FAQ/Guidelines</a>
        <a href="../../tos.html">Terms of Service</a>
        <a href="../../privacy.html">Privacy Policy</a>
      </nav>
      <p>Powered by <a href="https://www.discourse.org/">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  

<!-- Mirrored from community.axoloti.com/t/usb-hub-support-development/3561 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 10 Jul 2023 16:03:37 GMT -->
</html>
