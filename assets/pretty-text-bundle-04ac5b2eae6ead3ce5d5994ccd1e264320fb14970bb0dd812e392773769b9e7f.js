define("pretty-text/pretty-text",["pretty-text/engines/discourse-markdown","pretty-text/sanitizer","pretty-text/white-lister","exports"],function(e,t,r,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){p.push(e)}function o(e){l();var t=e.siteSettings,r=e.getURL,n=e.lookupAvatar,i=e.getTopicInfo,a=e.topicId,o=e.categoryHashtagLookup,s=e.userId,u=e.getCurrentUser,c=e.currentUser,f={"bold-italics":!0,"auto-link":!0,mentions:!0,bbcode:!0,quote:!0,html:!0,"category-hashtag":!0,onebox:!0,newline:!0},d={sanitize:!0,getURL:r,features:f,lookupAvatar:n,getTopicInfo:i,topicId:a,categoryHashtagLookup:o,userId:s,getCurrentUser:u,currentUser:c,mentionLookup:e.mentionLookup,allowedHrefSchemes:t.allowed_href_schemes?t.allowed_href_schemes.split("|"):null};return p.forEach(function(r){return r(t,d,e)}),d}var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();n.registerOption=a,n.buildOptions=o;var u=e.cook,l=e.setup,c=t.sanitize,f=r["default"],p=[],d=function(e){return e},h=function(){function e(t){i(this,e),this.opts=t||{},this.opts.features=this.opts.features||{},this.opts.sanitizer=this.opts.sanitize?this.opts.sanitizer||c:d,l()}return s(e,[{key:"cook",value:function(e){if(!e||0===e.length)return"";var t=u(e,this.opts);return t?t:""}},{key:"sanitize",value:function(e){return this.opts.sanitizer(e,new f(this.opts))}}]),e}();n["default"]=h}),define("pretty-text/guid",["exports"],function(e){"use strict";e["default"]=function(){var e=(new Date).getTime();return window.performance&&"function"==typeof window.performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?r:3&r|8).toString(16)})}}),define("pretty-text/censored-words",["exports"],function(e){"use strict";function t(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function r(e,r,n){var i=[],a=e;if(r&&r.length&&(i=r.split("|").map(function(e){return"("+t(e)+")"})),n&&n.length>0&&i.push("("+n+")"),i.length){var o=void 0;try{if(o=new RegExp("(\\b(?:"+i.join("|")+")\\b)(?![^\\(]*\\))","ig"))for(var s=o.exec(e);s&&s[0];){if(s[0].length>a.length)return a;var u=new Array(s[0].length+1).join("&#9632;");e=e.replace(new RegExp("(\\b"+t(s[0])+"\\b)(?![^\\(]*\\))","ig"),u),s=o.exec(e)}}catch(l){return a}}return e}e.censor=r}),define("pretty-text/emoji/data",["exports"],function(e){"use strict";var t=["100","1234","8ball","a","ab","abc","abcd","accept","aerial_tramway","airplane","airplane_arriving","airplane_departure","airplane_small","alarm_clock","alembic","alien","ambulance","amphora","anchor","angel","anger","anger_right","angry","anguished","ant","apple","aquarius","aries","arrow_backward","arrow_double_down","arrow_double_up","arrow_down","arrow_down_small","arrow_forward","arrow_heading_down","arrow_heading_up","arrow_left","arrow_lower_left","arrow_lower_right","arrow_right","arrow_right_hook","arrow_up","arrow_up_down","arrow_up_small","arrow_upper_left","arrow_upper_right","arrows_clockwise","arrows_counterclockwise","art","articulated_lorry","astonished","athletic_shoe","atm","atom","b","baby","baby_bottle","baby_chick","baby_symbol","back","badminton","baggage_claim","balloon","ballot_box","ballot_box_with_check","bamboo","banana","bangbang","bank","bar_chart","barber","baseball","basketball","basketball_player","bath","bathtub","battery","beach","beach_umbrella","bear","bed","bee","beer","beers","beetle","beginner","bell","bellhop","bento","bicyclist","bike","bikini","biohazard","bird","birthday","black_circle","black_joker","black_large_square","black_medium_small_square","black_medium_square","black_nib","black_small_square","black_square_button","blossom","blowfish","blue_book","blue_car","blue_heart","blush","boar","bomb","book","bookmark","bookmark_tabs","books","boom","boot","bouquet","bow","bow_and_arrow","bowling","boy","bread","bride_with_veil","bridge_at_night","briefcase","broken_heart","bug","bulb","bullettrain_front","bullettrain_side","burrito","bus","busstop","bust_in_silhouette","busts_in_silhouette","cactus","cake","calendar","calendar_spiral","calling","camel","camera","camera_with_flash","camping","cancer","candle","candy","capital_abcd","capricorn","card_box","card_index","carousel_horse","cat","cat2","cd","chains","champagne","chart","chart_with_downwards_trend","chart_with_upwards_trend","checkered_flag","cheese","cherries","cherry_blossom","chestnut","chicken","children_crossing","chipmunk","chocolate_bar","christmas_tree","church","cinema","circus_tent","city_dusk","city_sunset","cityscape","cl","clap","clapper","classical_building","clipboard","clock","clock1","clock10","clock1030","clock11","clock1130","clock12","clock1230","clock130","clock2","clock230","clock3","clock330","clock4","clock430","clock5","clock530","clock6","clock630","clock7","clock730","clock8","clock830","clock9","clock930","closed_book","closed_lock_with_key","closed_umbrella","cloud","cloud_lightning","cloud_rain","cloud_snow","cloud_tornado","clubs","cocktail","coffee","coffin","cold_sweat","comet","compression","computer","confetti_ball","confounded","confused","congratulations","construction","construction_site","construction_worker","control_knobs","convenience_store","cookie","cool","cop","copyright","corn","couch","couple","couple_with_heart","couplekiss","cow","cow2","crab","crayon","credit_card","crescent_moon","cricket","crocodile","cross","crossed_flags","crossed_swords","crown","cruise_ship","cry","crying_cat_face","crystal_ball","cupid","curly_loop","currency_exchange","curry","custard","customs","cyclone","dagger","dancer","dancers","dango","dark_sunglasses","dart","dash","date","deciduous_tree","department_store","desert","desktop","diamond_shape_with_a_dot_inside","diamonds","disappointed","disappointed_relieved","dividers","dizzy","dizzy_face","do_not_litter","dog","dog2","dollar","dolls","dolphin","door","doughnut","dove","dragon","dragon_face","dress","dromedary_camel","droplet","dvd","e-mail","ear","ear_of_rice","earth_africa","earth_americas","earth_asia","egg","eggplant","eight","eight_pointed_black_star","eight_spoked_asterisk","electric_plug","elephant","end","envelope","envelope_with_arrow","euro","european_castle","european_post_office","evergreen_tree","exclamation","expressionless","eye","eyeglasses","eyes","factory","fallen_leaf","fast_forward","fax","fearful","feet","ferris_wheel","ferry","field_hockey","file_cabinet","file_folder","film_frames","fire","fire_engine","fireworks","first_quarter_moon","first_quarter_moon_with_face","fish","fish_cake","fishing_pole_and_fish","fist","five","flag_black","flag_white","flags","flashlight","fleur-de-lis","floppy_disk","flower_playing_cards","flushed","fog","foggy","football","footprints","fork_and_knife","fork_knife_plate","fountain","four","four_leaf_clover","frame_photo","free","fried_shrimp","fries","frog","frowning","frowning2","fuelpump","full_moon","full_moon_with_face","game_die","gear","gem","gemini","ghost","gift","gift_heart","girl","globe_with_meridians","goat","golf","golfer","grapes","green_apple","green_book","green_heart","grey_exclamation","grey_question","grimacing","grin","grinning","guardsman","guitar","gun","haircut","hamburger","hammer","hammer_pick","hamster","hand_splayed","handbag","hash","hatched_chick","hatching_chick","head_bandage","headphones","hear_no_evil","heart","heart_decoration","heart_exclamation","heart_eyes","heart_eyes_cat","heartbeat","heartpulse","hearts","heavy_check_mark","heavy_division_sign","heavy_dollar_sign","heavy_minus_sign","heavy_multiplication_x","heavy_plus_sign","helicopter","helmet_with_cross","herb","hibiscus","high_brightness","high_heel","hockey","hole","homes","honey_pot","horse","horse_racing","hospital","hot_pepper","hotdog","hotel","hotsprings","hourglass","hourglass_flowing_sand","house","house_abandoned","house_with_garden","hugging","hushed","ice_cream","ice_skate","icecream","id","ideograph_advantage","imp","inbox_tray","incoming_envelope","information_desk_person","information_source","innocent","interrobang","iphone","island","izakaya_lantern","jack_o_lantern","japan","japanese_castle","japanese_goblin","japanese_ogre","jeans","joy","joy_cat","joystick","kaaba","key","key2","keyboard","kimono","kiss","kissing","kissing_cat","kissing_closed_eyes","kissing_heart","kissing_smiling_eyes","knife","koala","koko","label","large_blue_circle","large_blue_diamond","large_orange_diamond","last_quarter_moon","last_quarter_moon_with_face","laughing","leaves","ledger","left_luggage","left_right_arrow","leftwards_arrow_with_hook","lemon","leo","leopard","level_slider","levitate","libra","lifter","light_rail","link","lion_face","lips","lipstick","lock","lock_with_ink_pen","lollipop","loop","loud_sound","loudspeaker","love_hotel","love_letter","low_brightness","m","mag","mag_right","mahjong","mailbox","mailbox_closed","mailbox_with_mail","mailbox_with_no_mail","man","man_with_gua_pi_mao","man_with_turban","mans_shoe","map","maple_leaf","mask","massage","meat_on_bone","medal","mega","melon","menorah","mens","metal","metro","microphone","microphone2","microscope","middle_finger","military_medal","milky_way","minibus","minidisc","mobile_phone_off","money_mouth","money_with_wings","moneybag","monkey","monkey_face","monorail","mortar_board","mosque","motorboat","motorcycle","motorway","mount_fuji","mountain","mountain_bicyclist","mountain_cableway","mountain_railway","mountain_snow","mouse","mouse2","mouse_three_button","movie_camera","moyai","muscle","mushroom","musical_keyboard","musical_note","musical_score","mute","nail_care","name_badge","necktie","negative_squared_cross_mark","nerd","neutral_face","new","new_moon","new_moon_with_face","newspaper","newspaper2","ng","night_with_stars","nine","no_bell","no_bicycles","no_entry","no_entry_sign","no_good","no_mobile_phones","no_mouth","no_pedestrians","no_smoking","non-potable_water","nose","notebook","notebook_with_decorative_cover","notepad_spiral","notes","nut_and_bolt","o","o2","ocean","octopus","oden","office","oil","ok","ok_hand","ok_woman","older_man","older_woman","om_symbol","on","oncoming_automobile","oncoming_bus","oncoming_police_car","oncoming_taxi","one","open_file_folder","open_hands","open_mouth","ophiuchus","orange_book","orthodox_cross","outbox_tray","ox","package","page_facing_up","page_with_curl","pager","paintbrush","palm_tree","panda_face","paperclip","paperclips","park","parking","part_alternation_mark","partly_sunny","passport_control","pause_button","peace","peach","pear","pen_ballpoint","pen_fountain","pencil","pencil2","penguin","pensive","performing_arts","persevere","person_frowning","person_with_blond_hair","person_with_pouting_face","pick","pig","pig2","pig_nose","pill","pineapple","ping_pong","pisces","pizza","place_of_worship","play_pause","point_down","point_left","point_right","point_up","point_up_2","police_car","poodle","poop","popcorn","post_office","postal_horn","postbox","potable_water","pouch","poultry_leg","pound","pouting_cat","pray","prayer_beads","princess","printer","projector","punch","purple_heart","purse","pushpin","put_litter_in_its_place","question","rabbit","rabbit2","race_car","racehorse","radio","radio_button","radioactive","rage","railway_car","railway_track","rainbow","raised_hand","raised_hands","raising_hand","ram","ramen","rat","record_button","recycle","red_car","red_circle","registered","relaxed","relieved","reminder_ribbon","repeat","repeat_one","restroom","revolving_hearts","rewind","ribbon","rice","rice_ball","rice_cracker","rice_scene","ring","robot","rocket","roller_coaster","rolling_eyes","rooster","rose","rosette","rotating_light","round_pushpin","rowboat","rugby_football","runner","running_shirt_with_sash","sa","sagittarius","sailboat","sake","sandal","santa","satellite","satellite_orbital","saxophone","scales","school","school_satchel","scissors","scorpion","scorpius","scream","scream_cat","scroll","seat","secret","see_no_evil","seedling","seven","shamrock","shaved_ice","sheep","shell","shield","shinto_shrine","ship","shirt","shopping_bags","shower","signal_strength","six","six_pointed_star","ski","skier","skull","skull_crossbones","sleeping","sleeping_accommodation","sleepy","slight_frown","slight_smile","slot_machine","small_blue_diamond","small_orange_diamond","small_red_triangle","small_red_triangle_down","smile","smile_cat","smiley","smiley_cat","smiling_imp","smirk","smirk_cat","smoking","snail","snake","snowboarder","snowflake","snowman","snowman2","sob","soccer","soon","sos","sound","space_invader","spades","spaghetti","sparkle","sparkler","sparkles","sparkling_heart","speak_no_evil","speaker","speaking_head","speech_balloon","speedboat","spider","spider_web","spy","stadium","star","star2","star_and_crescent","star_of_david","stars","station","statue_of_liberty","steam_locomotive","stew","stop_button","stopwatch","straight_ruler","strawberry","stuck_out_tongue","stuck_out_tongue_closed_eyes","stuck_out_tongue_winking_eye","sun_with_face","sunflower","sunglasses","sunny","sunrise","sunrise_over_mountains","surfer","sushi","suspension_railway","sweat","sweat_drops","sweat_smile","sweet_potato","swimmer","symbols","synagogue","syringe","taco","tada","tanabata_tree","tangerine","taurus","taxi","tea","telephone","telephone_receiver","telescope","ten","tennis","tent","thermometer","thermometer_face","thinking","thought_balloon","three","thumbsdown","thumbsup","thunder_cloud_rain","ticket","tickets","tiger","tiger2","timer","tired_face","tm","toilet","tokyo_tower","tomato","tongue","tools","top","tophat","track_next","track_previous","trackball","tractor","traffic_light","train","train2","tram","triangular_flag_on_post","triangular_ruler","trident","triumph","trolleybus","trophy","tropical_drink","tropical_fish","truck","trumpet","tulip","turkey","turtle","tv","twisted_rightwards_arrows","two","two_hearts","two_men_holding_hands","two_women_holding_hands","u5272","u5408","u55b6","u6307","u6708","u6709","u6e80","u7121","u7533","u7981","u7a7a","umbrella","umbrella2","unamused","underage","unicorn","unlock","up","upside_down","urn","v","vertical_traffic_light","vhs","vibration_mode","video_camera","video_game","violin","virgo","volcano","volleyball","vs","vulcan","walking","waning_crescent_moon","waning_gibbous_moon","warning","wastebasket","watch","water_buffalo","watermelon","wave","wavy_dash","waxing_crescent_moon","waxing_gibbous_moon","wc","weary","wedding","whale","whale2","wheel_of_dharma","wheelchair","white_check_mark","white_circle","white_flower","white_large_square","white_medium_small_square","white_medium_square","white_small_square","white_square_button","white_sun_cloud","white_sun_rain_cloud","white_sun_small_cloud","wind_blowing_face","wind_chime","wine_glass","wink","wolf","woman","womans_clothes","womans_hat","womens","worried","wrench","writing_hand","x","yellow_heart","yen","yin_yang","yum","zap","zero","zipper_mouth","zzz","female_couple_with_heart","male_couple_with_heart","female_couplekiss","male_couplekiss","family_man_woman_girl","family_man_woman_girl_boy","family_man_woman_boys","family_man_woman_girls","family_women_boy","family_women_girl","family_women_girl_boy","family_women_boys","family_women_girls","family_men_boy","family_men_girl","family_men_girl_boy","family_men_boys","family_men_girls","keycap_star","left_speech_bubble","cn","fr","de","it","jp","ru","kr","es","gb","us","+1","-1"];e.emoji=t;var r={airplane_small:["small_airplane"],anger_right:["right_anger_bubble"],atom:["atom_symbol"],ballot_box:["ballot_box_with_ballot"],basketball_player:["person_with_ball"],beach:["beach_with_umbrella"],beach_umbrella:["umbrella_on_ground"],bellhop:["bellhop_bell"],biohazard:["biohazard_sign"],bow_and_arrow:["archery"],calendar_spiral:["spiral_calendar_pad"],card_box:["card_file_box"],champagne:["bottle_with_popping_cork"],cheese:["cheese_wedge"],city_sunset:["city_sunrise"],clock:["mantlepiece_clock"],cloud_lightning:["cloud_with_lightning"],cloud_rain:["cloud_with_rain"],cloud_snow:["cloud_with_snow"],cloud_tornado:["cloud_with_tornado"],construction_site:["building_construction"],couch:["couch_and_lamp"],crayon:["lower_left_crayon"],cricket:["cricket_bat_ball"],cross:["latin_cross"],cruise_ship:["passenger_ship"],dagger:["dagger_knife"],desktop:["desktop_computer"],dividers:["card_index_dividers"],dove:["dove_of_peace"],"e-mail":["email"],feet:["paw_prints"],fire:["flame"],flag_black:["waving_black_flag"],cn:["flag_cn"],de:["flag_de"],es:["flag_es"],fr:["flag_fr"],gb:["flag_gb"],it:["flag_it"],jp:["flag_jp"],kr:["flag_kr"],ru:["flag_ru"],us:["flag_us"],flag_white:["waving_white_flag"],fork_knife_plate:["fork_and_knife_with_plate"],frame_photo:["frame_with_picture"],frowning2:["white_frowning_face"],hammer_pick:["hammer_and_pick"],hand_splayed:["raised_hand_with_fingers_splayed"],head_bandage:["face_with_head_bandage"],heart_exclamation:["heavy_heart_exclamation_mark_ornament"],helmet_with_cross:["helmet_with_white_cross"],homes:["house_buildings"],hotdog:["hot_dog"],house_abandoned:["derelict_house_building"],hugging:["hugging_face"],island:["desert_island"],key2:["old_key"],laughing:["satisfied"],levitate:["man_in_business_suit_levitating"],lifter:["weight_lifter"],lion_face:["lion"],map:["world_map"],medal:["sports_medal"],metal:["sign_of_the_horns"],microphone2:["studio_microphone"],middle_finger:["reversed_hand_with_middle_finger_extended"],money_mouth:["money_mouth_face"],motorcycle:["racing_motorcycle"],mountain_snow:["snow_capped_mountain"],mouse_three_button:["three_button_mouse"],nerd:["nerd_face"],newspaper2:["rolled_up_newspaper"],notepad_spiral:["spiral_note_pad"],oil:["oil_drum"],older_woman:["grandma"],paintbrush:["lower_left_paintbrush"],paperclips:["linked_paperclips"],park:["national_park"],pause_button:["double_vertical_bar"],peace:["peace_symbol"],pen_ballpoint:["lower_left_ballpoint_pen"],pen_fountain:["lower_left_fountain_pen"],ping_pong:["table_tennis"],place_of_worship:["worship_symbol"],poop:["shit","hankey","poo"],projector:["film_projector"],race_car:["racing_car"],radioactive:["radioactive_sign"],railway_track:["railroad_track"],robot:["robot_face"],rolling_eyes:["face_with_rolling_eyes"],skull:["skeleton"],skull_crossbones:["skull_and_crossbones"],slight_frown:["slightly_frowning_face"],slight_smile:["slightly_smiling_face","slightly_smiling"],speaking_head:["speaking_head_in_silhouette"],spy:["sleuth_or_spy"],thermometer_face:["face_with_thermometer"],thinking:["thinking_face"],thumbsdown:["-1"],thumbsup:["+1"],thunder_cloud_rain:["thunder_cloud_and_rain"],tickets:["admission_tickets"],timer:["timer_clock"],tools:["hammer_and_wrench"],track_next:["next_track"],track_previous:["previous_track"],unicorn:["unicorn_face"],upside_down:["upside_down_face"],urn:["funeral_urn"],vulcan:["raised_hand_with_part_between_middle_and_ring_fingers"],white_sun_cloud:["white_sun_behind_cloud"],white_sun_rain_cloud:["white_sun_behind_cloud_with_rain"],white_sun_small_cloud:["white_sun_with_small_cloud"],zipper_mouth:["zipper_mouth_face"]};e.aliases=r;var n={":)":"slight_smile",":-)":"slight_smile",":(":"frowning",":-(":"frowning",";)":"wink",";-)":"wink",":'(":"cry",":'-(":"cry",":-'(":"cry",":p":"stuck_out_tongue",":P":"stuck_out_tongue",":-P":"stuck_out_tongue",":O":"open_mouth",":-O":"open_mouth",":D":"smiley",":-D":"smiley",":|":"expressionless",":-|":"expressionless",":/":"confused","8-)":"sunglasses",";P":"stuck_out_tongue_winking_eye",";-P":"stuck_out_tongue_winking_eye",":$":"blush",":-$":"blush"};e.translations=n}),define("pretty-text/emoji",["pretty-text/emoji/data","exports"],function(e,t){"use strict";function r(e,t){e=e.toLowerCase(),d[e]=t}function n(){var e=l.slice(0);return _.each(d,function(t,r){return e.push(r)}),e}function i(e,t){return e.indexOf(":")>=0?e.replace(/\B:[^\s:]+:?\B/g,function(e){var r=!!f[e],n=r?f[e]:e.slice(1,e.length-1),i=e.lastIndexOf(":")===e.length-1,s=o(n,t),u=a(n,t)?"emoji emoji-custom":"emoji";return s&&(r||i)?"<img src='"+s+"' "+(t.skipTitle?"":"title='"+n+"'")+" alt='"+n+"' class='"+u+"'>":e}):e}function a(e,t){return e=e.toLowerCase(),d.hasOwnProperty(e)?!0:!!(t&&t.customEmoji&&t.customEmoji.hasOwnProperty(e))}function o(e,t){var r=void 0;return e=e.toLowerCase(),d.hasOwnProperty(e)&&(r=d[e]),t&&t.customEmoji&&t.customEmoji[e]&&(r=t.customEmoji[e]),!r&&h.hasOwnProperty(e)&&(r=t.getURL("/images/emoji/"+t.emojiSet+"/"+e+".png")),r&&(r=r+"?v="+p),r}function s(e){return e=e.toLowerCase(),!(!d.hasOwnProperty(e)&&!h.hasOwnProperty(e))}function u(e,t){function r(e){var t=g[e]||e;return-1===i.indexOf(t)&&i.push(t),n>0&&i.length>=n}var n=t&&t.maxResults||-1;if(0===n)return[];m=m||_.union(_.keys(h),_.keys(d),_.keys(g)).sort();for(var i=[],a=0;a<m.length;a++){var o=m[a];if(0===o.indexOf(e)&&r(o))return i}for(var a=0;a<m.length;a++){var o=m[a];if(o.indexOf(e)>0&&r(o))return i}return i}t.registerEmoji=r,t.emojiList=n,t.performEmojiUnescape=i,t.isCustomEmoji=a,t.buildEmojiUrl=o,t.emojiExists=s,t.emojiSearch=u;var l=e.emoji,c=e.aliases,f=e.translations,p="3";t.IMAGE_VERSION=p;var d={},h={};l.forEach(function(e){return h[e]=!0});var g={};Object.keys(c).forEach(function(e){c[e].forEach(function(t){return g[t]=e})});var m=void 0}),define("pretty-text/engines/discourse-markdown",["pretty-text/guid","pretty-text/white-lister","pretty-text/sanitizer","exports"],function(e,t,r,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t,r,n,i){var a=void 0,o=void 0;do{if(a=e.indexOf(r,i),-1===a)return-1;o=e.indexOf(t,i),i=a+r.length}while(-1!==o&&a>o);return a}function o(e,t){O=t,v={},e=m(e),T.forEach(function(t){return e=t(e)});var r=new y(t),n=j.toHTMLTree(e,"Discourse"),i=t.sanitizer(j.renderJsonML(l(n,t)),r),a=Object.keys(v);if(a.length)for(var o=!0,s=function(e){i=i.replace(new RegExp(e,"g"),function(){return o=!0,v[e]})};o;)o=!1,a.forEach(s);return i.trim()}function s(){C.setup()}function u(e,t,r){if(!(e.length<2)){if("__RAW"===e[0]){var n=w();return v[n]=e[1],void(e[1]=n)}for(var i=1;i<e.length;i++){var a=e[i];if("string"==typeof a){var o=r(a,t);o?o instanceof Array?e.splice.apply(e,[i,1].concat(o)):e[i]=o:e[i]=a}}}}function l(e,t,r,n){if(e instanceof Array){var i,a,o,s,c;!function(){var f={node:e,options:t,path:r,insideCounts:n||{}};for(S.forEach(function(e){return e(f)}),i=0;i<E.length;i++)u(e,f,E[i]);for(r=r||[],n=n||{},r.push(e),a=1;a<e.length;a++)o=e[a],s=o[0],n[s]=(n[s]||0)+1,o&&2===o.length&&"p"===o[0]&&/^<!--([\s\S]*)-->$/.exec(o[1])?e[a]=o[1]:l(o,t,r,n),n[s]=n[s]-1;2===e.length&&"p"===e[0]&&e[1]instanceof Array&&"__RAW"===e[1][0]&&(c=e[1][1],e[0]="__RAW",e[1]=c),r.pop()}()}return e}function c(e,t){if(!(e.wordBoundary||e.spaceBoundary||e.spaceOrTagBoundary))return!1;var r=t[t.length-1];return"string"!=typeof r?!1:e.wordBoundary&&!r.match(/\W$/)?!0:e.spaceBoundary&&!r.match(/\s$/)?!0:e.spaceOrTagBoundary&&!r.match(/(\s|\>|\()$/)?!0:void 0}function f(e){for(var t=-1,r=0;-1!==(t=e.indexOf("\n",t+1));)r++;return r}function p(e,t,r){var n=new RegExp(t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"g");if(e.match(n)){var i=w();e=e.replace(n,i),v[i]=r}return e}function d(e){return e.replace(/^([ ]{4}|\t)/gm,"")}function h(e){return e.replace(/^\n+/,"").replace(/\s+$/,"")}function g(e){return e.replace(/\\\\/g,"Ẁ0").replace(/\\`/g,"Ẁ01")}function _(e){return e.replace(/\u1E8001/g,"\\`").replace(/\u1E800/g,"\\\\")}function m(e){return e=g(e),e=e.replace(/(^\n*|\n)```([a-z0-9\-]*)\n([\s\S]*?)\n```/g,function(e,t,r,n){var i=w();return v[i]=x(_(h(n))),t+"```"+r+"\n"+i+"\n```"}),e=e.replace(/(^\n*|\n\n)((?:(?:[ ]{4}|\t).*\n*)+)/g,function(t,r,n,i){var a=e.slice(0,i).trim().match(/.*$/);if(a&&a[0].length&&(a=a[0].trim(),/^(?:\*|\+|-|\d+\.)\s+/.test(a)))return t;var o=w();return v[o]=x(d(_(h(n)))),r+"    "+o+"\n"}),e=e.replace(/(\s|^)<pre>([\s\S]*?)<\/pre>/gi,function(e,t,r){var n=w();return v[n]=x(_(h(r))),t+"<pre>"+n+"</pre>"}),["``","`"].forEach(function(t){var r=new RegExp("(^|[^`])"+t+"([^`\\n]+?)"+t+"([^`]|$)","g");e=e.replace(r,function(e,r,n,i){var a=w();return v[a]=x(_(n.trim())),r+t+a+t+i})}),_(e)}var b=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();n.cook=o,n.setup=s;var v,w=e["default"],y=t["default"],k=t.whiteListFeature,x=r.escape,j=window.BetterMarkdown,A=j.Markdown,I=j.DialectHelpers,O=void 0,E=[],T=[],S=[],L=function(){function e(){i(this,e),this._dialect=A.dialects.Discourse=I.subclassDialect(A.dialects.Gruber),this._setup=!1}return b(e,[{key:"escape",value:function(e){return x(e)}},{key:"getOptions",value:function(){return O}},{key:"registerInlineFeature",value:function(e,t,r){this._dialect.inline[t]=function(){return O.features[e]?r.apply(this,arguments):void 0}}},{key:"addPreProcessorFeature",value:function(e,t){T.push(function(r){return O.features[e]?t(r,p):r})}},{key:"inlineReplaceFeature",value:function(e,t,r){var n=this;this.registerInline(t,function(i,a,o){return O.features[e]?[t.length,r.call(n,t,a,o)]:void 0})}},{key:"postProcessTagFeature",value:function(e,t,r){this.onParseNode(function(n){if(O.features[e]){var i=n.node;i[0]===t&&(i[i.length-1]=r(i[i.length-1]))}})}},{key:"inlineRegexpFeature",value:function(e,t){this.registerInline(t.start,function(r,n,i){if(O.features[e]&&!c(t,i)){t.matcher.lastIndex=0;var a=t.matcher.exec(r);if(a){var o=t.emitter.call(this,a);if(o)return[a[0].length,o]}}})}},{key:"inlineBetweenFeature",value:function(e,t){var r=t.start||t.between,n=t.stop||t.between,i=r.length;this.registerInline(r,function(o,s,u){if(O.features[e]&&!c(t,u)){var l=a(o,r,n,t,i);if(-1!==l){var f=o.slice(i,l);t.rawContents||(f=this.processInline(f));var p=t.emitter.call(this,f);return p?[l+n.length,p]:void 0}}})}},{key:"replaceBlockFeature",value:function(e,t){function r(r,n){if(O.features[e]){var i=O.traditionalMarkdownLinebreaks;if(!i||!t.skipIfTradtionalLinebreaks){t.start.lastIndex=0;var a=[],o=t.start.exec(r);if(o){var s=function(){return!n.some(function(e){return e.match(t.stop)})},u=t.start.lastIndex-o[0].length,l=r.slice(0,u),c=o[2]?o[2].replace(/^\n*/,""):"";if((!t.withoutLeading||!t.withoutLeading.test(l))&&(t.stop.lastIndex=r.length-c.length,t.stop.exec(r)||!s())){if(l.length>0){var p=this.processBlock(A.mk_block(l),[]);p&&p[0]&&a.push(p[0])}c.length>0&&n.unshift(A.mk_block(c,r.trailing,r.lineNumber+f(l)+(o[2]?o[2].length:0)-c.length));var d=[],h=0,g=-1,_=void 0;e:for(;_=n.shift();){t.start.lastIndex=0;for(var m=[],b=void 0;b=t.start.exec(_);)m.push(t.start.lastIndex-b[0].length),t.start.lastIndex=t.start.lastIndex-(b[2]?b[2].length:0);t.stop.lastIndex=0;for(var v=[];b=t.stop.exec(_);)v.push(t.stop.lastIndex-b[0].length);for(var w=0,y=0;w<v.length;)if(y<m.length&&m[y]<v[w])y++,h++;else{if(!(h>0)){g=v[w];break e}w++,h--}if(s()){g=v[v.length-1];break}h+=m.length-y,d.push(_)}var k=_.match(t.stop)[0].length,x=_.slice(0,g).replace(/\n*$/,""),j=_.slice(g+k).replace(/^\n*/,"");x.length>0&&d.push(A.mk_block(x,"",_.lineNumber)),j.length>0&&n.unshift(A.mk_block(j,_.trailing,_.lineNumber+f(x)));var I=t.emitter.call(this,d,o);return I&&a.push(I),a}}}}}t.priority&&(r.priority=t.priority),this.registerBlock(t.start.toString(),r)}},{key:"postProcessTextFeature",value:function(e,t){E.push(function(){return O.features[e]?t.apply(this,arguments):void 0})}},{key:"onParseNodeFeature",value:function(e,t){S.push(function(){return O.features[e]?t.apply(this,arguments):void 0})}},{key:"registerBlockFeature",value:function(e,t,r){var n=function(){return O.features[e]?r.apply(this,arguments):void 0};n.priority=r.priority,this._dialect.block[t]=n}},{key:"applyFeature",value:function(e,t){C.registerInline=function(t,r){return C.registerInlineFeature(e,t,r)},C.replaceBlock=function(t){return C.replaceBlockFeature(e,t)},C.addPreProcessor=function(t){return C.addPreProcessorFeature(e,t)},C.inlineReplace=function(t,r){return C.inlineReplaceFeature(e,t,r)},C.postProcessTag=function(t,r){return C.postProcessTagFeature(e,t,r)},C.inlineRegexp=function(t){return C.inlineRegexpFeature(e,t)},C.inlineBetween=function(t){return C.inlineBetweenFeature(e,t)},C.postProcessText=function(t){return C.postProcessTextFeature(e,t)},C.onParseNode=function(t){return C.onParseNodeFeature(e,t)},C.registerBlock=function(t,r){return C.registerBlockFeature(e,t,r)},t.setup(this)}},{key:"setup",value:function(){var e=this;if(!this._setup){this._setup=!0,Object.keys(require._eak_seen).forEach(function(t){if(-1!==t.indexOf("discourse-markdown")){var r=require(t);r&&r.setup&&!function(){var n=t.split("/").reverse()[0];C.whiteList=function(e){return k(n,e)},e.applyFeature(n,r),C.whiteList=void 0}()}}),A.buildBlockOrder(this._dialect.block);var t=this._dialect.block.__order__.indexOf("code");t>-1&&(this._dialect.block.__order__.splice(t,1),this._dialect.block.__order__.unshift("code")),A.buildInlinePatterns(this._dialect.inline)}}}]),e}(),C=new L}),define("pretty-text/engines/discourse-markdown/auto-link",["exports"],function(e){"use strict";function t(e){e.inlineRegexp(_.merge({start:"http"},r)),e.inlineRegexp(_.merge({start:"www"},r))}e.setup=t;var r={matcher:/^((?:https?:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.])(?:[^\s()<>]+|\([^\s()<>]+\))+(?:\([^\s()<>]+\)|[^`!()\[\]{};:'".,<>?«»“”‘’\s]))/,spaceOrTagBoundary:!0,emitter:function(e){var t=e[1],r=t;return t.match(/\]\[\d$/)||t.match(/\(http/)?void 0:(t.match(/^www/)&&(r="http://"+t),["a",{href:r},t])}}}),define("pretty-text/engines/discourse-markdown/bbcode",["exports"],function(e){"use strict";function t(e,t,r,n){"function"==typeof r&&(n=r,r={}),e.replaceBlock({start:new RegExp("\\["+t+"(=[^\\[\\]]+)?\\]([\\s\\S]*)","igm"),stop:new RegExp("\\[\\/"+t+"\\]","igm"),emitter:function(t,i){for(var a=this,o=e.getOptions();t.length&&("string"==typeof t[0]||t[0]instanceof String)&&(t[0]=String(t[0]).replace(/^\s+/,""),!t[0].length);)t.shift();var s=[];if(t.length){var u=t.slice(1);t=this.processBlock(t[0],u).concat(u),t.forEach(function(e){if("string"==typeof e||e instanceof String){var t=a.processInline(String(e));t.length&&s.push(["p"].concat(t))}else s.push(e)})}!r.singlePara&&1===s.length&&s[0]instanceof Array&&"para"===s[0][0]&&(s[0].shift(),s=s[0]);var l=n(s,i[1]?i[1].replace(/^=|\"/g,""):null,o);return r.noWrap?l:["p",l]}})}function r(e){function r(t,r,n){var i="["+t+"]",a="[/"+t+"]";n=n||{},n=_.merge(n,{start:i,stop:a,emitter:r}),e.inlineBetween(n),n=_.merge(n,{start:i.toUpperCase(),stop:a.toUpperCase(),emitter:r}),e.inlineBetween(n)}return{replaceBBCode:r,register:function(r,n,i){t(e,r,n,i)},rawBBCode:function(e,t){r(e,t,{rawContents:!0})},removeEmptyLines:function(e){for(var t=[],r=0;r<e.length;r++)"\n"!==e[r]&&t.push(e[r]);return t},replaceBBCodeParamsRaw:function(t,r){var n={rawContents:!0,emitter:function(e){var t=/^([^\]]+)\]([\S\s]*)$/.exec(e);return t?r.call(this,t[1],t[2]):void 0}};e.inlineBetween(_.merge(n,{start:"["+t+"=",stop:"[/"+t+"]"})),t=t.toUpperCase(),e.inlineBetween(_.merge(n,{start:"["+t+"=",stop:"[/"+t+"]"}))}}}function n(e){e.whiteList(["span.bbcode-b","span.bbcode-i","span.bbcode-u","span.bbcode-s"]);var t=r(e),n=t.replaceBBCode,i=t.rawBBCode,a=t.removeEmptyLines,o=t.replaceBBCodeParamsRaw;n("b",function(e){return["span",{"class":"bbcode-b"}].concat(e)}),n("i",function(e){return["span",{"class":"bbcode-i"}].concat(e)}),n("u",function(e){return["span",{"class":"bbcode-u"}].concat(e)}),n("s",function(e){return["span",{"class":"bbcode-s"}].concat(e)}),n("ul",function(e){return["ul"].concat(a(e))}),n("ol",function(e){return["ol"].concat(a(e))}),n("li",function(e){return["li"].concat(a(e))}),i("img",function(e){return["img",{href:e}]}),i("email",function(e){return["a",{href:"mailto:"+e,
"data-bbcode":!0},e]}),n("url",function(e){if(Array.isArray(e)){var t=e[0];return 1===e.length&&Array.isArray(t)&&"a"===t[0]&&("object"!=typeof t[1]&&t.splice(1,0,{}),t[1]["data-bbcode"]=!0),["concat"].concat(e)}}),o("url",function(e,t){var r=e.replace(/(^")|("$)/g,"");return["a",{href:r}].concat(this.processInline(t))}),o("email",function(e,t){return["a",{href:"mailto:"+e,"data-bbcode":!0}].concat(t)}),e.onParseNode(function(e){if(Array.isArray(e.node)){for(var t=[e.node[0]],r=e.node.slice(1),n=0;n<r.length;n++)if(Array.isArray(r[n])&&"concat"===r[n][0])for(var i=1;i<r[n].length;i++)t.push(r[n][i]);else t.push(r[n]);for(var n=0;n<t.length;n++)e.node[n]=t[n]}}),e.replaceBlock({start:/(\[code\])([\s\S]*)/gim,stop:/\[\/code\]/gim,rawContents:!0,emitter:function(t){var r=e.getOptions(),n=t.join("\n"),i=r.defaultCodeLang;return["p",["pre",["code",{"class":"lang-"+i},n]]]}})}e.register=t,e.builders=r,e.setup=n}),define("pretty-text/engines/discourse-markdown/bold-italics",["pretty-text/guid","exports"],function(e,t){"use strict";function r(e,t,n){var i=0,a=new RegExp(t,"g");if(_.isArray(e))for(var o=0;o<e.length;o++){var s=e[o];if(_.isString(s)){var u=s.match(a);i-=u?u.length:0,e[o]=s.replace(a,n),i+=s.length-e[o].length}_.isArray(s)&&(i+=r(s,t,n))}return i}function n(e){function t(t,n){var o=i();e.registerInline(t,function(e,i,s){if(e&&!(e.length<t.length+1)){var u=s[s.length-1];if(u="string"==typeof u&&u,u=u&&u[u.length-1],(!u||"/"!==u&&!u.match(a))&&!e[t.length].match(/\s/)){e=e.replace(new RegExp("\\\\\\"+t[0],"g"),o);var l=new RegExp("[^\\s|"+t[0]+"]"+t.replace(/\*/g,"\\*")+"([^"+t[0]+"]|$)"),c=e.split("\n")[0].search(l);if(c&&c>=0){var f=this.processInline(e.substring(t.length,c+1)),p=r(f,o,t[0]),d="string"==typeof n?[n].concat(f):[n[0],[n[1]].concat(f)];return[c+t.length+1-p,d]}}}})}t("***",["strong","em"]),t("___",["strong","em"]),t("**","strong"),t("__","strong"),t("*","em"),t("_","em")}t.setup=n;var i=e["default"],a=/[a-zA-Z0-9\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376-\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0523\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0621-\u064a\u0660-\u0669\u066e-\u066f\u0671-\u06d3\u06d5\u06e5-\u06e6\u06ee-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07c0-\u07ea\u07f4-\u07f5\u07fa\u0904-\u0939\u093d\u0950\u0958-\u0961\u0966-\u096f\u0971-\u0972\u097b-\u097f\u0985-\u098c\u098f-\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc-\u09dd\u09df-\u09e1\u09e6-\u09f1\u0a05-\u0a0a\u0a0f-\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32-\u0a33\u0a35-\u0a36\u0a38-\u0a39\u0a59-\u0a5c\u0a5e\u0a66-\u0a6f\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2-\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0-\u0ae1\u0ae6-\u0aef\u0b05-\u0b0c\u0b0f-\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32-\u0b33\u0b35-\u0b39\u0b3d\u0b5c-\u0b5d\u0b5f-\u0b61\u0b66-\u0b6f\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99-\u0b9a\u0b9c\u0b9e-\u0b9f\u0ba3-\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0be6-\u0bef\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58-\u0c59\u0c60-\u0c61\u0c66-\u0c6f\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0-\u0ce1\u0ce6-\u0cef\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d28\u0d2a-\u0d39\u0d3d\u0d60-\u0d61\u0d66-\u0d6f\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32-\u0e33\u0e40-\u0e46\u0e50-\u0e59\u0e81-\u0e82\u0e84\u0e87-\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa-\u0eab\u0ead-\u0eb0\u0eb2-\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0ed0-\u0ed9\u0edc-\u0edd\u0f00\u0f20-\u0f29\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8b\u1000-\u102a\u103f-\u1049\u1050-\u1055\u105a-\u105d\u1061\u1065-\u1066\u106e-\u1070\u1075-\u1081\u108e\u1090-\u1099\u10a0-\u10c5\u10d0-\u10fa\u10fc\u1100-\u1159\u115f-\u11a2\u11a8-\u11f9\u1200-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u1676\u1681-\u169a\u16a0-\u16ea\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u17e0-\u17e9\u1810-\u1819\u1820-\u1877\u1880-\u18a8\u18aa\u1900-\u191c\u1946-\u196d\u1970-\u1974\u1980-\u19a9\u19c1-\u19c7\u19d0-\u19d9\u1a00-\u1a16\u1b05-\u1b33\u1b45-\u1b4b\u1b50-\u1b59\u1b83-\u1ba0\u1bae-\u1bb9\u1c00-\u1c23\u1c40-\u1c49\u1c4d-\u1c7d\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u203f-\u2040\u2054\u2071\u207f\u2090-\u2094\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2183-\u2184\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2c6f\u2c71-\u2c7d\u2c80-\u2ce4\u2d00-\u2d25\u2d30-\u2d65\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3006\u3031-\u3035\u303b-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31b7\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fc3\ua000-\ua48c\ua500-\ua60c\ua610-\ua62b\ua640-\ua65f\ua662-\ua66e\ua67f-\ua697\ua717-\ua71f\ua722-\ua788\ua78b-\ua78c\ua7fb-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8d0-\ua8d9\ua900-\ua925\ua930-\ua946\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa50-\uaa59\uac00-\ud7a3\uf900-\ufa2d\ufa30-\ufa6a\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe33-\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]/}),define("pretty-text/engines/discourse-markdown/category-hashtag",["exports"],function(e){"use strict";function t(e){e.inlineRegexp({start:"#",matcher:/^#([\w-:]{1,101})/i,spaceOrTagBoundary:!0,emitter:function(t){var n=e.getOptions(),i=r(t,2),a=i[0],o=i[1],s=n.categoryHashtagLookup,u=s&&s(o);return u?["a",{"class":"hashtag",href:u[0]},"#",["span",{},u[1]]]:["span",{"class":"hashtag"},a]}})}var r=function(){function e(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(u){i=!0,a=u}finally{try{!n&&s["return"]&&s["return"]()}finally{if(i)throw a}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.setup=t}),define("pretty-text/engines/discourse-markdown/censored",["pretty-text/censored-words","pretty-text/pretty-text","exports"],function(e,t,r){"use strict";function n(e){e.addPreProcessor(function(t){var r=e.getOptions();return i(t,r.censoredWords,r.censoredPattern)})}r.setup=n;var i=e.censor,a=t.registerOption;a(function(e,t){t.features.censored=!0,t.censoredWords=e.censored_words,t.censoredPattern=e.censored_pattern})}),define("pretty-text/engines/discourse-markdown/code",["pretty-text/sanitizer","pretty-text/pretty-text","exports"],function(e,t,r){"use strict";function n(e){var t="";return e.forEach(function(e){t+=e,e.trailing&&(t+=e.trailing)}),t}function i(e){e.whiteList({custom:function(t,r,n){if("code"===t&&"class"===r){var i=/^lang\-(.+)$/.exec(n);if(i)return-1!==e.getOptions().acceptableCodeClasses.indexOf(i[1])}}}),e.replaceBlock({start:/^`{3}([^\n\[\]]+)?\n?([\s\S]*)?/gm,stop:/^```$/gm,withoutLeading:/\[quote/gm,emitter:function(t,r){var i=e.getOptions(),a=i.defaultCodeLang,o=i.acceptableCodeClasses;return o&&r[1]&&-1!==o.indexOf(r[1])&&(a=r[1]),-1!==s.indexOf(r[1])?["p",["pre",["code",{"class":"lang-nohighlight"},n(t)]]]:["p",["pre",["code",{"class":"lang-"+a},n(t)]]]}}),e.replaceBlock({start:/(<pre[^\>]*\>)([\s\S]*)/gim,stop:/<\/pre>/gim,rawContents:!0,skipIfTradtionalLinebreaks:!0,emitter:function(e){return["p",["pre",n(e)]]}}),e.onParseNode(function(e){var t=e.node,r=e.path;if("code"===t[0]){var n=r&&r[r.length-1]&&r[r.length-1][0]&&"pre"===r[r.length-1][0]?/ +$/g:/^ +| +$/g,i=t[t.length-1];t[t.length-1]=a(i.replace(n,""))}})}r.setup=i;var a=e.escape,o=t.registerOption,s=["text","pre","plain"];o(function(e,t){t.features.code=!0,t.defaultCodeLang=e.default_code_lang,t.acceptableCodeClasses=(e.highlighted_languages||"").split("|").concat(["auto","nohighlight"])})}),define("pretty-text/engines/discourse-markdown/emoji",["pretty-text/pretty-text","pretty-text/emoji","pretty-text/emoji/data","exports"],function(e,t,r,n){"use strict";function i(e){p=e,e&&(d=new RegExp(Object.keys(e).join("|"),"g"))}function a(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/gi,"\\$&")}function o(e){if(e&&e.length){var t=e[e.length-1];if(t&&t.charAt){var r=t.charAt(t.length-1);if(!/\W/.test(r))return!1}}return!0}function s(e){function t(t){t=t.toLowerCase();var r=e.getOptions(),n=l(t,r);if(n){var i=":"+t+":",a=c(t,r)?"emoji emoji-custom":"emoji";return["img",{href:n,title:i,"class":a,alt:i}]}}e.whiteList("img.emoji");var r={};Object.keys(f).forEach(function(n){":"===n[0]?r[n]=f[n]:!function(){var r=f[n];e.inlineReplace(n,function(e,n,i){return o(i)?t(r):e})}()});var n=new RegExp(Object.keys(r).map(function(e){return"("+a(e)+")"}).join("|"));e.registerInline(":",function(e,i,a){var s=e.indexOf(":",1),u=e.search(/\s/);if(o(a)){if(!(-1===s||-1!==u&&s>u)){var l=e.slice(1,s),c=t(l);return c?[s+1,c]:void 0}n.lastIndex=0;var f=n.exec(e);if(f&&f[0]&&0===e.indexOf(f[0])){var p=e.charAt(f[0].length);if(p&&!/\s/.test(p))return;var d=t(r[f[0]]);if(d)return[f[0].length,d]}}}),e.addPreProcessor(function(e){if(p){d.lastIndex=0;for(var t=void 0;null!==(t=d.exec(e));){var r=":"+p[t[0]]+":",n=e.charAt(t.index-1);/\B/.test(n)||(r="​"+r),e=e.replace(t[0],r)}}return e})}n.setUnicodeReplacements=i,n.setup=s;var u=e.registerOption,l=t.buildEmojiUrl,c=t.isCustomEmoji,f=r.translations,p=void 0,d=void 0;u(function(e,t,r){t.features.emoji=!!e.enable_emoji,t.emojiSet=e.emoji_set||"",t.customEmoji=r.customEmoji})}),define("pretty-text/engines/discourse-markdown/html",["exports"],function(e){"use strict";function t(e,t,r,n){var i="</"+e+">",a=n?t.indexOf(i):t.lastIndexOf(i);if(-1!==a){a+=i.length;var o=t.substr(a).replace(/^\s+/,"");return o.length&&r.unshift(o),[t.substr(0,a)]}}function r(e){e.registerBlock("html",function(e,r){var i=void 0,a=void 0;if((a=e.search(/<blockquote/)>=0)&&-1===e.substring(0,a).search(/\s/)&&(i=t("blockquote",e,r,!0)))return this.processInline(i[0]);var o=/^\s*<\/?([^>]+)\>/.exec(e);if(o&&o[1]){var s=o[1].split(/\s/);if(s&&s[0]&&-1!==n.indexOf(s[0])){if(i=t(s[0],e,r)){if(1===i.length&&i[0]===e)return;return i}return[e.toString()]}}})}e.setup=r;var n=["address","article","aside","audio","blockquote","canvas","dd","details","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","iframe","noscript","ol","output","p","pre","section","table","tfoot","ul","video","summary"]}),define("pretty-text/engines/discourse-markdown/mentions",["exports"],function(e){"use strict";function t(e){e.onParseNode(function(e){var t=e.node,r=e.path;if(t[1]&&"mention"===t[1]["class"]){var n=r[r.length-1];if(n&&"a"===n[0]){var i=t[2];t.length=0,t[0]="__RAW",t[1]=i}}}),e.inlineRegexp({start:"@",matcher:/^@(\w[\w.-]{0,59})\b/i,wordBoundary:!0,emitter:function(t){var r=t[0].trim(),n=t[1],i=e.getOptions(),a=i.mentionLookup,o=a&&a(n);return"user"===o?["a",{"class":"mention",href:i.getURL("/users/")+n.toLowerCase()},r]:"group"===o?["a",{"class":"mention-group",href:i.getURL("/groups/")+n},r]:["span",{"class":"mention"},r]}})}e.setup=t}),define("pretty-text/engines/discourse-markdown/newline",["exports"],function(e){"use strict";function t(e){e.postProcessText(function(e,t){var r=t.options,n=t.insideCounts;if(!(r.traditionalMarkdownLinebreaks||n.pre>0)){if("\n"===e)return[["br"]];var i=e.split(/\n+/);if(i.length){for(var a=[],o=0;o<i.length;o++)i[o].length>0&&a.push(i[o]),o!==i.length-1&&a.push(["br"]);return a}}})}e.setup=t}),define("pretty-text/engines/discourse-markdown/onebox",["pretty-text/oneboxer","exports"],function(e,t){"use strict";function r(e,t){if(!t)return!1;var r=t.slice(1);if(!r||r.length<1)return!1;var n=r.indexOf(e);if(-1===n)return!1;if(n>0){var i=r[n-1];if("br"!==i[0])return!1}if(n<r.length){var a=r[n+1];if(a&&"br"!==a[0]&&("string"!=typeof a||""!==a.trim()))return!1}return!0}function n(e){e.onParseNode(function(e){var t=e.node,n=e.path;if("a"===t[0]){var a=n[n.length-1];if(t[1]["data-bbcode"])return void delete t[1]["data-bbcode"];if("mention"!==t[1]["class"]){for(var o=0;o<n.length;o++)if("li"===n[o][0])return;var s=t[t.length-1];if(s===t[1].href&&r(t,a)){t[1]["class"]="onebox",t[1].target="_blank";var u=i(t[1].href);u&&(t[0]="__RAW",t[1]=u,t.length=2)}}}})}t.setup=n;var i=e.lookupCache}),define("pretty-text/engines/discourse-markdown/quote",["pretty-text/engines/discourse-markdown/bbcode","pretty-text/pretty-text","pretty-text/emoji","exports"],function(e,t,r,n){"use strict";function i(e){a(e,"quote",{noWrap:!0,singlePara:!0},function(t,r,n){var i={"class":"quote"},a=null,o=e.getOptions();if(r){var u=r.split(/\,\s*/);a=u[0],u.forEach(function(t,r){if(r>0){var n=t.split(":");if(n[0]&&n[1]){var a=e.escape(n[0]);a===n[0]&&(i["data-"+n[0]]=e.escape(n[1].trim()))}}})}var l=void 0,c=parseInt(i["data-post"],10),f=parseInt(i["data-topic"],10);if(n.lookupAvatarByPostNumber?l=n.lookupAvatarByPostNumber(c,f):n.lookupAvatar&&(l=n.lookupAvatar(a)),!a)return["p",["aside",i,["blockquote"].concat(t)]];var p=["div",{"class":"title"},["div",{"class":"quote-controls"}],l?["__RAW",l]:"",a?a+":":""];if(n.topicId&&c&&n.getTopicInfo&&f!==n.topicId){var d=n.getTopicInfo(f);if(d){var h=d.href;c>0&&(h+="/"+c),p.pop();var g=d.title;o.enableEmoji&&(g=s(d.title,{getURL:o.getURL,emojiSet:o.emojiSet})),p.push(["a",{href:h},g])}}return["aside",i,p,["blockquote"].concat(t)]})}n.setup=i;var a=e.register,o=t.registerOption,s=r.performEmojiUnescape;o(function(e,t){t.enableEmoji=e.enable_emoji,t.emojiSet=e.emoji_set})}),define("pretty-text/engines/discourse-markdown/table",["pretty-text/pretty-text","exports"],function(e,t){"use strict";function r(e){var t="";return e.forEach(function(e){t+=e,e.trailing&&(t+=e.trailing)}),t.replace(/[\n\r]/g," ")}function n(e){e.whiteList(["table","table.md-table","tbody","thead","tr","th","td"]),e.replaceBlock({start:/(<table[^>]*>)([\S\s]*)/gim,stop:/<\/table>/gim,rawContents:!0,priority:1,emitter:function(e){return["table",{"class":"md-table"},r.apply(this,[e])]}})}t.setup=n;var i=e.registerOption;i(function(e,t){t.features.table=!!e.allow_html_tables})}),function e(t,r,n){function i(o,s){if(!r[o]){if(!t[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[o]={exports:{}};t[o][0].call(c.exports,function(e){var r=t[o][1][e];return i(r?r:e)},c,c.exports,e,t,r,n)}return r[o].exports}for(var a="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(e,t,r){function n(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","loop","preload","src","height","width"]}}function i(e,t,r){}function a(e,t,r){}function o(e,t,r){}function s(e,t,r){}function u(e){return e.replace(j,"&lt;").replace(A,"&gt;")}function l(e,t,r,n){if(n=n||x,r=g(r),"href"===t||"src"===t){if(r=k.trim(r),"#"===r)return"#";if("http://"!==r.substr(0,7)&&"https://"!==r.substr(0,8)&&"mailto:"!==r.substr(0,7)&&"#"!==r[0]&&"/"!==r[0])return""}else if("background"===t){if(L.lastIndex=0,L.test(r))return""}else if("style"===t){if(C.lastIndex=0,C.test(r))return"";if(B.lastIndex=0,B.test(r)&&(L.lastIndex=0,L.test(r)))return"";r=n.process(r)}return r=_(r)}function c(e){return e.replace(I,"&quot;")}function f(e){return e.replace(O,'"')}function p(e){return e.replace(E,function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))})}function d(e){return e.replace(T,":").replace(S," ")}function h(e){for(var t="",r=0,n=e.length;n>r;r++)t+=e.charCodeAt(r)<32?" ":e.charAt(r);return k.trim(t)}function g(e){return e=f(e),e=p(e),e=d(e),e=h(e)}function _(e){return e=c(e),e=u(e)}function m(){return""}function b(e,t){function r(t){return n?!0:-1!==k.indexOf(e,t)}"function"!=typeof t&&(t=function(){});var n=!Array.isArray(e),i=[],a=!1;return{onIgnoreTag:function(e,n,o){if(r(e)){if(o.isClosing){var s="[/removed]",u=o.position+s.length;return i.push([a!==!1?a:o.position,u]),a=!1,s}return a||(a=o.position),"[removed]"}return t(e,n,o)},remove:function(e){var t="",r=0;return k.forEach(i,function(n){t+=e.slice(r,n[0]),r=n[1]}),t+=e.slice(r)}}}function v(e){return e.replace(R,"")}function w(e){var t=e.split("");return t=t.filter(function(e){var t=e.charCodeAt(0);return 127===t?!1:31>=t?10===t||13===t:!0}),t.join("")}var y=e("cssfilter").FilterCSS,k=e("./util"),x=new y,j=/</g,A=/>/g,I=/"/g,O=/&quot;/g,E=/&#([a-zA-Z0-9]*);?/gim,T=/&colon;?/gim,S=/&newline;?/gim,L=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,C=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,B=/u\s*r\s*l\s*\(.*/gi,R=/<!--[\s\S]*?-->/g;r.whiteList=n(),r.getDefaultWhiteList=n,r.onTag=i,r.onIgnoreTag=a,r.onTagAttr=o,r.onIgnoreTagAttr=s,r.safeAttrValue=l,r.escapeHtml=u,r.escapeQuote=c,r.unescapeQuote=f,r.escapeHtmlEntities=p,r.escapeDangerHtml5Entities=d,r.clearNonPrintableCharacter=h,r.friendlyAttrValue=g,r.escapeAttrValue=_,r.onIgnoreTagStripAll=m,r.StripTagBody=b,r.stripCommentTag=v,r.stripBlankChar=w,r.cssFilter=x},{"./util":4,cssfilter:8}],2:[function(e,t,r){function n(e,t){var r=new o(t);return r.process(e)}var i=e("./default"),a=e("./parser"),o=e("./xss");r=t.exports=n,r.FilterXSS=o;for(var s in i)r[s]=i[s];for(var s in a)r[s]=a[s];"undefined"!=typeof window&&(window.filterXSS=t.exports)},{"./default":1,"./parser":3,"./xss":5}],3:[function(e,t,r){function n(e){var t=e.indexOf(" ");if(-1===t)var r=e.slice(1,-1);else var r=e.slice(1,t+1);return r=f.trim(r).toLowerCase(),"/"===r.slice(0,1)&&(r=r.slice(1)),"/"===r.slice(-1)&&(r=r.slice(0,-1)),r}function i(e){return"</"===e.slice(0,2)}function a(e,t,r){"user strict";var a="",o=0,s=!1,u=!1,l=0,c=e.length,f="",p="";for(l=0;c>l;l++){var d=e.charAt(l);if(s===!1){if("<"===d){s=l;continue}}else if(u===!1){if("<"===d){a+=r(e.slice(o,l)),s=l,o=l;continue}if(">"===d){a+=r(e.slice(o,s)),f=e.slice(s,l+1),p=n(f),a+=t(s,a.length,p,f,i(f)),o=l+1,s=!1;continue}if(('"'===d||"'"===d)&&"="===e.charAt(l-1)){u=d;continue}}else if(d===u){u=!1;continue}}return o<e.length&&(a+=r(e.substr(o))),a}function o(e,t){"user strict";function r(e,r){if(e=f.trim(e),e=e.replace(p,"").toLowerCase(),!(e.length<1)){var n=t(e,r||"");n&&i.push(n)}}for(var n=0,i=[],a=!1,o=e.length,l=0;o>l;l++){var d,h,g=e.charAt(l);if(a!==!1||"="!==g)if(a===!1||l!==n||'"'!==g&&"'"!==g||"="!==e.charAt(l-1))if(" "!==g);else{if(a===!1){if(h=s(e,l),-1===h){d=f.trim(e.slice(n,l)),r(d),a=!1,n=l+1;continue}l=h-1;continue}if(h=u(e,l-1),-1===h){d=f.trim(e.slice(n,l)),d=c(d),r(a,d),a=!1,n=l+1;continue}}else{if(h=e.indexOf(g,l+1),-1===h)break;d=f.trim(e.slice(n+1,h)),r(a,d),a=!1,l=h,n=l+1}else a=e.slice(n,l),n=l+1}return n<e.length&&(a===!1?r(e.slice(n)):r(a,c(f.trim(e.slice(n))))),f.trim(i.join(" "))}function s(e,t){for(;t<e.length;t++){var r=e[t];if(" "!==r)return"="===r?t:-1}}function u(e,t){for(;t>0;t--){var r=e[t];if(" "!==r)return"="===r?t:-1}}function l(e){return'"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]}function c(e){return l(e)?e.substr(1,e.length-2):e}var f=e("./util"),p=/[^a-zA-Z0-9_:\.\-]/gim;r.parseTag=a,r.parseAttr=o},{"./util":4}],4:[function(e,t,r){t.exports={indexOf:function(e,t){var r,n;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,n=e.length;n>r;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var n,i;if(Array.prototype.forEach)return e.forEach(t,r);for(n=0,i=e.length;i>n;n++)t.call(r,e[n],n,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")}}},{}],5:[function(e,t,r){function n(e){return void 0===e||null===e}function i(e){var t=e.indexOf(" ");if(-1===t)return{html:"",closing:"/"===e[e.length-2]};e=f.trim(e.slice(t+1,-1));var r="/"===e[e.length-1];return r&&(e=f.trim(e.slice(0,-1))),{html:e,closing:r}}function a(e){e=e||{},e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=s.onIgnoreTagStripAll),e.whiteList=e.whiteList||s.whiteList,e.onTag=e.onTag||s.onTag,e.onTagAttr=e.onTagAttr||s.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||s.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||s.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||s.safeAttrValue,e.escapeHtml=e.escapeHtml||s.escapeHtml,e.css=e.css||{},this.options=e,this.cssFilter=new o(e.css)}var o=e("cssfilter").FilterCSS,s=e("./default"),u=e("./parser"),l=u.parseTag,c=u.parseAttr,f=e("./util");a.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,r=t.options,a=r.whiteList,o=r.onTag,u=r.onIgnoreTag,p=r.onTagAttr,d=r.onIgnoreTagAttr,h=r.safeAttrValue,g=r.escapeHtml,_=t.cssFilter;r.stripBlankChar&&(e=s.stripBlankChar(e)),r.allowCommentTag||(e=s.stripCommentTag(e));var m=!1;if(r.stripIgnoreTagBody){var m=s.StripTagBody(r.stripIgnoreTagBody,u);u=m.onIgnoreTag}var b=l(e,function(e,t,r,s,l){var m={sourcePosition:e,position:t,isClosing:l,isWhite:r in a},b=o(r,s,m);if(!n(b))return b;if(m.isWhite){if(m.isClosing)return"</"+r+">";var v=i(s),w=a[r],y=c(v.html,function(e,t){var i=-1!==f.indexOf(w,e),a=p(r,e,t,i);if(!n(a))return a;if(i)return t=h(r,e,t,_),t?e+'="'+t+'"':e;var a=d(r,e,t,i);return n(a)?void 0:a}),s="<"+r;return y&&(s+=" "+y),v.closing&&(s+=" /"),s+=">"}var b=u(r,s,m);return n(b)?g(s):b},g);return m&&(b=m.remove(b)),b},t.exports=a},{"./default":1,"./parser":3,"./util":4,cssfilter:8}],6:[function(e,t,r){function n(e){return void 0===e||null===e}function i(e){e=e||{},e.whiteList=e.whiteList||a.whiteList,e.onAttr=e.onAttr||a.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||a.onIgnoreAttr,this.options=e}var a=e("./default"),o=e("./parser");e("./util");i.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,r=t.options,i=r.whiteList,a=r.onAttr,s=r.onIgnoreAttr,u=o(e,function(e,t,r,o,u){var l=i[r],c=!1;l===!0?c=l:"function"==typeof l?c=l(o):l instanceof RegExp&&(c=l.test(o)),c!==!0&&(c=!1);var f={position:t,sourcePosition:e,source:u,isWhite:c};if(c){var p=a(r,o,f);return n(p)?r+":"+o:p}var p=s(r,o,f);return n(p)?void 0:p});return u},t.exports=i},{"./default":7,"./parser":9,"./util":10}],7:[function(e,t,r){function n(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e["float"]=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function i(e,t,r){}function a(e,t,r){}r.whiteList=n(),r.getDefaultWhiteList=n,r.onAttr=i,r.onIgnoreAttr=a},{}],8:[function(e,t,r){function n(e,t){var r=new a(t);return r.process(e)}var i=e("./default"),a=e("./css");r=t.exports=n,r.FilterCSS=a;for(var o in i)r[o]=i[o];"undefined"!=typeof window&&(window.filterCSS=t.exports)},{"./css":6,"./default":7}],9:[function(e,t,r){function n(e,t){function r(){if(!a){var r=i.trim(e.slice(o,s)),n=r.indexOf(":");if(-1!==n){var l=i.trim(r.slice(0,n)),c=i.trim(r.slice(n+1));if(l){var f=t(o,u.length,l,c,r);f&&(u+=f+"; ")}}}o=s+1}e=i.trimRight(e),";"!==e[e.length-1]&&(e+=";");for(var n=e.length,a=!1,o=0,s=0,u="";n>s;s++){var l=e[s];if("/"===l&&"*"===e[s+1]){var c=e.indexOf("*/",s+2);if(-1===c)break;s=c+1,o=s+1,a=!1}else"("===l?a=!0:")"===l?a=!1:";"===l?a||r():"\n"===l&&r()}return i.trim(u)}var i=e("./util");t.exports=n},{"./util":10}],10:[function(e,t,r){t.exports={indexOf:function(e,t){var r,n;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,n=e.length;n>r;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){
var n,i;if(Array.prototype.forEach)return e.forEach(t,r);for(n=0,i=e.length;i>n;n++)t.call(r,e[n],n,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}}},{}]},{},[2]),function(e){function t(){return"Markdown.mk_block( "+uneval(this.toString())+", "+uneval(this.trailing)+", "+uneval(this.lineNumber)+" )"}function r(){var e=require("util");return"Markdown.mk_block( "+e.inspect(this.toString())+", "+e.inspect(this.trailing)+", "+e.inspect(this.lineNumber)+" )"}function n(e){return e.split("\n").length-1}function i(e){return e&&e.length>0?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"):""}function a(e){if("string"==typeof e)return e;if("__RAW"===e[0])return e[1];var t=e.shift(),r={},n=[];for(!e.length||"object"!=typeof e[0]||e[0]instanceof Array||(r=e.shift());e.length;)n.push(a(e.shift()));var o="";"undefined"!=typeof r.src&&(o+=' src="'+i(r.src)+'"',delete r.src);for(var s in r){var u=i(r[s]);u&&u.length&&(o+=" "+s+'="'+u+'"')}return"img"===t||"br"===t||"hr"===t?"<"+t+o+"/>":"<"+t+o+">"+n.join("")+"</"+t+">"}function o(e,t,r){var n;r=r||{};var i=e.slice(0);"function"==typeof r.preprocessTreeNode&&(i=r.preprocessTreeNode(i,t));var a=h(i);if(a){i[1]={};for(n in a)i[1][n]=a[n];a=i[1]}if("string"==typeof i)return i;switch(i[0]){case"header":i[0]="h"+i[1].level,delete i[1].level;break;case"bulletlist":i[0]="ul";break;case"numberlist":i[0]="ol";break;case"listitem":i[0]="li";break;case"para":i[0]="p";break;case"markdown":i[0]="html",a&&delete a.references;break;case"code_block":i[0]="pre",n=a?2:1;var s=["code"];s.push.apply(s,i.splice(n,i.length-n)),i[n]=s;break;case"inlinecode":i[0]="code";break;case"img":i[1].src=i[1].href,delete i[1].href;break;case"linebreak":i[0]="br";break;case"link":i[0]="a";break;case"link_ref":i[0]="a";var u=t[a.ref];if(!u)return a.original;delete a.ref,a.href=u.href,u.title&&(a.title=u.title),delete a.original;break;case"img_ref":i[0]="img";var u=t[a.ref];if(!u)return a.original;delete a.ref,a.src=u.href,u.title&&(a.title=u.title),delete a.original}if(n=1,a){for(var l in i[1]){n=2;break}1===n&&i.splice(n,1)}for(;n<i.length;++n)i[n]=o(i[n],t,r);return i}function s(e){for(var t=h(e)?2:1;t<e.length;)"string"==typeof e[t]?t+1<e.length&&"string"==typeof e[t+1]?e[t]+=e.splice(t+1,1)[0]:++t:(s(e[t]),++t)}function u(){h(this.tree)||this.tree.splice(1,0,{});var e=h(this.tree);return void 0===e.references&&(e.references={}),e}function l(e,t){t[2]&&"<"===t[2][0]&&">"===t[2][t[2].length-1]&&(t[2]=t[2].substring(1,t[2].length-1));var r=e.references[t[1].toLowerCase()]={href:t[2]};void 0!==t[4]?r.title=t[4]:void 0!==t[5]&&(r.title=t[5])}var c={};c.mk_block=function(e,n,i){1===arguments.length&&(n="\n\n");var a=new String(e);return a.trailing=n,a.inspect=r,a.toSource=t,void 0!==i&&(a.lineNumber=i),a};var f=c.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};Array.prototype.forEach?c.forEach=function(e,t,r){return e.forEach(t,r)}:c.forEach=function(e,t,r){for(var n=0;n<e.length;n++)t.call(r||e,e[n],n,e)},c.isEmpty=function(e){for(var t in e)if(hasOwnProperty.call(e,t))return!1;return!0},c.extract_attr=function(e){return f(e)&&e.length>1&&"object"==typeof e[1]&&!f(e[1])?e[1]:void 0};var p=function(e){switch(typeof e){case"undefined":this.dialect=p.dialects.Gruber;break;case"object":this.dialect=e;break;default:if(!(e in p.dialects))throw new Error("Unknown Markdown dialect '"+String(e)+"'");this.dialect=p.dialects[e]}this.em_state=[],this.strong_state=[],this.debug_indent=""};p.dialects={};var d=p.mk_block=c.mk_block,f=c.isArray;p.parse=function(e,t){var r=new p(t);return r.toTree(e)},p.prototype.split_blocks=function(e){e=e.replace(/(\r\n|\n|\r)/g,"\n");var t,r=/([\s\S]+?)($|\n#|\n(?:\s*\n|$)+)/g,i=[],a=1;for(null!==(t=/^(\s*\n)/.exec(e))&&(a+=n(t[0]),r.lastIndex=t[0].length);null!==(t=r.exec(e));)"\n#"===t[2]&&(t[2]="\n",r.lastIndex--),i.push(d(t[1],t[2],a)),a+=n(t[0]);return i},p.prototype.processBlock=function(e,t){var r=this.dialect.block,n=r.__order__;if("__call__"in r)return r.__call__.call(this,e,t);for(var i=0;i<n.length;i++){var a=r[n[i]].call(this,e,t);if(a)return(!f(a)||a.length>0&&!f(a[0])&&"string"!=typeof a[0])&&this.debug(n[i],"didn't return a proper array"),a}return[]},p.prototype.processInline=function(e){return this.dialect.inline.__call__.call(this,String(e))},p.prototype.toTree=function(e,t){var r=e instanceof Array?e:this.split_blocks(e),n=this.tree;try{for(this.tree=t||this.tree||["markdown"];r.length;){var i=this.processBlock(r.shift(),r);i.length&&this.tree.push.apply(this.tree,i)}return this.tree}finally{t&&(this.tree=n)}},p.prototype.debug=function(){var e=Array.prototype.slice.call(arguments);e.unshift(this.debug_indent),"undefined"!=typeof print&&print.apply(print,e),"undefined"!=typeof console&&"undefined"!=typeof console.log&&console.log.apply(null,e)},p.prototype.loop_re_over_block=function(e,t,r){for(var n,i=t.valueOf();i.length&&null!==(n=e.exec(i));)i=i.substr(n[0].length),r.call(this,n);return i},p.buildBlockOrder=function(e){var t=[[]];for(var r in e)if("__order__"!==r&&"__call__"!==r){var n=e[r].priority||0;t[n]=t[n]||[],t[n].push(r)}var i=[];for(r=t.length-1;r>=0;r--)if(t[r])for(var a=0;a<t[r].length;a++)i.push(t[r][a]);e.__order__=i},p.buildInlinePatterns=function(e){var t=[];for(var r in e)if(!r.match(/^__.*__$/)){var n=r.replace(/([\\.*+?^$|()\[\]{}])/g,"\\$1").replace(/\n/,"\\n");t.push(1===r.length?n:"(?:"+n+")")}t=t.join("|"),e.__patterns__=t;var i=e.__call__;e.__call__=function(e,r){return void 0!==r?i.call(this,e,r):i.call(this,e,t)}};var h=c.extract_attr;p.renderJsonML=function(e,t){t=t||{},t.root=t.root||!1;var r=[];if(t.root)r.push(a(e));else for(e.shift(),!e.length||"object"!=typeof e[0]||e[0]instanceof Array||e.shift();e.length;)r.push(a(e.shift()));return r.join("\n\n")},p.toHTMLTree=function(e,t,r){"string"==typeof e&&(e=this.parse(e,t));var n=h(e),i={};n&&n.references&&(i=n.references);var a=o(e,i,r);return s(a),a},p.toHTML=function(e,t,r){var n=this.toHTMLTree(e,t,r);return this.renderJsonML(n)};var g={};g.inline_until_char=function(e,t){for(var r=0,n=[],i=this.dialect.inline.__patterns__.replace("|_|","|");;){if(e.charAt(r)===t)return r++,[r,n];if(r>=e.length)return[r,null,n];var a=this.dialect.inline.__oneElement__.call(this,e.substr(r),i,[e.substr(0,r)]);r+=a[0],n.push.apply(n,a.slice(1))}},g.subclassDialect=function(e){function t(){}function r(){}return t.prototype=e.block,r.prototype=e.inline,{block:new t,inline:new r}};var _=c.forEach,h=c.extract_attr,d=c.mk_block,b=c.isEmpty,v=g.inline_until_char,w=/(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?/i.source,y={block:{atxHeader:function(e,t){var r=e.match(/^(#{1,6})\s*(.*?)\s*#*\s*(?:\n|$)/);if(r){var n=["header",{level:r[1].length}];return Array.prototype.push.apply(n,this.processInline(r[2])),r[0].length<e.length&&t.unshift(d(e.substr(r[0].length),e.trailing,e.lineNumber+2)),[n]}},setextHeader:function(e,t){var r=e.match(/^(.*)\n([-=])\2\2+(?:\n|$)/);if(r){var n="="===r[2]?1:2,i=["header",{level:n}].concat(this.processInline(r[1]));return r[0].length<e.length&&t.unshift(d(e.substr(r[0].length),e.trailing,e.lineNumber+2)),[i]}},code:function(e,t){var r=[],n=/^(?: {0,3}\t| {4})(.*)\n?/;if(e.match(n)){e:for(;;){var i=this.loop_re_over_block(n,e.valueOf(),function(e){r.push(e[1])});if(i.length){t.unshift(d(i,e.trailing));break e}if(!t.length)break e;if(!t[0].match(n))break e;r.push(e.trailing.replace(/[^\n]/g,"").substring(2)),e=t.shift()}return[["code_block",r.join("\n")]]}},horizRule:function(e,t){var r=e.match(/^(?:([\s\S]*?)\n)?[ \t]*([-_*])(?:[ \t]*\2){2,}[ \t]*(?:\n([\s\S]*))?$/);if(r){var n=[["hr"]];if(r[1]){var i=d(r[1],"",e.lineNumber);n.unshift.apply(n,this.toTree(i,[]))}return r[3]&&t.unshift(d(r[3],e.trailing,e.lineNumber+1)),n}},lists:function(){function e(e){return new RegExp("(?:^("+u+"{0,"+e+"} {0,3})("+a+")\\s+)|(^"+u+"{0,"+(e-1)+"}[ ]{0,4})")}function t(e){return e.replace(/ {0,3}\t/g,"    ")}function r(e,t,r,n){if(t)return void e.push(["para"].concat(r));var i=e[e.length-1]instanceof Array&&"para"===e[e.length-1][0]?e[e.length-1]:e;n&&e.length>1&&r.unshift(n);for(var a=0;a<r.length;a++){var o=r[a],s="string"==typeof o;s&&i.length>1&&"string"==typeof i[i.length-1]?i[i.length-1]+=o:i.push(o)}}function n(e,t){for(var r=new RegExp("^("+u+"{"+e+"}.*?\\n?)*$"),n=new RegExp("^"+u+"{"+e+"}","gm"),i=[];t.length>0&&(test=t[0].replace(/^ {8,}/,"        "),r.exec(test));){var a=t.shift(),o=a.replace(n,"");i.push(d(o,a.trailing,a.lineNumber))}return i}function i(e,t,r){var n=e.list,i=n[n.length-1];if(!(i[1]instanceof Array&&"para"===i[1][0]))if(t+1===r.length)i.push(["para"].concat(i.splice(1,i.length-1)));else{var a=i.pop();i.push(["para"].concat(i.splice(1,i.length-1)),a)}}var a="[*+-]|\\d+\\.",o=/[*+-]/,s=new RegExp("^( {0,3})("+a+")[ 	]+"),u="(?: {0,3}\\t| {4})";return function(a,u){function l(e){var t=o.exec(e[2])?["bulletlist"]:["numberlist"];return d.push({list:t,indent:e[1]}),t}var c=a.match(s);if(c){for(var f,p,d=[],h=l(c),g=!1,m=[d[0].list];;){for(var b=a.split(/(?=\n)/),v="",w="",y=0;y<b.length;y++){w="";var k=b[y].replace(/^\n/,function(e){return w=e,""}),x=e(d.length);if(c=k.match(x),void 0!==c[1]){v.length&&(r(f,g,this.processInline(v),w),g=!1,v=""),c[1]=t(c[1]);var j=Math.floor(c[1].length/4)+1;if(j>d.length)h=l(c),f.push(h),f=h[1]=["listitem"];else{var A=!1;for(p=0;p<d.length;p++)if(d[p].indent===c[1]){h=d[p].list,d.splice(p+1,d.length-(p+1)),A=!0;break}A||(j++,j<=d.length?(d.splice(j,d.length-j),h=d[j-1].list):(h=l(c),f.push(h))),f=["listitem"],h.push(f)}w=""}k.length>c[0].length&&(v+=w+k.substr(c[0].length))}if(v.length){var I=this.processBlock(v,[]),O=I[0];O&&(O.shift(),I.splice.apply(I,[0,1].concat(O)),r(f,g,I,w),"\n"===f[f.length-1]&&f.pop(),g=!1,v="")}var E=n(d.length,u);E.length>0&&(_(d,i,this),f.push.apply(f,this.toTree(E,[])));var T=u[0]&&u[0].valueOf()||"";if(!T.match(s))break;a=u.shift();var S=this.dialect.block.horizRule.call(this,a,u);if(S){m.push.apply(m,S);break}d[d.length-1].indent===a.match(/^\s*/)[0]&&_(d,i,this),g=!0}return m}}}(),blockquote:function(e,t){var r=/(^|\n) +(\>[\s\S]*)/.exec(e);if(r&&r[2]&&r[2].length){var n=e.replace(/(^|\n) +\>/,"$1>");return t.unshift(n),[]}if(e.match(/^>/m)){var i=[];if(">"!==e[0]){for(var a=e.split(/\n/),o=[],s=e.lineNumber;a.length&&">"!==a[0][0];)o.push(a.shift()),s++;var u=d(o.join("\n"),"\n",e.lineNumber);i.push.apply(i,this.processBlock(u,[])),e=d(a.join("\n"),e.trailing,s)}for(;t.length&&">"===t[0][0];){var l=t.shift();e=d(e+e.trailing+l,l.trailing,e.lineNumber)}var c=e.replace(/^> ?/gm,""),f=(this.tree,this.toTree(c,["blockquote"])),p=h(f);return p&&p.references&&(delete p.references,b(p)&&f.splice(1,1)),i.push(f),i}},referenceDefn:function(e,t){var r=/^\s*\[([^\[\]]+)\]:\s*(\S+)(?:\s+(?:(['"])(.*)\3|\((.*?)\)))?\n?/;if(e.match(r)){var n=u.call(this),i=this.loop_re_over_block(r,e,function(e){l(n,e)});return i.length&&t.unshift(d(i,e.trailing)),[]}},para:function(e){return[["para"].concat(this.processInline(e))]}},inline:{__oneElement__:function(e,t,r){t=t||this.dialect.inline.__patterns__;var n=new RegExp(t.source||t),i=e.search(n);if(-1===i)return[e.length,e];if(0!==i)return[i,e.substring(0,i)];var a,o=new RegExp("^("+(t.source||t)+")"),s=o.exec(e);if(s[1]in this.dialect.inline&&(a=this.dialect.inline[s[1]].call(this,e.substr(s.index),s,r||[]),!a)){var u=this.dialect.inline[s[1][0]];u&&(a=u.call(this,e.substr(s.index),s,r||[]))}return a=a||[s[1].length,s[1]]},__call__:function(e,t){function r(e){"string"==typeof e&&"string"==typeof i[i.length-1]?i[i.length-1]+=e:i.push(e)}for(var n,i=[];e.length>0;)n=this.dialect.inline.__oneElement__.call(this,e,t,i),e=e.substr(n.shift()),_(n,r);return i},"]":function(){},"}":function(){},__escape__:/^\\[\\`\*_{}<>\[\]()#\+.!\-]/,"\\":function(e){return this.dialect.inline.__escape__.exec(e)?[2,e.charAt(1)]:[1,"\\"]},"![":function(e){if(!(e.indexOf("(")>=0&&-1===e.indexOf(")"))){var t=/^!\[(.*?)\][ \t]*\([ \t]*([^")]*?)(?:[ \t]+(["'])(.*?)\3)?[ \t]*\)/;if(m=e.match(new RegExp("^!\\[(.*?)][ \\t]*\\(("+w+")\\)([ \\t])*([\"'].*[\"'])?"))||e.match(t),m&&-1!==m[2].indexOf(")]")&&(m=e.match(t)),m){m[2]&&"<"===m[2][0]&&">"===m[2][m[2].length-1]&&(m[2]=m[2].substring(1,m[2].length-1)),m[2]=this.dialect.inline.__call__.call(this,m[2],/\\/)[0];var r={alt:m[1],href:m[2]||""};return void 0!==m[4]&&(r.title=m[4]),[m[0].length,["img",r]]}return m=e.match(/^!\[(.*?)\][ \t]*\[(.*?)\]/),m?[m[0].length,["img_ref",{alt:m[1],ref:m[2].toLowerCase(),original:m[0]}]]:[2,"!["]}},"[":function k(e){for(var t=1,r=0;r<e.length;r++){var n=e.charAt(r);if("["===n&&t++,"]"===n&&t--,t>3)return[1,"["]}var i=String(e),a=v.call(this,e.substr(1),"]");if(!a[1])return[a[0]+1,e.charAt(0)].concat(a[2]);if(1==a[0])return[2,"[]"];var k,o,s=1+a[0],c=a[1];e=e.substr(s);var f=e.match(/^\s*\([ \t]*([^"'\s]*)(?:[ \t]+(["'])(.*?)\2)?[ \t]*\)/);if(f){var p=f[1].replace(/\s+$/,"");if(s+=f[0].length,p&&"<"===p[0]&&">"===p[p.length-1]&&(p=p.substring(1,p.length-1)),!f[3])for(var d=1,h=0;h<p.length;h++)switch(p[h]){case"(":d++;break;case")":0===--d&&(s-=p.length-h,p=p.substring(0,h))}return p=this.dialect.inline.__call__.call(this,p,/\\/)[0],o={href:p||""},void 0!==f[3]&&(o.title=f[3]),k=["link",o].concat(c),[s,k]}if(0===e.indexOf("(")&&-1!==e.indexOf(")")&&(f=e.match(new RegExp("^\\(("+w+")\\)")),f&&f[1]))return s+=f[0].length,k=["link",{href:f[1]}].concat(c),[s,k];if(f=e.match(/^\s*\[(.*?)\]/),f&&(s+=f[0].length,o={ref:(f[1]||String(c)).toLowerCase(),original:i.substr(0,s)},c&&c.length>0))return k=["link_ref",o].concat(c),[s,k];if(f=i.match(/^\s*\[(.*?)\]:\s*(\S+)(?:\s+(?:(['"])(.*?)\3|\((.*?)\)))?\n?/),f&&(/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/i.test(f[2])||/(\/[\w~,;\-\.\/?%&+#=]*)/.test(f[2])))return o=u.call(this),l(o,f),[f[0].length];if(1===c.length&&"string"==typeof c[0]){var g=c[0].toLowerCase().replace(/\s+/," ");return o={ref:g,original:i.substr(0,s)},k=["link_ref",o,c[0]],[s,k]}return[1,"["]},"<":function(e){var t;return null!==(t=e.match(/^<(?:((https?|ftp|mailto):[^>]+)|(.*?@.*?\.[a-zA-Z]+))>/))?t[3]?[t[0].length,["link",{href:"mailto:"+t[3]},t[3]]]:"mailto"===t[2]?[t[0].length,["link",{href:t[1]},t[1].substr("mailto:".length)]]:[t[0].length,["link",{href:t[1]},t[1]]]:[1,"<"]},"`":function(e,t,r){if(!r||"string"!=typeof r[0]||!r[0].match(/<[^>]+$/)){var n=e.match(/(`+)(([\s\S]*?)\1)/);return n&&n[2]?[n[1].length+n[2].length,["inlinecode",n[3]]]:[1,"`"]}},"  \n":function(){return[3,["linebreak"]]}}};p.dialects.Gruber=y,p.buildBlockOrder(p.dialects.Gruber.block),p.buildInlinePatterns(p.dialects.Gruber.inline),e.Markdown=p,e.parse=p.parse,e.toHTML=p.toHTML,e.toHTMLTree=p.toHTMLTree,e.renderJsonML=p.renderJsonML,e.DialectHelpers=g}(function(){return window.BetterMarkdown={},window.BetterMarkdown}()),define("pretty-text/xss",["exports"],function(e){"use strict";e["default"]=window.filterXSS}),define("pretty-text/white-lister",["exports"],function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){return e=e||[],Array.isArray(t)||(t=[t]),e.concat(t.filter(function(t){return-1===e.indexOf(t)}))}function n(e,t){var n={};return t.custom?(s[e]=s[e]||[],void s[e].push(t.custom)):("string"==typeof t&&(t=[t]),(t||[]).forEach(function(e){var t=e.split("."),a=t.shift(),o=/\[([^\]]+)]/.exec(a);if(o){var s=i(o,2),u=s[0],l=s[1],c=a.replace(u,""),f=l.split("=");if(n[c]=n[c]||{},2===f.length){var p=i(f,2),d=p[0],h=p[1];n[c][d]=h}else n[c][l]="*"}n[a]=n[a]||{},t.length&&(n[a]["class"]=r(n[a]["class"],t))}),void(o[e]=n))}var i=function(){function e(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(u){i=!0,a=u}finally{try{!n&&s["return"]&&s["return"]()}finally{if(i)throw a}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();e.whiteListFeature=n;var o={},s={},u={},l={},c=function(){function e(r){t(this,e),r.features["default"]=!0,this._featureKeys=Object.keys(r.features).filter(function(e){return r.features[e]}),this._key=this._featureKeys.join(":"),this._features=r.features,this._options=r||{}}return a(e,[{key:"getCustom",value:function(){var e=this;return l[this._key]||!function(){var t=[];e._featureKeys.forEach(function(e){(s[e]||[]).forEach(function(e){return t.push(e)})}),l[e._key]=t}(),l[this._key]}},{key:"getWhiteList",value:function(){var e=this;return u[this._key]||!function(){var t={},n={};e._featureKeys.forEach(function(e){var i=o[e]||{};Object.keys(i).forEach(function(e){t[e]=[],n[e]=n[e]||{};var a=i[e];Object.keys(a).forEach(function(t){return n[e][t]=r(n[e][t],a[t])})})}),u[e._key]={tagList:t,attrList:n}}(),u[this._key]}},{key:"getAllowedHrefSchemes",value:function(){return this._options.allowedHrefSchemes||[]}}]),e}();e["default"]=c,n("default",["a.attachment","a.hashtag","a.mention","a.mention-group","a.onebox","a[data-bbcode]","a[name]","a[rel=nofollow]","a[target=_blank]","a[title]","abbr[title]","aside.quote","aside[data-*]","b","big","blockquote","br","code","dd","del","div","div.quote-controls","div.title","div[align]","div[dir]","dl","dt","em","h1[id]","h2[id]","h3[id]","h4[id]","h5[id]","h6[id]","hr","i","iframe","iframe[frameborder]","iframe[height]","iframe[marginheight]","iframe[marginwidth]","iframe[width]","img[alt]","img[class]","img[height]","img[title]","img[width]","ins","kbd","li","ol","p","pre","s","small","span.excerpt","span.hashtag","span.mention","strike","strong","sub","sup","ul"])}),define("pretty-text/sanitizer",["pretty-text/xss","exports"],function(e,t){"use strict";function r(e,t){return t?e+'="'+u.escapeAttrValue(t)+'"':e}function n(e){return c[e]}function i(e){return null===e?"":e?(e=""+e,p.test(e)?e.replace(f,n):e):e+""}function a(e,t){if(e=e.replace(/'/g,"%27"),/^(https?:)?\/\/[\w\.\-]+/i.test(e))return e;if(/^\/[\w\.\-]+/i.test(e))return e;if(/^#[\w\.\-]+/i.test(e))return e;if(/^mailto:[\w\.\-@]+/i.test(e))return e;if(t&&t.length>0)for(var r=0;r<t.length;r++)if(t[r].test(e))return e}function o(e,t){if(!e)return"";e=e.replace(/<([^A-Za-z\/\!]|$)/g,"&lt;$1");var n=t.getWhiteList(),i=t.getAllowedHrefSchemes(),o=null;i&&i.length>0&&(o=[new RegExp("^("+i.join("|")+")://[\\w\\.\\-]+","i")]);var s=u(e,{whiteList:n.tagList,stripIgnoreTag:!0,stripIgnoreTagBody:["script","table"],onIgnoreTagAttr:function(e,i,s){var u=n.attrList[e];if(u){var c=u[i];if(c&&(-1!==c.indexOf("*")||-1!==c.indexOf(s))||0===i.indexOf("data-")&&u["data-*"]||"a"===e&&"href"===i&&a(s,o)||"img"===e&&"src"===i&&(/^data:image.*$/i.test(s)||a(s,o))||"iframe"===e&&"src"===i&&l.some(function(e){return e.test(s)}))return r(i,s);if("iframe"===e&&"src"===i)return"-STRIP-";for(var f=t.getCustom(),p=0;p<f.length;p++){var d=f[p];if(d(e,i,s))return r(i,s)}}}});return s.replace(/\[removed\]/g,"").replace(/\<iframe[^>]+\-STRIP\-[^>]*>[^<]*<\/iframe>/g,"").replace(/&(?![#\w]+;)/g,"&amp;").replace(/&#39;/g,"'").replace(/ \/>/g,">")}function s(e){l.push(e)}t.escape=i,t.hrefAllowed=a,t.sanitize=o,t.whiteListIframe=s;var u=e["default"],l=[],c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},f=/[&<>"'`]/g,p=/[&<>"'`]/;s(/^(https?:)?\/\/www\.google\.com\/maps\/embed\?.+/i),s(/^(https?:)?\/\/www\.openstreetmap\.org\/export\/embed.html\?.+/i)}),define("pretty-text/oneboxer",["exports"],function(e){"use strict";function t(e){if(0===a.length)return void(i=null);var r=150,n=!0,u=a.shift(),l=u.url,c=u.refresh,f=u.$elem,p=u.userId;return e("/onebox",{dataType:"html",data:{url:l,refresh:c,user_id:p},cache:!0}).then(function(e){o[l]=e,f.replaceWith(e)},function(e){e&&e.jqXHR&&429===e.jqXHR.status?(r=2e3,n=!1,a.unshift({url:l,refresh:c,$elem:f,userId:p})):s[l]=!0})["finally"](function(){i=Ember.run.later(function(){return t(e)},r),n&&(f.removeClass("loading-onebox"),f.data("onebox-loaded"))})}function r(e,r,n,u,l){var c=$(e);if(!c.data("onebox-loaded")&&!c.hasClass("loading-onebox")){var f=e.href;if(!r){var p=o[f];if(p)return p;var d=s[f];if(d)return}return c.addClass("loading-onebox"),a.push({url:f,refresh:r,$elem:c,userId:u}),l?t(n):void(i=i||Ember.run.later(function(){return t(n)},150))}}function n(e){return o[e]}e.load=r,e.lookupCache=n;var i=void 0,a=[],o={},s={}});
//# sourceMappingURL=/assets/pretty-text-bundle-04ac5b2eae6ead3ce5d5994ccd1e264320fb14970bb0dd812e392773769b9e7f.js.map